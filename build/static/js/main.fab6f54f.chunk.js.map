{"version":3,"sources":["firebase/config.js","context/AuthContext.js","hooks/useAuthContext.js","pages/dashboard/Dashboard.js","hooks/useDocument.js","assets/send-icon.svg","hooks/useFirestore.js","hooks/useDates.js","components/Avatar.js","assets/x.svg","assets/smile.svg","assets/image.svg","pages/project/ProjectComments.js","pages/project/Project.js","hooks/useLogin.js","assets/btn_google_dark_normal_ios.svg","pages/login/Login.js","pages/signup/Signup.js","hooks/useSignup.js","assets/temple.svg","components/Navbar.js","hooks/useCollection.js","components/ChatsList.js","components/Chats.js","hooks/useLogout.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","projectFirestore","firestore","projectAuth","auth","projectStorage","storage","projectGoogle","GoogleAuthProvider","setCustomParameters","prompt","timestamp","Timestamp","AuthContext","createContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","children","useReducer","dispatch","useEffect","unsub","onAuthStateChanged","Provider","value","useAuthContext","context","useContext","Error","Dashboard","className","_defs","_path","initialState","document","isPending","error","success","firestoreReducer","useDates","dayOfMonth","dayOfWeek","month","year","hour","curDate","today","Date","toLocaleDateString","formatDate","comment","date","createdAt","toDate","getDay","getFullYear","getMonth","getDate","toString","toLocaleTimeString","minute","lastMonday","setDate","setHours","getTime","isCurrentWeek","Avatar","src","alt","_excluded","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgSendIcon","_ref","svgRef","title","titleId","props","id","xmlns","viewBox","ref","undefined","fill","d","_line","_line2","ForwardRef","SvgX","width","height","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","_circle","SvgSmile","cx","cy","r","ProjectComments","project","uniqueId","uuid","collection","response","useState","isCancelled","setIsCancelled","dispatchIfNotCancelled","addDocument","doc","a","fromDate","add","addedDocument","message","deleteDocument","delete","updateDocument","updates","update","updatedDocument","useFirestore","newComment","setNewComment","imgUpload","setImgUpload","isAssignedUser","setIsAssignedUser","inputRef","useRef","assignedUsersId","forEach","uid","sendMessage","commentToAdd","displayName","photoURL","content","createdBy","trim","messages","updatedAt","sendImage","includes","split","storageRef","name","uploadBytes","then","snapshot","getDownloadURL","downloadURL","fileType","image","handleSubmit","e","preventDefault","handleMessageStyle","elements","showSendDate","value1","value2","date1","date2","Math","abs","fileThumbnail","setFileThumbnail","handleEmojis","emojiData","event","emoji","showEmojis","setShowEmojis","map","Fragment","style","padding","backgroundColor","controls","playsInline","onSubmit","accept","onChange","files","URL","createObjectURL","handleFileChange","ImageIcon","onClick","current","resetFileInput","maxLength","placeholder","onKeyDown","code","handleKey","onOutsideClick","onEmojiClick","theme","Theme","DARK","previewConfig","defaultCaption","defaultEmoji","emojiStyle","EmojiStyle","NATIVE","isQuickEmoji","Project","setDocument","setError","onSnapshot","data","err","console","log","useDocument","useParams","rightUrl","rightDisplayName","assignedUsersPhotoURL","url","assignedUsersName","Login","email","setEmail","password","setPassword","setIsPending","login","signInWithEmailAndPassword","res","online","loginWithGoogle","signInWithPopup","useLogin","required","disabled","googleLogo","Signup","setDisplayName","thumbnail","setThumbnail","thumbnailError","setThumbnailError","signup","createUserWithEmailAndPassword","uploadPath","put","img","imgUrl","updateProfile","set","signInWithGoogle","useSignup","selected","size","Navbar","to","Temple","useCollection","_query","_orderBy","documents","setDocuments","query","orderBy","where","unsubscribe","results","docs","push","ChatsList","projects","users","onlineUsers","rightId","replaceDistanceToNow","about","onMouseMove","getElementsByClassName","card","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","setProperty","substring","formatDistanceToNowStrict","addSuffix","replace","matched","OnlineUsers","logout","signOut","useLogout","chats","setQuery","handleSelect","addUser","combinedId","getDoc","exists","setDoc","filter","toLowerCase","App","exact","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fab6f54f.chunk.js","sourcesContent":["import firebase from 'firebase/compat/app'\r\nimport 'firebase/compat/firestore'\r\nimport 'firebase/compat/auth'\r\nimport 'firebase/compat/storage'\r\n\r\nconst firebaseConfig = {\r\n\tapiKey: 'AIzaSyBMB6C-_B61S1wd1RYAr34jomKZpvq16eA',\r\n\tauthDomain: 'better-react-messenger.firebaseapp.com',\r\n\tprojectId: 'better-react-messenger',\r\n\tstorageBucket: 'better-react-messenger.appspot.com',\r\n\tmessagingSenderId: '381225253186',\r\n\tappId: '1:381225253186:web:43a9fb8cce6b202f31f0db',\r\n}\r\n\r\n// Firebase init\r\nfirebase.initializeApp(firebaseConfig)\r\n\r\n// Services init\r\nconst projectFirestore = firebase.firestore()\r\nconst projectAuth = firebase.auth()\r\nconst projectStorage = firebase.storage()\r\n\r\nconst projectGoogle = new firebase.auth.GoogleAuthProvider()\r\nprojectGoogle.setCustomParameters({ prompt: 'select_account' })\r\n// Timestamp\r\nconst timestamp = firebase.firestore.Timestamp\r\n\r\nexport { projectFirestore, projectAuth, timestamp, projectStorage, projectGoogle }\r\n","import { createContext, useReducer, useEffect } from 'react'\nimport { projectAuth } from '../firebase/config'\n\nexport const AuthContext = createContext()\n\nexport const authReducer = (state, action) => {\n\tswitch (action.type) {\n\t\tcase 'LOGIN':\n\t\t\treturn { ...state, user: action.payload }\n\t\tcase 'LOGOUT':\n\t\t\treturn { ...state, user: null }\n\t\tcase 'AUTH_IS_READY':\n\t\t\treturn { user: action.payload, authIsReady: true }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const AuthContextProvider = ({ children }) => {\n\tconst [state, dispatch] = useReducer(authReducer, {\n\t\tuser: null,\n\t\tauthIsReady: false,\n\t})\n\n\tuseEffect(() => {\n\t\tconst unsub = projectAuth.onAuthStateChanged(user => {\n\t\t\tdispatch({ type: 'AUTH_IS_READY', payload: user })\n\t\t\tunsub()\n\t\t})\n\t}, [])\n\n\treturn <AuthContext.Provider value={{ ...state, dispatch }}>{children}</AuthContext.Provider>\n}\n","import { AuthContext } from \"../context/AuthContext\"\nimport { useContext } from \"react\"\n\nexport const useAuthContext = () => {\n  const context = useContext(AuthContext)\n\n  if(!context) {\n    throw Error('useAuthContext must be used inside an AuthContextProvider')\n  }\n\n  return context\n}","// Styles\r\nimport './Dashboard.scss'\r\n\r\nexport default function Dashboard() {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h2 className='page-title'>Dahsboard</h2>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { projectFirestore } from '../firebase/config'\r\n\r\nexport const useDocument = (collection, id) => {\r\n\tconst [document, setDocument] = useState(null)\r\n\tconst [error, setError] = useState(null)\r\n\r\n\t// Realtime data for document\r\n\tuseEffect(() => {\r\n\t\tconst ref = projectFirestore.collection(collection).doc(id)\r\n\r\n\t\tconst unsub = ref.onSnapshot(\r\n\t\t\tsnapshot => {\r\n\t\t\t\tif (snapshot.data()) {\r\n\t\t\t\t\tsetDocument({ ...snapshot.data(), id: snapshot.id })\r\n\t\t\t\t\tsetError(null)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetError('No such document exists')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terr => {\r\n\t\t\t\tconsole.log(err.message)\r\n\t\t\t\tsetError('Failed to get document')\r\n\t\t\t}\r\n\t\t)\r\n\r\n\t\treturn () => unsub()\r\n\t}, [collection, id])\r\n\r\n\treturn { document, error }\r\n}\r\n","var _defs, _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSendIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    \"data-name\": \"Layer 1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 122.56 122.88\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"style\", null, \".cls-1{fill-rule:evenodd;}\"))), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"send\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"cls-1\",\n    fill: \"#3e2a49\",\n    d: \"M2.33,44.58,117.33.37a3.63,3.63,0,0,1,5,4.56l-44,115.61h0a3.63,3.63,0,0,1-6.67.28L53.93,84.14,89.12,33.77,38.85,68.86,2.06,51.24a3.63,3.63,0,0,1,.27-6.66Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSendIcon);\nexport default __webpack_public_path__ + \"static/media/send-icon.a8d72b5b.svg\";\nexport { ForwardRef as ReactComponent };","import { useReducer, useEffect, useState } from 'react'\nimport { projectFirestore, timestamp } from '../firebase/config'\n\nlet initialState = {\n\tdocument: null,\n\tisPending: false,\n\terror: null,\n\tsuccess: null,\n}\n\nconst firestoreReducer = (state, action) => {\n\tswitch (action.type) {\n\t\tcase 'IS_PENDING':\n\t\t\treturn { isPending: true, document: null, success: false, error: null }\n\t\tcase 'ADDED_DOCUMENT':\n\t\t\treturn { isPending: false, document: action.payload, success: true, error: null }\n\t\tcase 'DELETED_DOCUMENT':\n\t\t\treturn { isPending: false, document: null, success: true, error: null }\n\t\tcase 'UPDATED_DOCUMENT':\n\t\t\treturn { isPending: false, document: action.payload, success: true, error: null }\n\t\tcase 'ERROR':\n\t\t\treturn { isPending: false, document: null, success: false, error: action.payload }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const useFirestore = collection => {\n\tconst [response, dispatch] = useReducer(firestoreReducer, initialState)\n\tconst [isCancelled, setIsCancelled] = useState(false)\n\n\t// Collection ref\n\tconst ref = projectFirestore.collection(collection)\n\n\t// Only dispatch is not cancelled\n\tconst dispatchIfNotCancelled = action => {\n\t\tif (!isCancelled) {\n\t\t\tdispatch(action)\n\t\t}\n\t}\n\n\t// Add a document\n\tconst addDocument = async doc => {\n\t\tdispatch({ type: 'IS_PENDING' })\n\n\t\ttry {\n\t\t\tconst createdAt = timestamp.fromDate(new Date())\n\n\t\t\tconst addedDocument = await ref.add({ ...doc, createdAt })\n\t\t\tdispatchIfNotCancelled({ type: 'ADDED_DOCUMENT', payload: addedDocument })\n\t\t} catch (err) {\n\t\t\tdispatchIfNotCancelled({ type: 'ERROR', payload: err.message })\n\t\t}\n\t}\n\n\t// Delete a document\n\tconst deleteDocument = async id => {\n\t\tdispatch({ type: 'IS_PENDING' })\n\n\t\ttry {\n\t\t\tawait ref.doc(id).delete()\n\t\t\tdispatchIfNotCancelled({ type: 'DELETED_DOCUMENT' })\n\t\t} catch (err) {\n\t\t\tdispatchIfNotCancelled({ type: 'ERROR', payload: 'could not delete' })\n\t\t}\n\t}\n\n\t// Update documents\n\n\tconst updateDocument = async (id, updates) => {\n\t\tdispatch({ type: 'IS_PENDING' })\n\n\t\ttry {\n\t\t\tconst updatedDocument = await ref.doc(id).update(updates)\n\n\t\t\tdispatchIfNotCancelled({ type: 'UPDATED_DOCUMENT', payload: updatedDocument })\n\t\t\treturn updatedDocument\n\t\t} catch (err) {\n\t\t\tdispatchIfNotCancelled({ type: 'ERROR', payload: err.message })\n\t\t\treturn null\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\treturn () => setIsCancelled(true)\n\t}, [])\n\n\treturn { addDocument, deleteDocument, updateDocument, response }\n}\n","export const useDates = () => {\r\n\tlet today = new Date().toLocaleDateString()\r\n\tlet weekday = []\r\n\tlet dayOfMonth, dayOfWeek, month, year, hour, curDate\r\n\r\n\tconst isCurrentWeek = date => {\r\n\t\tlet lastMonday = new Date() // Creating new date object for today\r\n\t\tlastMonday.setDate(lastMonday.getDate() - (lastMonday.getDay() - 1)) // Setting date to last monday\r\n\t\tlastMonday.setHours(0, 0, 0, 0) // Setting Hour to 00:00:00:00\r\n\r\n\t\tconst res = lastMonday.getTime() <= date.getTime() && date.getTime() < lastMonday.getTime() + 604800000\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst formatDate = comment => {\r\n\t\tconst date = comment.createdAt.toDate()\r\n\r\n\t\tweekday = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\r\n\t\tdayOfWeek = weekday[date.getDay()]\r\n\r\n\t\tyear = date.getFullYear()\r\n\r\n\t\tmonth = date.getMonth() + 1 < 10 ? '0' + date.getMonth() + 1 : date.getMonth() + 1\r\n\r\n\t\tdayOfMonth = date.getDate() < 10 ? '0' + date.getDate().toString() : date.getDate().toString()\r\n\r\n\t\tcurDate = `${dayOfMonth}/${month}/${year}`\r\n\t\thour = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\r\n\t\tif (curDate === today) {\r\n\t\t\treturn hour\r\n\t\t} else if (curDate !== today) {\r\n\t\t\treturn `${dayOfWeek}. ${hour}`\r\n\t\t} else if (!isCurrentWeek(date)) {\r\n\t\t\treturn `${dayOfMonth}.${month}.${year}, ${hour}`\r\n\t\t}\r\n\t}\r\n\r\n\treturn { formatDate, dayOfMonth, dayOfWeek, month, year, hour, curDate }\r\n}\r\n","// Styles\r\nimport './Avatar.scss'\r\n\r\nexport default function Avatar({ src }) {\r\n\treturn (\r\n\t\t<div className='avatar'>\r\n\t\t\t<img src={src} alt='User avatar' />\r\n\t\t</div>\r\n\t)\r\n}\r\n","var _line, _line2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgX(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 12,\n    height: 12,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 2.5,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-x\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _line || (_line = /*#__PURE__*/React.createElement(\"line\", {\n    x1: 18,\n    y1: 6,\n    x2: 6,\n    y2: 18\n  })), _line2 || (_line2 = /*#__PURE__*/React.createElement(\"line\", {\n    x1: 6,\n    y1: 6,\n    x2: 18,\n    y2: 18\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgX);\nexport default __webpack_public_path__ + \"static/media/x.f399543c.svg\";\nexport { ForwardRef as ReactComponent };","var _circle, _path, _line, _line2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSmile(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-smile\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 12,\n    cy: 12,\n    r: 10\n  })), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 14s1.5 2 4 2 4-2 4-2\"\n  })), _line || (_line = /*#__PURE__*/React.createElement(\"line\", {\n    x1: 9,\n    y1: 9,\n    x2: 9.01,\n    y2: 9\n  })), _line2 || (_line2 = /*#__PURE__*/React.createElement(\"line\", {\n    x1: 15,\n    y1: 9,\n    x2: 15.01,\n    y2: 9\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSmile);\nexport default __webpack_public_path__ + \"static/media/smile.27f2efd8.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/image.47145ce5.svg\";","import React, { useEffect, useRef, useState } from 'react'\r\nimport { timestamp, projectStorage } from '../../firebase/config'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\nimport { v4 as uuid } from 'uuid'\r\nimport { useDates } from '../../hooks/useDates'\r\nimport { getDownloadURL, ref, uploadBytes } from 'firebase/storage'\r\nimport EmojiPicker, { EmojiStyle, Theme } from 'emoji-picker-react'\r\nimport OutsideClickHandler from 'react-outside-click-handler'\r\n\r\n// Assets\r\nimport Avatar from '../../components/Avatar'\r\nimport { ReactComponent as SendIcon } from '../../assets/send-icon.svg'\r\nimport { ReactComponent as CloseBtn } from '../../assets/x.svg'\r\nimport { ReactComponent as SmileIcon } from '../../assets/smile.svg'\r\nimport ImageIcon from '../../assets/image.svg'\r\n\r\nexport default function ProjectComments({ project }) {\r\n\tconst uniqueId = uuid()\r\n\r\n\tconst { formatDate } = useDates()\r\n\tconst { updateDocument, response } = useFirestore('projects')\r\n\tconst { user } = useAuthContext()\r\n\r\n\tconst [newComment, setNewComment] = useState('')\r\n\tconst [imgUpload, setImgUpload] = useState(null)\r\n\tconst [isAssignedUser, setIsAssignedUser] = useState(false)\r\n\tconst inputRef = useRef(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tproject.assignedUsersId.forEach(id => {\r\n\t\t\tif (id === user.uid) setIsAssignedUser(true)\r\n\t\t})\r\n\t}, [setIsAssignedUser, project.assignedUsersId, user.uid])\r\n\r\n\tconst sendMessage = async () => {\r\n\t\tconst commentToAdd = {\r\n\t\t\tdisplayName: user.displayName,\r\n\t\t\tphotoURL: user.photoURL,\r\n\t\t\tcontent: newComment,\r\n\t\t\tcreatedAt: timestamp.fromDate(new Date()),\r\n\t\t\tcreatedBy: user.uid,\r\n\t\t\tid: uniqueId,\r\n\t\t}\r\n\r\n\t\tif (newComment.trim() !== '' && newComment.length < 900 && isAssignedUser) {\r\n\t\t\tawait updateDocument(project.id, {\r\n\t\t\t\tmessages: [...project.messages, commentToAdd],\r\n\t\t\t\tupdatedAt: timestamp.fromDate(new Date()),\r\n\t\t\t})\r\n\t\t\tif (!response.error) {\r\n\t\t\t\tsetNewComment('')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst sendImage = async () => {\r\n\t\tconst acceptedFileTypes = ['image', 'video']\r\n\r\n\t\tif (acceptedFileTypes.includes(imgUpload.type.split('/')[0])) {\r\n\t\t\t// TODO Make it so sending image AND message at once works, for now image overwrittes the text message\r\n\r\n\t\t\tconst storageRef = ref(\r\n\t\t\t\tprojectStorage,\r\n\t\t\t\t`imgs/${project.assignedUsersId[0] + project.assignedUsersId[1]}/${imgUpload.name + uuid()}`\r\n\t\t\t)\r\n\t\t\tconst uploadTask = uploadBytes(storageRef, imgUpload)\r\n\r\n\t\t\tuploadTask.then(snapshot => {\r\n\t\t\t\tgetDownloadURL(snapshot.ref).then(async downloadURL => {\r\n\t\t\t\t\tconst commentToAdd = {\r\n\t\t\t\t\t\tdisplayName: user.displayName,\r\n\t\t\t\t\t\tphotoURL: user.photoURL,\r\n\t\t\t\t\t\t// content: newComment,\r\n\t\t\t\t\t\tfileType: imgUpload.type.includes('image/') ? 'image' : 'video',\r\n\t\t\t\t\t\timage: downloadURL,\r\n\t\t\t\t\t\tcreatedAt: timestamp.fromDate(new Date()),\r\n\t\t\t\t\t\tcreatedBy: user.uid,\r\n\t\t\t\t\t\tid: uniqueId,\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (isAssignedUser) {\r\n\t\t\t\t\t\tawait updateDocument(project.id, {\r\n\t\t\t\t\t\t\tmessages: [...project.messages, commentToAdd],\r\n\t\t\t\t\t\t\tupdatedAt: timestamp.fromDate(new Date()),\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tif (!response.error) {\r\n\t\t\t\t\t\t\tsetImgUpload(null)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSubmit = e => {\r\n\t\te.preventDefault()\r\n\r\n\t\tif (imgUpload) {\r\n\t\t\tsendImage()\r\n\t\t} else {\r\n\t\t\tsendMessage()\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleKey = e => {\r\n\t\te.code === 'Enter' && handleSubmit(e)\r\n\t}\r\n\r\n\tconst handleMessageStyle = (comment, i, elements) => {\r\n\t\tif (\r\n\t\t\t!elements[i - 1] ||\r\n\t\t\t(elements[i + 1] &&\r\n\t\t\t\telements[i - 1] &&\r\n\t\t\t\tcomment.createdBy !== elements[i - 1].createdBy &&\r\n\t\t\t\tcomment.createdBy === elements[i + 1].createdBy)\r\n\t\t) {\r\n\t\t\tif (comment.createdBy === user.uid) {\r\n\t\t\t\t// messageStyle = 'owner group-top'\r\n\t\t\t\treturn 'owner group-top'\r\n\t\t\t} else {\r\n\t\t\t\t// messageStyle = 'group-top'\r\n\t\t\t\treturn 'group-top'\r\n\t\t\t}\r\n\t\t} else if (\r\n\t\t\telements[i + 1] &&\r\n\t\t\telements[i - 1] &&\r\n\t\t\tcomment.createdBy === elements[i - 1].createdBy &&\r\n\t\t\tcomment.createdBy === elements[i + 1].createdBy\r\n\t\t) {\r\n\t\t\tif (comment.createdBy === user.uid) {\r\n\t\t\t\t// messageStyle = 'owner group-middle'\r\n\t\t\t\treturn 'owner group-middle'\r\n\t\t\t} else {\r\n\t\t\t\t// messageStyle = 'group-middle'\r\n\t\t\t\treturn 'group-middle'\r\n\t\t\t}\r\n\t\t} else if (\r\n\t\t\telements[i - 1] &&\r\n\t\t\tcomment.createdBy === elements[i - 1].createdBy &&\r\n\t\t\t(!elements[i + 1] || comment.createdBy !== elements[i + 1].createdBy)\r\n\t\t) {\r\n\t\t\tif (comment.createdBy === user.uid) {\r\n\t\t\t\treturn 'owner group-down'\r\n\t\t\t} else {\r\n\t\t\t\treturn 'group-down'\r\n\t\t\t}\r\n\t\t} else if (comment.createdBy === user.uid) {\r\n\t\t\treturn 'owner'\r\n\t\t\t// messageStyle = 'owner'\r\n\t\t} else {\r\n\t\t\treturn ''\r\n\t\t\t// messageStyle = ''\r\n\t\t}\r\n\t}\r\n\r\n\tconst showSendDate = (comment, elements, i) => {\r\n\t\tif (comment && elements[i - 1]) {\r\n\t\t\tconst value1 = comment.createdAt.toDate().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\t\t\tconst value2 = elements[i - 1].createdAt.toDate().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\r\n\t\t\t// Get miliseconds of each comment.createdAt\r\n\t\t\tconst date1 = new Date('01/01/2022 ' + value1 + ':00').getTime()\r\n\t\t\tconst date2 = new Date('01/01/2022 ' + value2 + ':00').getTime()\r\n\r\n\t\t\tconst minuteDiff = Math.abs(date1 - date2)\r\n\r\n\t\t\t// Check if difference between when comment was created is greater than 15 minutes\r\n\t\t\tif (minuteDiff >= 900000) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst [fileThumbnail, setFileThumbnail] = useState('')\r\n\tconst handleFileChange = e => {\r\n\t\tsetImgUpload(e.target.files[0])\r\n\t\tsetFileThumbnail(URL.createObjectURL(e.target.files[0]))\r\n\t}\r\n\r\n\tconst resetFileInput = e => {\r\n\t\te.preventDefault()\r\n\t\tinputRef.current.value = ''\r\n\t\tsetImgUpload(null)\r\n\t}\r\n\r\n\tconst handleEmojis = (emojiData, event) => {\r\n\t\tsetNewComment(newComment => newComment + emojiData.emoji)\r\n\t}\r\n\r\n\tconst [showEmojis, setShowEmojis] = useState(false)\r\n\r\n\treturn (\r\n\t\t<div className='project-comments'>\r\n\t\t\t<ul>\r\n\t\t\t\t<div className='comments-wrapper'>\r\n\t\t\t\t\t<p className='conv-start'>This is the start of your conversation with this user</p>\r\n\t\t\t\t\t{project.messages.length > 0 &&\r\n\t\t\t\t\t\tproject.messages.map((comment, i, elements) => (\r\n\t\t\t\t\t\t\t<React.Fragment key={comment.id}>\r\n\t\t\t\t\t\t\t\t{showSendDate(comment, elements, i) && <div className='time-passed'>{formatDate(comment)}</div>}\r\n\r\n\t\t\t\t\t\t\t\t<li className={`${handleMessageStyle(comment, i, elements)}`}>\r\n\t\t\t\t\t\t\t\t\t{comment.createdBy !== user.uid &&\r\n\t\t\t\t\t\t\t\t\t\t(!elements[i - 1] || comment.createdBy !== elements[i - 1].createdBy) && (\r\n\t\t\t\t\t\t\t\t\t\t\t<p className='comment-author'>{comment.displayName}</p>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t<div className='comment-bottom'>\r\n\t\t\t\t\t\t\t\t\t\t{comment.createdBy !== user.uid &&\r\n\t\t\t\t\t\t\t\t\t\t\t(!elements[i + 1] || comment.createdBy !== elements[i + 1].createdBy) && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={comment.photoURL} />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='comment-content'\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={comment.image ? { padding: 0, backgroundColor: 'transparent' } : null}>\r\n\t\t\t\t\t\t\t\t\t\t\t{comment.content && <p>{comment.content}</p>}\r\n\t\t\t\t\t\t\t\t\t\t\t{comment.image && comment.fileType === 'image' && <img src={comment.image} alt='' />}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{comment.image && comment.fileType === 'video' && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<video src={comment.image} controls playsInline />\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</ul>\r\n\r\n\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t<div className='add-comment'>\r\n\t\t\t\t\t<label className='attach-image'>\r\n\t\t\t\t\t\t<input ref={inputRef} type='file' accept='video/*, image/*' onChange={e => handleFileChange(e)} />\r\n\t\t\t\t\t\t<img src={ImageIcon} alt='' />\r\n\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t<div className='message-field'>\r\n\t\t\t\t\t\t<div className='column'>\r\n\t\t\t\t\t\t\t{imgUpload && (\r\n\t\t\t\t\t\t\t\t<div className='thumbnails'>\r\n\t\t\t\t\t\t\t\t\t<div className='file-thumbnail'>\r\n\t\t\t\t\t\t\t\t\t\t<img src={fileThumbnail} alt='' />\r\n\t\t\t\t\t\t\t\t\t\t<button className='remove-img' onClick={e => resetFileInput(e)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<CloseBtn className='close-btn' />\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tmaxLength='900'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Aa'\r\n\t\t\t\t\t\t\t\t\tonChange={e => setNewComment(e.target.value)}\r\n\t\t\t\t\t\t\t\t\tvalue={newComment}\r\n\t\t\t\t\t\t\t\t\tonKeyDown={e => handleKey(e)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button className='toggle-emoji-picker' onClick={() => setShowEmojis(!showEmojis)}>\r\n\t\t\t\t\t\t\t<SmileIcon />\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t{showEmojis && (\r\n\t\t\t\t\t\t\t<OutsideClickHandler\r\n\t\t\t\t\t\t\t\tonOutsideClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetShowEmojis(false)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<EmojiPicker\r\n\t\t\t\t\t\t\t\t\tclassName='emoji-picker'\r\n\t\t\t\t\t\t\t\t\tonEmojiClick={handleEmojis}\r\n\t\t\t\t\t\t\t\t\ttheme={Theme.DARK}\r\n\t\t\t\t\t\t\t\t\tpreviewConfig={{\r\n\t\t\t\t\t\t\t\t\t\tdefaultCaption: '',\r\n\t\t\t\t\t\t\t\t\t\tdefaultEmoji: null,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t// lazyLoadEmojis={true}\r\n\t\t\t\t\t\t\t\t\temojiStyle={EmojiStyle.NATIVE}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</OutsideClickHandler>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* todo - send the emoji when clicked on this button. For now sendMessage() needs to run twice to send whatever was before second run of function*/}\r\n\r\n\t\t\t\t\t{!imgUpload && newComment.trim() === '' && (\r\n\t\t\t\t\t\t<button className='input-tool' onClick={() => handleEmojis({ emoji: '', isQuickEmoji: true })}>\r\n\t\t\t\t\t\t\t<span title=\"it doesn't work as it should\"></span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{(newComment.trim() !== '' || imgUpload) && (\r\n\t\t\t\t\t\t<button type='submit' className='input-tool'>\r\n\t\t\t\t\t\t\t<SendIcon />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{newComment.length >= 900 && <p className='error'>Message can't be longer than 900 characters</p>}\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useParams } from 'react-router-dom'\r\nimport { useDocument } from '../../hooks/useDocument'\r\nimport ProjectComments from './ProjectComments'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\n\r\n// Styles\r\nimport './Project.scss'\r\nimport Avatar from '../../components/Avatar'\r\nimport { useEffect, useState } from 'react'\r\n\r\nexport default function Project() {\r\n\tconst { user } = useAuthContext()\r\n\tconst { id } = useParams()\r\n\tconst { error, document } = useDocument('projects', id)\r\n\tlet rightUrl = ''\r\n\tlet rightDisplayName = ''\r\n\tconst [isAssignedUser, setIsAssignedUser] = useState(false)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (document) {\r\n\t\t\tdocument.assignedUsersId.forEach(id => {\r\n\t\t\t\tif (id === user.uid) setIsAssignedUser(true)\r\n\t\t\t})\r\n\t\t}\r\n\t}, [document, user.uid])\r\n\r\n\tif (error) {\r\n\t\treturn <div className='error'>{error}</div>\r\n\t}\r\n\r\n\tif (!document) {\r\n\t\treturn <div className='loading'>Loading...</div>\r\n\t}\r\n\r\n\tdocument.assignedUsersPhotoURL.forEach(url => {\r\n\t\tif (url !== user.photoURL) {\r\n\t\t\trightUrl = url\r\n\t\t}\r\n\t})\r\n\r\n\tdocument.assignedUsersName.forEach(name => {\r\n\t\tif (name !== user.displayName) {\r\n\t\t\trightDisplayName = name\r\n\t\t}\r\n\t})\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{isAssignedUser && (\r\n\t\t\t\t<div className='project-details'>\r\n\t\t\t\t\t{user && (\r\n\t\t\t\t\t\t<div className='top-bar'>\r\n\t\t\t\t\t\t\t<Avatar src={rightUrl} />\r\n\t\t\t\t\t\t\t<h3>{rightDisplayName}</h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<ProjectComments project={document} />\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n","import { useState, useEffect } from 'react'\nimport { projectAuth, projectFirestore, projectGoogle } from '../firebase/config'\nimport { useAuthContext } from './useAuthContext'\n\nexport const useLogin = () => {\n\tconst [isCancelled, setIsCancelled] = useState(false)\n\tconst [error, setError] = useState(null)\n\tconst [isPending, setIsPending] = useState(false)\n\tconst { dispatch } = useAuthContext()\n\n\tconst login = async (email, password) => {\n\t\tsetError(null)\n\t\tsetIsPending(true)\n\n\t\ttry {\n\t\t\t// Login\n\t\t\tconst res = await projectAuth.signInWithEmailAndPassword(email, password)\n\n\t\t\t// Update online status\n\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).update({\n\t\t\t\tonline: true,\n\t\t\t})\n\n\t\t\t// Dispatch login action\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\n\n\t\t\t// Update state\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetIsPending(false)\n\t\t\t\tsetError(null)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetError(err.message)\n\t\t\t\tsetIsPending(false)\n\t\t\t}\n\t\t}\n\t}\n\n\tconst loginWithGoogle = async () => {\n\t\tsetError(null)\n\t\tsetIsPending(true)\n\n\t\ttry {\n\t\t\t// Login\n\t\t\tconst res = await projectAuth.signInWithPopup(projectGoogle)\n\n\t\t\t// Update online status\n\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).update({\n\t\t\t\tonline: true,\n\t\t\t})\n\n\t\t\t// Dispatch login action\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\n\n\t\t\t// Update state\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetIsPending(false)\n\t\t\t\tsetError(null)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetError(err.message)\n\t\t\t\tsetIsPending(false)\n\t\t\t}\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\treturn () => setIsCancelled(true)\n\t}, [])\n\n\treturn { login, loginWithGoogle, isPending, error }\n}\n","export default __webpack_public_path__ + \"static/media/btn_google_dark_normal_ios.9fe90a17.svg\";","import { useState } from 'react'\r\nimport { useLogin } from '../../hooks/useLogin'\r\n\r\n// Styles & assets\r\nimport './Login.scss'\r\nimport googleLogo from '../../assets/btn_google_dark_normal_ios.svg'\r\n\r\nexport default function Login() {\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n\tconst { login, loginWithGoogle, isPending, error } = useLogin()\r\n\r\n\tconst handleSubmit = e => {\r\n\t\te.preventDefault()\r\n\t\tlogin(email, password)\r\n\t}\r\n\tconst handleSubmitWithGoogle = e => {\r\n\t\te.preventDefault()\r\n\t\tloginWithGoogle()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form className='auth-form' onSubmit={handleSubmit}>\r\n\t\t\t<h2>Login</h2>\r\n\r\n\t\t\t<label>\r\n\t\t\t\t<span>Email:</span>\r\n\t\t\t\t<input type='email' required onChange={e => setEmail(e.target.value)} value={email} />\r\n\t\t\t</label>\r\n\r\n\t\t\t<label>\r\n\t\t\t\t<span>Password:</span>\r\n\t\t\t\t<input type='password' required onChange={e => setPassword(e.target.value)} value={password} />\r\n\t\t\t</label>\r\n\r\n\t\t\t{!isPending && <button className='btn'>Login in</button>}\r\n\t\t\t{isPending && (\r\n\t\t\t\t<button className='btn' disabled>\r\n\t\t\t\t\tLoading\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className='others-separator'>\r\n\t\t\t\t<span>or</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<button className='google-btn' onClick={handleSubmitWithGoogle}>\r\n\t\t\t\t<img src={googleLogo} alt='google logo' />\r\n\t\t\t\t<span>Sign in with google</span>\r\n\t\t\t</button>\r\n\r\n\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t</form>\r\n\t)\r\n}\r\n","import { useState } from 'react'\r\nimport { useSignup } from '../../hooks/useSignup'\r\n\r\n// Styles\r\nimport './Signup.scss'\r\nimport googleLogo from '../../assets/btn_google_dark_normal_ios.svg'\r\n\r\nexport default function Signup() {\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n\tconst [displayName, setDisplayName] = useState('')\r\n\tconst [thumbnail, setThumbnail] = useState(null)\r\n\tconst [thumbnailError, setThumbnailError] = useState(null)\r\n\tconst { signup, signInWithGoogle, isPending, error } = useSignup()\r\n\r\n\tconst handleSubmit = e => {\r\n\t\te.preventDefault()\r\n\t\tsignup(email, password, displayName, thumbnail)\r\n\t}\r\n\r\n\tconst handleSubmitWithGoogle = e => {\r\n\t\te.preventDefault()\r\n\t\tsignInWithGoogle()\r\n\t}\r\n\r\n\tconst handleFileChange = e => {\r\n\t\tsetThumbnail(null)\r\n\t\tlet selected = e.target.files[0]\r\n\r\n\t\tif (!selected) {\r\n\t\t\tsetThumbnailError('Please select a file')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (!selected.type.includes('image')) {\r\n\t\t\tsetThumbnailError('Selected file must be an image')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (!selected.size > 100000) {\r\n\t\t\tsetThumbnailError('Image file size must be less than 100kb')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsetThumbnailError(null)\r\n\t\tsetThumbnail(selected)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form className='auth-form' onSubmit={handleSubmit}>\r\n\t\t\t<h2>Sign up</h2>\r\n\r\n\t\t\t<label>\r\n\t\t\t\t<span>Email:</span>\r\n\t\t\t\t<input type='email' required onChange={e => setEmail(e.target.value)} value={email} />\r\n\t\t\t</label>\r\n\t\t\t<label>\r\n\t\t\t\t<span>Password:</span>\r\n\t\t\t\t<input type='password' required onChange={e => setPassword(e.target.value)} value={password} />\r\n\t\t\t</label>\r\n\t\t\t<label>\r\n\t\t\t\t<span>Display name:</span>\r\n\t\t\t\t<input type='text' required onChange={e => setDisplayName(e.target.value)} value={displayName} />\r\n\t\t\t</label>\r\n\t\t\t<label>\r\n\t\t\t\t<span>Profile thumbnail:</span>\r\n\t\t\t\t<input type='file' required onChange={handleFileChange} />\r\n\r\n\t\t\t\t{thumbnailError && <div className='error'>{thumbnailError}</div>}\r\n\t\t\t</label>\r\n\r\n\t\t\t{!isPending && <button className='btn'>Sign up</button>}\r\n\t\t\t{isPending && (\r\n\t\t\t\t<button className='btn' disabled>\r\n\t\t\t\t\tLoading\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className='others-separator'>\r\n\t\t\t\t<span>or</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<button className='google-btn' onClick={handleSubmitWithGoogle}>\r\n\t\t\t\t<img src={googleLogo} alt='google logo' />\r\n\t\t\t\t<span>Sign in with google</span>\r\n\t\t\t</button>\r\n\r\n\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t</form>\r\n\t)\r\n}\r\n","import { useState, useEffect } from 'react'\nimport { projectAuth, projectFirestore, projectStorage, projectGoogle } from '../firebase/config'\nimport { useAuthContext } from './useAuthContext'\n\nexport const useSignup = () => {\n\tconst [isCancelled, setIsCancelled] = useState(false)\n\tconst [error, setError] = useState(null)\n\tconst [isPending, setIsPending] = useState(false)\n\tconst { dispatch } = useAuthContext()\n\n\tconst signup = async (email, password, displayName, thumbnail) => {\n\t\tsetError(null)\n\t\tsetIsPending(true)\n\n\t\ttry {\n\t\t\t// Signup\n\t\t\tconst res = await projectAuth.createUserWithEmailAndPassword(email, password)\n\n\t\t\tif (!res) {\n\t\t\t\tthrow new Error('Could not complete signup')\n\t\t\t}\n\n\t\t\t// Upload thumbnail\n\n\t\t\tconst uploadPath = `thumbnails/${res.user.uid}/${thumbnail.name}`\n\t\t\tconst img = await projectStorage.ref(uploadPath).put(thumbnail)\n\t\t\tconst imgUrl = await img.ref.getDownloadURL()\n\n\t\t\t// Add display name to user\n\t\t\tawait res.user.updateProfile({ displayName, photoURL: imgUrl })\n\n\t\t\t// Create a user document\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).set({\n\t\t\t\tonline: true,\n\t\t\t\tdisplayName: displayName,\n\t\t\t\tphotoURL: imgUrl,\n\t\t\t})\n\n\t\t\t// Dispatch login action\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\n\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetIsPending(false)\n\t\t\t\tsetError(null)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetError(err.message)\n\t\t\t\tsetIsPending(false)\n\t\t\t}\n\t\t}\n\t}\n\n\tconst signInWithGoogle = async () => {\n\t\tsetError(null)\n\t\tsetIsPending(true)\n\n\t\ttry {\n\t\t\t// Signup\n\t\t\tconst res = await projectAuth.signInWithPopup(projectGoogle)\n\n\t\t\tif (!res) {\n\t\t\t\tthrow new Error('Could not complete signup')\n\t\t\t}\n\n\t\t\t// Add display name to user\n\t\t\tawait res.user.updateProfile({ displayName: res.user.displayName, photoURL: res.user.photoURL })\n\n\t\t\t// Create a user document\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).set({\n\t\t\t\tonline: true,\n\t\t\t\tdisplayName: res.user.displayName,\n\t\t\t\tphotoURL: res.user.photoURL,\n\t\t\t})\n\n\t\t\t// Dispatch login action\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\n\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetIsPending(false)\n\t\t\t\tsetError(null)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetError(err.message)\n\t\t\t\tsetIsPending(false)\n\t\t\t}\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\treturn () => setIsCancelled(true)\n\t}, [])\n\n\treturn { signup, signInWithGoogle, error, isPending }\n}\n","export default __webpack_public_path__ + \"static/media/temple.c57f882d.svg\";","import { Link } from 'react-router-dom'\r\nimport { useAuthContext } from '../hooks/useAuthContext'\r\n\r\n// Styles & Images\r\nimport './Navbar.scss'\r\nimport Temple from '../assets/temple.svg'\r\n\r\nexport default function Navbar() {\r\n\tconst { user } = useAuthContext()\r\n\r\n\treturn (\r\n\t\t<nav className='navbar'>\r\n\t\t\t<div className='container'>\r\n\t\t\t\t<Link to='/' className='logo'>\r\n\t\t\t\t\t<img src={Temple} alt='autismChat logo' />\r\n\t\t\t\t\t<span>The Better Messenger</span>\r\n\t\t\t\t</Link>\r\n\r\n\t\t\t\t{!user && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Link to='/login'>Login</Link>\r\n\t\t\t\t\t\t<Link to='/signup'>Signup</Link>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t)\r\n}\r\n","import { useEffect, useState, useRef } from \"react\"\nimport { projectFirestore } from \"../firebase/config\"\n\nexport const useCollection = (collection, _query, _orderBy) => {\n  const [documents, setDocuments] = useState(null)\n  const [error, setError] = useState(null)\n\n  // if we don't use a ref --> infinite loop in useEffect\n  // _query is an array and is \"different\" on every function call\n  const query = useRef(_query).current\n  const orderBy = useRef(_orderBy).current\n\n  useEffect(() => {\n    let ref = projectFirestore.collection(collection)\n\n    if (query) {\n      ref = ref.where(...query)\n    }\n    if (orderBy) {\n      ref = ref.orderBy(...orderBy)\n    }\n\n    const unsubscribe = ref.onSnapshot(snapshot => {\n      let results = []\n      snapshot.docs.forEach(doc => {\n        results.push({...doc.data(), id: doc.id})\n      });\n      \n      // update state\n      setDocuments(results)\n      setError(null)\n    }, error => {\n      console.log(error)\n      setError('could not fetch the data')\n    })\n\n    // unsubscribe on unmount\n    return () => unsubscribe()\n\n  }, [collection, query, orderBy])\n\n  return { documents, error }\n}","import { Link } from 'react-router-dom'\r\nimport { useAuthContext } from '../hooks/useAuthContext'\r\nimport { useCollection } from '../hooks/useCollection'\r\nimport formatDistanceToNowStrict from 'date-fns/formatDistanceToNow'\r\nimport Avatar from './Avatar'\r\n\r\n// Styles\r\nimport './ChatsList.scss'\r\n\r\nexport default function ChatsList({ projects }) {\r\n\tconst { user } = useAuthContext()\r\n\tconst { documents: users } = useCollection('users')\r\n\r\n\tlet onlineUsers = []\r\n\tlet rightUrl = ''\r\n\tlet rightDisplayName = ''\r\n\tlet rightId = ''\r\n\tconst replaceDistanceToNow = {\r\n\t\tabout: '',\r\n\t\tminute: 'min',\r\n\t\t'less than a minute': '1 min',\r\n\t}\r\n\r\n\t// const handleOnMouseMove = e => {\r\n\t// \tconsole.log(e)\r\n\t// \tconst rect = e.target.getBoundingClientRect(),\r\n\t// \t\tx = e.clientX - rect.left,\r\n\t// \t\ty = e.clientY - rect.top\r\n\t// \te.target.firstChild.style.setProperty('left', `${x}px`)\r\n\t// \te.target.firstChild.style.setProperty('top', `${y}px`)\r\n\t// }\r\n\r\n\tconst handleOnMouseMove = e => {\r\n\t\tfor (const card of document.getElementsByClassName('card')) {\r\n\t\t\tconst rect = card.getBoundingClientRect(),\r\n\t\t\t\tx = e.clientX - rect.left,\r\n\t\t\t\ty = e.clientY - rect.top\r\n\r\n\t\t\tcard.style.setProperty('--mouse-x', `${x}px`)\r\n\t\t\tcard.style.setProperty('--mouse-y', `${y}px`)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='chat-list' onMouseMove={handleOnMouseMove}>\r\n\t\t\t{projects.length === 0 && <p>No chats yet!</p>}\r\n\t\t\t{projects.map(project => (\r\n\t\t\t\t<Link to={`/projects/${project.id}`} key={project.id} className='card'>\r\n\t\t\t\t\t<div className='card-content'>\r\n\t\t\t\t\t\t{project.assignedUsersPhotoURL.forEach(url => {\r\n\t\t\t\t\t\t\tif (url !== user.photoURL) {\r\n\t\t\t\t\t\t\t\trightUrl = url\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t{project.assignedUsersName.forEach(name => {\r\n\t\t\t\t\t\t\tif (name !== user.displayName) {\r\n\t\t\t\t\t\t\t\trightDisplayName = name\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t{project.assignedUsersId.forEach(id => {\r\n\t\t\t\t\t\t\tif (id !== user.uid) {\r\n\t\t\t\t\t\t\t\trightId = id\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t{users &&\r\n\t\t\t\t\t\t\tusers.forEach(user => {\r\n\t\t\t\t\t\t\t\tif (user.online && !onlineUsers.includes(user.id)) {\r\n\t\t\t\t\t\t\t\t\tonlineUsers.push(user.id)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t<div className='avatar-container'>\r\n\t\t\t\t\t\t\t<Avatar src={rightUrl} />\r\n\r\n\t\t\t\t\t\t\t{onlineUsers.includes(rightId) && (\r\n\t\t\t\t\t\t\t\t<span className='online-user'>\r\n\t\t\t\t\t\t\t\t\t<div className='status-circle'></div>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{/* {console.log(project.messages[project.messages.length - 1].createdAt.toDate().getTime())}\r\n\t\t\t\t\t{console.log(project)} */}\r\n\t\t\t\t\t\t<div className='chat-info'>\r\n\t\t\t\t\t\t\t<p className='display-name'>{rightDisplayName.substring(0, 18)}</p>\r\n\t\t\t\t\t\t\t{rightDisplayName.length >= 18 && '...'}\r\n\t\t\t\t\t\t\t<div className='last-chat'>\r\n\t\t\t\t\t\t\t\t<span className='last-message'>\r\n\t\t\t\t\t\t\t\t\t{project &&\r\n\t\t\t\t\t\t\t\t\t\tproject.messages[project.messages.length - 1] &&\r\n\t\t\t\t\t\t\t\t\t\tproject.messages[project.messages.length - 1].createdBy === user.uid &&\r\n\t\t\t\t\t\t\t\t\t\t'You: '}\r\n\r\n\t\t\t\t\t\t\t\t\t{project.messages.length !== 0 &&\r\n\t\t\t\t\t\t\t\t\t\tproject.messages[project.messages.length - 1].content &&\r\n\t\t\t\t\t\t\t\t\t\tproject.messages[project.messages.length - 1].fileType === undefined &&\r\n\t\t\t\t\t\t\t\t\t\tproject.messages[project.messages.length - 1].content.substring(0, 15)}\r\n\r\n\t\t\t\t\t\t\t\t\t{project.messages.length !== 0 &&\r\n\t\t\t\t\t\t\t\t\t\t!project.messages[project.messages.length - 1].content &&\r\n\t\t\t\t\t\t\t\t\t\tproject.messages[project.messages.length - 1].fileType === 'image' &&\r\n\t\t\t\t\t\t\t\t\t\t`sent a photo`}\r\n\r\n\t\t\t\t\t\t\t\t\t{project.messages.length !== 0 &&\r\n\t\t\t\t\t\t\t\t\t\t!project.messages[project.messages.length - 1].content &&\r\n\t\t\t\t\t\t\t\t\t\tproject.messages[project.messages.length - 1].fileType === 'video' &&\r\n\t\t\t\t\t\t\t\t\t\t`sent a video`}\r\n\r\n\t\t\t\t\t\t\t\t\t{project.messages.length !== 0 &&\r\n\t\t\t\t\t\t\t\t\t\tproject.messages[project.messages.length - 1].content &&\r\n\t\t\t\t\t\t\t\t\t\tproject.messages[project.messages.length - 1].content.length >= 15 &&\r\n\t\t\t\t\t\t\t\t\t\t'...'}\r\n\t\t\t\t\t\t\t\t\t{/* {console.log(project.messages[project.messages.length - 1].fileType !== undefined)} */}\r\n\t\t\t\t\t\t\t\t\t{project.messages.length === 0 && 'No messages yet'}\r\n\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t\t{project.messages.length !== 0 && <div className='dot'></div>}\r\n\t\t\t\t\t\t\t\t<span className='comment-date'>\r\n\t\t\t\t\t\t\t\t\t{project.messages.length !== 0 &&\r\n\t\t\t\t\t\t\t\t\t\tformatDistanceToNowStrict(project.messages[project.messages.length - 1].createdAt.toDate(), {\r\n\t\t\t\t\t\t\t\t\t\t\taddSuffix: false,\r\n\t\t\t\t\t\t\t\t\t\t}).replace(/\\b(?:about|less than a minute)\\b/gi, matched => replaceDistanceToNow[matched])}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Link>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useState } from 'react'\r\nimport { setDoc, doc, getDoc } from 'firebase/firestore'\r\nimport { projectFirestore, timestamp } from '../firebase/config'\r\nimport { useCollection } from '../hooks/useCollection'\r\nimport { useAuthContext } from '../hooks/useAuthContext'\r\nimport { useLogout } from '../hooks/useLogout'\r\n\r\n\r\n// Compontents\r\nimport ChatsList from './ChatsList'\r\n\r\n// Styles\r\nimport './Chats.scss'\r\nimport Avatar from './Avatar'\r\n\r\nexport default function OnlineUsers() {\r\n\tconst { user } = useAuthContext()\r\n\tconst { logout, isPending } = useLogout()\r\n\tconst { documents: users } = useCollection('users')\r\n\tconst { documents: chats } = useCollection(\r\n\t\t'projects',\r\n\t\t['assignedUsersId', 'array-contains', user.uid],\r\n\t\t['updatedAt', 'desc']\r\n\t)\r\n\r\n\tconst [query, setQuery] = useState('')\r\n\r\n\tconst handleSelect = async addUser => {\r\n\t\t// Check whether the group(chats in firestore) exists, if not create\r\n\t\tconst combinedId = user.uid > addUser.id ? user.uid + addUser.id : addUser.id + user.uid\r\n\r\n\t\ttry {\r\n\t\t\tconst res = await getDoc(doc(projectFirestore, 'projects', combinedId))\r\n\r\n\t\t\tif (!res.exists()) {\r\n\t\t\t\t// Create a chat in chats collection\r\n\r\n\t\t\t\tawait setDoc(doc(projectFirestore, 'projects', combinedId), {\r\n\t\t\t\t\tid: combinedId,\r\n\t\t\t\t\tassignedUsersId: [user.uid, addUser.id],\r\n\t\t\t\t\tassignedUsersName: [user.displayName, addUser.displayName],\r\n\t\t\t\t\tassignedUsersPhotoURL: [user.photoURL, addUser.photoURL],\r\n\t\t\t\t\tmessages: [],\r\n\t\t\t\t\tupdatedAt: timestamp.fromDate(new Date()),\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} catch (err) {}\r\n\r\n\t\tsetQuery('')\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='user-list'>\r\n\t\t\t<div className='search'>\r\n\t\t\t\t<h2>Chats</h2>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className='search-form'>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tplaceholder='Find a user'\r\n\t\t\t\t\t\t\t// onKeyUp={handleSearch}\r\n\t\t\t\t\t\t\tonChange={e => setQuery(e.target.value)}\r\n\t\t\t\t\t\t\tvalue={query}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{query !== '' && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<div className='add-users'>\r\n\t\t\t\t\t\t\t\t{users &&\r\n\t\t\t\t\t\t\t\t\tusers\r\n\t\t\t\t\t\t\t\t\t\t.filter(user => user.displayName.toLowerCase().trim().replace(/\\s+/g, '').includes(query))\r\n\t\t\t\t\t\t\t\t\t\t.map(user => (\r\n\t\t\t\t\t\t\t\t\t\t\t<div key={user.id} className='user-chat' onClick={() => handleSelect(user)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={user.photoURL} alt='' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='user-chat-info'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{user.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t\t\t\t{query.trim() === '' && <span>User not found!</span>}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div className='chats'>{query === '' && chats && <ChatsList projects={chats} />}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className='user'>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Avatar src={user.photoURL} />\r\n\t\t\t\t\t<span>{user.displayName}</span>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{!isPending && user && (\r\n\t\t\t\t\t<button className='btn' onClick={logout}>\r\n\t\t\t\t\t\tLogout\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{isPending && (\r\n\t\t\t\t\t<button className='btn' disabled>\r\n\t\t\t\t\t\tLogging out...\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect, useState } from 'react'\nimport { projectAuth, projectFirestore } from '../firebase/config'\nimport { useAuthContext } from './useAuthContext'\n\nexport const useLogout = () => {\n\tconst [isCancelled, setIsCancelled] = useState(false)\n\tconst [error, setError] = useState(null)\n\tconst [isPending, setIsPending] = useState(false)\n\tconst { dispatch, user } = useAuthContext()\n\n\tconst logout = async () => {\n\t\tsetError(null)\n\t\tsetIsPending(true)\n\n\t\ttry {\n\t\t\t// Update online status\n\t\t\tconst { uid } = user\n\t\t\tawait projectFirestore.collection('users').doc(uid).update({\n\t\t\t\tonline: false,\n\t\t\t})\n\n\t\t\t// Sign the user out\n\t\t\tawait projectAuth.signOut()\n\n\t\t\t// Dispatch logout action\n\t\t\tdispatch({ type: 'LOGOUT' })\n\n\t\t\t// Update state\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetIsPending(false)\n\t\t\t\tsetError(null)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetError(err.message)\n\t\t\t\tsetIsPending(false)\n\t\t\t}\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\treturn () => setIsCancelled(true)\n\t}, [])\n\n\treturn { logout, error, isPending }\n}\n","import { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom'\nimport { useAuthContext } from './hooks/useAuthContext'\n\n// Styles\nimport './App.scss'\n\n// Components && Pages\nimport Dashboard from './pages/dashboard/Dashboard'\nimport Project from './pages/project/Project'\nimport Login from './pages/login/Login'\nimport Signup from './pages/signup/Signup'\nimport Navbar from './components/Navbar'\nimport Chats from './components/Chats'\n\nfunction App() {\n\tconst { user, authIsReady } = useAuthContext()\n\n\treturn (\n\t\t<div className='App'>\n\t\t\t{authIsReady && (\n\t\t\t\t<BrowserRouter>\n\t\t\t\t\t{user && <Chats />}\n\n\t\t\t\t\t<div className='container'>\n\t\t\t\t\t\t{!user && <Navbar />}\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t<Route exact path='/'>\n\t\t\t\t\t\t\t\t{!user && <Redirect to='/login' />}\n\t\t\t\t\t\t\t\t{user && <Dashboard />}\n\t\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t\t<Route path='/projects/:id'>\n\t\t\t\t\t\t\t\t{!user && <Redirect to='/login' />}\n\t\t\t\t\t\t\t\t{user && <Project />}\n\t\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t\t<Route path='/login'>\n\t\t\t\t\t\t\t\t{user && <Redirect to='/' />}\n\t\t\t\t\t\t\t\t{!user && <Login />}\n\t\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t\t<Route path='/signup'>\n\t\t\t\t\t\t\t\t{user && <Redirect to='/' />}\n\t\t\t\t\t\t\t\t{!user && <Signup />}\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</div>\n\t\t\t\t</BrowserRouter>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\nimport { AuthContextProvider } from './context/AuthContext'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<AuthContextProvider>\n\t\t\t<App />\n\t\t</AuthContextProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n)\n\t"],"sourceRoot":""}