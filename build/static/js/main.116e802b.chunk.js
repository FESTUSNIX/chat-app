(this["webpackJsonpmessenger-copy"]=this["webpackJsonpmessenger-copy"]||[]).push([[0],{100:function(e,t,s){},101:function(e,t,s){},102:function(e,t,s){},105:function(e,t,s){},106:function(e,t,s){},107:function(e,t,s){},108:function(e,t,s){},109:function(e,t,s){},110:function(e,t,s){"use strict";s.r(t);var n=s(5),a=s.n(n),c=s(61),r=s.n(c),i=(s(72),s(11)),o=s(20),l=s(31),u=s(16),d=s(33);s(111),s(75),s(112);d.a.initializeApp({apiKey:"AIzaSyBMB6C-_B61S1wd1RYAr34jomKZpvq16eA",authDomain:"better-react-messenger.firebaseapp.com",projectId:"better-react-messenger",storageBucket:"better-react-messenger.appspot.com",messagingSenderId:"381225253186",appId:"1:381225253186:web:43a9fb8cce6b202f31f0db"});var j=d.a.firestore(),b=d.a.auth(),m=d.a.storage(),h=new d.a.auth.GoogleAuthProvider,p=new d.a.auth.GithubAuthProvider;h.setCustomParameters({prompt:"select_account"});var g=d.a.firestore.Timestamp,O=s(3),f=Object(n.createContext)(),x=function(e,t){switch(t.type){case"LOGIN":return Object(u.a)(Object(u.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(u.a)(Object(u.a)({},e),{},{user:null});case"AUTH_IS_READY":return{user:t.payload,authIsReady:!0};default:return e}},v=function(e){var t=e.children,s=Object(n.useReducer)(x,{user:null,authIsReady:!1}),a=Object(i.a)(s,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){var e=b.onAuthStateChanged((function(t){r({type:"AUTH_IS_READY",payload:t}),e()}))}),[]),Object(O.jsx)(f.Provider,{value:Object(u.a)(Object(u.a)({},c),{},{dispatch:r}),children:t})},N=function(){var e=Object(n.useContext)(f);if(!e)throw Error("useAuthContext must be used inside an AuthContextProvider");return e};s(78),s(79);function y(){return Object(O.jsx)("div",{className:"dashboard",children:Object(O.jsx)("div",{className:"wise-mystical-tree"})})}var w=s(0),k=s.n(w),D=s(1),R={document:null,isPending:!1,error:null,success:null},S=function(e,t){switch(t.type){case"IS_PENDING":return{isPending:!0,document:null,success:!1,error:null};case"ADDED_DOCUMENT":return{isPending:!1,document:t.payload,success:!0,error:null};case"DELETED_DOCUMENT":return{isPending:!1,document:null,success:!0,error:null};case"UPDATED_DOCUMENT":return{isPending:!1,document:t.payload,success:!0,error:null};case"ERROR":return{isPending:!1,document:null,success:!1,error:t.payload};default:return e}},E=function(e){var t=Object(n.useReducer)(S,R),s=Object(i.a)(t,2),a=s[0],c=s[1],r=Object(n.useState)(!1),o=Object(i.a)(r,2),l=o[0],d=o[1],b=j.collection(e),m=function(e){l||c(e)},h=function(){var e=Object(D.a)(k.a.mark((function e(t){var s,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"IS_PENDING"}),e.prev=1,s=g.fromDate(new Date),e.next=5,b.add(Object(u.a)(Object(u.a)({},t),{},{createdAt:s}));case 5:n=e.sent,m({type:"ADDED_DOCUMENT",payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),m({type:"ERROR",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(D.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"IS_PENDING"}),e.prev=1,e.next=4,b.doc(t).delete();case 4:m({type:"DELETED_DOCUMENT"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),m({type:"ERROR",payload:"could not delete"});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(D.a)(k.a.mark((function e(t,s){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"IS_PENDING"}),e.prev=1,e.next=4,b.doc(t).update(s);case 4:return n=e.sent,m({type:"UPDATED_DOCUMENT",payload:n}),e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(1),m({type:"ERROR",payload:e.t0.message}),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,s){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return function(){return d(!0)}}),[]),{addDocument:h,deleteDocument:p,updateDocument:O,response:a}},A=s(15),C=function(){var e,t,s,n,a,c,r,i=(new Date).toLocaleDateString(),o=[];return{formatDate:function(r){var l=r.createdAt.toDate();return t=(o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"])[l.getDay()],n=l.getFullYear(),s=l.getMonth()+1<10?"0"+l.getMonth()+1:l.getMonth()+1,e=l.getDate()<10?"0"+l.getDate().toString():l.getDate().toString(),c="".concat(e,"/").concat(s,"/").concat(n),a=l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),c===i?a:function(e){var t=new Date;return t.setDate(t.getDate()-(t.getDay()-1)),t.setHours(0,0,0,0),t.getTime()<=e.getTime()&&e.getTime()<t.getTime()+6048e5}(l)?"".concat(t,". ").concat(a):"".concat(e,".").concat(s,".").concat(n,", ").concat(a)},dates:function(i){var l=i.toDate();return t=(o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"])[l.getDay()],n=l.getFullYear(),s=l.getMonth()+1<10?"0"+l.getMonth()+1:l.getMonth()+1,e=l.getDate()<10?"0"+l.getDate().toString():l.getDate().toString(),c="".concat(e,"/").concat(s,"/").concat(n),a=l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),r="".concat(e,".").concat(s,".").concat(n,", ").concat(a),{weekday:o,dayOfWeek:t,year:n,month:s,dayOfMonth:e,curDate:c,hour:a,fullDate:r}},dayOfMonth:e,dayOfWeek:t,month:s,year:n,hour:a,curDate:c}},I=s(62),U=s.n(I),T=s(32),B=s(47),L=s.n(B);s(100),s(101);function M(e){var t=e.src;return Object(O.jsx)("div",{className:"avatar",children:Object(O.jsx)("img",{src:t,alt:"User avatar"})})}function P(e){var t=e.message,s=e.elements,a=e.i,c=e.chat,r=e.onMessageResponse,o=e.setMessageToDelete,l=e.showImage,d=e.setShowImage,j=N().user,b=E("projects").updateDocument,m=C().formatDate,h=Object(n.useState)(null),p=Object(i.a)(h,2),g=p[0],f=p[1],x=function(){var e=Object(D.a)(k.a.mark((function e(t,s){var n,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.messages.indexOf(s),a=null,s.emojiReactions&&s.emojiReactions.forEach((function(e){null!==e&&e.id!==j.uid&&(a=e)})),r={id:j.uid,content:t.emoji,displayName:j.displayName},c.messages[n]=Object(u.a)(Object(u.a)({},c.messages[n]),{},{emojiReactions:[a||null,Object(u.a)({},r)]}),e.prev=6,e.next=9,b(c.id,{messages:Object(A.a)(c.messages)});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t,s){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[function(e,t,s){if(e&&t[s-1]){var n=e.createdAt.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),a=t[s-1].createdAt.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),c=new Date("01/01/2022 "+n+":00").getTime(),r=new Date("01/01/2022 "+a+":00").getTime();if(Math.abs(c-r)>=9e5)return!0}}(t,s,a)&&Object(O.jsx)("div",{className:"messages__time-passed",children:m(t)}),Object(O.jsxs)("li",{className:"".concat(function(e,t,s,n){return n&&null!==e.response&&null!==n.response?e.createdBy===j.uid?"owner":"":s&&n&&null!==e.response||!s&&n&&n===n.createdBy||n&&s&&e.createdBy!==s.createdBy&&e.createdBy===n.createdBy||n&&!s&&e.createdBy===n.createdBy?e.createdBy===j.uid?"owner group-top":"group-top":null!==e.response&&n&&null!==!n.response&&null!==!s.response?e.createdBy===j.uid?"owner group-down":"group-down":n&&s&&e.createdBy===s.createdBy&&e.createdBy===n.createdBy?e.createdBy===j.uid?"owner group-middle":"group-middle":!s||e.createdBy!==s.createdBy||n&&e.createdBy===n.createdBy?e.createdBy===j.uid?"owner":"":e.createdBy===j.uid?"owner group-down":"group-down"}(t,0,s[a-1],s[a+1])," ").concat(t.deleted?"deleted":""," ").concat(t.emojiReactions?"emoji-response":""),id:t.id,children:[t.createdBy!==j.uid&&(!s[a-1]||t.createdBy!==s[a-1].createdBy)&&Object(O.jsx)("p",{className:"message-author",children:t.displayName}),null!==t.response&&Object(O.jsxs)("div",{onClick:function(){return function(e){var t=document.getElementById(e);t.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((function(){t.classList.add("pop"),setTimeout((function(){t.classList.remove("pop")}),800)}),800)}(c.messages[t.response].id)},className:"".concat(t.createdBy!==j.uid&&!s[a-1]||t.createdBy!==s[a-1].createdBy?"response no-margin":"response"," ").concat(c.messages[t.response].deleted?"deleted":""),children:[t.createdBy!==j.uid&&Object(O.jsx)("div",{className:"left-margin"}),c.messages[t.response].content&&Object(O.jsx)("div",{className:"response__message",children:c.messages[t.response].content}),Object(O.jsx)("div",{className:"response__img",children:c.messages[t.response].image&&("image"===c.messages[t.response].fileType?Object(O.jsx)("img",{src:c.messages[t.response].image,alt:""}):Object(O.jsx)("video",{src:c.messages[t.response].image}))})]}),Object(O.jsxs)("div",{className:"message-content",children:[t.createdBy!==j.uid&&Object(O.jsx)("div",{className:"left-margin",children:(!s[a+1]||t.createdBy!==s[a+1].createdBy)&&Object(O.jsx)(M,{src:t.photoURL})}),Object(O.jsxs)("div",{className:"message-content__text",style:t.image?{padding:0,backgroundColor:"transparent"}:null,children:[t.content&&Object(O.jsx)("p",{children:t.content}),t.image&&"image"===t.fileType&&Object(O.jsxs)("div",{className:"file-message",onClick:function(e){return function(e){l!==e.target.src&&(console.log(e),d(e.target.src))}(e)},children:[Object(O.jsx)("img",{src:t.image,alt:""}),Object(O.jsx)("div",{className:"file-message__preview",children:Object(O.jsx)("i",{className:"fa-solid fa-up-right-and-down-left-from-center"})})]}),t.image&&"video"===t.fileType&&Object(O.jsxs)("div",{className:"file-message",children:[Object(O.jsx)("video",{src:t.image,controls:!0,playsInline:!0}),Object(O.jsx)("div",{className:"file-message__preview",children:Object(O.jsx)("i",{className:"fa-solid fa-up-right-and-down-left-from-center"})})]}),t.emojiReactions&&Object(O.jsx)("div",{className:"emoji-reactions",children:t.emojiReactions.map((function(e){return null!==e?Object(O.jsxs)("div",{className:"emoji-reactions__reaction",onClick:function(){},children:[Object(O.jsx)("span",{className:"content",children:e.content}),Object(O.jsx)("span",{className:"display-name",children:e.displayName})]},e.id):null}))})]}),g===t&&Object(O.jsxs)("div",{className:"react-with-emoji",children:[Object(O.jsx)(L.a,{onOutsideClick:function(){f(null)},disabled:g!==t,children:Object(O.jsx)(T.c,{className:"emoji-picker",onEmojiClick:function(e){x(e,t)},theme:T.b.DARK,previewConfig:{defaultCaption:"",defaultEmoji:null},width:300,height:400,emojiStyle:T.a.NATIVE})}),Object(O.jsx)("svg",{height:"12",viewBox:"0 0 25 12",width:"25","data-darkreader-inline-fill":"",children:Object(O.jsx)("path",{d:"M24.553.103c-2.791.32-5.922 1.53-7.78 3.455l-9.62 7.023c-2.45 2.54-5.78 1.645-5.78-2.487V2.085C1.373 1.191.846.422.1.102h24.453z"})})]}),!t.deleted&&Object(O.jsxs)("div",{className:"message-tools ".concat(g===t?"visible":""),children:[Object(O.jsx)("i",{className:"fa-regular fa-face-smile",onClick:function(){f(t)}}),j.uid===t.createdBy&&Object(O.jsx)("i",{className:"fa-solid fa-trash-can",onClick:function(){return o(t)}}),Object(O.jsx)("i",{className:"fa-solid fa-reply",onClick:function(){r(Number(c.messages.indexOf(t)))}})]}),Object(O.jsx)("div",{className:"message-createdAt ".concat(g===t?"hidden":""),children:m(t)})]})]})]})}s(102);var G=function(e){var t=e.chat,s=e.onMessageResponse,a=e.setBottomDiv,c=N().user,r=C().dates,o=E("projects").updateDocument,d=Object(n.useState)(""),j=Object(i.a)(d,2),b=j[0],m=j[1],h=Object(n.useState)(null),p=Object(i.a)(h,2),g=p[0],f=p[1],x=Object(l.g)(),v=Object(n.useRef)(),y=Object(n.useRef)();Object(n.useEffect)((function(){a(v),R()}),[]),Object(n.useEffect)((function(){return x.listen((function(){a(v),R(),s(null)}))}),[x]);var w=function(){var e=Object(D.a)(k.a.mark((function e(s){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.uid!==s.createdBy){e.next=11;break}return t.messages[t.messages.indexOf(s)]=Object(u.a)(Object(u.a)({},t.messages[t.messages.indexOf(s)]),{},{content:"Message deleted",emojiReaction:null,deleted:!0}),e.prev=2,e.next=5,o(t.id,{messages:Object(A.a)(t.messages)});case 5:f(null),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){v.current&&v.current.scrollIntoView({block:"end"})};return Object(O.jsxs)("ul",{className:"messages custom-scrollbar",id:"messages",onScroll:function(e){return function(e){var t=e.target.scrollTop;-t<=500&&y.current.classList.remove("active"),-t>=500&&y.current.classList.add("active")}(e)},children:[b&&Object(O.jsxs)("div",{className:"full-img",children:[Object(O.jsxs)("div",{className:"full-img__background",children:[Object(O.jsx)("div",{className:"backdrop-blur"}),Object(O.jsx)("img",{src:b,alt:"",className:""})]}),Object(O.jsx)("div",{className:"wrapper",children:Object(O.jsx)("img",{src:b,alt:"",className:"full-img__img"})}),Object(O.jsxs)("div",{className:"full-img__tools",children:[Object(O.jsx)("div",{className:"tool",onClick:function(){U.a.saveAs(b)},children:Object(O.jsx)("i",{className:"fa-solid fa-download"})}),Object(O.jsx)("div",{className:"tool",onClick:function(){m("")},children:Object(O.jsx)("i",{className:"fa-solid fa-xmark"})})]})]}),Object(O.jsxs)("div",{className:"messages-wrapper",children:[Object(O.jsxs)("div",{className:"messages__conversation-start",children:[Object(O.jsx)("p",{children:"This is the start of your conversation with this user"}),Object(O.jsx)("p",{children:r(t.createdAt).fullDate})]}),t.messages.length>0&&t.messages.map((function(e,n,a){return Object(O.jsx)(P,{message:e,elements:a,i:n,chat:t,onMessageResponse:s,setMessageToDelete:f,showImage:b,setShowImage:m},e.id)})),Object(O.jsx)("div",{ref:v,className:"bottom-ref"})]}),Object(O.jsx)("div",{className:"scroll-down",onClick:function(){return R()},ref:y,children:Object(O.jsx)("i",{className:"fa-solid fa-arrow-down"})}),g&&Object(O.jsxs)("div",{className:"confirm-message-delete",children:[Object(O.jsx)("div",{className:"hero-shadow"}),Object(O.jsxs)("div",{className:"confirm-message-delete__content",children:[Object(O.jsx)("h2",{children:"Delete message"}),Object(O.jsx)("p",{children:"Do you really want to delete this message?"}),Object(O.jsx)("p",{children:"Message to delete: "}),Object(O.jsxs)("div",{className:"message-to-delete custom-scrollbar",children:[g.content&&Object(O.jsxs)("span",{children:['"',g.content,'"']}),g.image&&Object(O.jsx)("img",{src:g.image,alt:""})]}),Object(O.jsxs)("div",{className:"vertical-btns",children:[Object(O.jsx)("button",{className:"btn btn--secondary",onClick:function(){return f(null)},children:"Cancel"}),Object(O.jsx)("button",{className:"btn",onClick:function(){return w(g)},children:"Delete"})]})]})]})]})},_=s(114),z=s(48),W=s(65),F=(s(105),s.p+"static/media/image.47145ce5.svg"),J=function(e){var t=e.chat,s=e.messageResponse,a=e.onMessageResponse,c=e.bottomDiv,r=Object(_.a)(),o=E("projects"),l=o.updateDocument,u=o.response,d=N().user,j=Object(n.useState)(""),b=Object(i.a)(j,2),h=b[0],p=b[1],f=Object(n.useState)(null),x=Object(i.a)(f,2),v=x[0],y=x[1],w=Object(n.useState)(!1),R=Object(i.a)(w,2),S=R[0],C=R[1],I=Object(n.useState)("\ud83d\udc4d"),U=Object(i.a)(I,2),B=U[0],M=(U[1],Object(n.useState)(!1)),P=Object(i.a)(M,2),G=P[0],J=P[1],Z=Object(n.useState)(!1),V=Object(i.a)(Z,2),Y=V[0],H=V[1],Q=Object(n.useRef)(null),X=Object(n.useRef)(null);Object(n.useEffect)((function(){X.current.focus()}),[s]),Object(n.useEffect)((function(){!0===G&&q()}),[G]),Object(n.useEffect)((function(){t.assignedUsersId.forEach((function(e){e===d.uid&&C(!0)}))}),[C,t.assignedUsersId,d.uid]);var K=function(){c.current.scrollIntoView({block:"end"})},q=function(){var e=Object(D.a)(k.a.mark((function e(){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(""!==(n={id:r,displayName:d.displayName,photoURL:d.photoURL,content:G?B:h,createdAt:g.fromDate(new Date),createdBy:d.uid,response:null!==s?s:null}).content.trim()&&h.length<900&&S)){e.next=5;break}return e.next=4,l(t.id,{messages:[].concat(Object(A.a)(t.messages),[n]),updatedAt:g.fromDate(new Date),isRead:!1});case 4:u.error||(K(),p(""),J(!1),a(null));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(D.a)(k.a.mark((function e(){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:["image","video"].includes(v.type.split("/")[0])&&(n=Object(z.b)(m,"imgs/".concat(t.assignedUsersId[0]+t.assignedUsersId[1],"/").concat(Object(_.a)()+v.name)),Object(z.c)(n,v).then((function(e){Object(z.a)(e.ref).then(function(){var e=Object(D.a)(k.a.mark((function e(n){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={id:r,displayName:d.displayName,photoURL:d.photoURL,fileType:v.type.includes("image/")?"image":"video",image:n,createdAt:g.fromDate(new Date),createdBy:d.uid,response:null!==s?s:null},!S){e.next=5;break}return e.next=4,l(t.id,{messages:[].concat(Object(A.a)(t.messages),[a]),updatedAt:g.fromDate(new Date),isRead:!1});case 4:u.error||(K(),y(null));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(D.a)(k.a.mark((function e(t){var s,n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.target.files[0],n={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},e.prev=2,e.next=5,Object(W.a)(s,n);case 5:return a=e.sent,e.next=8,y(a);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),te=function(e){e.preventDefault(),v?$():q()},se=Object(n.useState)(""),ne=Object(i.a)(se,2),ae=ne[0],ce=ne[1];return Object(O.jsxs)("form",{onSubmit:te,children:[null!==s&&Object(O.jsxs)("div",{className:"response",children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{className:"response__to",children:["Responding to"," ",Object(O.jsx)("span",{children:t.messages[s].displayName===d.displayName?"yourself":Object(O.jsx)("b",{children:t.messages[s].displayName})})]}),Object(O.jsxs)("p",{className:"response__content",children:[t.messages[s].content&&Object(O.jsxs)(O.Fragment,{children:[t.messages[s].content.substring(0,70),t.messages[s].content.length>70?Object(O.jsx)("span",{children:"..."}):""]}),t.messages[s].image&&"image"===t.messages[s].fileType?"Image":"",t.messages[s].image&&"video"===t.messages[s].fileType?"Video":""]})]}),Object(O.jsx)("div",{className:"response__close-btn",onClick:function(){return a(null)},children:Object(O.jsx)("i",{className:"fa-solid fa-xmark"})})]}),Object(O.jsxs)("div",{className:"add-comment",children:[Object(O.jsxs)("label",{className:"attach-image",children:[Object(O.jsx)("input",{ref:Q,type:"file",accept:"video/*, image/*",onChange:function(e){return function(e){ee(e),ce(URL.createObjectURL(e.target.files[0]))}(e)}}),Object(O.jsx)("img",{src:F,alt:""})]}),Object(O.jsxs)("div",{className:"message-field",children:[Object(O.jsxs)("div",{className:"column",children:[v&&Object(O.jsx)("div",{className:"thumbnails",children:Object(O.jsxs)("div",{className:"file-thumbnail",children:[Object(O.jsx)("img",{src:ae,alt:""}),Object(O.jsx)("button",{className:"remove-img",onClick:function(e){return function(e){e.preventDefault(),Q.current.value="",y(null)}(e)},children:Object(O.jsx)("i",{className:"fa-solid fa-xmark close-btn"})})]})}),Object(O.jsx)("label",{children:Object(O.jsx)("input",{maxLength:"900",placeholder:"Aa",onChange:function(e){return p(e.target.value)},value:h,onKeyDown:function(e){return function(e){"Enter"===e.code&&te(e)}(e)},ref:X})})]}),Object(O.jsx)("button",{className:"toggle-emoji-picker",onClick:function(e){e.preventDefault(),H(!Y)},children:Object(O.jsx)("i",{className:"fa-regular fa-face-smile"})}),Y&&Object(O.jsx)(L.a,{onOutsideClick:function(){H(!1)},children:Object(O.jsx)(T.c,{className:"emoji-picker",onEmojiClick:function(e){!function(e){p((function(t){return t+e.emoji}))}(e)},theme:T.b.DARK,previewConfig:{defaultCaption:"",defaultEmoji:null},emojiStyle:T.a.NATIVE})})]}),!v&&""===h.trim()&&Object(O.jsx)("button",{className:"input-tool",onClick:function(){J(!0)},children:Object(O.jsx)("i",{className:"fa-solid fa-thumbs-up"})}),(""!==h.trim()||v)&&Object(O.jsx)("button",{type:"submit",className:"input-tool",children:Object(O.jsx)("i",{className:"fa-solid fa-paper-plane"})})]}),h.length>=900&&Object(O.jsx)("p",{className:"error",children:"Message can't be longer than 900 characters"})]})};s(106);function Z(e){var t=e.setCurrentChat,s=N().user,a=Object(l.i)().id,c=function(e,t){var s=Object(n.useState)(null),a=Object(i.a)(s,2),c=a[0],r=a[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),d=l[0],b=l[1];return Object(n.useEffect)((function(){var s=j.collection(e).doc(t).onSnapshot((function(e){e.data()?(r(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id})),b(null)):b("No such document exists")}),(function(e){console.log(e.message),b("Failed to get document")}));return function(){return s()}}),[e,t]),{document:c,error:d}}("projects",a),r=c.error,o=c.document,d=E("projects").updateDocument,b=Object(n.useState)(!1),m=Object(i.a)(b,2),h=m[0],p=m[1],g=Object(n.useState)(null),f=Object(i.a)(g,2),x=f[0],v=f[1],y=Object(n.useState)(null),w=Object(i.a)(y,2),k=w[0],D=w[1],R="",S="";if(Object(n.useEffect)((function(){t(o)}),[a,o]),Object(n.useEffect)((function(){o&&o.assignedUsersId.forEach((function(e){e===s.uid&&p(!0)}))}),[o,s.uid]),r)return Object(O.jsx)("div",{className:"error",children:r});if(!o)return Object(O.jsx)("div",{className:"loading",children:"Loading..."});o.assignedUsersPhotoURL.forEach((function(e){e!==s.photoURL&&(R=e)})),o.assignedUsersName.forEach((function(e){e!==s.displayName&&(S=e)}));return Object(O.jsx)(O.Fragment,{children:h&&Object(O.jsxs)("div",{className:"chat",children:[s&&Object(O.jsxs)("div",{className:"chat__top-bar",children:[Object(O.jsxs)("div",{className:"flex-row",children:[Object(O.jsx)(M,{src:R}),Object(O.jsx)("h3",{children:S})]}),Object(O.jsx)("div",{className:"chat-options",children:Object(O.jsx)("i",{className:"fa-solid fa-ellipsis-vertical"})})]}),Object(O.jsx)("div",{className:"vertical-container",onClick:function(){o.messages[o.messages.length-1].createdBy!==s.uid&&d(o.id,{isRead:!0})},children:Object(O.jsxs)("div",{className:"chat__comments",children:[Object(O.jsx)(G,{chat:o,onMessageResponse:v,setBottomDiv:D}),Object(O.jsx)(J,{chat:o,messageResponse:x,onMessageResponse:v,bottomDiv:k})]})})]})})}var V=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),s=t[0],a=t[1],c=Object(n.useState)(null),r=Object(i.a)(c,2),o=r[0],u=r[1],d=Object(n.useState)(!1),m=Object(i.a)(d,2),g=m[0],O=m[1],f=N().dispatch,x=Object(n.useState)(!1),v=Object(i.a)(x,2),y=v[0],w=v[1],R=Object(l.g)(),S=function(){var e=Object(D.a)(k.a.mark((function e(t,n){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),O(!0),e.prev=2,e.next=5,b.signInWithEmailAndPassword(t,n);case 5:return a=e.sent,e.next=8,j.collection("users").doc(a.user.uid).update({online:!0});case 8:f({type:"LOGIN",payload:a.user}),s||(O(!1),u(null)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),s||(u(e.t0.message),O(!1));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,s){return e.apply(this,arguments)}}(),E=function(){var e=Object(D.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),O(!0),e.prev=2,e.next=5,b.signInWithPopup(h);case 5:return t=e.sent,e.next=8,j.collection("users").doc(t.user.uid).update({online:!0});case 8:f({type:"LOGIN",payload:t.user}),s||(O(!1),u(null)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),s||(u(e.t0.message),O(!1));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(D.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),O(!0),e.prev=2,e.next=5,b.signInWithPopup(p);case 5:return t=e.sent,e.next=8,j.collection("users").doc(t.user.uid).update({online:!0});case 8:f({type:"LOGIN",payload:t.user}),s||(O(!1),u(null)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),s||(u(e.t0.message),O(!1));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(D.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),O(!0),w(!1),e.prev=3,e.next=6,b.sendPasswordResetEmail(t);case 6:s||(O(!1),u(null),w(!0),setTimeout((function(){R.push("/login")}),15e3)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),s||(u(e.t0.message),O(!1),w(!1));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(D.a)(k.a.mark((function e(t,n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),O(!0),w(!1),e.prev=3,e.next=6,b.confirmPasswordReset(t,n);case 6:s||(O(!1),u(null),w(!0)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),s||(u(e.t0.message),O(!1),w(!1));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,s){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return function(){return a(!0)}}),[]),{login:S,loginWithGoogle:E,loginWithGithub:A,sendPasswordReset:C,resetPassword:I,isPending:g,error:o,isFinished:y}},Y=(s(52),s.p+"static/media/btn_google_dark_normal_ios.9fe90a17.svg"),H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII=";function Q(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),s=t[0],a=t[1],c=Object(n.useState)(""),r=Object(i.a)(c,2),l=r[0],u=r[1],d=V(),j=d.login,b=d.loginWithGoogle,m=d.loginWithGithub,h=d.isPending,p=d.error;return Object(O.jsxs)("div",{className:"login",children:[Object(O.jsxs)("div",{className:"auth-decoration",children:[Object(O.jsx)("div",{className:"circle"}),Object(O.jsx)("div",{className:"blur"})]}),Object(O.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault(),j(s,l)},children:[Object(O.jsx)("div",{className:"auth-form__title",children:Object(O.jsx)("h2",{children:"Welcome back"})}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Email"}),Object(O.jsx)("input",{type:"email",required:!0,onChange:function(e){return a(e.target.value)},value:s,placeholder:"Enter your email"})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Password"}),Object(O.jsx)("input",{type:"password",required:!0,onChange:function(e){return u(e.target.value)},value:l,placeholder:"Enter your password"})]}),Object(O.jsx)(o.b,{to:"/recover-password",className:"reset-password",children:"Forgot password?"}),!h&&Object(O.jsx)("button",{className:"btn",children:"Login"}),h&&Object(O.jsx)("button",{className:"btn",disabled:!0,children:"Loading"}),Object(O.jsx)("div",{className:"others-separator",children:Object(O.jsx)("span",{children:"or"})}),Object(O.jsxs)("button",{className:"google-btn",onClick:function(e){e.preventDefault(),b()},children:[Object(O.jsx)("img",{src:Y,alt:"google logo"}),Object(O.jsx)("span",{children:"Sign in with google"})]}),Object(O.jsxs)("button",{className:"github-btn",onClick:function(e){e.preventDefault(),m()},children:[Object(O.jsx)("img",{src:H,alt:"github logo"}),Object(O.jsx)("span",{children:"Sign in with GitHub"})]}),Object(O.jsxs)("p",{className:"change-page",children:["Don't have an account? ",Object(O.jsx)(o.b,{to:"/signup",children:"Sign up"})]}),p&&Object(O.jsx)("div",{className:"error",children:p})]})]})}s(107);function X(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),s=t[0],a=t[1],c=Object(n.useState)(""),r=Object(i.a)(c,2),l=r[0],u=r[1],d=Object(n.useState)(""),g=Object(i.a)(d,2),f=g[0],x=g[1],v=Object(n.useState)(null),y=Object(i.a)(v,2),w=y[0],R=y[1],S=Object(n.useState)(null),E=Object(i.a)(S,2),A=E[0],C=E[1],I=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),s=t[0],a=t[1],c=Object(n.useState)(null),r=Object(i.a)(c,2),o=r[0],l=r[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),g=d[0],O=d[1],f=N().dispatch,x=function(){var e=Object(D.a)(k.a.mark((function e(t,n,a,c){var r,i,o,u;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(null),O(!0),e.prev=2,e.next=5,b.createUserWithEmailAndPassword(t,n);case 5:if(r=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return i="thumbnails/".concat(r.user.uid,"/").concat(c.name),e.next=11,m.ref(i).put(c);case 11:return o=e.sent,e.next=14,o.ref.getDownloadURL();case 14:return u=e.sent,e.next=17,r.user.updateProfile({displayName:a,photoURL:u});case 17:return e.next=19,j.collection("users").doc(r.user.uid).set({online:!0,displayName:a,photoURL:u});case 19:f({type:"LOGIN",payload:r.user}),s||(O(!1),l(null)),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),s||(l(e.t0.message),O(!1));case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t,s,n,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(D.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(null),O(!0),e.prev=2,e.next=5,b.signInWithPopup(h);case 5:if(t=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return e.next=10,t.user.updateProfile({displayName:t.user.displayName,photoURL:t.user.photoURL});case 10:return e.next=12,j.collection("users").doc(t.user.uid).set({online:!0,displayName:t.user.displayName,photoURL:t.user.photoURL});case 12:f({type:"LOGIN",payload:t.user}),s||(O(!1),l(null)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),s||(l(e.t0.message),O(!1));case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(D.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(null),O(!0),e.prev=2,e.next=5,b.signInWithPopup(p);case 5:if(t=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return e.next=10,t.user.updateProfile({displayName:t.additionalUserInfo.username,photoURL:t.user.photoURL});case 10:return e.next=12,j.collection("users").doc(t.user.uid).set({online:!0,displayName:t.user.displayName,photoURL:t.user.photoURL});case 12:f({type:"LOGIN",payload:t.user}),s||(O(!1),l(null)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),s||(l(e.t0.message),O(!1));case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return function(){return a(!0)}}),[]),{signup:x,signInWithGoogle:v,signInWithGithub:y,error:o,isPending:g}}(),U=I.signup,T=I.signInWithGoogle,B=I.signInWithGithub,L=I.isPending,M=I.error;return Object(O.jsxs)("div",{className:"signup",children:[Object(O.jsxs)("div",{className:"auth-decoration",children:[Object(O.jsx)("div",{className:"circle"}),Object(O.jsx)("div",{className:"blur"})]}),Object(O.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault(),U(s,l,f,w)},children:[Object(O.jsx)("div",{className:"auth-form__title",children:Object(O.jsx)("h2",{children:"Join us"})}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Email:"}),Object(O.jsx)("input",{type:"email",required:!0,onChange:function(e){return a(e.target.value)},value:s,placeholder:"Aa"})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Password:"}),Object(O.jsx)("input",{type:"password",required:!0,onChange:function(e){return u(e.target.value)},value:l,placeholder:"Aa"})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Display name:"}),Object(O.jsx)("input",{type:"text",required:!0,onChange:function(e){return x(e.target.value)},value:f,placeholder:"Aa"})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Profile thumbnail:"}),Object(O.jsx)("input",{type:"file",required:!0,onChange:function(e){R(null);var t=e.target.files[0];t?t.type.includes("image")?!t.size>1e5?C("Image file size must be less than 100kb"):(C(null),R(t)):C("Selected file must be an image"):C("Please select a file")}}),A&&Object(O.jsx)("div",{className:"error",children:A})]}),!L&&Object(O.jsx)("button",{className:"btn",children:"Sign up"}),L&&Object(O.jsx)("button",{className:"btn",disabled:!0,children:"Loading"}),Object(O.jsx)("div",{className:"others-separator",children:Object(O.jsx)("span",{children:"or"})}),Object(O.jsxs)("button",{className:"google-btn",onClick:function(e){e.preventDefault(),T()},children:[Object(O.jsx)("img",{src:Y,alt:"google logo"}),Object(O.jsx)("span",{children:"Sign in with google"})]}),Object(O.jsxs)("button",{className:"github-btn",onClick:function(e){e.preventDefault(),B()},children:[Object(O.jsx)("img",{src:H,alt:"github logo"}),Object(O.jsx)("span",{children:"Sign in with GitHub"})]}),Object(O.jsxs)("p",{className:"change-page",children:["Already have an account? ",Object(O.jsx)(o.b,{to:"/login",children:"Login"})]}),M&&Object(O.jsx)("div",{className:"error",children:M})]})]})}function K(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{class:"privacy-section",children:[Object(O.jsx)("h3",{children:"Zbieranie danych"}),Object(O.jsx)("p",{children:"Kiedy zbieramy Twoje dane? Tw\xf3j email oraz has\u0142o zapisywane s\u0105 podczas rejestracji na naszej stronie."})]}),Object(O.jsxs)("div",{class:"privacy-section",children:[Object(O.jsx)("h3",{children:"Cele przetwarzania danych"}),Object(O.jsx)("p",{children:"Twoje dane zebrane podczas rejestracji przetwarzane s\u0105 jedynie w celu umo\u017cliwienia korzystania ze strony. Nie udost\u0119pniamy ich nikomu, nie sprzedajemy ich. Rejestracja jest dobrowolna."})]}),Object(O.jsxs)("div",{class:"privacy-section",children:[Object(O.jsx)("h3",{children:"Bezpiecze\u0144stwo danych"}),Object(O.jsx)("p",{children:"Twoje dane s\u0105 automatycznie szyfrowane przez us\u0142ug\u0119 firebase od google. Nikt nieautoryzowany nie ma dost\u0119pu do twoich danych."})]}),Object(O.jsxs)("div",{class:"privacy-section",children:[Object(O.jsx)("h3",{children:"Usuwanie danych"}),Object(O.jsx)("p",{children:'Je\u015bli zrezygnujesz z u\u017cywania naszej aplikacji w ka\u017cdym momencie mo\u017cesz do nas napisa\u0107 na maila "matkowsky808@gmail" lub wykorzysta\u0107 funkcj\u0119 w ustawieniach, aby usun\u0105\u0107 konto oraz swoje dane.'})]}),Object(O.jsxs)("div",{class:"privacy-section",children:[Object(O.jsx)("h3",{children:"Pozosta\u0142e informacje"}),Object(O.jsx)("p",{children:Object(O.jsx)("span",{children:"W razie jakichkolwiek pyta\u0144, prosimy o kontakt na adresie mailowym: matkowsky808@gmail.com"})})]})]})}var q=s.p+"static/media/shrek-gif.df094210.gif";function $(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),s=t[0],a=t[1],c=V(),r=c.sendPasswordReset,l=c.isPending,u=c.error,d=c.isFinished,j=Object(n.useState)(15),b=Object(i.a)(j,2),m=b[0],h=b[1],p=function(e){e.preventDefault(),r(s)};Object(n.useEffect)((function(){!0===d&&g()}),[d]);var g=function(){var e=setInterval((function(){m<=0?clearInterval(e):h((function(e){return e-1}))}),1e3)};return Object(O.jsxs)("div",{className:"login",children:[Object(O.jsxs)("div",{className:"auth-decoration",children:[Object(O.jsx)("div",{className:"circle"}),Object(O.jsx)("div",{className:"blur"})]}),Object(O.jsxs)("div",{className:"auth-form",children:[d&&Object(O.jsxs)("div",{className:"text-center email-sent",children:[Object(O.jsx)("img",{src:q,alt:"",className:"email-sent__img"}),Object(O.jsx)("h2",{children:"Check your email"}),Object(O.jsx)("p",{children:"A password reset email has been sent to your email address"}),Object(O.jsx)(o.b,{to:"/login",children:Object(O.jsx)("button",{className:"btn",children:"Back to Login"})}),Object(O.jsxs)("p",{className:"redirect",children:["Redirecting in ",m," s"]})]}),!d&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"auth-form__title",children:[Object(O.jsx)("h2",{children:"Forgot password?"}),Object(O.jsx)("p",{children:"Enter your email below to recieve password reset instructions"})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Email"}),Object(O.jsx)("input",{type:"email",required:!0,onChange:function(e){return a(e.target.value)},value:s,placeholder:"Enter your email",onKeyDown:function(e){return function(e){"Enter"===e.code&&p(e)}(e)}})]}),!l&&Object(O.jsx)("button",{className:"btn",onClick:p,children:"Send reset link"}),l&&Object(O.jsx)("button",{className:"btn",disabled:!0,children:"Sending email..."}),Object(O.jsxs)("p",{className:"change-page",children:["No longer have Alzheimer? ",Object(O.jsx)(o.b,{to:"/login",children:"Login"})]}),u&&Object(O.jsx)("div",{className:"error",children:u})]})]})]})}function ee(){var e=V(),t=e.resetPassword,s=e.isPending,a=e.error,c=e.isFinished,r=Object(n.useState)(""),u=Object(i.a)(r,2),d=u[0],j=u[1],b=function(e){var t=Object(l.h)();return new URLSearchParams(t.search).get(e)}("oobCode"),m=function(){var e=Object(D.a)(k.a.mark((function e(s){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.preventDefault(),t(b,d);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"login",children:[Object(O.jsxs)("div",{className:"auth-decoration",children:[Object(O.jsx)("div",{className:"circle"}),Object(O.jsx)("div",{className:"blur"})]}),Object(O.jsxs)("form",{className:"auth-form",onSubmit:function(e){return m(e)},children:[c&&Object(O.jsxs)("div",{className:"text-center email-sent",children:[Object(O.jsx)("img",{src:q,alt:"",className:"email-sent__img"}),Object(O.jsx)("h2",{children:"Password set successfully"}),Object(O.jsx)("p",{children:"You can now log in with your new password"}),Object(O.jsx)(o.b,{to:"/login",children:Object(O.jsx)("button",{className:"btn",children:"Back to Login"})}),Object(O.jsxs)("p",{className:"change-page",children:["Now log in and remember your password. ",Object(O.jsx)(o.b,{to:"/login",children:" Login"})]})]}),!c&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"auth-form__title",children:[Object(O.jsx)("h2",{children:"Set a new password"}),Object(O.jsx)("p",{children:"Enter a password that you will remember this time..."})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{children:"Password"}),Object(O.jsx)("input",{type:"password",required:!0,onChange:function(e){return j(e.target.value)},value:d,placeholder:"Enter new password",onKeyDown:function(e){return function(e){"Enter"===e.code&&m(e)}(e)}})]}),!s&&Object(O.jsx)("button",{className:"btn",children:"Reset password"}),s&&Object(O.jsx)("button",{className:"btn",disabled:!0,children:"Setting new password..."}),Object(O.jsxs)("p",{className:"change-page",children:[Object(O.jsx)(o.b,{to:"/login",children:" Login"})," instead?"]}),a&&Object(O.jsx)("div",{className:"error",children:a})]})]})]})}var te=s(40),se=function(e,t,s){var a=Object(n.useState)(null),c=Object(i.a)(a,2),r=c[0],o=c[1],l=Object(n.useState)(null),d=Object(i.a)(l,2),b=d[0],m=d[1],h=Object(n.useRef)(t).current,p=Object(n.useRef)(s).current;return Object(n.useEffect)((function(){var t,s,n=j.collection(e);h&&(n=(t=n).where.apply(t,Object(A.a)(h)));p&&(n=(s=n).orderBy.apply(s,Object(A.a)(p)));var a=n.onSnapshot((function(e){var t=[];e.docs.forEach((function(e){t.push(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id}))})),o(t),m(null)}),(function(e){console.log(e),m("could not fetch the data")}));return function(){return a()}}),[e,h,p]),{documents:r,error:b}},ne=s(8),ae=s(66);s(108);function ce(e){var t=e.projects,s=e.currentChat,n=N().user,a=se("users").documents,c=E("projects").updateDocument,r=[],i="",l="",u="",d={about:"",minute:"min",minutes:"min","less than a minute":"1 min"};return Object(O.jsxs)("div",{className:"chat-list custom-scrollbar",onMouseMove:function(e){var t,s=Object(ne.a)(document.getElementsByClassName("card"));try{for(s.s();!(t=s.n()).done;){var n=t.value,a=n.getBoundingClientRect(),c=e.clientX-a.left,r=e.clientY-a.top;n.style.setProperty("--mouse-x","".concat(c,"px")),n.style.setProperty("--mouse-y","".concat(r,"px"))}}catch(i){s.e(i)}finally{s.f()}},children:[0===t.length&&Object(O.jsx)("p",{children:"No chats yet!"}),t.map((function(e){return Object(O.jsx)(o.b,{to:"/u/".concat(e.id),className:"card ".concat(e.messages&&e.messages[e.messages.length-1]&&!e.isRead&&e.messages[e.messages.length-1].createdBy!==n.uid?"unread":""),onClick:function(){s&&s.messages[s.messages.length-1]&&s.messages[s.messages.length-1].createdBy!==n.uid&&c(s.id,{isRead:!0})},children:Object(O.jsxs)("div",{className:"card-content",children:[e.assignedUsersPhotoURL.forEach((function(e){e!==n.photoURL&&(i=e)})),e.assignedUsersName.forEach((function(e){e!==n.displayName&&(l=e)})),e.assignedUsersId.forEach((function(e){e!==n.uid&&(u=e)})),a&&a.forEach((function(e){e.online&&!r.includes(e.id)&&r.push(e.id)})),Object(O.jsxs)("div",{className:"avatar-container",children:[Object(O.jsx)(M,{src:i}),r.includes(u)&&Object(O.jsx)("span",{className:"online-user",children:Object(O.jsx)("div",{className:"status-circle"})})]}),Object(O.jsxs)("div",{className:"chat-info",children:[Object(O.jsxs)("p",{className:"display-name",children:[l.substring(0,18),Object(O.jsx)("span",{children:l.length>=18&&"..."})]}),Object(O.jsxs)("div",{className:"last-chat",children:[Object(O.jsxs)("span",{className:"last-message",children:[e&&e.messages[e.messages.length-1]&&e.messages[e.messages.length-1].createdBy===n.uid&&"You: ",0!==e.messages.length&&e.messages[e.messages.length-1].content&&void 0===e.messages[e.messages.length-1].fileType&&e.messages[e.messages.length-1].content.substring(0,15),0!==e.messages.length&&!e.messages[e.messages.length-1].content&&"image"===e.messages[e.messages.length-1].fileType&&"sent a photo",0!==e.messages.length&&!e.messages[e.messages.length-1].content&&"video"===e.messages[e.messages.length-1].fileType&&"sent a video",0!==e.messages.length&&e.messages[e.messages.length-1].content&&e.messages[e.messages.length-1].content.length>=15&&"...",0===e.messages.length&&"No messages yet"]}),0!==e.messages.length&&Object(O.jsx)("div",{className:"dot"}),Object(O.jsx)("span",{className:"comment-date",children:0!==e.messages.length&&Object(ae.a)(e.messages[e.messages.length-1].createdAt.toDate(),{addSuffix:!1}).replace(/\b(?:about|less than a minute)\b/gi,(function(e){return d[e]}))})]})]})]})},e.id)}))]})}s(109);function re(e){var t=e.currentChat,s=N().user,a=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),s=t[0],a=t[1],c=Object(n.useState)(null),r=Object(i.a)(c,2),o=r[0],l=r[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),m=d[0],h=d[1],p=N(),g=p.dispatch,O=p.user,f=function(){var e=Object(D.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(null),h(!0),e.prev=2,t=O.uid,e.next=6,j.collection("users").doc(t).update({online:!1});case 6:return e.next=8,b.signOut();case 8:g({type:"LOGOUT"}),s||(h(!1),l(null)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),s||(l(e.t0.message),h(!1));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return function(){return a(!0)}}),[]),{logout:f,error:o,isPending:m}}(),c=a.logout,r=a.isPending,o=se("users").documents,l=se("projects",["assignedUsersId","array-contains",s.uid],["updatedAt","desc"]).documents,u=Object(n.useState)(""),d=Object(i.a)(u,2),m=d[0],h=d[1],p=function(){var e=Object(D.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.uid>t.id?s.uid+t.id:t.id+s.uid,e.prev=1,e.next=4,Object(te.b)(Object(te.a)(j,"projects",n));case 4:if(e.sent.exists()||s.uid===t.id){e.next=8;break}return e.next=8,Object(te.c)(Object(te.a)(j,"projects",n),{id:n,assignedUsersId:[s.uid,t.id],assignedUsersName:[s.displayName,t.displayName],assignedUsersPhotoURL:[s.photoURL,t.photoURL],messages:[],updatedAt:g.fromDate(new Date),createdAt:g.fromDate(new Date)});case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:h("");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"user-list",children:[Object(O.jsx)("div",{className:"search",children:Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"search-form",children:Object(O.jsxs)("label",{children:[Object(O.jsx)("i",{className:"fa-solid fa-magnifying-glass"}),Object(O.jsx)("input",{type:"text",placeholder:"Find a user",onChange:function(e){return h(e.target.value)},value:m})]})}),""!==m&&Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"add-users",children:[o&&o.filter((function(e){return e.displayName.toLowerCase().trim().replace(/\s+/g,"").includes(m)})).map((function(e){return Object(O.jsxs)("div",{className:"user-chat",onClick:function(){return p(e)},children:[Object(O.jsx)("img",{src:e.photoURL,alt:""}),Object(O.jsx)("div",{className:"user-chat-info",children:Object(O.jsx)("span",{children:e.displayName})})]},e.id)})),""===m.trim()&&Object(O.jsx)("span",{children:"User not found!"})]})}),Object(O.jsx)("div",{className:"chats",children:""===m&&l&&Object(O.jsx)(ce,{projects:l,currentChat:t})})]})}),Object(O.jsxs)("div",{className:"user",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(M,{src:s.photoURL}),Object(O.jsx)("span",{children:s.displayName})]}),!r&&s&&Object(O.jsx)("button",{className:"btn",onClick:c,children:"Logout"}),r&&Object(O.jsx)("button",{className:"btn",disabled:!0,children:"Logging out..."})]})]})}var ie=function(){var e=N(),t=e.user,s=e.authIsReady,a=Object(n.useState)(null),c=Object(i.a)(a,2),r=c[0],u=c[1];return Object(O.jsx)("div",{className:"App",children:s&&Object(O.jsxs)(o.a,{children:[t&&Object(O.jsx)(re,{currentChat:r}),Object(O.jsxs)(l.d,{children:[Object(O.jsxs)(l.b,{exact:!0,path:"/",children:[!t&&Object(O.jsx)(l.a,{to:"/login"}),t&&Object(O.jsx)(y,{})]}),Object(O.jsxs)(l.b,{path:"/u/:id",children:[!t&&Object(O.jsx)(l.a,{to:"/login"}),t&&Object(O.jsx)(Z,{setCurrentChat:u})]}),Object(O.jsx)(l.b,{path:"/privacy-policy",children:Object(O.jsx)(K,{})}),Object(O.jsx)(l.b,{path:"/recover-password",children:Object(O.jsx)($,{})}),Object(O.jsxs)(l.b,{path:"/login",children:[t&&Object(O.jsx)(l.a,{to:"/"}),!t&&Object(O.jsx)(Q,{})]}),Object(O.jsxs)(l.b,{path:"/signup",children:[t&&Object(O.jsx)(l.a,{to:"/"}),!t&&Object(O.jsx)(X,{})]}),Object(O.jsx)(l.b,{path:"/set-new-password",children:Object(O.jsx)(ee,{})})]})]})})};r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(v,{children:Object(O.jsx)(ie,{})})}),document.getElementById("root"))},52:function(e,t,s){},72:function(e,t,s){},78:function(e,t,s){},79:function(e,t,s){}},[[110,1,2]]]);
//# sourceMappingURL=main.116e802b.chunk.js.map