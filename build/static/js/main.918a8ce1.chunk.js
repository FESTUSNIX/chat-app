(this["webpackJsonpmessenger-copy"]=this["webpackJsonpmessenger-copy"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var a=n(4),s=n.n(a),c=n(60),r=n.n(c),i=(n(72),n(24)),o=n(31),l=n(13),u=n(19),d=n(32);n(110),n(75),n(111);d.a.initializeApp({apiKey:"AIzaSyBMB6C-_B61S1wd1RYAr34jomKZpvq16eA",authDomain:"better-react-messenger.firebaseapp.com",projectId:"better-react-messenger",storageBucket:"better-react-messenger.appspot.com",messagingSenderId:"381225253186",appId:"1:381225253186:web:43a9fb8cce6b202f31f0db"});var j=d.a.firestore(),b=d.a.auth(),h=d.a.storage(),p=new d.a.auth.GoogleAuthProvider,m=new d.a.auth.GithubAuthProvider;p.setCustomParameters({prompt:"select_account"});var O=d.a.firestore.Timestamp,g=n(5),f=Object(a.createContext)(),x=function(e,t){switch(t.type){case"LOGIN":return Object(u.a)(Object(u.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(u.a)(Object(u.a)({},e),{},{user:null});case"AUTH_IS_READY":return{user:t.payload,authIsReady:!0};default:return e}},v=function(e){var t=e.children,n=Object(a.useReducer)(x,{user:null,authIsReady:!1}),s=Object(l.a)(n,2),c=s[0],r=s[1];return Object(a.useEffect)((function(){var e=b.onAuthStateChanged((function(t){r({type:"AUTH_IS_READY",payload:t}),e()}))}),[]),Object(g.jsx)(f.Provider,{value:Object(u.a)(Object(u.a)({},c),{},{dispatch:r}),children:t})},y=function(){var e=Object(a.useContext)(f);if(!e)throw Error("useAuthContext must be used inside an AuthContextProvider");return e};n(78),n(79);function N(){return Object(g.jsx)("div",{className:"dashboard",children:Object(g.jsx)("div",{className:"wise-mystical-tree"})})}var w=function(){var e,t,n,a,s,c,r=(new Date).toLocaleDateString();return{formatDate:function(i){var o=i.createdAt.toDate();return t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][o.getDay()],a=o.getFullYear(),n=o.getMonth()+1<10?"0"+o.getMonth()+1:o.getMonth()+1,e=o.getDate()<10?"0"+o.getDate().toString():o.getDate().toString(),c="".concat(e,"/").concat(n,"/").concat(a),s=o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),c===r?s:c!==r?"".concat(t,". ").concat(s):function(e){var t=new Date;return t.setDate(t.getDate()-(t.getDay()-1)),t.setHours(0,0,0,0),t.getTime()<=e.getTime()&&e.getTime()<t.getTime()+6048e5}(o)?void 0:"".concat(e,".").concat(n,".").concat(a,", ").concat(s)},dayOfMonth:e,dayOfWeek:t,month:n,year:a,hour:s,curDate:c}},k=n(61);n(80),n(81);function E(e){var t=e.src;return Object(g.jsx)("div",{className:"avatar",children:Object(g.jsx)("img",{src:t,alt:"User avatar"})})}var D,A,S=function(e){var t=e.chat,n=w().formatDate,c=y().user,r=function(e,t,n){return!n[t-1]||n[t+1]&&n[t-1]&&e.createdBy!==n[t-1].createdBy&&e.createdBy===n[t+1].createdBy?e.createdBy===c.uid?"owner group-top":"group-top":n[t+1]&&n[t-1]&&e.createdBy===n[t-1].createdBy&&e.createdBy===n[t+1].createdBy?e.createdBy===c.uid?"owner group-middle":"group-middle":!n[t-1]||e.createdBy!==n[t-1].createdBy||n[t+1]&&e.createdBy===n[t+1].createdBy?e.createdBy===c.uid?"owner":"":e.createdBy===c.uid?"owner group-down":"group-down"},i=function(e,t,n){if(e&&t[n-1]){var a=e.createdAt.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),s=t[n-1].createdAt.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),c=new Date("01/01/2022 "+a+":00").getTime(),r=new Date("01/01/2022 "+s+":00").getTime();if(Math.abs(c-r)>=9e5)return!0}},o=Object(a.useState)(""),u=Object(l.a)(o,2),d=u[0],j=u[1];return Object(g.jsxs)("ul",{className:"comments",children:[d&&Object(g.jsxs)("div",{className:"full-img",children:[Object(g.jsxs)("div",{className:"full-img__background",children:[Object(g.jsx)("div",{className:"backdrop-blur"}),Object(g.jsx)("img",{src:d,alt:"",className:""})]}),Object(g.jsx)("div",{className:"wrapper",children:Object(g.jsx)("img",{src:d,alt:"",className:"full-img__img"})}),Object(g.jsxs)("div",{className:"full-img__tools",children:[Object(g.jsx)("div",{className:"tool",onClick:function(){Object(k.saveAs)("https://firebasestorage.googleapis.com/v0/b/better-react-messenger.appspot.com/o/imgs%2FcM8CaZG73ENA7ABO8AhkIwsRQSl1h3IAn7EaEfUza4WWxFwm0SrcOn83%2F65a311e8-6605-4919-8fc3-59acff1d470dpexels-abhishek-gaurav-919943.jpg?alt=media&token=af4c1e86-1517-452c-98d4-39c544c0e52e","image.jpg")},children:Object(g.jsx)("i",{class:"fa-solid fa-download"})}),Object(g.jsx)("div",{className:"tool",onClick:function(){j("")},children:Object(g.jsx)("i",{class:"fa-solid fa-xmark"})})]})]}),Object(g.jsxs)("div",{className:"comments-wrapper",children:[Object(g.jsx)("p",{className:"comments__conversation-start",children:"This is the start of your conversation with this user"}),t.messages.length>0&&t.messages.map((function(e,t,a){return Object(g.jsxs)(s.a.Fragment,{children:[i(e,a,t)&&Object(g.jsx)("div",{className:"comments__time-passed",children:n(e)}),Object(g.jsxs)("li",{className:"".concat(r(e,t,a)),children:[e.createdBy!==c.uid&&(!a[t-1]||e.createdBy!==a[t-1].createdBy)&&Object(g.jsx)("p",{className:"comment-author",children:e.displayName}),Object(g.jsxs)("div",{className:"comment-content",children:[e.createdBy!==c.uid&&(!a[t+1]||e.createdBy!==a[t+1].createdBy)&&Object(g.jsx)(E,{src:e.photoURL}),Object(g.jsxs)("div",{className:"comment-content__text",style:e.image?{padding:0,backgroundColor:"transparent"}:null,children:[e.content&&Object(g.jsx)("p",{children:e.content}),e.image&&"image"===e.fileType&&Object(g.jsxs)("div",{className:"file-message",onClick:function(e){return function(e){d!==e.target.src&&j(e.target.src)}(e)},children:[Object(g.jsx)("img",{src:e.image,alt:""}),Object(g.jsx)("div",{className:"file-message__preview",children:Object(g.jsx)("i",{className:"fa-solid fa-up-right-and-down-left-from-center"})})]}),e.image&&"video"===e.fileType&&Object(g.jsxs)("div",{className:"file-message",children:[Object(g.jsx)("video",{src:e.image,controls:!0,playsInline:!0}),Object(g.jsx)("div",{className:"file-message__preview",children:Object(g.jsx)("i",{className:"fa-solid fa-up-right-and-down-left-from-center"})})]})]})]})]})]},e.id)}))]})]})},I=n(0),R=n.n(I),U=n(15),C=n(1),L={document:null,isPending:!1,error:null,success:null},T=function(e,t){switch(t.type){case"IS_PENDING":return{isPending:!0,document:null,success:!1,error:null};case"ADDED_DOCUMENT":return{isPending:!1,document:t.payload,success:!0,error:null};case"DELETED_DOCUMENT":return{isPending:!1,document:null,success:!0,error:null};case"UPDATED_DOCUMENT":return{isPending:!1,document:t.payload,success:!0,error:null};case"ERROR":return{isPending:!1,document:null,success:!1,error:t.payload};default:return e}},B=n(113),P=n(46),G=n(47),z=n(62),M=n.n(z),W=n(63),F=(n(102),n.p+"static/media/image.47145ce5.svg"),J=["title","titleId"];function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function _(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function H(e,t){var n=e.title,s=e.titleId,c=_(e,J);return a.createElement("svg",Z({id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.56 122.88",ref:t,"aria-labelledby":s},c),D||(D=a.createElement("defs",null,a.createElement("style",null,".cls-1{fill-rule:evenodd;}"))),void 0===n?a.createElement("title",{id:s},"send"):n?a.createElement("title",{id:s},n):null,A||(A=a.createElement("path",{className:"cls-1",fill:"#3e2a49",d:"M2.33,44.58,117.33.37a3.63,3.63,0,0,1,5,4.56l-44,115.61h0a3.63,3.63,0,0,1-6.67.28L53.93,84.14,89.12,33.77,38.85,68.86,2.06,51.24a3.63,3.63,0,0,1,.27-6.66Z"})))}var Y,V,Q=a.forwardRef(H),X=(n.p,["title","titleId"]);function K(){return(K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function $(e,t){var n=e.title,s=e.titleId,c=q(e,X);return a.createElement("svg",K({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2.5,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x",ref:t,"aria-labelledby":s},c),n?a.createElement("title",{id:s},n):null,Y||(Y=a.createElement("line",{x1:18,y1:6,x2:6,y2:18})),V||(V=a.createElement("line",{x1:6,y1:6,x2:18,y2:18})))}var ee,te,ne,ae,se=a.forwardRef($),ce=(n.p,["title","titleId"]);function re(){return(re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ie(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function oe(e,t){var n=e.title,s=e.titleId,c=ie(e,ce);return a.createElement("svg",re({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-smile",ref:t,"aria-labelledby":s},c),n?a.createElement("title",{id:s},n):null,ee||(ee=a.createElement("circle",{cx:12,cy:12,r:10})),te||(te=a.createElement("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"})),ne||(ne=a.createElement("line",{x1:9,y1:9,x2:9.01,y2:9})),ae||(ae=a.createElement("line",{x1:15,y1:9,x2:15.01,y2:9})))}var le=a.forwardRef(oe),ue=(n.p,function(e){var t=e.chat,n=Object(B.a)(),s=function(e){var t=Object(a.useReducer)(T,L),n=Object(l.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(!1),i=Object(l.a)(r,2),o=i[0],d=i[1],b=j.collection(e),h=function(e){o||c(e)},p=function(){var e=Object(C.a)(R.a.mark((function e(t){var n,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"IS_PENDING"}),e.prev=1,n=O.fromDate(new Date),e.next=5,b.add(Object(u.a)(Object(u.a)({},t),{},{createdAt:n}));case 5:a=e.sent,h({type:"ADDED_DOCUMENT",payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),h({type:"ERROR",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(C.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"IS_PENDING"}),e.prev=1,e.next=4,b.doc(t).delete();case 4:h({type:"DELETED_DOCUMENT"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),h({type:"ERROR",payload:"could not delete"});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(C.a)(R.a.mark((function e(t,n){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"IS_PENDING"}),e.prev=1,e.next=4,b.doc(t).update(n);case 4:return a=e.sent,h({type:"UPDATED_DOCUMENT",payload:a}),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(1),h({type:"ERROR",payload:e.t0.message}),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){return d(!0)}}),[]),{addDocument:p,deleteDocument:m,updateDocument:g,response:s}}("projects"),c=s.updateDocument,r=s.response,i=y().user,o=Object(a.useState)(""),d=Object(l.a)(o,2),b=d[0],p=d[1],m=Object(a.useState)(null),f=Object(l.a)(m,2),x=f[0],v=f[1],N=Object(a.useState)(!1),w=Object(l.a)(N,2),k=w[0],E=w[1],D=Object(a.useState)("\ud83d\udc4d"),A=Object(l.a)(D,2),S=A[0],I=(A[1],Object(a.useState)(!1)),z=Object(l.a)(I,2),J=z[0],Z=z[1],_=Object(a.useRef)(null);Object(a.useEffect)((function(){!0===J&&H()}),[J]),Object(a.useEffect)((function(){t.assignedUsersId.forEach((function(e){e===i.uid&&E(!0)}))}),[E,t.assignedUsersId,i.uid]);var H=function(){var e=Object(C.a)(R.a.mark((function e(){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(""!==(a={displayName:i.displayName,photoURL:i.photoURL,content:J?S:b,createdAt:O.fromDate(new Date),createdBy:i.uid,id:n}).content.trim()&&b.length<900&&k)){e.next=5;break}return e.next=4,c(t.id,{messages:[].concat(Object(U.a)(t.messages),[a]),updatedAt:O.fromDate(new Date)});case 4:r.error||(p(""),Z(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(C.a)(R.a.mark((function e(t){var n,a,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],a={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},e.prev=2,e.next=5,Object(W.a)(n,a);case 5:return s=e.sent,e.next=8,v(s);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(C.a)(R.a.mark((function e(){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:["image","video"].includes(x.type.split("/")[0])&&(a=Object(P.b)(h,"imgs/".concat(t.assignedUsersId[0]+t.assignedUsersId[1],"/").concat(Object(B.a)()+x.name)),Object(P.c)(a,x).then((function(e){Object(P.a)(e.ref).then(function(){var e=Object(C.a)(R.a.mark((function e(a){var s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={displayName:i.displayName,photoURL:i.photoURL,fileType:x.type.includes("image/")?"image":"video",image:a,createdAt:O.fromDate(new Date),createdBy:i.uid,id:n},!k){e.next=5;break}return e.next=4,c(t.id,{messages:[].concat(Object(U.a)(t.messages),[s]),updatedAt:O.fromDate(new Date)});case 4:r.error||v(null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(e){e.preventDefault(),x?V():H()},K=Object(a.useState)(""),q=Object(l.a)(K,2),$=q[0],ee=q[1],te=Object(a.useState)(!1),ne=Object(l.a)(te,2),ae=ne[0],ce=ne[1];return Object(g.jsxs)("form",{onSubmit:X,children:[Object(g.jsxs)("div",{className:"add-comment",children:[Object(g.jsxs)("label",{className:"attach-image",children:[Object(g.jsx)("input",{ref:_,type:"file",accept:"video/*, image/*",onChange:function(e){return function(e){Y(e),ee(URL.createObjectURL(e.target.files[0]))}(e)}}),Object(g.jsx)("img",{src:F,alt:""})]}),Object(g.jsxs)("div",{className:"message-field",children:[Object(g.jsxs)("div",{className:"column",children:[x&&Object(g.jsx)("div",{className:"thumbnails",children:Object(g.jsxs)("div",{className:"file-thumbnail",children:[Object(g.jsx)("img",{src:$,alt:""}),Object(g.jsx)("button",{className:"remove-img",onClick:function(e){return function(e){e.preventDefault(),_.current.value="",v(null)}(e)},children:Object(g.jsx)(se,{className:"close-btn"})})]})}),Object(g.jsx)("label",{children:Object(g.jsx)("input",{maxLength:"900",placeholder:"Aa",onChange:function(e){return p(e.target.value)},value:b,onKeyDown:function(e){return function(e){"Enter"===e.code&&X(e)}(e)}})})]}),Object(g.jsx)("button",{className:"toggle-emoji-picker",onClick:function(){return ce(!ae)},children:Object(g.jsx)(le,{})}),ae&&Object(g.jsx)(M.a,{onOutsideClick:function(){ce(!1)},children:Object(g.jsx)(G.c,{className:"emoji-picker",onEmojiClick:function(e,t){p((function(t){return t+e.emoji}))},theme:G.b.DARK,previewConfig:{defaultCaption:"",defaultEmoji:null},emojiStyle:G.a.NATIVE})})]}),!x&&""===b.trim()&&Object(g.jsx)("button",{className:"input-tool",onClick:function(){Z(!0)},children:Object(g.jsx)("span",{children:"\ud83d\udc4d"})}),(""!==b.trim()||x)&&Object(g.jsx)("button",{type:"submit",className:"input-tool",children:Object(g.jsx)(Q,{})})]}),b.length>=900&&Object(g.jsx)("p",{className:"error",children:"Message can't be longer than 900 characters"})]})});n(103);function de(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],c=y().user,r=function(e,t){var n=Object(a.useState)(null),s=Object(l.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(null),o=Object(l.a)(i,2),d=o[0],b=o[1];return Object(a.useEffect)((function(){var n=j.collection(e).doc(t).onSnapshot((function(e){e.data()?(r(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id})),b(null)):b("No such document exists")}),(function(e){console.log(e.message),b("Failed to get document")}));return function(){return n()}}),[e,t]),{document:c,error:d}}("projects",Object(o.h)().id),i=r.error,d=r.document,b="",h="";return Object(a.useEffect)((function(){d&&d.assignedUsersId.forEach((function(e){e===c.uid&&s(!0)}))}),[d,c.uid]),i?Object(g.jsx)("div",{className:"error",children:i}):d?(d.assignedUsersPhotoURL.forEach((function(e){e!==c.photoURL&&(b=e)})),d.assignedUsersName.forEach((function(e){e!==c.displayName&&(h=e)})),Object(g.jsx)(g.Fragment,{children:n&&Object(g.jsxs)("div",{className:"chat",children:[c&&Object(g.jsxs)("div",{className:"chat__top-bar",children:[Object(g.jsx)(E,{src:b}),Object(g.jsx)("h3",{children:h})]}),Object(g.jsx)("div",{className:"vertical-container",children:Object(g.jsxs)("div",{className:"chat__comments",children:[Object(g.jsx)(S,{chat:d}),Object(g.jsx)(ue,{chat:d})]})})]})})):Object(g.jsx)("div",{className:"loading",children:"Loading..."})}var je=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(null),r=Object(l.a)(c,2),i=r[0],u=r[1],d=Object(a.useState)(!1),h=Object(l.a)(d,2),O=h[0],g=h[1],f=y().dispatch,x=Object(a.useState)(!1),v=Object(l.a)(x,2),N=v[0],w=v[1],k=Object(o.g)(),E=function(){var e=Object(C.a)(R.a.mark((function e(t,a){var s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),g(!0),e.prev=2,e.next=5,b.signInWithEmailAndPassword(t,a);case 5:return s=e.sent,e.next=8,j.collection("users").doc(s.user.uid).update({online:!0});case 8:f({type:"LOGIN",payload:s.user}),n||(g(!1),u(null)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n||(u(e.t0.message),g(!1));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(C.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),g(!0),e.prev=2,e.next=5,b.signInWithPopup(p);case 5:return t=e.sent,e.next=8,j.collection("users").doc(t.user.uid).update({online:!0});case 8:f({type:"LOGIN",payload:t.user}),n||(g(!1),u(null)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n||(u(e.t0.message),g(!1));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(C.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),g(!0),e.prev=2,e.next=5,b.signInWithPopup(m);case 5:return t=e.sent,e.next=8,j.collection("users").doc(t.user.uid).update({online:!0});case 8:f({type:"LOGIN",payload:t.user}),n||(g(!1),u(null)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n||(u(e.t0.message),g(!1));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(C.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),g(!0),w(!1),e.prev=3,e.next=6,b.sendPasswordResetEmail(t);case 6:n||(g(!1),u(null),w(!0),setTimeout((function(){k.push("/login")}),15e3)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),n||(u(e.t0.message),g(!1),w(!1));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){return s(!0)}}),[]),{login:E,loginWithGoogle:D,loginWithGithub:A,resetPassword:S,isPending:O,error:i,isFinished:N}},be=(n(59),n.p+"static/media/btn_google_dark_normal_ios.9fe90a17.svg"),he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII=";function pe(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),r=Object(l.a)(c,2),o=r[0],u=r[1],d=je(),j=d.login,b=d.loginWithGoogle,h=d.loginWithGithub,p=d.isPending,m=d.error;return Object(g.jsxs)("div",{className:"login",children:[Object(g.jsxs)("div",{className:"auth-decoration",children:[Object(g.jsx)("div",{className:"circle"}),Object(g.jsx)("div",{className:"blur"})]}),Object(g.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault(),j(n,o)},children:[Object(g.jsx)("div",{className:"auth-form__title",children:Object(g.jsx)("h2",{children:"Welcome back"})}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Email"}),Object(g.jsx)("input",{type:"email",required:!0,onChange:function(e){return s(e.target.value)},value:n,placeholder:"Enter your email"})]}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Password"}),Object(g.jsx)("input",{type:"password",required:!0,onChange:function(e){return u(e.target.value)},value:o,placeholder:"Enter your password"})]}),Object(g.jsx)(i.b,{to:"/recover-password",className:"reset-password",children:"Forgot password?"}),!p&&Object(g.jsx)("button",{className:"btn",children:"Login"}),p&&Object(g.jsx)("button",{className:"btn",disabled:!0,children:"Loading"}),Object(g.jsx)("div",{className:"others-separator",children:Object(g.jsx)("span",{children:"or"})}),Object(g.jsxs)("button",{className:"google-btn",onClick:function(e){e.preventDefault(),b()},children:[Object(g.jsx)("img",{src:be,alt:"google logo"}),Object(g.jsx)("span",{children:"Sign in with google"})]}),Object(g.jsxs)("button",{className:"github-btn",onClick:function(e){e.preventDefault(),h()},children:[Object(g.jsx)("img",{src:he,alt:"github logo"}),Object(g.jsx)("span",{children:"Sign in with GitHub"})]}),Object(g.jsxs)("p",{className:"change-page",children:["Don't have an account? ",Object(g.jsx)(i.b,{to:"/signup",children:"Sign up"})]}),m&&Object(g.jsx)("div",{className:"error",children:m})]})]})}n(106);function me(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),r=Object(l.a)(c,2),o=r[0],u=r[1],d=Object(a.useState)(""),O=Object(l.a)(d,2),f=O[0],x=O[1],v=Object(a.useState)(null),N=Object(l.a)(v,2),w=N[0],k=N[1],E=Object(a.useState)(null),D=Object(l.a)(E,2),A=D[0],S=D[1],I=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(null),r=Object(l.a)(c,2),i=r[0],o=r[1],u=Object(a.useState)(!1),d=Object(l.a)(u,2),O=d[0],g=d[1],f=y().dispatch,x=function(){var e=Object(C.a)(R.a.mark((function e(t,a,s,c){var r,i,l,u;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(null),g(!0),e.prev=2,e.next=5,b.createUserWithEmailAndPassword(t,a);case 5:if(r=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return i="thumbnails/".concat(r.user.uid,"/").concat(c.name),e.next=11,h.ref(i).put(c);case 11:return l=e.sent,e.next=14,l.ref.getDownloadURL();case 14:return u=e.sent,e.next=17,r.user.updateProfile({displayName:s,photoURL:u});case 17:return e.next=19,j.collection("users").doc(r.user.uid).set({online:!0,displayName:s,photoURL:u});case 19:f({type:"LOGIN",payload:r.user}),n||(g(!1),o(null)),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),n||(o(e.t0.message),g(!1));case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t,n,a,s){return e.apply(this,arguments)}}(),v=function(){var e=Object(C.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(null),g(!0),e.prev=2,e.next=5,b.signInWithPopup(p);case 5:if(t=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return e.next=10,t.user.updateProfile({displayName:t.user.displayName,photoURL:t.user.photoURL});case 10:return e.next=12,j.collection("users").doc(t.user.uid).set({online:!0,displayName:t.user.displayName,photoURL:t.user.photoURL});case 12:f({type:"LOGIN",payload:t.user}),n||(g(!1),o(null)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),n||(o(e.t0.message),g(!1));case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(C.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(null),g(!0),e.prev=2,e.next=5,b.signInWithPopup(m);case 5:if(t=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return e.next=10,t.user.updateProfile({displayName:t.additionalUserInfo.username,photoURL:t.user.photoURL});case 10:return e.next=12,j.collection("users").doc(t.user.uid).set({online:!0,displayName:t.user.displayName,photoURL:t.user.photoURL});case 12:f({type:"LOGIN",payload:t.user}),n||(g(!1),o(null)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),n||(o(e.t0.message),g(!1));case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){return s(!0)}}),[]),{signup:x,signInWithGoogle:v,signInWithGithub:N,error:i,isPending:O}}(),U=I.signup,L=I.signInWithGoogle,T=I.signInWithGithub,B=I.isPending,P=I.error;return Object(g.jsxs)("div",{className:"signup",children:[Object(g.jsxs)("div",{className:"auth-decoration",children:[Object(g.jsx)("div",{className:"circle"}),Object(g.jsx)("div",{className:"blur"})]}),Object(g.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault(),U(n,o,f,w)},children:[Object(g.jsx)("div",{className:"auth-form__title",children:Object(g.jsx)("h2",{children:"Join us"})}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Email:"}),Object(g.jsx)("input",{type:"email",required:!0,onChange:function(e){return s(e.target.value)},value:n,placeholder:"Aa"})]}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Password:"}),Object(g.jsx)("input",{type:"password",required:!0,onChange:function(e){return u(e.target.value)},value:o,placeholder:"Aa"})]}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Display name:"}),Object(g.jsx)("input",{type:"text",required:!0,onChange:function(e){return x(e.target.value)},value:f,placeholder:"Aa"})]}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Profile thumbnail:"}),Object(g.jsx)("input",{type:"file",required:!0,onChange:function(e){k(null);var t=e.target.files[0];t?t.type.includes("image")?!t.size>1e5?S("Image file size must be less than 100kb"):(S(null),k(t)):S("Selected file must be an image"):S("Please select a file")}}),A&&Object(g.jsx)("div",{className:"error",children:A})]}),!B&&Object(g.jsx)("button",{className:"btn",children:"Sign up"}),B&&Object(g.jsx)("button",{className:"btn",disabled:!0,children:"Loading"}),Object(g.jsx)("div",{className:"others-separator",children:Object(g.jsx)("span",{children:"or"})}),Object(g.jsxs)("button",{className:"google-btn",onClick:function(e){e.preventDefault(),L()},children:[Object(g.jsx)("img",{src:be,alt:"google logo"}),Object(g.jsx)("span",{children:"Sign in with google"})]}),Object(g.jsxs)("button",{className:"github-btn",onClick:function(e){e.preventDefault(),T()},children:[Object(g.jsx)("img",{src:he,alt:"github logo"}),Object(g.jsx)("span",{children:"Sign in with GitHub"})]}),Object(g.jsxs)("p",{className:"change-page",children:["Already have an account? ",Object(g.jsx)(i.b,{to:"/login",children:"Login"})]}),P&&Object(g.jsx)("div",{className:"error",children:P})]})]})}function Oe(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{class:"privacy-section",children:[Object(g.jsx)("h3",{children:"Zbieranie danych"}),Object(g.jsx)("p",{children:"Kiedy zbieramy Twoje dane? Tw\xf3j email oraz has\u0142o zapisywane s\u0105 podczas rejestracji na naszej stronie."})]}),Object(g.jsxs)("div",{class:"privacy-section",children:[Object(g.jsx)("h3",{children:"Cele przetwarzania danych"}),Object(g.jsx)("p",{children:"Twoje dane zebrane podczas rejestracji przetwarzane s\u0105 jedynie w celu umo\u017cliwienia korzystania ze strony. Nie udost\u0119pniamy ich nikomu, nie sprzedajemy ich. Rejestracja jest dobrowolna."})]}),Object(g.jsxs)("div",{class:"privacy-section",children:[Object(g.jsx)("h3",{children:"Bezpiecze\u0144stwo danych"}),Object(g.jsx)("p",{children:"Twoje dane s\u0105 automatycznie szyfrowane przez us\u0142ug\u0119 firebase od google. Nikt nieautoryzowany nie ma dost\u0119pu do twoich danych."})]}),Object(g.jsxs)("div",{class:"privacy-section",children:[Object(g.jsx)("h3",{children:"Usuwanie danych"}),Object(g.jsx)("p",{children:'Je\u015bli zrezygnujesz z u\u017cywania naszej aplikacji w ka\u017cdym momencie mo\u017cesz do nas napisa\u0107 na maila "matkowsky808@gmail" lub wykorzysta\u0107 funkcj\u0119 w ustawieniach, aby usun\u0105\u0107 konto oraz swoje dane.'})]}),Object(g.jsxs)("div",{class:"privacy-section",children:[Object(g.jsx)("h3",{children:"Pozosta\u0142e informacje"}),Object(g.jsx)("p",{children:Object(g.jsx)("span",{children:"W razie jakichkolwiek pyta\u0144, prosimy o kontakt na adresie mailowym: matkowsky808@gmail.com"})})]})]})}var ge=n.p+"static/media/shrek-gif.df094210.gif";function fe(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],s=t[1],c=je(),r=c.resetPassword,o=c.isPending,u=c.error,d=c.isFinished,j=Object(a.useState)(15),b=Object(l.a)(j,2),h=b[0],p=b[1],m=function(e){e.preventDefault(),r(n)};Object(a.useEffect)((function(){!0===d&&O()}),[d]);var O=function(){var e=setInterval((function(){h<=0?clearInterval(e):p((function(e){return e-1}))}),1e3)};return Object(g.jsxs)("div",{className:"login",children:[Object(g.jsxs)("div",{className:"auth-decoration",children:[Object(g.jsx)("div",{className:"circle"}),Object(g.jsx)("div",{className:"blur"})]}),Object(g.jsxs)("div",{className:"auth-form",children:[d&&Object(g.jsxs)("div",{className:"text-center email-sent",children:[Object(g.jsx)("img",{src:ge,alt:"",className:"email-sent__img"}),Object(g.jsx)("h2",{children:"Check your email"}),Object(g.jsx)("p",{children:"A password reset email has been sent to your email address"}),Object(g.jsx)(i.b,{to:"/login",children:Object(g.jsx)("button",{className:"btn",children:"Back to Login"})}),Object(g.jsxs)("p",{className:"redirect",children:["Redirecting in ",h," s"]})]}),!d&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"auth-form__title",children:[Object(g.jsx)("h2",{children:"Forgot password?"}),Object(g.jsx)("p",{children:"Enter your email below to recieve password reset instructions"})]}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Email"}),Object(g.jsx)("input",{type:"email",required:!0,onChange:function(e){return s(e.target.value)},value:n,placeholder:"Enter your email",onKeyDown:function(e){return function(e){"Enter"===e.code&&m(e)}(e)}})]}),!o&&Object(g.jsx)("button",{className:"btn",onClick:m,children:"Reset password"}),o&&Object(g.jsx)("button",{className:"btn",disabled:!0,children:"Sending email..."}),Object(g.jsxs)("p",{className:"change-page",children:["No longer have Alzheimer? ",Object(g.jsx)(i.b,{to:"/login",children:"Login"})]}),u&&Object(g.jsx)("div",{className:"error",children:u})]})]})]})}var xe=n(39),ve=function(e,t,n){var s=Object(a.useState)(null),c=Object(l.a)(s,2),r=c[0],i=c[1],o=Object(a.useState)(null),d=Object(l.a)(o,2),b=d[0],h=d[1],p=Object(a.useRef)(t).current,m=Object(a.useRef)(n).current;return Object(a.useEffect)((function(){var t,n,a=j.collection(e);p&&(a=(t=a).where.apply(t,Object(U.a)(p)));m&&(a=(n=a).orderBy.apply(n,Object(U.a)(m)));var s=a.onSnapshot((function(e){var t=[];e.docs.forEach((function(e){t.push(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id}))})),i(t),h(null)}),(function(e){console.log(e),h("could not fetch the data")}));return function(){return s()}}),[e,p,m]),{documents:r,error:b}},ye=n(8),Ne=n(66);n(107);function we(e){var t=e.projects,n=y().user,a=ve("users").documents,s=[],c="",r="",o="",l={about:"",minute:"min","less than a minute":"1 min"};return Object(g.jsxs)("div",{className:"chat-list",onMouseMove:function(e){var t,n=Object(ye.a)(document.getElementsByClassName("card"));try{for(n.s();!(t=n.n()).done;){var a=t.value,s=a.getBoundingClientRect(),c=e.clientX-s.left,r=e.clientY-s.top;a.style.setProperty("--mouse-x","".concat(c,"px")),a.style.setProperty("--mouse-y","".concat(r,"px"))}}catch(i){n.e(i)}finally{n.f()}},children:[0===t.length&&Object(g.jsx)("p",{children:"No chats yet!"}),t.map((function(e){return Object(g.jsx)(i.b,{to:"/projects/".concat(e.id),className:"card",children:Object(g.jsxs)("div",{className:"card-content",children:[e.assignedUsersPhotoURL.forEach((function(e){e!==n.photoURL&&(c=e)})),e.assignedUsersName.forEach((function(e){e!==n.displayName&&(r=e)})),e.assignedUsersId.forEach((function(e){e!==n.uid&&(o=e)})),a&&a.forEach((function(e){e.online&&!s.includes(e.id)&&s.push(e.id)})),Object(g.jsxs)("div",{className:"avatar-container",children:[Object(g.jsx)(E,{src:c}),s.includes(o)&&Object(g.jsx)("span",{className:"online-user",children:Object(g.jsx)("div",{className:"status-circle"})})]}),Object(g.jsxs)("div",{className:"chat-info",children:[Object(g.jsxs)("p",{className:"display-name",children:[r.substring(0,18),Object(g.jsx)("span",{children:r.length>=18&&"..."})]}),Object(g.jsxs)("div",{className:"last-chat",children:[Object(g.jsxs)("span",{className:"last-message",children:[e&&e.messages[e.messages.length-1]&&e.messages[e.messages.length-1].createdBy===n.uid&&"You: ",0!==e.messages.length&&e.messages[e.messages.length-1].content&&void 0===e.messages[e.messages.length-1].fileType&&e.messages[e.messages.length-1].content.substring(0,15),0!==e.messages.length&&!e.messages[e.messages.length-1].content&&"image"===e.messages[e.messages.length-1].fileType&&"sent a photo",0!==e.messages.length&&!e.messages[e.messages.length-1].content&&"video"===e.messages[e.messages.length-1].fileType&&"sent a video",0!==e.messages.length&&e.messages[e.messages.length-1].content&&e.messages[e.messages.length-1].content.length>=15&&"...",0===e.messages.length&&"No messages yet"]}),0!==e.messages.length&&Object(g.jsx)("div",{className:"dot"}),Object(g.jsx)("span",{className:"comment-date",children:0!==e.messages.length&&Object(Ne.a)(e.messages[e.messages.length-1].createdAt.toDate(),{addSuffix:!1}).replace(/\b(?:about|less than a minute)\b/gi,(function(e){return l[e]}))})]})]})]})},e.id)}))]})}n(108);function ke(){var e=y().user,t=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(null),r=Object(l.a)(c,2),i=r[0],o=r[1],u=Object(a.useState)(!1),d=Object(l.a)(u,2),h=d[0],p=d[1],m=y(),O=m.dispatch,g=m.user,f=function(){var e=Object(C.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(null),p(!0),e.prev=2,t=g.uid,e.next=6,j.collection("users").doc(t).update({online:!1});case 6:return e.next=8,b.signOut();case 8:O({type:"LOGOUT"}),n||(p(!1),o(null)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n||(o(e.t0.message),p(!1));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){return s(!0)}}),[]),{logout:f,error:i,isPending:h}}(),n=t.logout,s=t.isPending,c=ve("users").documents,r=ve("projects",["assignedUsersId","array-contains",e.uid],["updatedAt","desc"]).documents,i=Object(a.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],h=function(){var t=Object(C.a)(R.a.mark((function t(n){var a;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.uid>n.id?e.uid+n.id:n.id+e.uid,t.prev=1,t.next=4,Object(xe.b)(Object(xe.a)(j,"projects",a));case 4:if(t.sent.exists()||e.uid===n.id){t.next=8;break}return t.next=8,Object(xe.c)(Object(xe.a)(j,"projects",a),{id:a,assignedUsersId:[e.uid,n.id],assignedUsersName:[e.displayName,n.displayName],assignedUsersPhotoURL:[e.photoURL,n.photoURL],messages:[],updatedAt:O.fromDate(new Date)});case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:d("");case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"user-list",children:[Object(g.jsx)("div",{className:"search",children:Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"search-form",children:Object(g.jsxs)("label",{children:[Object(g.jsx)("i",{class:"fa-solid fa-magnifying-glass"}),Object(g.jsx)("input",{type:"text",placeholder:"Find a user",onChange:function(e){return d(e.target.value)},value:u})]})}),""!==u&&Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"add-users",children:[c&&c.filter((function(e){return e.displayName.toLowerCase().trim().replace(/\s+/g,"").includes(u)})).map((function(e){return Object(g.jsxs)("div",{className:"user-chat",onClick:function(){return h(e)},children:[Object(g.jsx)("img",{src:e.photoURL,alt:""}),Object(g.jsx)("div",{className:"user-chat-info",children:Object(g.jsx)("span",{children:e.displayName})})]},e.id)})),""===u.trim()&&Object(g.jsx)("span",{children:"User not found!"})]})}),Object(g.jsx)("div",{className:"chats",children:""===u&&r&&Object(g.jsx)(we,{projects:r})})]})}),Object(g.jsxs)("div",{className:"user",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)(E,{src:e.photoURL}),Object(g.jsx)("span",{children:e.displayName})]}),!s&&e&&Object(g.jsx)("button",{className:"btn",onClick:n,children:"Logout"}),s&&Object(g.jsx)("button",{className:"btn",disabled:!0,children:"Logging out..."})]})]})}var Ee=function(){var e=y(),t=e.user,n=e.authIsReady;return Object(g.jsx)("div",{className:"App",children:n&&Object(g.jsxs)(i.a,{children:[t&&Object(g.jsx)(ke,{}),Object(g.jsxs)(o.d,{children:[Object(g.jsxs)(o.b,{exact:!0,path:"/",children:[!t&&Object(g.jsx)(o.a,{to:"/login"}),t&&Object(g.jsx)(N,{})]}),Object(g.jsxs)(o.b,{path:"/projects/:id",children:[!t&&Object(g.jsx)(o.a,{to:"/login"}),t&&Object(g.jsx)(de,{})]}),Object(g.jsx)(o.b,{path:"/privacy-policy",children:Object(g.jsx)(Oe,{})}),Object(g.jsx)(o.b,{path:"/recover-password",children:Object(g.jsx)(fe,{})}),Object(g.jsxs)(o.b,{path:"/login",children:[t&&Object(g.jsx)(o.a,{to:"/"}),!t&&Object(g.jsx)(pe,{})]}),Object(g.jsxs)(o.b,{path:"/signup",children:[t&&Object(g.jsx)(o.a,{to:"/"}),!t&&Object(g.jsx)(me,{})]})]})]})})};r.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(v,{children:Object(g.jsx)(Ee,{})})}),document.getElementById("root"))},59:function(e,t,n){},72:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.918a8ce1.chunk.js.map