(this["webpackJsonpmessenger-copy"]=this["webpackJsonpmessenger-copy"]||[]).push([[0],{109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var s=n(2),c=n.n(s),a=n(39),r=n.n(a),i=(n(81),n(8)),o=n(18),l=n(36),u=n(10),d=n(37);n(126),n(83),n(127);d.a.initializeApp({apiKey:"AIzaSyBMB6C-_B61S1wd1RYAr34jomKZpvq16eA",authDomain:"better-react-messenger.firebaseapp.com",projectId:"better-react-messenger",storageBucket:"better-react-messenger.appspot.com",messagingSenderId:"381225253186",appId:"1:381225253186:web:43a9fb8cce6b202f31f0db"});var j=d.a.firestore(),b=d.a.auth(),m=d.a.storage(),h=new d.a.auth.GoogleAuthProvider,O=new d.a.auth.GithubAuthProvider;h.setCustomParameters({prompt:"select_account"});var p,f=d.a.firestore.Timestamp,g=n(1),x=Object(s.createContext)(),v=function(e,t){switch(t.type){case"LOGIN":return Object(u.a)(Object(u.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(u.a)(Object(u.a)({},e),{},{user:null});case"AUTH_IS_READY":return{user:t.payload,authIsReady:!0};default:return e}},N=function(e){var t=e.children,n=Object(s.useReducer)(v,{user:null,authIsReady:!1}),c=Object(i.a)(n,2),a=c[0],r=c[1];return Object(s.useEffect)((function(){var e=b.onAuthStateChanged((function(t){r({type:"AUTH_IS_READY",payload:t}),e()}))}),[]),Object(g.jsx)(x.Provider,{value:Object(u.a)(Object(u.a)({},a),{},{dispatch:r}),children:t})},y=function(){var e=Object(s.useContext)(x);if(!e)throw Error("useAuthContext must be used inside an AuthContextProvider");return e},w=n(66),k=n(51);function C(e,t){var n=!1;if(e){"#"===e[0]&&(e=e.slice(1),n=!0);var s=parseInt(e.substring(0,2),16),c=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16);return(s+=t)>255?s=255:s<0&&(s=0),(c+=t)>255?c=255:c<0&&(c=0),(a+=t)>255?a=255:a<0&&(a=0),(n?"#":"")+(1===s.toString(16).length?"0"+s.toString(16):s.toString(16))+(1===c.toString(16).length?"0"+c.toString(16):c.toString(16))+(1===a.toString(16).length?"0"+a.toString(16):a.toString(16))}}var S=Object(k.b)(p||(p=Object(w.a)(["\n#root {\n    --bg-dark: ",";\n    --bg-dark-lighten5: ",";\n    --bg-dark-lighten10: ",";\n    --bg-dark-lighten15: ",";\n    --bg-dark-lighten20: ",";\n    --bg-dark-lighten90: ",";\n    --bg-dark-lighten120: ",";\n    --bg-dark-darken80: #0000ff;\n\n    --bg-secondary: ",";\n\t--bg-secondary-lighten5: ",";\n\t--bg-secondary-lighten10: ",";\n\t--bg-secondary-lighten15: ",";\n\t--bg-secondary-lighten50: ",";\n\n    --input-bg: ",";\n    --input-text: ",";\n\t--input-border: ",";\n\n    --message-bg: ",";\n    --message-color: ",";\n\t--message-border: ",";\n\t\n    --message-bg-owner: ",";\n    --message-color-owner: ",";\n\t--message-border-owner: ",";\n\t\n    --text-accent: ",";\n    --text-accent-darken25: ",";\n    --text-accent-darken35: ",";\n\n    --border-radius: ","px;\n    --border-color: ",";\n\n    --text-primary:  ",";\n    --text-primary-darken100:  ",";\n\n    --text-heading: ",";\n    --text-low-contrast: ","; \n    --text-mid-contrast: ","; \n\t\n    --btn-text: ",";\n\n}\n"])),(function(e){return e.theme.colors.bgDark}),(function(e){return C(e.theme.colors.bgDark,5)}),(function(e){return C(e.theme.colors.bgDark,10)}),(function(e){return C(e.theme.colors.bgDark,15)}),(function(e){return C(e.theme.colors.bgDark,20)}),(function(e){return C(e.theme.colors.bgDark,90)}),(function(e){return C(e.theme.colors.bgDark,120)}),(function(e){return e.theme.colors.bgSecondary}),(function(e){return C(e.theme.colors.bgSecondary,5)}),(function(e){return C(e.theme.colors.bgSecondary,10)}),(function(e){return C(e.theme.colors.bgSecondary,15)}),(function(e){return C(e.theme.colors.bgSecondary,50)}),(function(e){return e.theme.colors.inputBg}),(function(e){return e.theme.colors.inputText}),(function(e){return e.theme.colors.inputBorder}),(function(e){return e.theme.colors.msgBg}),(function(e){return e.theme.colors.messageColor}),(function(e){return e.theme.colors.msgBorder}),(function(e){return function(e){var t=null;return e.colors.msgBgOwner.forEach((function(e){t=null===t?"".concat(e.value):"".concat(t,", ").concat(e.value)})),1===e.colors.msgBgOwner.length?t:"linear-gradient(".concat(t,")")}(e.theme)}),(function(e){return e.theme.colors.messageColorOwner}),(function(e){return e.theme.colors.msgBorderOwner}),(function(e){return e.theme.colors.textAccent}),(function(e){return C(e.theme.colors.textAccent,-25)}),(function(e){return C(e.theme.colors.textAccent,-55)}),(function(e){return e.theme.borderRadius}),(function(e){return C(e.theme.colors.bgDark,15)}),(function(e){return e.theme.colors.textPrimary}),(function(e){return C(e.theme.colors.textPrimary,-100)}),(function(e){return C(e.theme.colors.textPrimary,30)}),(function(e){return e.theme.colors.textLowContrast}),(function(e){return C(e.theme.colors.textLowContrast,40)}),(function(e){return e.theme.colors.buttonColor})),R=n(16),D=function(e,t,n){var c=Object(s.useState)(null),a=Object(i.a)(c,2),r=a[0],o=a[1],l=Object(s.useState)(null),d=Object(i.a)(l,2),b=d[0],m=d[1],h=Object(s.useRef)(t).current,O=Object(s.useRef)(n).current;return Object(s.useEffect)((function(){var t,n,s=j.collection(e);h&&(s=(t=s).where.apply(t,Object(R.a)(h)));O&&(s=(n=s).orderBy.apply(n,Object(R.a)(O)));var c=s.onSnapshot((function(e){var t=[];e.docs.forEach((function(e){t.push(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id}))})),o(t),m(null)}),(function(e){console.log(e),m("could not fetch the data")}));return function(){return c()}}),[e,h,O]),{documents:r,error:b}};n(87),n(88);function E(){return Object(g.jsx)("div",{className:"dashboard"})}var T=function(e,t){var n=Object(s.useState)(null),c=Object(i.a)(n,2),a=c[0],r=c[1],o=Object(s.useState)(null),l=Object(i.a)(o,2),d=l[0],b=l[1];return Object(s.useEffect)((function(){if(null!==t){var n=j.collection(e).doc(t).onSnapshot((function(e){e.data()?(r(Object(u.a)(Object(u.a)({},e.data()),{},{id:e.id})),b(null)):b("No such document exists")}),(function(e){console.log(e.message),b("Failed to get document")}));return function(){return n()}}}),[e,t]),{document:a,error:d}},A=n(0),_=n.n(A),B=n(3),I={document:null,isPending:!1,error:null,success:null},U=function(e,t){switch(t.type){case"IS_PENDING":return{isPending:!0,document:null,success:!1,error:null};case"ADDED_DOCUMENT":return{isPending:!1,document:t.payload,success:!0,error:null};case"DELETED_DOCUMENT":return{isPending:!1,document:null,success:!0,error:null};case"UPDATED_DOCUMENT":return{isPending:!1,document:t.payload,success:!0,error:null};case"ERROR":return{isPending:!1,document:null,success:!1,error:t.payload};default:return e}},L=function(e){var t=Object(s.useReducer)(U,I),n=Object(i.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)(!1),o=Object(i.a)(r,2),l=o[0],d=o[1],b=j.collection(e),m=function(e){l||a(e)},h=function(){var e=Object(B.a)(_.a.mark((function e(t){var n,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"IS_PENDING"}),e.prev=1,n=f.fromDate(new Date),e.next=5,b.add(Object(u.a)(Object(u.a)({},t),{},{createdAt:n}));case 5:s=e.sent,m({type:"ADDED_DOCUMENT",payload:s}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),m({type:"ERROR",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(B.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"IS_PENDING"}),e.prev=1,e.next=4,b.doc(t).delete();case 4:m({type:"DELETED_DOCUMENT"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),m({type:"ERROR",payload:"could not delete"});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(B.a)(_.a.mark((function e(t,n){var s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"IS_PENDING"}),e.prev=1,e.next=4,b.doc(t).update(n);case 4:return s=e.sent,m({type:"UPDATED_DOCUMENT",payload:s}),e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(1),m({type:"ERROR",payload:e.t0.message}),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){return function(){return d(!0)}}),[]),{addDocument:h,deleteDocument:O,updateDocument:p,response:c}},P=function(){var e,t,n,s,c,a,r,i=(new Date).toLocaleDateString(),o=[];return{formatDate:function(r){var l=r.createdAt.toDate();return t=(o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"])[l.getDay()],s=l.getFullYear(),n=l.getMonth()+1<10?"0"+l.getMonth()+1:l.getMonth()+1,e=l.getDate()<10?"0"+l.getDate().toString():l.getDate().toString(),a="".concat(e,"/").concat(n,"/").concat(s),c=l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),a===i?c:function(e){var t=new Date;return t.setDate(t.getDate()-(t.getDay()-1)),t.setHours(0,0,0,0),t.getTime()<=e.getTime()&&e.getTime()<t.getTime()+6048e5}(l)?"".concat(t,". ").concat(c):"".concat(e,".").concat(n,".").concat(s,", ").concat(c)},dates:function(i){var l=i.toDate();return t=(o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"])[l.getDay()],s=l.getFullYear(),n=l.getMonth()+1<10?"0"+l.getMonth()+1:l.getMonth()+1,e=l.getDate()<10?"0"+l.getDate().toString():l.getDate().toString(),a="".concat(e,"/").concat(n,"/").concat(s),c=l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),r="".concat(e,".").concat(n,".").concat(s,", ").concat(c),{weekday:o,dayOfWeek:t,year:s,month:n,dayOfMonth:e,curDate:a,hour:c,fullDate:r}},dayOfMonth:e,dayOfWeek:t,month:n,year:s,hour:c,curDate:a}},M=n(70),z=n.n(M),G=n(28),F=n(34),W=n.n(F);n(109),n(110);function V(e){var t=e.src;return Object(g.jsx)("div",{className:"avatar",children:Object(g.jsx)("img",{src:t,alt:""})})}var J="keyup";n(111);function H(e){var t=e.children,n=e.show,c=e.setShow,a=e.onClose,r=e.disableOCH;Object(s.useEffect)((function(){!1===n&&a&&a()}),[n]);return function(e){var t=Object(s.useCallback)((function(t){"Escape"===t.key&&e()}),[e]);Object(s.useEffect)((function(){return document.addEventListener(J,t,!1),function(){document.removeEventListener(J,t,!1)}}),[t])}((function(){c()})),n&&Object(g.jsx)("div",{className:"modal",children:Object(g.jsx)(W.a,{onOutsideClick:function(){c()},disabled:r,children:Object(g.jsxs)("div",{className:"modal__content",children:[t,Object(g.jsx)("i",{className:"fa-solid fa-xmark close-btn",onClick:function(){return c()}})]})})})}function Z(e){var t=e.message,n=e.elements,c=e.i,a=e.chat,r=e.onMessageResponse,o=e.setMessageToDelete,l=e.showImage,d=e.setShowImage,j=e.otherUser,b=y().user,m=L("projects").updateDocument,h=P().formatDate,O=Object(s.useState)(null),p=Object(i.a)(O,2),f=p[0],x=p[1],v=Object(s.useState)(!1),N=Object(i.a)(v,2),w=N[0],k=N[1],C=Object(s.useState)([]),S=Object(i.a)(C,2),D=S[0],E=S[1],T=function(e,t){if(e[t]&&e[t-1]){var n=e[t].createdAt.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),s=e[t-1].createdAt.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),c=new Date("01/01/2022 "+n+":00").getTime(),a=new Date("01/01/2022 "+s+":00").getTime();return Math.abs(c-a)>=9e5}},A=function(e,t){if(e[t+1]&&e[t]){var n=e[t+1].createdAt.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),s=e[t].createdAt.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),c=new Date("01/01/2022 "+n+":00").getTime(),a=new Date("01/01/2022 "+s+":00").getTime();return Math.abs(c-a)>=9e5}},I=function(){var e=Object(B.a)(_.a.mark((function e(t,n){var s,c,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.messages.indexOf(n),c=null,n.emojiReactions&&n.emojiReactions.length>0&&n.emojiReactions.forEach((function(e){null!==e&&e.id!==b.uid&&(c=e)})),r={id:b.uid,photoURL:b.photoURL,content:t.emoji,displayName:b.displayName},a.messages[s]=Object(u.a)(Object(u.a)({},a.messages[s]),{},{emojiReactions:[c||null,Object(u.a)({},r)]}),e.prev=5,e.next=8,m(a.id,{messages:Object(R.a)(a.messages)});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t,n){return e.apply(this,arguments)}}(),U=function(e){var t;return a.assignedUsers.forEach((function(n){n.id===e.id&&(t=""!==n.nickname?n.nickname:n.displayName)})),t},M=function(){var e=Object(B.a)(_.a.mark((function e(t,n){var s,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null,n.id!==b.uid){e.next=15;break}return t.emojiReactions.length>0&&t.emojiReactions.forEach((function(e){null!==e&&e.id!==b.uid&&(s=e)})),c=a.messages.indexOf(t),a.messages[c]=Object(u.a)(Object(u.a)({},a.messages[c]),{},{emojiReactions:[s]}),e.prev=5,e.next=8,m(a.id,{messages:Object(R.a)(a.messages)});case 8:E([]),k(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[t.isSpecial&&Object(g.jsx)("div",{className:"messages__centered mb05",children:t.content}),!t.isSpecial&&Object(g.jsxs)(g.Fragment,{children:[T(n,c)&&Object(g.jsx)("div",{className:"messages__centered mb1 mt2",children:h(t)}),Object(g.jsxs)("li",{className:"".concat(function(e,t,n,s,c){return!n||t&&t.createdBy===e.createdBy&&null===n.response&&!s&&null===e.response||n.createdBy!==e.createdBy||null!==n.response||c?!t||!n||t.createdBy!==e.createdBy&&null===t.response||n.createdBy!==e.createdBy||null!==n.response||s||c?t&&t.createdBy===e.createdBy&&null===e.response&&(!n&&null===e.response||n&&(null!==n.response||n.createdBy!==e.createdBy||c))&&!s?e.createdBy===b.uid?"group-bottom owner":"group-bottom":e.createdBy===b.uid?"owner":"":e.createdBy===b.uid?"group-middle owner":"group-middle":e.createdBy===b.uid?"group-top owner":"group-top"}(t,n[c-1],n[c+1],T(n,c),A(n,c))," ").concat(t.deleted?"deleted":""," ").concat(t.emojiReactions?"emoji-response":""),id:t.id,children:[t.createdBy!==b.uid&&(n[c+1]&&(!n[c-1]||n[c-1].createdBy!==t.createdBy||null!==n[c+1].response||T(n,c)||null!==t.response)&&n[c+1].createdBy===t.createdBy&&null===n[c+1].response&&!A(n,c)||!(n[c-1]&&n[c+1]&&(n[c-1].createdBy===t.createdBy||null!==n[c-1].response)&&n[c+1].createdBy===t.createdBy&&null===n[c+1].response&&!T(n,c)&&!A(n,c)||n[c-1]&&n[c-1].createdBy===t.createdBy&&null===t.response&&(!n[c+1]&&null===t.response||n[c+1]&&(null!==n[c+1].response||n[c+1].createdBy!==t.createdBy||A(n,c)))&&!T(n,c)))&&Object(g.jsx)("p",{className:"message-author",children:j.nickname}),null!==t.response&&Object(g.jsxs)("div",{onClick:function(){return function(e){var t=document.getElementById(e);t.scrollIntoView({block:"center"}),setTimeout((function(){t.classList.add("pop"),setTimeout((function(){t.classList.remove("pop")}),800)}),400)}(a.messages[t.response].id)},className:"response ".concat(a.messages[t.response].deleted?"deleted":""),children:[t.createdBy!==b.uid&&Object(g.jsx)("div",{className:"left-margin"}),a.messages[t.response].content&&Object(g.jsx)("div",{className:"response__message",children:a.messages[t.response].content.substring(0,55)}),Object(g.jsx)("div",{className:"response__img",children:a.messages[t.response].image&&("image"===a.messages[t.response].fileType?Object(g.jsx)("img",{src:a.messages[t.response].image,alt:""}):Object(g.jsx)("video",{src:a.messages[t.response].image}))})]}),Object(g.jsxs)("div",{className:"message-content",children:[t.createdBy!==b.uid&&Object(g.jsx)("div",{className:"left-margin",children:!(n[c-1]&&n[c+1]&&(n[c-1].createdBy===t.createdBy||null!==n[c-1].response)&&n[c+1].createdBy===t.createdBy&&null===n[c+1].response&&!T(n,c)&&!A(n,c))&&!(n[c+1]&&(!n[c-1]||n[c-1].createdBy!==t.createdBy||null!==n[c+1].response||T(n,c)||null!==t.response)&&n[c+1].createdBy===t.createdBy&&null===n[c+1].response&&!A(n,c))&&Object(g.jsx)(V,{src:t.photoURL})}),Object(g.jsxs)("div",{className:"message-content__text",style:t.image?{padding:0,backgroundColor:"transparent"}:null,children:[t.content&&Object(g.jsx)("p",{children:t.content}),t.image&&"image"===t.fileType&&Object(g.jsxs)("div",{className:"file-message",onClick:function(e){return function(e){l!==e.target.src&&d(e.target.src)}(e)},children:[Object(g.jsx)("img",{src:t.image,alt:""}),Object(g.jsx)("div",{className:"file-message__preview",children:Object(g.jsx)("i",{className:"fa-solid fa-up-right-and-down-left-from-center"})})]}),t.image&&"video"===t.fileType&&Object(g.jsxs)("div",{className:"file-message",children:[Object(g.jsx)("video",{src:t.image,controls:!0,playsInline:!0}),Object(g.jsx)("div",{className:"file-message__preview",children:Object(g.jsx)("i",{className:"fa-solid fa-up-right-and-down-left-from-center"})})]}),t.emojiReactions&&t.emojiReactions.length>0&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"emoji-reactions",onClick:function(){E(t.emojiReactions),k(!0)},children:t.emojiReactions.map((function(e){return null!==e?Object(g.jsxs)("div",{className:"emoji-reactions__reaction",children:[Object(g.jsx)("span",{className:"content",children:e.content}),Object(g.jsx)("span",{className:"display-name",children:U(e)})]},e.id):null}))}),Object(g.jsx)(H,{show:w,setShow:function(){return k(!1)},onClose:function(){return E([])},children:Object(g.jsxs)("div",{className:"show-reactions",children:[Object(g.jsx)("h3",{children:"Reactions"}),D.map((function(e){return null!==e?Object(g.jsxs)("div",{className:"reaction ".concat(e.id===b.uid?"cursor-pointer":""),onClick:function(){M(t,e)},children:[Object(g.jsxs)("div",{className:"reaction__author",children:[Object(g.jsx)(V,{src:e.photoURL}),Object(g.jsxs)("div",{children:[Object(g.jsx)("p",{children:e.displayName}),e.id===b.uid&&Object(g.jsx)("p",{children:"Click to delete"})]})]}),Object(g.jsx)("span",{className:"reaction__emoji",children:e.content})]},e.id):null}))]})})]})]}),f===t&&Object(g.jsxs)("div",{className:"react-with-emoji",children:[Object(g.jsx)(W.a,{onOutsideClick:function(){x(null)},disabled:f!==t,children:Object(g.jsx)(G.d,{className:"emoji-picker",onEmojiClick:function(e){I(e,t)},theme:G.c.DARK,previewConfig:{defaultCaption:"",defaultEmoji:null},width:300,height:400,emojiStyle:G.b.NATIVE})}),Object(g.jsx)("svg",{height:"12",viewBox:"0 0 25 12",width:"25","data-darkreader-inline-fill":"",children:Object(g.jsx)("path",{d:"M24.553.103c-2.791.32-5.922 1.53-7.78 3.455l-9.62 7.023c-2.45 2.54-5.78 1.645-5.78-2.487V2.085C1.373 1.191.846.422.1.102h24.453z"})})]}),!t.deleted&&Object(g.jsxs)("div",{className:"message-tools ".concat(f===t?"visible":""),children:[Object(g.jsx)("i",{className:"fa-regular fa-face-smile",onClick:function(){x(t)},children:Object(g.jsx)("div",{className:"tool-tip",children:"React"})}),b.uid===t.createdBy&&Object(g.jsx)("i",{className:"fa-solid fa-trash-can",onClick:function(){return o(t)},children:Object(g.jsx)("div",{className:"tool-tip",children:"Remove"})}),Object(g.jsx)("i",{className:"fa-solid fa-reply",onClick:function(){r(Number(a.messages.indexOf(t)))},children:Object(g.jsx)("div",{className:"tool-tip",children:"Reply"})})]}),Object(g.jsx)("div",{className:"message-createdAt ".concat(f===t?"hidden":""),children:h(t)})]})]})]})]})}n(112);var Y=function(e){var t=e.chat,n=e.onMessageResponse,c=e.setBottomDiv,a=e.otherUser,r=e.currentUser,o=y().user,d=P().dates,j=L("projects").updateDocument,b=Object(s.useState)(""),m=Object(i.a)(b,2),h=m[0],O=m[1],p=Object(s.useState)(null),f=Object(i.a)(p,2),x=f[0],v=f[1],N=Object(s.useState)(!1),w=Object(i.a)(N,2),k=w[0],C=w[1],S=Object(l.g)(),D=Object(s.useRef)(),E=Object(s.useRef)();Object(s.useEffect)((function(){c(D),A()}),[]),Object(s.useEffect)((function(){return S.listen((function(){c(D),A(),n(null)}))}),[S]),Object(s.useEffect)((function(){C(null!==x)}),[x,k]);var T=function(){var e=Object(B.a)(_.a.mark((function e(n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.uid!==n.createdBy){e.next=11;break}return t.messages[t.messages.indexOf(n)]=Object(u.a)(Object(u.a)({},t.messages[t.messages.indexOf(n)]),{},{content:"Message deleted",emojiReactions:null,deleted:!0}),e.prev=2,e.next=5,j(t.id,{messages:Object(R.a)(t.messages)});case 5:v(null),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){D.current&&D.current.scrollIntoView({block:"end"})};return Object(g.jsxs)("ul",{className:"messages custom-scrollbar",id:"messages",onScroll:function(e){return function(e){var t=e.target.scrollTop;-t<=300&&E.current.classList.remove("active"),-t>=300&&E.current.classList.add("active")}(e)},children:[h&&Object(g.jsxs)("div",{className:"full-img",children:[Object(g.jsxs)("div",{className:"full-img__background",children:[Object(g.jsx)("div",{className:"backdrop-blur"}),Object(g.jsx)("img",{src:h,alt:"",className:""})]}),Object(g.jsx)("div",{className:"wrapper",children:Object(g.jsx)("img",{src:h,alt:"",className:"full-img__img"})}),Object(g.jsxs)("div",{className:"full-img__tools",children:[Object(g.jsx)("div",{className:"tool",onClick:function(){z.a.saveAs(h)},children:Object(g.jsx)("i",{className:"fa-solid fa-download"})}),Object(g.jsx)("div",{className:"tool",onClick:function(){O("")},children:Object(g.jsx)("i",{className:"fa-solid fa-xmark"})})]})]}),Object(g.jsxs)("div",{className:"messages-wrapper",children:[Object(g.jsxs)("div",{className:"messages__conversation-start",children:[Object(g.jsx)("p",{children:"This is the start of your conversation with this user"}),Object(g.jsx)("p",{children:d(t.createdAt).fullDate})]}),t.messages.length>0&&t.messages.map((function(e,s,c){return Object(g.jsx)(Z,{message:e,elements:c,i:s,chat:t,onMessageResponse:n,setMessageToDelete:v,showImage:h,setShowImage:O,otherUser:a,currentUser:r},e.id)})),Object(g.jsx)("div",{ref:D,className:"bottom-ref"})]}),Object(g.jsx)("div",{className:"scroll-down",onClick:function(){return A()},ref:E,children:Object(g.jsx)("i",{className:"fa-solid fa-arrow-down"})}),null!==x&&Object(g.jsx)(H,{show:k,setShow:function(){return v(null)},children:Object(g.jsxs)("div",{className:"confirm-message-delete",children:[Object(g.jsx)("h2",{children:"Delete message"}),Object(g.jsx)("p",{children:"Do you really want to delete this message?"}),Object(g.jsx)("p",{children:"Message to delete: "}),Object(g.jsxs)("div",{className:"message-to-delete custom-scrollbar",children:[x.content&&Object(g.jsxs)("span",{children:['"',x.content,'"']}),x.image&&Object(g.jsx)("img",{src:x.image,alt:""})]}),Object(g.jsxs)("div",{className:"vertical-btns",children:[Object(g.jsx)("button",{className:"btn btn--secondary",onClick:function(){v(null)},children:"Cancel"}),Object(g.jsx)("button",{className:"btn",onClick:function(){return T(x)},children:"Delete"})]})]})})]})},X=n(128),Q=n(52),q=n(72),K=(n(114),function(e){var t=e.chat,n=e.messageResponse,c=e.onMessageResponse,a=e.bottomDiv,r=e.inputRef,o=Object(X.a)(),l=L("projects"),u=l.updateDocument,d=l.response,j=y().user,b=Object(s.useState)(""),h=Object(i.a)(b,2),O=h[0],p=h[1],x=Object(s.useState)(null),v=Object(i.a)(x,2),N=v[0],w=v[1],k=Object(s.useState)(!1),C=Object(i.a)(k,2),S=C[0],D=C[1],E=Object(s.useState)(t.chatEmoji),T=Object(i.a)(E,2),A=T[0],I=T[1],U=Object(s.useState)(!1),P=Object(i.a)(U,2),M=P[0],z=P[1],F=Object(s.useState)(!1),V=Object(i.a)(F,2),J=V[0],H=V[1],Z=Object(s.useRef)(null);Object(s.useEffect)((function(){r.current.focus()}),[n]),Object(s.useEffect)((function(){t.assignedUsersId.forEach((function(e){e===j.uid&&D(!0)}))}),[D,t.assignedUsersId,j.uid]);var Y=function(){a.current.scrollIntoView({block:"end"})},K=function(){var e=Object(B.a)(_.a.mark((function e(){var s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(""!==(s={id:o,displayName:j.displayName,photoURL:j.photoURL,content:M?A:O,createdAt:f.fromDate(new Date),createdBy:j.uid,response:null!==n?n:null}).content.trim()&&O.length<900&&S)){e.next=5;break}return e.next=4,u(t.id,{messages:[].concat(Object(R.a)(t.messages),[s]),updatedAt:f.fromDate(new Date),isRead:!1});case 4:d.error||(Y(),p(""),z(!1),c(null));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(B.a)(_.a.mark((function e(){var s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:["image","video"].includes(N.type.split("/")[0])&&(s=Object(Q.b)(m,"imgs/".concat(t.assignedUsersId[0]+t.assignedUsersId[1],"/").concat(Object(X.a)()+N.name)),Object(Q.c)(s,N).then((function(e){Object(Q.a)(e.ref).then(function(){var e=Object(B.a)(_.a.mark((function e(s){var c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c={id:o,displayName:j.displayName,photoURL:j.photoURL,fileType:N.type.includes("image/")?"image":"video",image:s,createdAt:f.fromDate(new Date),createdBy:j.uid,response:null!==n?n:null},!S){e.next=5;break}return e.next=4,u(t.id,{messages:[].concat(Object(R.a)(t.messages),[c]),updatedAt:f.fromDate(new Date),isRead:!1});case 4:d.error||(Y(),w(null));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(B.a)(_.a.mark((function e(t){var n,s,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],s={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},e.prev=2,e.next=5,Object(q.a)(n,s);case 5:return c=e.sent,e.next=8,w(c);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),te=function(e){e.preventDefault(),N?$():K()},ne=Object(s.useState)(""),se=Object(i.a)(ne,2),ce=se[0],ae=se[1];return t&&Object(g.jsxs)("form",{onSubmit:te,children:[null!==n&&Object(g.jsxs)("div",{className:"response",children:[Object(g.jsxs)("div",{children:[Object(g.jsxs)("p",{className:"response__to",children:["Responding to"," ",Object(g.jsx)("span",{children:t.messages[n].displayName===j.displayName?"yourself":Object(g.jsx)("b",{children:t.messages[n].displayName})})]}),Object(g.jsxs)("p",{className:"response__content",children:[t.messages[n].content&&Object(g.jsxs)(g.Fragment,{children:[t.messages[n].content.substring(0,70),t.messages[n].content.length>70?Object(g.jsx)("span",{children:"..."}):""]}),t.messages[n].image&&"image"===t.messages[n].fileType?"Image":"",t.messages[n].image&&"video"===t.messages[n].fileType?"Video":""]})]}),Object(g.jsx)("div",{className:"response__close-btn",onClick:function(){return c(null)},children:Object(g.jsx)("i",{className:"fa-solid fa-xmark"})})]}),Object(g.jsxs)("div",{className:"add-comment",children:[Object(g.jsxs)("label",{className:"attach-image",children:[Object(g.jsx)("input",{ref:Z,type:"file",accept:"video/*, image/*",onChange:function(e){return function(e){ee(e),ae(URL.createObjectURL(e.target.files[0]))}(e)}}),Object(g.jsx)("i",{className:"fa-regular fa-image"})]}),Object(g.jsxs)("div",{className:"message-field",children:[Object(g.jsxs)("div",{className:"column",children:[N&&Object(g.jsx)("div",{className:"thumbnails",children:Object(g.jsxs)("div",{className:"file-thumbnail",children:[Object(g.jsx)("img",{src:ce,alt:""}),Object(g.jsx)("button",{className:"remove-img",onClick:function(e){return function(e){e.preventDefault(),Z.current.value="",w(null)}(e)},children:Object(g.jsx)("i",{className:"fa-solid fa-xmark close-btn"})})]})}),Object(g.jsx)("label",{children:Object(g.jsx)("input",{maxLength:"900",placeholder:"Aa",onChange:function(e){return p(e.target.value)},value:O,onKeyDown:function(e){return function(e){"Enter"===e.code&&te(e)}(e)},ref:r})})]}),Object(g.jsx)("button",{className:"toggle-emoji-picker",onClick:function(e){e.preventDefault(),H(!J)},children:Object(g.jsx)("i",{className:"fa-regular fa-face-smile"})}),J&&Object(g.jsx)(W.a,{onOutsideClick:function(){H(!1)},children:Object(g.jsx)(G.d,{className:"emoji-picker",onEmojiClick:function(e){!function(e){p((function(t){return t+e.emoji}))}(e)},theme:G.c.DARK,previewConfig:{defaultCaption:"",defaultEmoji:null},emojiStyle:G.b.NATIVE})})]}),!N&&""===O.trim()&&Object(g.jsx)("button",{className:"input-tool",onClick:function(e){I(e.target.innerText),z(!0)},children:t.chatEmoji&&Object(g.jsx)(G.a,{unified:t.chatEmoji,emojiStyle:G.b.NATIVE,size:33})}),(""!==O.trim()||N)&&Object(g.jsx)("button",{type:"submit",className:"input-tool",children:Object(g.jsx)("i",{className:"fa-solid fa-paper-plane"})})]}),O.length>=900&&Object(g.jsx)("p",{className:"error",children:"Message can't be longer than 900 characters"})]})}),$=n.p+"static/media/british-person.a8ef58d2.jpg",ee=function(e){var t=e.otherUserMessage,n=e.curUserMessage,s=e.bgDark,c=e.borderRadius,a=e.textColors,r=e.inputColors,i=e.confirmCustomTheme,o=e.setConfirmCustomTheme,l=e.submitCustomTheme,d=e.editedTheme,j=e.setShowThemePicker,b=e.setShowThemeCreator,m=e.buttonColor,h=e.name,O={backgroundColor:t.bg,color:t.text,border:"1px solid ".concat(t.border)},p={backgroundImage:"".concat(function(){var e=null;return n.bg.forEach((function(t){e=null===e?"".concat(t.value):"".concat(e,", ").concat(t.value)})),1===n.bg.length?"linear-gradient(".concat(e,", ").concat(e,")"):"linear-gradient(".concat(e,")")}()),backgroundAttachment:"fixed",backgroundPosition:"center 100%",backgroundSize:"auto 35%",borderRadius:"25px",border:"1px solid ".concat(n.border),color:n.text};return Object(g.jsxs)("div",{className:"theme-creator__preview",children:[Object(g.jsxs)("div",{className:"chat-preview",style:{backgroundColor:s.value,borderRadius:"".concat(c.value,"px")},children:[Object(g.jsxs)("div",{className:"chat-preview__top-bar",children:[Object(g.jsxs)("div",{className:"chat-preview__top-bar__user",children:[Object(g.jsx)(V,{src:$}),Object(g.jsx)("span",{style:{color:a.primary},children:"John Doe"})]}),Object(g.jsx)("i",{className:"fa-solid fa-ellipsis-vertical",style:{color:a.accent}})]}),Object(g.jsxs)("div",{className:"chat-preview__messages",children:[Object(g.jsx)("div",{className:"message owner",style:Object(u.a)(Object(u.a)({},p),{},{borderRadius:"25px 25px 5px 25px"}),children:"Hello mate"}),Object(g.jsx)("div",{className:"message owner",style:Object(u.a)(Object(u.a)({},p),{},{borderRadius:"25px 5px 25px 25px"}),children:"it's tuesday init?"}),Object(g.jsx)("div",{className:"centered",style:{color:a.lowContrast},children:"Set quick emoji to \u2615"}),Object(g.jsx)("div",{className:"message",style:Object(u.a)(Object(u.a)({},O),{},{borderRadius:"25px 25px 25px 5px"}),children:"oh yes yes"}),Object(g.jsx)("div",{className:"message",style:Object(u.a)(Object(u.a)({},O),{},{borderRadius:"5px 25px 25px 5px"}),children:"what a lovely weather we have today"}),Object(g.jsx)("div",{className:"message",style:Object(u.a)(Object(u.a)({},O),{},{borderRadius:"5px 25px 25px 25px"}),children:"\ud83c\udf1e"}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{className:"message owner",style:Object(u.a)(Object(u.a)({},p),{},{borderRadius:"25px 25px 25px 25px"}),children:"*sips tea \ud83c\udf75*"})]}),Object(g.jsxs)("div",{className:"flex-row",children:[Object(g.jsx)("i",{className:"fa-regular fa-image",style:{color:a.accent}}),Object(g.jsxs)("div",{className:"chat-preview__input",style:{backgroundColor:r.bg,color:r.text,border:"1px solid ".concat(r.border)},children:[Object(g.jsx)("span",{children:"I love tea \ud83d\ude0d"}),Object(g.jsx)("i",{className:"fa-regular fa-face-smile",style:{color:a.accent}})]}),Object(g.jsx)("div",{className:"chat-preview__quick-emoji",children:"\u2615"})]})]}),Object(g.jsxs)(H,{show:i,setShow:function(){return o(!1)},children:[Object(g.jsx)("h3",{children:"Are you sure you want to proceed?"}),Object(g.jsxs)("div",{className:"btn-group",children:[Object(g.jsx)("div",{className:"btn btn--secondary",onClick:function(){return o(!1)},children:"go back"}),Object(g.jsxs)("div",{className:"btn",onClick:function(){return l()},children:[null!==d?"edit":"create"," theme"]})]})]}),Object(g.jsxs)("div",{className:"btn-group",children:[Object(g.jsx)("button",{className:"btn btn--secondary",onClick:function(){b(!1),j(!0)},style:{color:a.accent,border:"1px solid ".concat(a.accent),borderRadius:"".concat(c.value,"px")},children:"cancel"}),h.length>0&&Object(g.jsx)("button",{type:"submit",className:"btn",onClick:function(){o(!0)},style:{color:m.value,borderRadius:"".concat(c.value,"px"),border:"1px solid ".concat(a.accent),backgroundColor:a.accent},children:null!==d?"edit":"create"}),h.length<=0&&Object(g.jsx)("button",{className:"btn",disabled:!0,style:{color:m.value,borderRadius:"".concat(c.value,"px"),border:"1px solid ".concat(a.accent),backgroundColor:a.accent},children:null!==d?"edit":"create"})]})]})},te=function(e){var t=e.title,n=e.setShow,s=e.show,c=e.children;return Object(g.jsxs)("div",{className:"field",children:[Object(g.jsxs)("p",{onClick:function(){n()},children:[Object(g.jsx)("i",{className:"fa-solid fa-angle-right ".concat(s?"active":"")}),Object(g.jsx)("span",{children:t})]}),s&&c]})},ne=function(e){var t=e.value,n=e.setValue,s=e.separator,c=e.children;return Object(g.jsxs)(g.Fragment,{children:[s&&Object(g.jsx)("div",{className:"separator",children:Object(g.jsx)("span",{children:s})}),Object(g.jsxs)("div",{className:"color-picker",children:[Object(g.jsx)("input",{type:"text",className:"color-picker__value",value:t,onChange:function(e){n(e)}}),Object(g.jsx)("input",{type:"color",value:t,onChange:function(e){n(e)}}),c]})]})};n(115);function se(e){var t=e.setShowThemePicker,n=e.setShowThemeCreator,a=e.chat,r=e.editedTheme,o=e.setConfirmCustomTheme,l=e.confirmCustomTheme,d=L("projects").updateDocument,j=Object(s.useState)(r?r.name:""),b=Object(i.a)(j,2),m=b[0],h=b[1],O=Object(s.useState)({show:!0,value:r?r.colors.bgDark:"#121212"}),p=Object(i.a)(O,2),f=p[0],x=p[1],v=Object(s.useState)({show:!1,value:r?r.colors.bgSecondary:"#1e1e1e"}),N=Object(i.a)(v,2),y=N[0],w=N[1],k=Object(s.useState)({show:!1,value:r?r.borderRadius:8}),C=Object(i.a)(k,2),S=C[0],D=C[1],E=Object(s.useState)({show:!1,bg:r?r.colors.msgBgOwner:[{id:0,value:"#643e7a"},{id:1,value:"#643e7a"}],text:r?r.colors.messageColorOwner:"#cacaca",border:r?r.colors.msgBorderOwner:"#252525"}),T=Object(i.a)(E,2),A=T[0],I=T[1],U=Object(s.useState)({show:!1,bg:r?r.colors.msgBg:"#1e1e1e",text:r?r.colors.messageColor:"#cacaca",border:r?r.colors.msgBorder:"#252525"}),P=Object(i.a)(U,2),M=P[0],z=P[1],G=Object(s.useState)({show:!1,bg:r?r.colors.inputBg:"#1e1e1e",text:r?r.colors.inputText:"#c4c4c4",border:r?r.colors.inputBorder:"#1e1e1e"}),F=Object(i.a)(G,2),W=F[0],V=F[1],J=Object(s.useState)({show:!1,primary:r?r.colors.textPrimary:"#ffffff",accent:r?r.colors.textAccent:"#643e7a",lowContrast:r?r.colors.textLowContrast:"#646464",btn:r?r.colors.btnText:"#ffffff"}),H=Object(i.a)(J,2),Z=H[0],Y=H[1],X=Object(s.useState)({show:!1,value:r?r.colors.buttonColor:"#ffffff"}),Q=Object(i.a)(X,2),q=Q[0],K=Q[1],$=function(){var e=Object(B.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={id:"".concat(m),name:"".concat(m),colors:{bgDark:"".concat(f.value),bgSecondary:"".concat(y.value),inputBg:"".concat(W.bg),inputText:"".concat(W.text),inputBorder:"".concat(W.border),textPrimary:"".concat(Z.primary),textAccent:"".concat(Z.accent),textLowContrast:"".concat(Z.lowContrast),msgBg:"".concat(M.bg),messageColor:"".concat(M.text),msgBgOwner:A.bg,messageColorOwner:"".concat(A.text),msgBorderOwner:"".concat(A.border),msgBorder:"".concat(M.border),buttonColor:"".concat(q.value)},borderRadius:S.value,isCustom:!0},null!==r){e.next=6;break}return e.next=4,d(a.id,{customThemes:[].concat(Object(R.a)(a.customThemes),[t])});case 4:o(!1),n(!1);case 6:if(null===r){e.next=11;break}return e.next=9,d(a.id,{customThemes:se(r,t),theme:{isCustom:!0,name:m}});case 9:o(!1),n(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(e,t){var n=a.customThemes.indexOf(e),s=Object(R.a)(a.customThemes);return s[n]=t,s};return Object(g.jsxs)("div",{className:"theme-creator",children:[Object(g.jsxs)("form",{className:"theme-creator__form custom-scrollbar",children:[Object(g.jsxs)("div",{className:"field",children:[Object(g.jsx)("p",{children:"Name your theme"}),Object(g.jsx)("input",{type:"text",placeholder:"Aa",required:!0,value:m,onChange:function(e){return h(e.target.value)}})]}),Object(g.jsx)(te,{title:"Background color",setShow:function(){return x(Object(u.a)(Object(u.a)({},f),{},{show:!f.show}))},show:f.show,children:Object(g.jsx)(ne,{value:f.value,setValue:function(e){x(Object(u.a)(Object(u.a)({},f),{},{value:e.target.value}))}})}),Object(g.jsx)(te,{title:"Secondary background color",setShow:function(){return w(Object(u.a)(Object(u.a)({},y),{},{show:!y.show}))},show:y.show,children:Object(g.jsx)(ne,{value:y.value,setValue:function(e){w(Object(u.a)(Object(u.a)({},y),{},{value:e.target.value}))}})}),Object(g.jsxs)(te,{title:"Input colors",setShow:function(){return V(Object(u.a)(Object(u.a)({},W),{},{show:!W.show}))},show:W.show,children:[Object(g.jsx)(ne,{value:W.bg,setValue:function(e){V(Object(u.a)(Object(u.a)({},W),{},{bg:e.target.value}))},separator:"background"}),Object(g.jsx)(ne,{value:W.text,setValue:function(e){V(Object(u.a)(Object(u.a)({},W),{},{text:e.target.value}))},separator:"text"}),Object(g.jsx)(ne,{value:W.border,setValue:function(e){V(Object(u.a)(Object(u.a)({},W),{},{border:e.target.value}))},separator:"border"})]}),Object(g.jsx)(te,{title:"Button color",setShow:function(){return K(Object(u.a)(Object(u.a)({},q),{},{show:!q.show}))},show:q.show,children:Object(g.jsx)(ne,{value:q.value,setValue:function(e){K(Object(u.a)(Object(u.a)({},q),{},{value:e.target.value}))}})}),Object(g.jsxs)(te,{title:"Text colors",setShow:function(){return Y(Object(u.a)(Object(u.a)({},Z),{},{show:!Z.show}))},show:Z.show,children:[Object(g.jsx)(ne,{value:Z.primary,setValue:function(e){Y(Object(u.a)(Object(u.a)({},Z),{},{primary:e.target.value}))},separator:"primary"}),Object(g.jsx)(ne,{value:Z.accent,setValue:function(e){Y(Object(u.a)(Object(u.a)({},Z),{},{accent:e.target.value}))},separator:"accent"}),Object(g.jsx)(ne,{value:Z.lowContrast,setValue:function(e){Y(Object(u.a)(Object(u.a)({},Z),{},{lowContrast:e.target.value}))},separator:"low contrast"})]}),Object(g.jsxs)(te,{title:"Other user messages",setShow:function(){return z(Object(u.a)(Object(u.a)({},M),{},{show:!M.show}))},show:M.show,children:[Object(g.jsx)(ne,{value:M.bg,setValue:function(e){z(Object(u.a)(Object(u.a)({},M),{},{bg:e.target.value}))},separator:"background"}),Object(g.jsx)(ne,{value:M.text,setValue:function(e){z(Object(u.a)(Object(u.a)({},M),{},{text:e.target.value}))},separator:"text"}),Object(g.jsx)(ne,{value:M.border,setValue:function(e){z(Object(u.a)(Object(u.a)({},M),{},{border:e.target.value}))},separator:"border"})]}),Object(g.jsxs)(te,{title:"Current user messages",setShow:function(){return I(Object(u.a)(Object(u.a)({},A),{},{show:!A.show}))},show:A.show,children:[Object(g.jsx)("div",{className:"separator",children:Object(g.jsx)("span",{children:"background"})}),Object(g.jsx)("div",{className:"colors-list custom-scrollbar",children:A.bg.map((function(e,t){return Object(g.jsx)(c.a.Fragment,{children:Object(g.jsx)(ne,{value:e.value,setValue:function(e){!function(e,t){var n=Object(R.a)(A.bg);n[e]={value:t.target.value,id:e},I(Object(u.a)(Object(u.a)({},A),{},{bg:n}))}(t,e)},children:Object(g.jsx)("i",{className:"fa-solid fa-xmark remove-color",onClick:function(){return I(Object(u.a)(Object(u.a)({},A),{},{bg:A.bg.filter((function(t){return t!==e}))}))}})})},e.id)}))}),Object(g.jsxs)("div",{className:"add-color",onClick:function(){return I(Object(u.a)(Object(u.a)({},A),{},{bg:[].concat(Object(R.a)(A.bg),[{value:"#643e7a",id:100*Math.random(0,100)}])}))},children:[Object(g.jsx)("i",{className:"fa-solid fa-plus"}),Object(g.jsx)("span",{children:"add another color"})]}),Object(g.jsx)(ne,{value:A.text,setValue:function(e){I(Object(u.a)(Object(u.a)({},A),{},{text:e.target.value}))},separator:"text"}),Object(g.jsx)(ne,{value:A.border,setValue:function(e){I(Object(u.a)(Object(u.a)({},A),{},{border:e.target.value}))},separator:"border"})]}),Object(g.jsx)(te,{title:"Border radius",setShow:function(){return D(Object(u.a)(Object(u.a)({},S),{},{show:!S.show}))},show:S.show,children:Object(g.jsxs)("div",{className:"flex-row",children:[Object(g.jsx)("input",{type:"range",value:S.value,onChange:function(e){return D(Object(u.a)(Object(u.a)({},S),{},{value:e.target.value}))},min:"0",max:"25"}),Object(g.jsxs)("span",{children:[S.value,"px"]})]})})]}),Object(g.jsx)(ee,{otherUserMessage:M,curUserMessage:A,bgDark:f,borderRadius:S,textColors:Z,inputColors:W,confirmCustomTheme:l,setConfirmCustomTheme:o,submitCustomTheme:$,editedTheme:r,setShowThemeCreator:n,setShowThemePicker:t,name:m,buttonColor:q})]})}n(116);var ce=function(e){var t=e.themes,n=e.chat,s=e.setShowThemeCreator,c=e.setEditedTheme,a=e.setConfirmThemeDelete,r=e.confirmThemeDelete,i=L("projects").updateDocument,o=function(){var e=Object(B.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i(n.id,{theme:{name:t.id,isCustom:!!t.isCustom&&t.isCustom}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),l=function(e){var t=null;return e.colors.msgBgOwner.forEach((function(e){t=null===t?"".concat(e.value):"".concat(t,", ").concat(e.value)})),1===e.colors.msgBgOwner.length?"linear-gradient(".concat(t,", ").concat(t,")"):"linear-gradient(".concat(t,")")},u=function(){var e=Object(B.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.theme&&n.theme.name===t.id&&o({id:"frosty",isCustom:!1}),e.next=4,i(n.id,{customThemes:Object(R.a)(n.customThemes.filter((function(e){return e!==t})))});case 4:a(null),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"theme-picker",children:[Object(g.jsx)("div",{className:"theme-picker__themes",children:t&&n&&t.map((function(e){return Object(g.jsxs)("div",{className:"theme-picker__themes__theme ".concat(n.theme&&e.id===n.theme.name&&!e.isCustom?"current":""),onClick:function(){o(e)},children:[Object(g.jsx)("i",{className:"fa-solid fa-check theme-tick",style:{backgroundImage:l(e)}}),Object(g.jsx)("div",{className:"theme-bg",style:{background:l(e)}})]},e.id)}))}),Object(g.jsx)("div",{className:"separator",children:Object(g.jsx)("span",{children:"create your own theme"})}),Object(g.jsxs)("div",{className:"theme-picker__themes",children:[n.customThemes.length>0&&n.customThemes.map((function(e){return Object(g.jsxs)("div",{className:"theme-picker__themes__theme ".concat(n.theme&&e.id===n.theme.name&&e.isCustom===n.theme.isCustom?"current":""),onClick:function(){o(e)},children:[Object(g.jsx)("i",{className:"fa-solid fa-check theme-tick",style:{backgroundImage:"".concat(l(e))}}),Object(g.jsx)("div",{className:"theme-bg",style:{background:l(e)},children:Object(g.jsxs)("div",{className:"theme-tools",children:[Object(g.jsx)("div",{className:"theme-tools__edit",onClick:function(t){t.stopPropagation(),function(e){s(!0),c(e)}(e)},children:Object(g.jsx)("i",{className:"fa-solid fa-pen"})}),Object(g.jsx)("div",{className:"theme-tools__remove",onClick:function(t){t.stopPropagation(),a(e)},children:Object(g.jsx)("i",{className:"fa-solid fa-trash-can"})})]})})]},e.id)})),n.customThemes.length<3&&Object(g.jsx)("button",{className:"create-theme",onClick:function(){s(!0)},children:Object(g.jsx)("i",{className:"fa-solid fa-plus"})}),Object(g.jsxs)(H,{show:null!==r,setShow:function(){return a(null)},children:[Object(g.jsx)("h3",{children:"Are you sure you want to proceed?"}),Object(g.jsxs)("div",{className:"btn-group",children:[Object(g.jsx)("div",{className:"btn btn--50 btn--secondary",onClick:function(){return a(null)},children:"go back"}),Object(g.jsx)("div",{className:"btn btn--50",onClick:function(){return u(r)},children:"delete theme"})]})]})]})]})};n(117);function ae(e){var t=e.onMessageResponse,n=e.otherUser,c=e.chat,a=e.currentTheme,r=Object(X.a)(),o=L("projects"),l=o.updateDocument,u=o.response,d=D("themes").documents,j=T("themes","frosty").document,b=Object(s.useState)(!1),m=Object(i.a)(b,2),h=m[0],O=m[1],p=Object(s.useState)(!1),x=Object(i.a)(p,2),v=x[0],N=x[1],y=Object(s.useState)(null),w=Object(i.a)(y,2),k=w[0],C=w[1],S=Object(s.useState)(""),E=Object(i.a)(S,2),A=E[0],I=E[1],U=Object(s.useState)(!1),P=Object(i.a)(U,2),M=P[0],z=P[1],F=Object(s.useState)(!1),J=Object(i.a)(F,2),Z=J[0],Y=J[1],Q=Object(s.useState)(j),q=Object(i.a)(Q,2),K=q[0],$=q[1],ee=Object(s.useState)(!1),te=Object(i.a)(ee,2),ne=te[0],ae=te[1],re=Object(s.useState)(null),ie=Object(i.a)(re,2),oe=ie[0],le=ie[1];Object(s.useEffect)((function(){Y(!1),N(!1)}),[c.id]);var ue=function(){var e=Object(B.a)(_.a.mark((function e(n){var s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={id:r,content:n,createdAt:f.fromDate(new Date),isSpecial:!0},e.next=3,l(c.id,{messages:[].concat(Object(R.a)(c.messages),[s])});case 3:u.error||t(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(B.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(c.id,{chatEmoji:t.unified});case 2:u.error||ue("Set quick emoji to ".concat(t.emoji));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("aside",{className:"chat-options",children:[Object(g.jsx)(V,{src:n.photoURL}),Object(g.jsx)("h3",{children:n.nickname}),Object(g.jsxs)("div",{className:"option",onClick:function(){z(!0)},children:[Object(g.jsx)("div",{className:"option__icon",style:{background:function(e){var t=null;return e.colors.msgBgOwner.forEach((function(e){t=null===t?"".concat(e.value):"".concat(t,", ").concat(e.value)})),1===e.colors.msgBgOwner.length?t:"linear-gradient(".concat(t,")")}(a)}}),Object(g.jsx)("div",{className:"option__name",children:"Change theme"})]}),Object(g.jsxs)("div",{className:"option",onClick:function(){O(!0)},children:[Object(g.jsx)("div",{className:"option__icon",children:Object(g.jsx)("i",{className:"fa-solid fa-thumbs-up"})}),Object(g.jsx)("div",{className:"option__name",children:"Change emoji icon"})]}),Object(g.jsxs)("div",{className:"option",onClick:function(){N(!0)},children:[Object(g.jsx)("div",{className:"option__icon",children:"Aa"}),Object(g.jsx)("div",{className:"option__name",children:"Edit nicknames"})]}),d&&(M||Z)&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(H,{show:M,setShow:function(){return z(!1)},onClose:function(){return le(null)},disableOCH:Z,children:Object(g.jsx)(ce,{themes:d,chat:c,setShowThemeCreator:Y,setEditedTheme:$,setConfirmThemeDelete:le,confirmThemeDelete:oe})}),Object(g.jsx)(H,{show:Z,setShow:function(){return Y(!1)},onClose:function(){$(null),ae(!1)},disableOCH:ne,children:Object(g.jsx)(se,{setShowThemePicker:z,setShowThemeCreator:Y,chat:c,editedTheme:K,setConfirmCustomTheme:ae,confirmCustomTheme:ne})})]}),h&&Object(g.jsx)(W.a,{onOutsideClick:function(){O(!1)},children:Object(g.jsx)(G.d,{className:"emoji-picker",onEmojiClick:function(e){de(e),O(!1)},theme:G.c.DARK,previewConfig:{defaultCaption:"",defaultEmoji:null},emojiStyle:G.b.NATIVE})}),Object(g.jsx)(H,{show:v,setShow:function(){return N(!1)},onClose:function(){I(""),C(null)},children:c.assignedUsers.map((function(e){return Object(g.jsxs)("div",{className:"user",onClick:function(){I(" "),function(e){C(e.id)}(e)},children:[Object(g.jsxs)("div",{className:"author",children:[Object(g.jsx)(V,{src:e.photoURL}),k!==e.id&&Object(g.jsxs)("div",{className:"flex-column",children:[Object(g.jsx)("p",{className:"user__display-name",children:e.nickname}),Object(g.jsx)("p",{children:"Set nickname"})]}),k===e.id&&Object(g.jsx)("input",{type:"text",placeholder:e.nickname,value:A,onChange:function(e){I(e.target.value)}})]}),k!==e.id&&Object(g.jsx)("i",{className:"fa-solid fa-pen-to-square"}),k===e.id&&Object(g.jsx)("i",{className:"fa-solid fa-check",onClick:function(){var t;t=e,""!==A.trim()&&A.trim().length<80&&c.assignedUsers.forEach((function(e){e!==t&&(l(c.id,{assignedUsers:[e,{id:t.id,displayName:t.displayName,nickname:A.trim(),photoURL:t.photoURL}]}),N(!1)),e===t&&ue("Set nickname of user ".concat(e.displayName," to ").concat(A.trim()),A.trim())}))}})]},e.id)}))})]})}n(118);function re(e){var t=e.setCurrentChat,n=e.inputRef,c=e.currentTheme,a=y().user,r=Object(l.i)().id,o=T("projects",r),u=o.error,d=o.document,j=D("users").documents,b=L("projects").updateDocument,m=Object(s.useState)(!1),h=Object(i.a)(m,2),O=h[0],p=h[1],f=Object(s.useState)(null),x=Object(i.a)(f,2),v=x[0],N=x[1],w=Object(s.useState)(null),k=Object(i.a)(w,2),C=k[0],S=k[1],R=Object(s.useState)(!1),E=Object(i.a)(R,2),A=E[0],_=E[1],B=Object(s.useState)(null),I=Object(i.a)(B,2),U=I[0],P=I[1],M=Object(s.useState)(null),z=Object(i.a)(M,2),G=z[0],F=z[1],W=Object(s.useState)(null),J=Object(i.a)(W,2),H=J[0],Z=J[1];if(Object(s.useEffect)((function(){null!==d&&d.assignedUsers.forEach((function(e){e.id!==a.uid&&P(e)})),d&&d.assignedUsers.forEach((function(e){e.id===a.uid&&(F(e),p(!0))})),t(d)}),[r,d]),Object(s.useEffect)((function(){null!==j&&null!==U&&j.forEach((function(e){e.id===U.id&&Z(e.online)}))}),[r,j,U]),u)return Object(g.jsx)("div",{className:"error",children:u});if(!d)return Object(g.jsx)("div",{className:"loading",children:"Loading..."});return Object(g.jsx)(g.Fragment,{children:O&&U&&Object(g.jsxs)("div",{className:"chat",children:[Object(g.jsxs)("div",{className:"vertical-container",children:[Object(g.jsxs)("div",{className:"chat__top-bar",children:[Object(g.jsxs)("div",{className:"flex-row",children:[Object(g.jsx)(V,{src:U.photoURL}),Object(g.jsxs)("div",{className:"vertical-container",children:[Object(g.jsx)("h3",{children:U.nickname}),!0===H&&Object(g.jsx)("p",{className:"isActive",children:"Active now"})]})]}),Object(g.jsx)("div",{className:"top-bar-options",onClick:function(e){_((function(e){return!e})),e.target.classList.toggle("active")},children:Object(g.jsx)("i",{className:"fa-solid fa-ellipsis-vertical"})})]}),Object(g.jsxs)("div",{className:"chat__comments",onClick:function(){d.messages[d.messages.length-1]&&d.messages[d.messages.length-1].createdBy!==a.uid&&b(d.id,{isRead:!0}),n.current.focus()},children:[Object(g.jsx)(Y,{chat:d,onMessageResponse:N,setBottomDiv:S,otherUser:U,currentUser:G}),Object(g.jsx)(K,{chat:d,messageResponse:v,onMessageResponse:N,bottomDiv:C,inputRef:n})]})]}),A&&Object(g.jsx)(ae,{onMessageResponse:N,otherUser:U,chat:d,currentTheme:c})]})})}var ie=function(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(null),r=Object(i.a)(a,2),o=r[0],u=r[1],d=Object(s.useState)(!1),m=Object(i.a)(d,2),p=m[0],f=m[1],g=y().dispatch,x=Object(s.useState)(!1),v=Object(i.a)(x,2),N=v[0],w=v[1],k=Object(l.g)(),C=function(){var e=Object(B.a)(_.a.mark((function e(t,s){var c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),f(!0),e.prev=2,e.next=5,b.signInWithEmailAndPassword(t,s);case 5:return c=e.sent,e.next=8,j.collection("users").doc(c.user.uid).update({online:!0});case 8:g({type:"LOGIN",payload:c.user}),n||(f(!1),u(null)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n||(u(e.t0.message),f(!1));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(B.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),f(!0),e.prev=2,e.next=5,b.signInWithPopup(h);case 5:return t=e.sent,e.next=8,j.collection("users").doc(t.user.uid).update({online:!0});case 8:g({type:"LOGIN",payload:t.user}),n||(f(!1),u(null)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n||(u(e.t0.message),f(!1));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(B.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),f(!0),e.prev=2,e.next=5,b.signInWithPopup(O);case 5:return t=e.sent,e.next=8,j.collection("users").doc(t.user.uid).update({online:!0});case 8:g({type:"LOGIN",payload:t.user}),n||(f(!1),u(null)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n||(u(e.t0.message),f(!1));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(B.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),f(!0),w(!1),e.prev=3,e.next=6,b.sendPasswordResetEmail(t);case 6:n||(f(!1),u(null),w(!0),setTimeout((function(){k.push("/login")}),15e3)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),n||(u(e.t0.message),f(!1),w(!1));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(B.a)(_.a.mark((function e(t,s){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(null),f(!0),w(!1),e.prev=3,e.next=6,b.confirmPasswordReset(t,s);case 6:n||(f(!1),u(null),w(!0)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),n||(u(e.t0.message),f(!1),w(!1));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){return function(){return c(!0)}}),[]),{login:C,loginWithGoogle:S,loginWithGithub:R,sendPasswordReset:D,resetPassword:E,isPending:p,error:o,isFinished:N}},oe=(n(56),n.p+"static/media/btn_google_dark_normal_ios.9fe90a17.svg"),le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII=";function ue(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(""),r=Object(i.a)(a,2),l=r[0],u=r[1],d=ie(),j=d.login,b=d.loginWithGoogle,m=d.loginWithGithub,h=d.isPending,O=d.error;return Object(g.jsxs)("div",{className:"login",children:[Object(g.jsxs)("div",{className:"auth-decoration",children:[Object(g.jsx)("div",{className:"circle"}),Object(g.jsx)("div",{className:"blur"})]}),Object(g.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault(),j(n,l)},children:[Object(g.jsx)("div",{className:"auth-form__title",children:Object(g.jsx)("h2",{children:"Welcome back"})}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Email"}),Object(g.jsx)("input",{type:"email",required:!0,onChange:function(e){return c(e.target.value)},value:n,placeholder:"Enter your email"})]}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Password"}),Object(g.jsx)("input",{type:"password",required:!0,onChange:function(e){return u(e.target.value)},value:l,placeholder:"Enter your password"})]}),Object(g.jsx)(o.b,{to:"/recover-password",className:"reset-password",children:"Forgot password?"}),!h&&Object(g.jsx)("button",{className:"btn",children:"Login"}),h&&Object(g.jsx)("button",{className:"btn",disabled:!0,children:"Loading"}),Object(g.jsx)("div",{className:"others-separator",children:Object(g.jsx)("span",{children:"or"})}),Object(g.jsxs)("button",{className:"google-btn",onClick:function(e){e.preventDefault(),b()},children:[Object(g.jsx)("img",{src:oe,alt:"google logo"}),Object(g.jsx)("span",{children:"Sign in with google"})]}),Object(g.jsxs)("button",{className:"github-btn",onClick:function(e){e.preventDefault(),m()},children:[Object(g.jsx)("img",{src:le,alt:"github logo"}),Object(g.jsx)("span",{children:"Sign in with GitHub"})]}),Object(g.jsxs)("p",{className:"change-page",children:["Don't have an account? ",Object(g.jsx)(o.b,{to:"/signup",children:"Sign up"})]}),O&&Object(g.jsx)("div",{className:"error",children:O})]})]})}n(119);function de(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(""),r=Object(i.a)(a,2),l=r[0],u=r[1],d=Object(s.useState)(""),p=Object(i.a)(d,2),f=p[0],x=p[1],v=Object(s.useState)(null),N=Object(i.a)(v,2),w=N[0],k=N[1],C=Object(s.useState)(null),S=Object(i.a)(C,2),R=S[0],D=S[1],E=function(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(null),r=Object(i.a)(a,2),o=r[0],l=r[1],u=Object(s.useState)(!1),d=Object(i.a)(u,2),p=d[0],f=d[1],g=y().dispatch,x=function(){var e=Object(B.a)(_.a.mark((function e(t,s,c,a){var r,i,o,u;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(null),f(!0),e.prev=2,e.next=5,b.createUserWithEmailAndPassword(t,s);case 5:if(r=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return i="thumbnails/".concat(r.user.uid,"/").concat(a.name),e.next=11,m.ref(i).put(a);case 11:return o=e.sent,e.next=14,o.ref.getDownloadURL();case 14:return u=e.sent,e.next=17,r.user.updateProfile({displayName:c,photoURL:u});case 17:return e.next=19,j.collection("users").doc(r.user.uid).set({online:!0,displayName:c,photoURL:u});case 19:g({type:"LOGIN",payload:r.user}),n||(f(!1),l(null)),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),n||(l(e.t0.message),f(!1));case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t,n,s,c){return e.apply(this,arguments)}}(),v=function(){var e=Object(B.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(null),f(!0),e.prev=2,e.next=5,b.signInWithPopup(h);case 5:if(t=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return e.next=10,t.user.updateProfile({displayName:t.user.displayName,photoURL:t.user.photoURL});case 10:return e.next=12,j.collection("users").doc(t.user.uid).set({online:!0,displayName:t.user.displayName,photoURL:t.user.photoURL});case 12:g({type:"LOGIN",payload:t.user}),n||(f(!1),l(null)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),n||(l(e.t0.message),f(!1));case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(B.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(null),f(!0),e.prev=2,e.next=5,b.signInWithPopup(O);case 5:if(t=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return e.next=10,t.user.updateProfile({displayName:t.additionalUserInfo.username,photoURL:t.user.photoURL});case 10:return e.next=12,j.collection("users").doc(t.user.uid).set({online:!0,displayName:t.user.displayName,photoURL:t.user.photoURL});case 12:g({type:"LOGIN",payload:t.user}),n||(f(!1),l(null)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),n||(l(e.t0.message),f(!1));case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){return function(){return c(!0)}}),[]),{signup:x,signInWithGoogle:v,signInWithGithub:N,error:o,isPending:p}}(),T=E.signup,A=E.signInWithGoogle,I=E.signInWithGithub,U=E.isPending,L=E.error;return Object(g.jsxs)("div",{className:"signup",children:[Object(g.jsxs)("div",{className:"auth-decoration",children:[Object(g.jsx)("div",{className:"circle"}),Object(g.jsx)("div",{className:"blur"})]}),Object(g.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault(),T(n,l,f,w)},children:[Object(g.jsx)("div",{className:"auth-form__title",children:Object(g.jsx)("h2",{children:"Join us"})}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Email:"}),Object(g.jsx)("input",{type:"email",required:!0,onChange:function(e){return c(e.target.value)},value:n,placeholder:"Aa"})]}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Password:"}),Object(g.jsx)("input",{type:"password",required:!0,onChange:function(e){return u(e.target.value)},value:l,placeholder:"Aa"})]}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Display name:"}),Object(g.jsx)("input",{type:"text",required:!0,onChange:function(e){return x(e.target.value)},value:f,placeholder:"Aa"})]}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Profile thumbnail:"}),Object(g.jsx)("input",{type:"file",required:!0,onChange:function(e){k(null);var t=e.target.files[0];t?t.type.includes("image")?!t.size>1e5?D("Image file size must be less than 100kb"):(D(null),k(t)):D("Selected file must be an image"):D("Please select a file")}}),R&&Object(g.jsx)("div",{className:"error",children:R})]}),!U&&Object(g.jsx)("button",{className:"btn",children:"Sign up"}),U&&Object(g.jsx)("button",{className:"btn",disabled:!0,children:"Loading"}),Object(g.jsx)("div",{className:"others-separator",children:Object(g.jsx)("span",{children:"or"})}),Object(g.jsxs)("button",{className:"google-btn",onClick:function(e){e.preventDefault(),A()},children:[Object(g.jsx)("img",{src:oe,alt:"google logo"}),Object(g.jsx)("span",{children:"Sign in with google"})]}),Object(g.jsxs)("button",{className:"github-btn",onClick:function(e){e.preventDefault(),I()},children:[Object(g.jsx)("img",{src:le,alt:"github logo"}),Object(g.jsx)("span",{children:"Sign in with GitHub"})]}),Object(g.jsxs)("p",{className:"change-page",children:["Already have an account? ",Object(g.jsx)(o.b,{to:"/login",children:"Login"})]}),L&&Object(g.jsx)("div",{className:"error",children:L})]})]})}function je(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{class:"privacy-section",children:[Object(g.jsx)("h3",{children:"Zbieranie danych"}),Object(g.jsx)("p",{children:"Kiedy zbieramy Twoje dane? Tw\xf3j email oraz has\u0142o zapisywane s\u0105 podczas rejestracji na naszej stronie."})]}),Object(g.jsxs)("div",{class:"privacy-section",children:[Object(g.jsx)("h3",{children:"Cele przetwarzania danych"}),Object(g.jsx)("p",{children:"Twoje dane zebrane podczas rejestracji przetwarzane s\u0105 jedynie w celu umo\u017cliwienia korzystania ze strony. Nie udost\u0119pniamy ich nikomu, nie sprzedajemy ich. Rejestracja jest dobrowolna."})]}),Object(g.jsxs)("div",{class:"privacy-section",children:[Object(g.jsx)("h3",{children:"Bezpiecze\u0144stwo danych"}),Object(g.jsx)("p",{children:"Twoje dane s\u0105 automatycznie szyfrowane przez us\u0142ug\u0119 firebase od google. Nikt nieautoryzowany nie ma dost\u0119pu do twoich danych."})]}),Object(g.jsxs)("div",{class:"privacy-section",children:[Object(g.jsx)("h3",{children:"Usuwanie danych"}),Object(g.jsx)("p",{children:'Je\u015bli zrezygnujesz z u\u017cywania naszej aplikacji w ka\u017cdym momencie mo\u017cesz do nas napisa\u0107 na maila "matkowsky808@gmail" lub wykorzysta\u0107 funkcj\u0119 w ustawieniach, aby usun\u0105\u0107 konto oraz swoje dane.'})]}),Object(g.jsxs)("div",{class:"privacy-section",children:[Object(g.jsx)("h3",{children:"Pozosta\u0142e informacje"}),Object(g.jsx)("p",{children:Object(g.jsx)("span",{children:"W razie jakichkolwiek pyta\u0144, prosimy o kontakt na adresie mailowym: matkowsky808@gmail.com"})})]})]})}var be=n.p+"static/media/shrek-gif.df094210.gif";function me(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],a=ie(),r=a.sendPasswordReset,l=a.isPending,u=a.error,d=a.isFinished,j=Object(s.useState)(15),b=Object(i.a)(j,2),m=b[0],h=b[1],O=function(e){e.preventDefault(),r(n)};Object(s.useEffect)((function(){!0===d&&p()}),[d]);var p=function(){var e=setInterval((function(){m<=0?clearInterval(e):h((function(e){return e-1}))}),1e3)};return Object(g.jsxs)("div",{className:"login",children:[Object(g.jsxs)("div",{className:"auth-decoration",children:[Object(g.jsx)("div",{className:"circle"}),Object(g.jsx)("div",{className:"blur"})]}),Object(g.jsxs)("div",{className:"auth-form",children:[d&&Object(g.jsxs)("div",{className:"text-center email-sent",children:[Object(g.jsx)("img",{src:be,alt:"",className:"email-sent__img"}),Object(g.jsx)("h2",{children:"Check your email"}),Object(g.jsx)("p",{children:"A password reset email has been sent to your email address"}),Object(g.jsx)(o.b,{to:"/login",children:Object(g.jsx)("button",{className:"btn",children:"Back to Login"})}),Object(g.jsxs)("p",{className:"redirect",children:["Redirecting in ",m," s"]})]}),!d&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"auth-form__title",children:[Object(g.jsx)("h2",{children:"Forgot password?"}),Object(g.jsx)("p",{children:"Enter your email below to recieve password reset instructions"})]}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Email"}),Object(g.jsx)("input",{type:"email",required:!0,onChange:function(e){return c(e.target.value)},value:n,placeholder:"Enter your email",onKeyDown:function(e){return function(e){"Enter"===e.code&&O(e)}(e)}})]}),!l&&Object(g.jsx)("button",{className:"btn",onClick:O,children:"Send reset link"}),l&&Object(g.jsx)("button",{className:"btn",disabled:!0,children:"Sending email..."}),Object(g.jsxs)("p",{className:"change-page",children:["No longer have Alzheimer? ",Object(g.jsx)(o.b,{to:"/login",children:"Login"})]}),u&&Object(g.jsx)("div",{className:"error",children:u})]})]})]})}function he(){var e=ie(),t=e.resetPassword,n=e.isPending,c=e.error,a=e.isFinished,r=Object(s.useState)(""),u=Object(i.a)(r,2),d=u[0],j=u[1],b=function(e){var t=Object(l.h)();return new URLSearchParams(t.search).get(e)}("oobCode"),m=function(){var e=Object(B.a)(_.a.mark((function e(n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t(b,d);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"login",children:[Object(g.jsxs)("div",{className:"auth-decoration",children:[Object(g.jsx)("div",{className:"circle"}),Object(g.jsx)("div",{className:"blur"})]}),Object(g.jsxs)("form",{className:"auth-form",onSubmit:function(e){return m(e)},children:[a&&Object(g.jsxs)("div",{className:"text-center email-sent",children:[Object(g.jsx)("img",{src:be,alt:"",className:"email-sent__img"}),Object(g.jsx)("h2",{children:"Password set successfully"}),Object(g.jsx)("p",{children:"You can now log in with your new password"}),Object(g.jsx)(o.b,{to:"/login",children:Object(g.jsx)("button",{className:"btn",children:"Back to Login"})}),Object(g.jsxs)("p",{className:"change-page",children:["Now log in and remember your password. ",Object(g.jsx)(o.b,{to:"/login",children:" Login"})]})]}),!a&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"auth-form__title",children:[Object(g.jsx)("h2",{children:"Set a new password"}),Object(g.jsx)("p",{children:"Enter a password that you will remember this time..."})]}),Object(g.jsxs)("label",{children:[Object(g.jsx)("span",{children:"Password"}),Object(g.jsx)("input",{type:"password",required:!0,onChange:function(e){return j(e.target.value)},value:d,placeholder:"Enter new password",onKeyDown:function(e){return function(e){"Enter"===e.code&&m(e)}(e)}})]}),!n&&Object(g.jsx)("button",{className:"btn",children:"Reset password"}),n&&Object(g.jsx)("button",{className:"btn",disabled:!0,children:"Setting new password..."}),Object(g.jsxs)("p",{className:"change-page",children:[Object(g.jsx)(o.b,{to:"/login",children:" Login"})," instead?"]}),c&&Object(g.jsx)("div",{className:"error",children:c})]})]})]})}n(120);var Oe=n(9),pe=n(74);n(121);function fe(e){var t=e.chats,n=e.currentChat,s=e.inputRef,c=y().user,a=D("users").documents,r=L("projects").updateDocument,i=[],l="",u="",d="",j={about:"",minute:"min",minutes:"min","less than a minute":"1 min"};return Object(g.jsxs)("div",{className:"chat-list custom-scrollbar",onMouseMove:function(e){var t,n=Object(Oe.a)(document.getElementsByClassName("card"));try{for(n.s();!(t=n.n()).done;){var s=t.value,c=s.getBoundingClientRect(),a=e.clientX-c.left,r=e.clientY-c.top;s.style.setProperty("--mouse-x","".concat(a,"px")),s.style.setProperty("--mouse-y","".concat(r,"px"))}}catch(i){n.e(i)}finally{n.f()}},children:[0===t.length&&Object(g.jsx)("p",{children:"No chats yet!"}),t.map((function(e){return Object(g.jsx)(o.c,{to:"/u/".concat(e.id),className:"card ".concat(e.messages&&e.messages[e.messages.length-1]&&!e.isRead&&e.messages[e.messages.length-1].createdBy!==c.uid?"unread":""),onClick:function(){return null!==s.current&&s.current.focus(),void(n&&n.messages[n.messages.length-1]&&n.messages[n.messages.length-1].createdBy!==c.uid&&r(n.id,{isRead:!0}))},children:Object(g.jsxs)("div",{className:"card__content",children:[e.assignedUsers.forEach((function(e){e.id!==c.uid&&(d=e.id,l=e.photoURL,u=e.nickname)})),a&&a.forEach((function(e){e.online&&!i.includes(e.id)&&i.push(e.id)})),Object(g.jsxs)("div",{className:"avatar-container",children:[Object(g.jsx)(V,{src:l}),i.includes(d)&&Object(g.jsx)("span",{className:"online-user",children:Object(g.jsx)("div",{className:"status-circle"})})]}),Object(g.jsxs)("div",{className:"chat-info",children:[Object(g.jsxs)("p",{className:"display-name",children:[u.substring(0,18),Object(g.jsx)("span",{children:u.length>=18&&"..."})]}),Object(g.jsxs)("div",{className:"last-chat",children:[Object(g.jsxs)("span",{className:"last-message",children:[e&&e.messages[e.messages.length-1]&&e.messages[e.messages.length-1].createdBy===c.uid&&"You: ",0!==e.messages.length&&e.messages[e.messages.length-1].content&&void 0===e.messages[e.messages.length-1].fileType&&e.messages[e.messages.length-1].content.substring(0,15),0!==e.messages.length&&!e.messages[e.messages.length-1].content&&"image"===e.messages[e.messages.length-1].fileType&&"sent a photo",0!==e.messages.length&&!e.messages[e.messages.length-1].content&&"video"===e.messages[e.messages.length-1].fileType&&"sent a video",0!==e.messages.length&&e.messages[e.messages.length-1].content&&e.messages[e.messages.length-1].content.length>=15&&"...",0===e.messages.length&&"No messages yet"]}),0!==e.messages.length&&Object(g.jsx)("div",{className:"dot"}),Object(g.jsx)("span",{className:"comment-date",children:0!==e.messages.length&&Object(pe.a)(e.messages[e.messages.length-1].createdAt.toDate(),{addSuffix:!1}).replace(/\b(?:about|less than a minute)\b/gi,(function(e){return j[e]}))})]})]})]})},e.id)}))]})}n(122);function ge(e){var t=e.currentChat,n=e.inputRef,c=y().user,a=function(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(null),r=Object(i.a)(a,2),o=r[0],l=r[1],u=Object(s.useState)(!1),d=Object(i.a)(u,2),m=d[0],h=d[1],O=y(),p=O.dispatch,f=O.user,g=function(){var e=Object(B.a)(_.a.mark((function e(){var t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(null),h(!0),e.prev=2,t=f.uid,e.next=6,j.collection("users").doc(t).update({online:!1});case 6:return e.next=8,b.signOut();case 8:p({type:"LOGOUT"}),n||(h(!1),l(null)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n||(l(e.t0.message),h(!1));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){return function(){return c(!0)}}),[]),{logout:g,error:o,isPending:m}}(),r=a.logout,l=a.isPending,u=(D("users").documents,D("projects",["assignedUsersId","array-contains",c.uid],["updatedAt","desc"]).documents),d=Object(s.useState)(""),m=Object(i.a)(d,2),h=m[0],O=m[1],p=Object(s.useRef)([]);Object(s.useEffect)((function(){var e=function(e){p.current.forEach((function(t){var n=t.getBoundingClientRect().left+t.clientWidth/2,s=t.getBoundingClientRect().top+t.clientHeight/2,c=Math.atan2(e.pageX-n,e.pageY-s)*(180/Math.PI)*-1;t.style.transform="rotate(".concat(c,"deg)")}))};return window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}}),[]);return Object(g.jsxs)("div",{className:"user-list",children:[Object(g.jsxs)("div",{className:"search",children:[Object(g.jsx)("h2",{children:"Chats"}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"search-form",children:Object(g.jsxs)("label",{children:[Object(g.jsx)("i",{className:"fa-solid fa-magnifying-glass"}),Object(g.jsx)("input",{type:"text",placeholder:"Find a user",onChange:function(e){return O(e.target.value)},value:h})]})}),""!==h&&Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"add-users",children:u&&u.filter((function(e){return function(e){var t=!1;return e.assignedUsers.forEach((function(e){e.id!==c.uid&&(e.displayName.toLowerCase().trim().replace(/\s+/g,"").includes(h.toLowerCase())||e.nickname.toLowerCase().trim().replace(/\s+/g,"").includes(h.toLowerCase()))&&(t=!0)})),t}(e)})).map((function(e){return e.assignedUsers.map((function(t){return t.id!==c.uid&&Object(g.jsxs)(o.b,{to:e.id,className:"user-chat",onClick:function(){return O("")},children:[Object(g.jsx)("img",{src:t.photoURL,alt:""}),Object(g.jsx)("div",{className:"user-chat-info",children:Object(g.jsx)("span",{children:t.displayName})})]},t.id)}))}))})}),Object(g.jsx)("div",{className:"chats",children:""===h&&u&&Object(g.jsx)(fe,{chats:u,currentChat:t,inputRef:n})})]})]}),Object(g.jsxs)("div",{className:"user",children:[Object(g.jsx)("div",{className:"character",children:Object(g.jsxs)("div",{className:"character__eyes",children:[Object(g.jsx)("div",{className:"eye",ref:function(e){p.current[0]=e},children:Object(g.jsx)("div",{className:"pupil"})}),Object(g.jsx)("div",{className:"eye",ref:function(e){p.current[1]=e},children:Object(g.jsx)("div",{className:"pupil"})})]})}),Object(g.jsxs)("div",{className:"flex-row",children:[Object(g.jsx)(V,{src:c.photoURL}),Object(g.jsx)("span",{children:c.displayName})]}),!l&&c&&Object(g.jsx)("button",{className:"btn ",onClick:r,children:Object(g.jsx)("i",{className:"fa-solid fa-gear"})}),l&&Object(g.jsx)("button",{className:"btn",disabled:!0,children:Object(g.jsx)("span",{children:"..."})})]})]})}var xe=n(32),ve=(n(123),function(){var e=Object(l.g)(),t=y().user,n=D("projects",["assignedUsersId","array-contains",t.uid],["updatedAt","desc"]).documents,a=L("users").updateDocument,r=T("users",t.uid).document,d=Object(s.useState)(),j=Object(i.a)(d,2),b=j[0],m=j[1],h=Object(s.useState)(""),O=Object(i.a)(h,2),p=O[0],f=O[1],x=Object(s.useState)([]),v=Object(i.a)(x,2),N=v[0],w=v[1],k=Object(s.useState)(!1),C=Object(i.a)(k,2),S=C[0],R=C[1],E=Object(s.useState)(""),A=Object(i.a)(E,2),I=A[0],U=A[1],P=Object(s.useState)(N),M=Object(i.a)(P,2),z=M[0],G=M[1],F=Object(s.useState)(n),W=Object(i.a)(F,2),J=(W[0],W[1]);Object(s.useEffect)((function(){n&&null!==n&&0!==n.length?(r&&r.pinned?w(r.pinned):w([null,null,null,null]),J(n),m(n[0])):m("")}),[n]),Object(s.useEffect)((function(){return f(window.location.pathname),e.listen((function(e){f(e.pathname)}))}),[e]),Object(s.useEffect)((function(){r&&null!==r.pinned&&w(r.pinned)}),[r]);var Z=function(){var e=Object(B.a)(_.a.mark((function e(n){var s,c,r,o;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.destination){e.next=2;break}return e.abrupt("return");case 2:return s=Array.from(N),c=s.splice(n.source.index,1),r=Object(i.a)(c,1),o=r[0],s.splice(n.destination.index,0,o),w(s),e.next=8,a(t.uid,{pinned:s});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){var t=!1;return z.forEach((function(n){null!==n&&n.id===e.id&&(t=!0)})),t};return Object(g.jsxs)("div",{className:"tool-bar",children:[Object(g.jsxs)("nav",{className:"tool-bar__pages",children:[Object(g.jsx)(o.c,{to:"/u/".concat(b&&b.id),className:p.includes("/u/")?"active":"",children:Object(g.jsx)("i",{className:"fa-solid fa-comment"})}),Object(g.jsx)(o.c,{to:"/",exact:!0,children:Object(g.jsx)("i",{className:"fa-solid fa-house"})}),Object(g.jsx)(o.c,{to:"/friends",children:Object(g.jsx)("i",{className:"fa-solid fa-address-book"})})]}),Object(g.jsx)("div",{className:"separator-no-text"}),Object(g.jsx)(xe.a,{onDragEnd:Z,children:Object(g.jsx)(xe.c,{droppableId:"favourites",children:function(e){return Object(g.jsxs)("div",Object(u.a)(Object(u.a)({className:"tool-bar__favourites"},e.droppableProps),{},{ref:e.innerRef,children:[N&&N.map((function(e,t){return null!==e&&Object(g.jsx)(xe.b,{draggableId:e.id,index:t,children:function(t){return Object(g.jsx)(o.b,Object(u.a)(Object(u.a)(Object(u.a)({to:"/u/".concat(e.id),draggable:"true"},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(g.jsx)(V,{src:e.thumb})}))}},e.id)})),e.placeholder,Object(g.jsx)("div",{className:"add-favourite",onClick:function(){R(!0),G(N)},children:Object(g.jsx)("i",{className:"fa-regular fa-star"})})]}))}})}),Object(g.jsx)("div",{className:"separator-no-text"}),Object(g.jsx)(H,{show:S,setShow:function(){return R(!1)},children:Object(g.jsxs)("div",{className:"manage-favs",children:[Object(g.jsxs)(xe.a,{onDragEnd:function(e){if(e.destination){if(e.source.droppableId===e.destination.droppableId&&"manage-favs"===e.source.droppableId){var s=Array.from(z),c=s.splice(e.source.index,1),a=Object(i.a)(c,1)[0];s.splice(e.destination.index,0,a),G(s)}if("empty-slots"===e.destination.droppableId){var r,o,l=Array.from(z),u=Array.from(n.filter((function(e){return!Y(e)})))[e.source.index];u.isGroup||u.assignedUsers.forEach((function(e){e.id!==t.uid&&(r={id:u.id,displayName:e.displayName,thumb:e.photoURL})})),l.forEach((function(e){null===e&&(o=z.indexOf(e))})),l.splice(o,1,r),G(l)}}},children:[Object(g.jsx)(xe.c,{droppableId:"manage-favs",direction:"horizontal",type:"manage-favs",children:function(e){return Object(g.jsxs)("div",Object(u.a)(Object(u.a)({className:"manage-favs__current-favs"},e.droppableProps),{},{ref:e.innerRef,children:[z&&z.map((function(e,t){return null!==e&&Object(g.jsx)(xe.b,{draggableId:e.id,index:t,type:"FAVS-LIST",children:function(t){return Object(g.jsxs)("div",Object(u.a)(Object(u.a)(Object(u.a)({className:"fav"},t.draggableProps),t.dragHandleProps),{},{draggable:"true",ref:t.innerRef,children:[Object(g.jsx)(V,{src:e.thumb}),Object(g.jsx)("div",{className:"fav__remove",onClick:function(){!function(e){var t=Array.from(z);t.splice(z.indexOf(e),1),t.push(null),G(t)}(e)},children:Object(g.jsx)("i",{className:"fa-solid fa-xmark"})})]}))}},e.id)})),e.placeholder,z.includes(null)&&Object(g.jsx)(xe.c,{droppableId:"empty-slots",direction:"horizontal",children:function(e){return Object(g.jsx)("div",Object(u.a)(Object(u.a)({className:"flex-row"},e.droppableProps),{},{ref:e.innerRef,children:z.map((function(t,n){return null===t&&Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"fav fav--empty",children:[Object(g.jsx)("i",{className:"fa-regular fa-star"}),e.placeholder]},n)})}))}))}})]}))}}),Object(g.jsxs)("div",{children:[Object(g.jsx)("input",{type:"text",placeholder:"Find a user",value:I,onChange:function(e){return U(e.target.value)},className:"mb1"}),Object(g.jsx)(xe.c,{droppableId:"chats-list",isDropDisabled:!0,children:function(e){return Object(g.jsxs)("ul",Object(u.a)(Object(u.a)({className:"manage-favs__chats-list custom-scrollbar"},e.droppableProps),{},{ref:e.innerRef,children:[n&&n.filter((function(e){return!Y(e)})).map((function(e,n){return Object(g.jsx)(c.a.Fragment,{children:!e.isGroup&&e.assignedUsers.map((function(s){return s.id!==t.uid&&s.displayName.toLowerCase().trim().replace(/\s+/g,"").includes(I.toLowerCase())&&Object(g.jsx)(xe.b,{draggableId:s.id,index:n,children:function(n,c){return Object(g.jsxs)("li",Object(u.a)(Object(u.a)({className:"".concat(c.isDragging?"dragged":""," ").concat("empty-slots"===c.draggingOver?"hover-over-slot":""),onClick:function(){return function(e){var n,s,c=Array.from(z);e.isGroup||e.assignedUsers.forEach((function(n){n.id!==t.uid&&(s={id:e.id,displayName:n.displayName,thumb:n.photoURL})})),c.forEach((function(e){null===e&&(n=z.indexOf(e))})),c.splice(n,1,s),G(c)}(e)},style:{width:"10px !important"}},n.draggableProps),{},{ref:n.innerRef,children:[Object(g.jsxs)("div",{className:"flex-row",children:[!c.isDragging&&Object(g.jsx)(V,{src:s.photoURL}),!c.isDragging&&Object(g.jsx)("p",{children:s.displayName})]}),Object(g.jsxs)("div",Object(u.a)(Object(u.a)({className:"handle"},n.dragHandleProps),{},{children:[!c.isDragging&&Object(g.jsx)("i",{className:"fa-solid fa-grip-vertical"}),c.isDragging&&Object(g.jsx)(V,{src:s.photoURL})]}))]}),e.id)}},s.id)}))},e.id)})),e.placeholder]}))}})]})]}),Object(g.jsxs)("div",{className:"btn-group",children:[Object(g.jsx)("div",{className:"btn btn--secondary",onClick:function(){return R(!1)},children:"cancel"}),Object(g.jsx)("div",{className:"btn",onClick:function(){a(t.uid,{pinned:z}),R(!1)},children:"finish"})]})]})}),Object(g.jsx)("div",{className:"tool-bar__profile-menu",children:Object(g.jsx)(V,{src:t.photoURL})})]})});var Ne=function(){var e=Object(s.useRef)(null),t=y(),n=t.user,c=t.authIsReady,a=D("themes").documents,r=Object(s.useState)(null),u=Object(i.a)(r,2),d=u[0],j=u[1],b=Object(s.useState)(a),m=Object(i.a)(b,2),h=m[0],O=m[1],p=function(e){var t;return!0===e.isCustom?d.customThemes&&d.customThemes.forEach((function(n){n.id===e.name&&(t=n)})):a&&a.forEach((function(n){n.id===e.name&&(t=n)})),t};return Object(s.useEffect)((function(){d?d.theme?O(p(d.theme)):O(p({name:"frosty",isCustom:!1})):a&&O(p({name:"frosty",isCustom:!1}))}),[a,d]),c&&h&&Object(g.jsxs)(k.a,{theme:h,children:[Object(g.jsx)(S,{}),Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(o.a,{children:[n&&Object(g.jsx)(ve,{}),n&&Object(g.jsx)(ge,{currentChat:d,inputRef:e}),Object(g.jsxs)(l.d,{children:[Object(g.jsxs)(l.b,{exact:!0,path:"/",children:[!n&&Object(g.jsx)(l.a,{to:"/login"}),n&&Object(g.jsx)(E,{})]}),Object(g.jsxs)(l.b,{path:"/u/:id",children:[!n&&Object(g.jsx)(l.a,{to:"/login"}),n&&Object(g.jsx)(re,{setCurrentChat:j,inputRef:e,currentTheme:h})]}),Object(g.jsx)(l.b,{path:"/privacy-policy",children:Object(g.jsx)(je,{})}),Object(g.jsx)(l.b,{path:"/recover-password",children:Object(g.jsx)(me,{})}),Object(g.jsxs)(l.b,{path:"/login",children:[n&&Object(g.jsx)(l.a,{to:"/"}),!n&&Object(g.jsx)(ue,{})]}),Object(g.jsxs)(l.b,{path:"/signup",children:[n&&Object(g.jsx)(l.a,{to:"/"}),!n&&Object(g.jsx)(de,{})]}),Object(g.jsx)(l.b,{path:"/set-new-password",children:Object(g.jsx)(he,{})})]})]})})]})};r.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(N,{children:Object(g.jsx)(Ne,{})})}),document.getElementById("root"))},56:function(e,t,n){},81:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.0f4f91b8.chunk.js.map