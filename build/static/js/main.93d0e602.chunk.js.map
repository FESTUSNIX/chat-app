{"version":3,"sources":["firebase/config.js","context/AuthContext.js","hooks/useAuthContext.js","theme/GlobalStyles.js","hooks/useCollection.js","pages/dashboard/Dashboard.js","hooks/useDocument.js","hooks/useFirestore.js","hooks/useDates.js","assets/logo-default.png","components/Avatar/Avatar.js","hooks/useEscapeKey.js","components/Modal/Modal.js","components/Tooltip/Tooltip.js","components/AvatarWithStatus/AvatarWithStatus.js","components/ProfilePreview/ProfilePreview.js","pages/chat/Messages/Message/Message.js","pages/chat/Messages/Messages.js","pages/chat/MessageField/MessageField.js","assets/british-person.jpg","components/ThemeCreator/ThemePreview.js","components/ThemeCreator/Field.js","components/ColorPicker/ColorPicker.js","components/Inputs/FieldContainer/FieldContainer.js","components/Inputs/Field/Field.js","components/ThemeCreator/ThemeCreator.js","components/ThemePicker/ThemePicker.js","pages/chat/ChatOptions/ChatOptions.js","pages/chat/Chat.js","hooks/useLogin.js","assets/logo-no-bg.png","pages/auth/AuthTemplate.js","assets/btn_google_dark_normal_ios.svg","components/GoogleButton/GoogleButton.js","components/GithubButton/GithubButton.js","assets/GitHub-Mark-Light-32px.png","pages/auth/login/Login.js","pages/auth/signup/Signup.js","hooks/useSignup.js","pages/privacyPolicy/privacyPolicy.js","assets/shrek-gif.gif","pages/auth/resetPassword/ResetPassword.js","pages/auth/resetPassword/SetNewPassword.js","hooks/useQuery.js","components/Chats/ChatsList.js","components/Pinned/Pinned.js","components/Chats/Chats.js","components/ToolBar/ToolBar.js","assets/premium-account.png","components/Loader/Loader.js","pages/profile/Profile.js","hooks/useLogout.js","pages/settings/subpages/AccountDetails/fields/Username.js","pages/settings/subpages/AccountDetails/fields/Email.js","pages/settings/subpages/AccountDetails/fields/PhoneNumber.js","pages/settings/subpages/AccountDetails/fields/Password.js","pages/settings/subpages/AccountDetails/fields/DeleteAccount.js","pages/settings/subpages/AccountDetails/AccountDetails.js","pages/settings/subpages/Profile/CropImg.js","pages/settings/subpages/Profile/fields/AvatarField.js","pages/settings/subpages/Profile/fields/BannerField.js","pages/settings/subpages/Profile/fields/AboutField.js","pages/settings/subpages/Profile/Preview.js","pages/settings/subpages/Profile/Profile.js","pages/settings/subpages/Theme/Theme.js","pages/settings/subpages/Premium/Premium.js","pages/settings/subpages/PrivacyAndSecurity/PrivacyAndSecurity.js","pages/settings/Settings.js","pages/friends/FriendsList.js","pages/friends/AddFriend.js","pages/friends/PendingInvites.js","pages/friends/Friends.js","components/Mobile/TabBar/TabBar.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","projectFirestore","firestore","projectAuth","auth","projectStorage","storage","projectGoogle","GoogleAuthProvider","projectGitHub","GithubAuthProvider","setCustomParameters","prompt","timestamp","Timestamp","AuthContext","createContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","children","useReducer","dispatch","useEffect","unsub","onAuthStateChanged","Provider","value","useAuthContext","context","useContext","Error","adjustBrightness","col","amt","usePound","slice","R","parseInt","substring","G","B","toString","length","GlobalStyles","createGlobalStyle","theme","colors","bgDark","inputBg","inputText","inputBorder","msgBg","messageColor","msgBorder","msgBgOwner","forEach","color","spreadColors","messageColorOwner","msgBorderOwner","textAccent","borderRadius","textPrimary","textLowContrast","buttonColor","useCollection","collection","_query","_orderBy","useState","documents","setDocuments","error","setError","query","useRef","current","orderBy","ref","where","unsubscribe","onSnapshot","snapshot","results","docs","doc","push","data","id","console","log","Dashboard","className","useDocument","document","setDocument","err","message","initialState","isPending","success","firestoreReducer","useFirestore","response","isCancelled","setIsCancelled","dispatchIfNotCancelled","addDocument","a","createdAt","fromDate","Date","add","addedDocument","deleteDocument","delete","updateDocument","updates","update","updatedDocument","useDates","dayOfMonth","dayOfWeek","month","year","hour","curDate","fullDate","today","toLocaleDateString","formatDate","date","toDate","getDay","getFullYear","getMonth","getDate","toLocaleTimeString","minute","dateToFormat","lastMonday","setDate","setHours","getTime","isCurrentWeek","dates","Avatar","src","appLogo","alt","KEY_EVENT_TYPE","Modal","show","setShow","onClose","disableOCH","button1","button2","handleClose","handleEscKey","useCallback","event","key","addEventListener","removeEventListener","useEscapeKey","onOutsideClick","disabled","display","onClick","Tooltip","pos","align","AvatarWithStatus","userId","linkToProfile","noTooltip","noStatus","users","setUser","filter","u","undefined","to","photoURL","status","ConditionalWrapper","condition","wrapper","ProfilePreview","disableTooltip","userDoc","handleStatus","uid","style","backgroundColor","banner","displayName","bio","map","Message","elements","i","chat","onMessageResponse","setMessageToDelete","showImage","setShowImage","showEmojis","setShowEmojis","showModal","setShowModal","emojiReactions","setEmojiReactions","showProfilePrev","setShowProfilePrev","showSendDate","value1","value2","date1","date2","Math","abs","showSendDate2","reactWithEmoji","e","indexOfMessage","messages","indexOf","otherUserReaction","rec","emojiToAdd","content","emoji","handleReactionNicknames","reaction","nickname","assignedUsers","deleteEmojiReaction","getDoc","res","getLocalUser","isTop","createdBy","isMiddle","isBottom","isSpecial","deleted","r","getElementById","scrollIntoView","block","setTimeout","classList","remove","scrollToResponse","image","fileType","target","showFullImage","controls","playsInline","onEmojiClick","Theme","DARK","previewConfig","defaultCaption","defaultEmoji","width","height","emojiStyle","EmojiStyle","NATIVE","viewBox","d","Number","lastRead","Fragment","Messages","setBottomDiv","otherUser","currentUser","messageToDelete","location","useLocation","bottomRef","scrollDownRef","scrollToBottom","deleteMessage","onScroll","winScroll","scrollTop","handleScrollDownBtn","FileSaver","saveAs","MessageField","messageResponse","bottomDiv","inputRef","uniqueId","uuid","newComment","setNewComment","imgUpload","setImgUpload","isAssignedUser","setIsAssignedUser","chatEmoji","fastEmoji","setFastEmoji","sendFastEmoji","setSendFastEmoji","seen","setSeen","fileInputRef","focus","assignedUsersId","sendMessage","commentToAdd","trim","updatedAt","isRead","sendImage","includes","split","storageRef","name","uploadBytes","then","getDownloadURL","downloadURL","handleImageUpload","imageFile","files","options","maxSizeMB","maxWidthOrHeight","useWebWorker","imageCompression","compressedFile","handleSubmit","preventDefault","fileThumbnail","setFileThumbnail","onSubmit","accept","onChange","URL","createObjectURL","handleFileChange","resetFileInput","maxLength","placeholder","onKeyDown","code","handleKey","handleEmojis","innerText","unified","size","ThemePreview","otherUserMessage","curUserMessage","textColors","inputColors","confirmCustomTheme","setConfirmCustomTheme","submitCustomTheme","editedTheme","setShowThemePicker","setShowThemeCreator","messageStyles","bg","text","border","messageOwnerStyles","backgroundImage","backgroundAttachment","backgroundPosition","backgroundSize","britImg","primary","accent","lowContrast","Field","title","ColorPicker","setValue","separator","FieldContainer","helpText","optional","containerClass","label","resetError","onLostFocus","inputClass","after","showPassword","setShowPassword","onBlur","ThemeCreator","setName","setBgDark","setBorderRadius","setCurUserMessage","setOtherUserMessage","setInputColors","setTextColors","setButtonColor","themeToAdd","isCustom","customThemes","updateCustomThemes","index","newArr","updateMessageBg","c","random","min","max","ThemePicker","themes","setEditedTheme","setConfirmThemeDelete","confirmThemeDelete","changeTheme","removeCustomTheme","t","background","stopPropagation","editCustomTheme","ChatOptions","currentTheme","otherUserLocal","setShowChatOptions","defaultThemeDoc","showEmojiPicker","setShowEmojiPicker","showNicknameModal","setShowNicknameModal","showNicknameInput","setShowNicknameInput","newNickname","setNewNickname","showThemePicker","showThemeCreator","changeChatEmoji","maxWidth","handleNicknameInput","Chat","setCurrentChat","showChat","setShowChat","useParams","showChatOptions","setOtherUserLocal","currentUserLocal","setCurrentUserLocal","otherUserDoc","currentUserDoc","handleSeen","queryMd","useMediaQuery","prevValue","toggle","useLogin","navigate","useNavigate","setIsPending","isFinished","setIsFinished","login","email","password","signInWithEmailAndPassword","online","loginWithGoogle","signInWithPopup","loginWithGithub","sendPasswordReset","sendPasswordResetEmail","resetPassword","newPassword","confirmPasswordReset","setUpRecaptcha","number","provider","PhoneAuthProvider","recaptchaVerifier","RecaptchaVerifier","render","verifyPhoneNumber","verificationId","AuthTemplate","logo","version","transform","fill","GoogleButton","googleLogo","GithubButton","Login","setEmail","setPassword","username","formErrors","setFormErrors","existing","match","Signup","randColor","randomColor","signup","thumbnail","createUserWithEmailAndPassword","imgUrl","uploadPath","put","img","updateProfile","set","metadata","creationTime","toLocaleString","day","signInWithGoogle","signInWithGithub","additionalUserInfo","useSignup","setDisplayName","PrivacyPolicy","class","ResetPassword","timeToRedirect","setTimeToRedirect","countdown","redirectCountdown","setInterval","clearInterval","prevTimeToRedirect","ShrekGif","SetNewPassword","setNewPassword","oobCode","queryName","URLSearchParams","search","get","useQuery","ChatsList","chats","replaceDistanceToNow","about","minutes","formatDistanceToNowStrict","addSuffix","replace","matched","Pinned","orientation","favs","setFavs","showFavs","setShowFavs","searchValue","setSearchValue","favsCopy","setFavsCopy","pinned","filterChats","result","fav","handleOnDragEnd","destination","items","Array","from","splice","source","reorderedItem","onDragEnd","droppableId","direction","provided","f","droppableProps","innerRef","draggableId","draggable","draggableProps","dragHandleProps","userToAdd","chatToAdd","isGroup","item","handleRemoveFav","isDropDisabled","toLowerCase","isDragging","draggingOver","addFav","Chats","currentChat","setQuery","ToolBar","latestChat","setLatestChat","currentPath","setCurrentPath","showProfile","setShowProfile","invitesAmount","setInvitesAmount","pathname","friends","Loader","Profile","confirmDelete","setConfirmDelete","comment","setComment","showInputControls","setShowInputControls","inputError","setInputError","addComment","profileComments","deleteComment","comm","pronouns","country","countryCode","svg","premium","premiumIcon","some","accepted","getChatId","count","notInFriends","useLogout","logout","signOut","Username","setUsername","updateUsername","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","progress","Email","currentPassword","setCurrentPassword","updateEmail","regex","userCredential","catch","PhoneNumber","phoneNumber","setPhoneNumber","confirmUnlink","setConfirmUnlink","showOTP","setShowOTP","captchaResponse","setCaptchaResponse","OTPCode","setOTPCode","notify","sendOTP","verifyOTP","authCredential","credential","linkWithCredential","updatePhoneNumber","unlink","providerId","unlinkPhoneNumber","enableSearch","dropdownClass","copyNumbersOnly","searchPlaceholder","fontWeight","handleOTPInput","Password","confirmNewPassword","setConfirmNewPassword","updatePassword","DeleteAccount","confirm","setConfirm","startCountdown","setStartCountdown","timeToDelete","setTimeToDelete","setCredential","finalCountdown","handleDeleteUser","deleteUser","isPasswordProvider","providerData","checkPassword","AccountDetails","docError","copyBtnText","setCopyBtnText","navigator","clipboard","writeText","createImage","url","Promise","resolve","reject","Image","setAttribute","getRadianAngle","degreeValue","PI","rotateSize","rotation","rotRad","cos","sin","getCroppedImg","imageSrc","pixelCrop","flip","horizontal","vertical","canvas","createElement","ctx","getContext","bBoxWidth","bBoxHeight","translate","rotate","scale","drawImage","getImageData","x","y","putImageData","toBlob","file","AvatarField","setAvatarState","setShowAvatarModal","showAvatarModal","useDropzone","noClick","multiple","onDrop","acceptedFiles","setFiles","Object","assign","preview","getRootProps","getInputProps","isDragAccept","isDragReject","open","crop","setCrop","zoom","setZoom","croppedAreaPixels","setCroppedAreaPixels","setCroppedImage","onCropComplete","croppedArea","showCroppedImage","croppedImage","updateAvatar","Undo","onUndo","closeToast","deletePhotoURLFromStorage","list","deleteRef","fullPath","deleteObject","removePhotoURLs","getStorage","aspect","cropShape","onCropChange","onZoomChange","maxZoom","step","info","BannerField","setBannerColor","bannerColor","updateBanner","AboutField","setAbout","updateBio","Preview","avatarState","Premium","href","rel","PrivacyAndSecurity","Settings","showPage","setShowPage","mediaQueryXL","path","element","FriendsList","setSearch","setFilter","filterUsers","flt","styleStatus","styled","before","AddFriend","userCode","setUserCode","addFriend","PendingInvites","handleSelect","addUser","combinedId","docToAdd","setDoc","acceptInvite","arrCopy","arrCopy2","index2","declineInvite","Friends","view","setView","TabBar","App","setTheme","filterTheme","themeToSet","filteredTheme","minWidth","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.93d0e602.chunk.js","sourcesContent":["import firebase from 'firebase/compat/app'\r\nimport 'firebase/compat/firestore'\r\nimport 'firebase/compat/auth'\r\nimport 'firebase/compat/storage'\r\n\r\nconst firebaseConfig = {\r\n\tapiKey: 'AIzaSyBMB6C-_B61S1wd1RYAr34jomKZpvq16eA',\r\n\tauthDomain: 'better-react-messenger.firebaseapp.com',\r\n\tprojectId: 'better-react-messenger',\r\n\tstorageBucket: 'better-react-messenger.appspot.com',\r\n\tmessagingSenderId: '381225253186',\r\n\tappId: '1:381225253186:web:43a9fb8cce6b202f31f0db',\r\n}\r\n\r\n// Firebase init\r\nfirebase.initializeApp(firebaseConfig)\r\n\r\n// Services init\r\nconst projectFirestore = firebase.firestore()\r\nconst projectAuth = firebase.auth()\r\nconst projectStorage = firebase.storage()\r\n\r\nconst projectGoogle = new firebase.auth.GoogleAuthProvider()\r\nconst projectGitHub = new firebase.auth.GithubAuthProvider()\r\n\r\nprojectGoogle.setCustomParameters({ prompt: 'select_account' })\r\n\r\n// Timestamp\r\nconst timestamp = firebase.firestore.Timestamp\r\n\r\nexport { projectFirestore, projectAuth, timestamp, projectStorage, projectGoogle, projectGitHub }\r\n","import { createContext, useReducer, useEffect } from 'react'\nimport { projectAuth } from '../firebase/config'\n\nexport const AuthContext = createContext()\n\nexport const authReducer = (state, action) => {\n\tswitch (action.type) {\n\t\tcase 'LOGIN':\n\t\t\treturn { ...state, user: action.payload }\n\t\tcase 'LOGOUT':\n\t\t\treturn { ...state, user: null }\n\t\tcase 'AUTH_IS_READY':\n\t\t\treturn { user: action.payload, authIsReady: true }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const AuthContextProvider = ({ children }) => {\n\tconst [state, dispatch] = useReducer(authReducer, {\n\t\tuser: null,\n\t\tauthIsReady: false,\n\t})\n\n\tuseEffect(() => {\n\t\tconst unsub = projectAuth.onAuthStateChanged(user => {\n\t\t\tdispatch({ type: 'AUTH_IS_READY', payload: user })\n\t\t\tunsub()\n\t\t})\n\t}, [])\n\n\treturn <AuthContext.Provider value={{ ...state, dispatch }}>{children}</AuthContext.Provider>\n}\n","import { AuthContext } from \"../context/AuthContext\"\nimport { useContext } from \"react\"\n\nexport const useAuthContext = () => {\n  const context = useContext(AuthContext)\n\n  if(!context) {\n    throw Error('useAuthContext must be used inside an AuthContextProvider')\n  }\n\n  return context\n}","import { createGlobalStyle } from 'styled-components'\r\n\r\nconst spreadColors = theme => {\r\n\tlet colors = null\r\n\ttheme.colors.msgBgOwner.forEach(color => {\r\n\t\tcolors === null ? (colors = `${color.value}`) : (colors = `${colors}, ${color.value}`)\r\n\t})\r\n\r\n\tif (theme.colors.msgBgOwner.length === 1) {\r\n\t\treturn colors\r\n\t} else {\r\n\t\treturn `linear-gradient(${colors})`\r\n\t}\r\n}\r\n\r\nfunction adjustBrightness(col, amt) {\r\n\tvar usePound = false\r\n\tif (col) {\r\n\t\tif (col[0] === '#') {\r\n\t\t\tcol = col.slice(1)\r\n\t\t\tusePound = true\r\n\t\t}\r\n\r\n\t\tvar R = parseInt(col.substring(0, 2), 16)\r\n\t\tvar G = parseInt(col.substring(2, 4), 16)\r\n\t\tvar B = parseInt(col.substring(4, 6), 16)\r\n\r\n\t\t// to make the colour less bright than the input\r\n\t\t// change the following three \"+\" symbols to \"-\"\r\n\t\tR = R + amt\r\n\t\tG = G + amt\r\n\t\tB = B + amt\r\n\r\n\t\tif (R > 255) R = 255\r\n\t\telse if (R < 0) R = 0\r\n\r\n\t\tif (G > 255) G = 255\r\n\t\telse if (G < 0) G = 0\r\n\r\n\t\tif (B > 255) B = 255\r\n\t\telse if (B < 0) B = 0\r\n\r\n\t\tvar RR = R.toString(16).length === 1 ? '0' + R.toString(16) : R.toString(16)\r\n\t\tvar GG = G.toString(16).length === 1 ? '0' + G.toString(16) : G.toString(16)\r\n\t\tvar BB = B.toString(16).length === 1 ? '0' + B.toString(16) : B.toString(16)\r\n\r\n\t\treturn (usePound ? '#' : '') + RR + GG + BB\r\n\t}\r\n}\r\n\r\nexport const GlobalStyles = createGlobalStyle`\r\n#root {\r\n    --bg-dark: ${({ theme }) => theme.colors.bgDark};\r\n    --bg-dark-lighten5: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 5)};\r\n    --bg-dark-lighten7: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 7)};\r\n    --bg-dark-lighten10: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 10)};\r\n    --bg-dark-lighten15: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 15)};\r\n    --bg-dark-lighten20: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 20)};\r\n    --bg-dark-lighten25: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 25)};\r\n    --bg-dark-lighten50: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 50)};\r\n    --bg-dark-lighten90: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 90)};\r\n    --bg-dark-lighten120: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 120)};\r\n\r\n    --input-bg: ${({ theme }) => theme.colors.inputBg};\r\n    --input-text: ${({ theme }) => theme.colors.inputText};\r\n\t--input-border: ${({ theme }) => theme.colors.inputBorder};\r\n\r\n    --message-bg: ${({ theme }) => theme.colors.msgBg};\r\n    --message-color: ${({ theme }) => theme.colors.messageColor};\r\n\t--message-border: ${({ theme }) => theme.colors.msgBorder};\r\n\t\r\n    --message-bg-owner: ${({ theme }) => spreadColors(theme)};\r\n    --message-color-owner: ${({ theme }) => theme.colors.messageColorOwner};\r\n\t--message-border-owner: ${({ theme }) => theme.colors.msgBorderOwner};\r\n\t\r\n    --text-accent: ${({ theme }) => theme.colors.textAccent};\r\n    --text-accent-darken25: ${({ theme }) => adjustBrightness(theme.colors.textAccent, -25)};\r\n    --text-accent-darken35: ${({ theme }) => adjustBrightness(theme.colors.textAccent, -55)};\r\n\r\n    --border-radius: ${({ theme }) => theme.borderRadius}px;\r\n    --border-color: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 15)};\r\n\r\n    --text-primary:  ${({ theme }) => theme.colors.textPrimary};\r\n    --text-primary-darken20:  ${({ theme }) => adjustBrightness(theme.colors.textPrimary, -20)};\r\n    --text-primary-darken50:  ${({ theme }) => adjustBrightness(theme.colors.textPrimary, -50)};\r\n    --text-primary-darken100:  ${({ theme }) => adjustBrightness(theme.colors.textPrimary, -100)};\r\n\r\n    --text-heading: ${({ theme }) => adjustBrightness(theme.colors.textPrimary, 30)};\r\n    --text-low-contrast: ${({ theme }) => theme.colors.textLowContrast}; \r\n    --text-mid-contrast: ${({ theme }) => adjustBrightness(theme.colors.textLowContrast, 40)}; \r\n\t\r\n    --btn-text: ${({ theme }) => theme.colors.buttonColor};\r\n\r\n}\r\n`\r\n","import { useEffect, useState, useRef } from \"react\"\nimport { projectFirestore } from \"../firebase/config\"\n\nexport const useCollection = (collection, _query, _orderBy) => {\n  const [documents, setDocuments] = useState(null)\n  const [error, setError] = useState(null)\n\n  // if we don't use a ref --> infinite loop in useEffect\n  // _query is an array and is \"different\" on every function call\n  const query = useRef(_query).current\n  const orderBy = useRef(_orderBy).current\n\n  useEffect(() => {\n    let ref = projectFirestore.collection(collection)\n\n    if (query) {\n      ref = ref.where(...query)\n    }\n    if (orderBy) {\n      ref = ref.orderBy(...orderBy)\n    }\n\n    const unsubscribe = ref.onSnapshot(snapshot => {\n      let results = []\n      snapshot.docs.forEach(doc => {\n        results.push({...doc.data(), id: doc.id})\n      });\n      \n      // update state\n      setDocuments(results)\n      setError(null)\n    }, error => {\n      console.log(error)\n      setError('could not fetch the data')\n    })\n\n    // unsubscribe on unmount\n    return () => unsubscribe()\n\n  }, [collection, query, orderBy])\n\n  return { documents, error }\n}","// Styles\r\nimport './Dashboard.scss'\r\n\r\nexport default function Dashboard() {\r\n\treturn <div className='dashboard'></div>\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { projectFirestore } from '../firebase/config'\r\n\r\nexport const useDocument = (collection, id) => {\r\n\tconst [document, setDocument] = useState(null)\r\n\tconst [error, setError] = useState(null)\r\n\r\n\t// Realtime data for document\r\n\tuseEffect(() => {\r\n\t\tif (id !== null) {\r\n\t\t\tconst ref = projectFirestore.collection(collection).doc(id)\r\n\r\n\t\t\tconst unsub = ref.onSnapshot(\r\n\t\t\t\tsnapshot => {\r\n\t\t\t\t\tif (snapshot.data()) {\r\n\t\t\t\t\t\tsetDocument({ ...snapshot.data(), id: snapshot.id })\r\n\t\t\t\t\t\tsetError(null)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetError('No such document exists')\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terr => {\r\n\t\t\t\t\tconsole.log(err.message)\r\n\t\t\t\t\tsetError('Failed to get document')\r\n\t\t\t\t}\r\n\t\t\t)\r\n\r\n\t\t\treturn () => unsub()\r\n\t\t}\r\n\t}, [collection, id])\r\n\r\n\treturn { document, error }\r\n}\r\n","import { useReducer, useEffect, useState } from 'react'\nimport { projectFirestore, timestamp } from '../firebase/config'\n\nlet initialState = {\n\tdocument: null,\n\tisPending: false,\n\terror: null,\n\tsuccess: null,\n}\n\nconst firestoreReducer = (state, action) => {\n\tswitch (action.type) {\n\t\tcase 'IS_PENDING':\n\t\t\treturn { isPending: true, document: null, success: false, error: null }\n\t\tcase 'ADDED_DOCUMENT':\n\t\t\treturn { isPending: false, document: action.payload, success: true, error: null }\n\t\tcase 'DELETED_DOCUMENT':\n\t\t\treturn { isPending: false, document: null, success: true, error: null }\n\t\tcase 'UPDATED_DOCUMENT':\n\t\t\treturn { isPending: false, document: action.payload, success: true, error: null }\n\t\tcase 'ERROR':\n\t\t\treturn { isPending: false, document: null, success: false, error: action.payload }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const useFirestore = collection => {\n\tconst [response, dispatch] = useReducer(firestoreReducer, initialState)\n\tconst [isCancelled, setIsCancelled] = useState(false)\n\n\t// Collection ref\n\tconst ref = projectFirestore.collection(collection)\n\n\t// Only dispatch is not cancelled\n\tconst dispatchIfNotCancelled = action => {\n\t\tif (!isCancelled) {\n\t\t\tdispatch(action)\n\t\t}\n\t}\n\n\t// Add a document\n\tconst addDocument = async doc => {\n\t\tdispatch({ type: 'IS_PENDING' })\n\n\t\ttry {\n\t\t\tconst createdAt = timestamp.fromDate(new Date())\n\n\t\t\tconst addedDocument = await ref.add({ ...doc, createdAt })\n\t\t\tdispatchIfNotCancelled({ type: 'ADDED_DOCUMENT', payload: addedDocument })\n\t\t} catch (err) {\n\t\t\tdispatchIfNotCancelled({ type: 'ERROR', payload: err.message })\n\t\t}\n\t}\n\n\t// Delete a document\n\tconst deleteDocument = async id => {\n\t\tdispatch({ type: 'IS_PENDING' })\n\n\t\ttry {\n\t\t\tawait ref.doc(id).delete()\n\t\t\tdispatchIfNotCancelled({ type: 'DELETED_DOCUMENT' })\n\t\t} catch (err) {\n\t\t\tdispatchIfNotCancelled({ type: 'ERROR', payload: 'could not delete' })\n\t\t}\n\t}\n\n\t// Update documents\n\n\tconst updateDocument = async (id, updates) => {\n\t\tdispatch({ type: 'IS_PENDING' })\n\n\t\ttry {\n\t\t\tconst updatedDocument = await ref.doc(id).update(updates)\n\n\t\t\tdispatchIfNotCancelled({ type: 'UPDATED_DOCUMENT', payload: updatedDocument })\n\t\t\treturn updatedDocument\n\t\t} catch (err) {\n\t\t\tdispatchIfNotCancelled({ type: 'ERROR', payload: err.message })\n\t\t\treturn null\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\treturn () => setIsCancelled(true)\n\t}, [])\n\n\treturn { addDocument, deleteDocument, updateDocument, response }\n}\n","export const useDates = () => {\r\n\tlet today = new Date().toLocaleDateString()\r\n\tlet weekday = []\r\n\tlet dayOfMonth, dayOfWeek, month, year, hour, curDate, fullDate\r\n\r\n\tconst dates = dateToFormat => {\r\n\t\tconst date = dateToFormat.toDate()\r\n\t\tweekday = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\r\n\t\tdayOfWeek = weekday[date.getDay()]\r\n\r\n\t\tyear = date.getFullYear()\r\n\r\n\t\tmonth = date.getMonth() + 1 < 10 ? '0' + date.getMonth() + 1 : date.getMonth() + 1\r\n\r\n\t\tdayOfMonth = date.getDate() < 10 ? '0' + date.getDate().toString() : date.getDate().toString()\r\n\r\n\t\tcurDate = `${dayOfMonth}/${month}/${year}`\r\n\t\thour = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\r\n\t\tfullDate = `${dayOfMonth}.${month}.${year}, ${hour}`\r\n\r\n\t\treturn { dayOfWeek, year, month, dayOfMonth, curDate, hour, fullDate }\r\n\t}\r\n\r\n\tconst isCurrentWeek = dateToFormat => {\r\n\t\tlet lastMonday = new Date() // Creating new date object for today\r\n\t\tlastMonday.setDate(lastMonday.getDate() - (lastMonday.getDay() - 1)) // Setting date to last monday\r\n\t\tlastMonday.setHours(0, 0, 0, 0) // Setting Hour to 00:00:00:00\r\n\r\n\t\tconst res =\r\n\t\t\tlastMonday.getTime() <= dateToFormat.getTime() && dateToFormat.getTime() < lastMonday.getTime() + 604800000\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst formatDate = createdAt => {\r\n\t\tconst date = createdAt.toDate()\r\n\r\n\t\tweekday = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\r\n\t\tdayOfWeek = weekday[date.getDay()]\r\n\r\n\t\tyear = date.getFullYear()\r\n\r\n\t\tmonth = date.getMonth() + 1 < 10 ? `0${date.getMonth() + 1}` : date.getMonth() + 1\r\n\r\n\t\tdayOfMonth = date.getDate() < 10 ? '0' + date.getDate().toString() : date.getDate().toString()\r\n\r\n\t\tcurDate = `${dayOfMonth}/${month}/${year}`\r\n\t\thour = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\r\n\t\tif (curDate === today) {\r\n\t\t\treturn hour\r\n\t\t} else if (isCurrentWeek(date)) {\r\n\t\t\treturn `${dayOfWeek}. ${hour}`\r\n\t\t} else {\r\n\t\t\treturn `${dayOfMonth}.${month}.${year}, ${hour}`\r\n\t\t}\r\n\t}\r\n\r\n\treturn { formatDate, dates, dayOfMonth, dayOfWeek, month, year, hour, curDate }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo-default.9dacd6cd.png\";","// Styles && Assets\r\nimport './Avatar.scss'\r\nimport appLogo from '../../assets/logo-default.png'\r\n\r\nexport default function Avatar({ src }) {\r\n\treturn (\r\n\t\t<div className='avatar'>\r\n\t\t\t<img src={src ? src : appLogo} alt='' />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useCallback, useEffect } from 'react'\r\n\r\nconst KEY_NAME_ESC = 'Escape'\r\nconst KEY_EVENT_TYPE = 'keyup'\r\n\r\nexport function useEscapeKey(handleClose) {\r\n\tconst handleEscKey = useCallback(\r\n\t\tevent => {\r\n\t\t\tif (event.key === KEY_NAME_ESC) {\r\n\t\t\t\thandleClose()\r\n\t\t\t}\r\n\t\t},\r\n\t\t[handleClose]\r\n\t)\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener(KEY_EVENT_TYPE, handleEscKey, false)\r\n\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(KEY_EVENT_TYPE, handleEscKey, false)\r\n\t\t}\r\n\t}, [handleEscKey])\r\n}\r\n","import { useEffect } from 'react'\r\nimport OutsideClickHandler from 'react-outside-click-handler'\r\nimport { useEscapeKey } from '../../hooks/useEscapeKey'\r\n\r\n// Styles\r\nimport './Modal.scss'\r\n\r\nexport default function Modal({ children, show, setShow, onClose, disableOCH, button1, button2 }) {\r\n\tuseEffect(() => {\r\n\t\tif (show === false && onClose) {\r\n\t\t\tonClose()\r\n\t\t}\r\n\t}, [show])\r\n\r\n\tconst hideModal = () => {\r\n\t\tsetShow()\r\n\t}\r\n\r\n\tuseEscapeKey(hideModal)\r\n\r\n\treturn (\r\n\t\tshow && (\r\n\t\t\t<div className='modal'>\r\n\t\t\t\t<OutsideClickHandler\r\n\t\t\t\t\tonOutsideClick={() => {\r\n\t\t\t\t\t\tsetShow()\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdisabled={disableOCH}\r\n\t\t\t\t\tdisplay='contents'>\r\n\t\t\t\t\t<div className='modal__content'>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t\t<i className='fa-solid fa-xmark close-btn' onClick={() => setShow()}></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</OutsideClickHandler>\r\n\t\t\t</div>\r\n\t\t)\r\n\t)\r\n}\r\n","// Styles\r\nimport './Tooltip.scss'\r\n\r\nconst Tooltip = ({ children, pos, align, className }) => {\r\n\treturn (\r\n\t\t<div className={`tooltip ${pos ? pos : ''} ${align ? align : ''} ${className ? className : ''}`}>\r\n\t\t\t<div className='tooltip__content'>{children ? children : 'tooltip'}</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Tooltip\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useCollection } from '../../hooks/useCollection'\r\nimport { Link } from 'react-router-dom'\r\n\r\n// Styles\r\nimport './AvatarWithStatus.scss'\r\n\r\n// Components\r\nimport Avatar from '../Avatar/Avatar'\r\nimport Tooltip from '../Tooltip/Tooltip'\r\n\r\nconst AvatarWithStatus = ({ userId, linkToProfile, noTooltip, noStatus, src }) => {\r\n\tconst { documents: users } = useCollection('users')\r\n\r\n\tconst [user, setUser] = useState(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (users && userId && userId !== null) {\r\n\t\t\tsetUser(\r\n\t\t\t\tusers.filter(u => {\r\n\t\t\t\t\treturn u.id === userId\r\n\t\t\t\t})[0]\r\n\t\t\t)\r\n\t\t}\r\n\t}, [userId, users])\r\n\r\n\tif (user && user !== undefined && user !== null) {\r\n\t\treturn (\r\n\t\t\t<div className='avatar-container'>\r\n\t\t\t\t{linkToProfile && (\r\n\t\t\t\t\t<Link to={`/profile/${user.id}`}>\r\n\t\t\t\t\t\t<Avatar src={src || src === '' ? src : user.photoURL} />\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{!linkToProfile && <Avatar src={src || src === '' ? src : user.photoURL} />}\r\n\r\n\t\t\t\t{user && user.status && !noStatus && (\r\n\t\t\t\t\t<span className={`status`}>\r\n\t\t\t\t\t\t<div className={`status__dot status__dot--${user.status}`}>\r\n\t\t\t\t\t\t\t{(!noTooltip || noTooltip === undefined) && <Tooltip>{user.status}</Tooltip>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t)\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nexport default AvatarWithStatus\r\n","import React from 'react'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\nimport { Link } from 'react-router-dom'\r\nimport { useDocument } from '../../hooks/useDocument'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\n\r\n// Styles\r\nimport './ProfilePreview.scss'\r\n\r\n// Components\r\nimport OutsideClickHandler from 'react-outside-click-handler'\r\nimport AvatarWithStatus from '../AvatarWithStatus/AvatarWithStatus'\r\nimport Tooltip from '../Tooltip/Tooltip'\r\n\r\nconst ConditionalWrapper = ({ condition, wrapper, children }) => (condition ? wrapper(children) : children)\r\n\r\nexport default function ProfilePreview({ show, setShow, userId, pos, align, disableTooltip }) {\r\n\tconst statuses = ['online', 'idle', 'do-not-disturb', 'invisible']\r\n\r\n\tconst { updateDocument } = useFirestore('users')\r\n\tconst { document: userDoc } = useDocument('users', userId)\r\n\tconst { user } = useAuthContext()\r\n\r\n\tconst handleStatus = async status => {\r\n\t\tawait updateDocument(user.uid, {\r\n\t\t\tstatus: status,\r\n\t\t})\r\n\t}\r\n\r\n\tif (show === true && setShow && userDoc) {\r\n\t\treturn (\r\n\t\t\t<ConditionalWrapper\r\n\t\t\t\tcondition={!disableTooltip}\r\n\t\t\t\twrapper={children => (\r\n\t\t\t\t\t<OutsideClickHandler onOutsideClick={() => setShow(false)}>\r\n\t\t\t\t\t\t<Tooltip pos={pos ? pos : 'top'} align={align ? align : 'end'} className='profile-preview-tooltip'>\r\n\t\t\t\t\t\t\t{children}\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</OutsideClickHandler>\r\n\t\t\t\t)}>\r\n\t\t\t\t<div className='profile-preview'>\r\n\t\t\t\t\t<div className='profile-preview__banner' style={{ backgroundColor: userDoc.banner }}></div>\r\n\r\n\t\t\t\t\t<div className='profile-preview__header'>\r\n\t\t\t\t\t\t{userDoc && (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetShow(false)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<AvatarWithStatus userId={userDoc.id} linkToProfile={true} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{userId === user.uid && (\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\tto='/settings'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetShow(false)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<i className='fa-solid fa-gear'></i>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='profile-preview__info'>\r\n\t\t\t\t\t\t<h3 className='name'>{userDoc.displayName}</h3>\r\n\r\n\t\t\t\t\t\t<div className='separator'></div>\r\n\r\n\t\t\t\t\t\t<div className='cards'>\r\n\t\t\t\t\t\t\t<div className='cards__card'>\r\n\t\t\t\t\t\t\t\t<h4>About me</h4>\r\n\t\t\t\t\t\t\t\t{userDoc.bio && <p className='bio'>{userDoc.bio}</p>}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className='cards__card'>\r\n\t\t\t\t\t\t\t\t<h4>Member since</h4>\r\n\t\t\t\t\t\t\t\t<p>{userDoc.createdAt}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{userId === user.uid && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<div className='separator'></div>\r\n\t\t\t\t\t\t\t\t\t<div className='status-picker'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='flex-row'>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className={`status-dot status-dot--${userDoc.status}`}></div>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>{userDoc.status === 'do-not-disturb' ? 'do not disturb' : userDoc.status}</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-angle-right'></i>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div className='tooltip-container'>\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='picker'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{statuses.map(status => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`status ${status === userDoc.status ? 'status--current' : ''}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleStatus(status)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={status}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={`status-dot status-dot--${status}`}></span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='status__name'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{status === 'do-not-disturb' ? 'do not disturb' : status}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</ConditionalWrapper>\r\n\t\t)\r\n\t} else {\r\n\t\treturn null\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { useState } from 'react'\r\nimport { useAuthContext } from '../../../../hooks/useAuthContext'\r\nimport { useFirestore } from '../../../../hooks/useFirestore'\r\nimport { useDates } from '../../../../hooks/useDates'\r\nimport { useCollection } from '../../../../hooks/useCollection'\r\n\r\n// Styles\r\nimport './Message.scss'\r\n\r\n// Components\r\nimport Avatar from '../../../../components/Avatar/Avatar'\r\nimport Modal from '../../../../components/Modal/Modal'\r\nimport Tooltip from '../../../../components/Tooltip/Tooltip'\r\nimport AvatarWithStatus from '../../../../components/AvatarWithStatus/AvatarWithStatus'\r\nimport ProfilePreview from '../../../../components/ProfilePreview/ProfilePreview'\r\nimport EmojiPicker, { EmojiStyle, Theme } from 'emoji-picker-react'\r\nimport OutsideClickHandler from 'react-outside-click-handler'\r\n\r\nexport default function Message({\r\n\tmessage,\r\n\telements,\r\n\ti,\r\n\tchat,\r\n\tonMessageResponse,\r\n\tsetMessageToDelete,\r\n\tshowImage,\r\n\tsetShowImage,\r\n}) {\r\n\tconst { user } = useAuthContext()\r\n\tconst { updateDocument } = useFirestore('projects')\r\n\tconst { formatDate } = useDates()\r\n\tconst { documents: users } = useCollection('users')\r\n\r\n\tconst [showEmojis, setShowEmojis] = useState(null)\r\n\tconst [showModal, setShowModal] = useState(false)\r\n\tconst [emojiReactions, setEmojiReactions] = useState([])\r\n\tconst [showProfilePrev, setShowProfilePrev] = useState(false)\r\n\r\n\tconst showSendDate = (elements, i) => {\r\n\t\tif (elements[i] && elements[i - 1]) {\r\n\t\t\tconst value1 = elements[i].createdAt.toDate().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\t\t\tconst value2 = elements[i - 1].createdAt.toDate().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\r\n\t\t\t// Get miliseconds of each message.createdAt\r\n\t\t\tconst date1 = new Date('01/01/2022 ' + value1 + ':00').getTime()\r\n\t\t\tconst date2 = new Date('01/01/2022 ' + value2 + ':00').getTime()\r\n\r\n\t\t\tconst minuteDiff = Math.abs(date1 - date2)\r\n\r\n\t\t\t// Check if difference between when message was created is greater than 15 minutes\r\n\t\t\tif (minuteDiff >= 900000) {\r\n\t\t\t\treturn true\r\n\t\t\t} else {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst showSendDate2 = (elements, i) => {\r\n\t\tif (elements[i + 1] && elements[i]) {\r\n\t\t\tconst value1 = elements[i + 1].createdAt.toDate().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\t\t\tconst value2 = elements[i].createdAt.toDate().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\r\n\t\t\t// Get miliseconds of each message.createdAt\r\n\t\t\tconst date1 = new Date('01/01/2022 ' + value1 + ':00').getTime()\r\n\t\t\tconst date2 = new Date('01/01/2022 ' + value2 + ':00').getTime()\r\n\r\n\t\t\tconst minuteDiff = Math.abs(date1 - date2)\r\n\r\n\t\t\t// Check if difference between when message was created is greater than 15 minutes\r\n\t\t\tif (minuteDiff >= 900000) {\r\n\t\t\t\treturn true\r\n\t\t\t} else {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst showFullImage = e => {\r\n\t\tif (showImage !== e.target.src) {\r\n\t\t\tsetShowImage(e.target.src)\r\n\t\t}\r\n\t}\r\n\r\n\tconst scrollToResponse = id => {\r\n\t\tconst ref = document.getElementById(id)\r\n\t\tref.scrollIntoView({ block: 'center' })\r\n\t\tsetTimeout(() => {\r\n\t\t\tref.classList.add('pop')\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tref.classList.remove('pop')\r\n\t\t\t}, 800)\r\n\t\t}, 400)\r\n\t}\r\n\r\n\tconst reactWithEmoji = async (e, message) => {\r\n\t\tconst indexOfMessage = chat.messages.indexOf(message)\r\n\r\n\t\tlet otherUserReaction = null\r\n\r\n\t\tif (message.emojiReactions && message.emojiReactions.length > 0) {\r\n\t\t\tmessage.emojiReactions.forEach(rec => {\r\n\t\t\t\tif (rec !== null) {\r\n\t\t\t\t\tif (rec.id !== user.uid) {\r\n\t\t\t\t\t\totherUserReaction = rec\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tconst emojiToAdd = {\r\n\t\t\tid: user.uid,\r\n\t\t\tcontent: e.emoji,\r\n\t\t}\r\n\r\n\t\tchat.messages[indexOfMessage] = {\r\n\t\t\t...chat.messages[indexOfMessage],\r\n\t\t\temojiReactions: [\r\n\t\t\t\totherUserReaction ? otherUserReaction : null,\r\n\t\t\t\t{\r\n\t\t\t\t\t...emojiToAdd,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\tmessages: [...chat.messages],\r\n\t\t\t})\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleReactionNicknames = reaction => {\r\n\t\tlet nickname\r\n\t\tchat.assignedUsers.forEach(u => {\r\n\t\t\tif (u.id === reaction.id) {\r\n\t\t\t\tif (u.nickname !== '') {\r\n\t\t\t\t\tnickname = u.nickname\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnickname = u.displayName\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn nickname\r\n\t}\r\n\r\n\tconst deleteEmojiReaction = async (message, reaction) => {\r\n\t\tlet otherUserReaction = null\r\n\t\tif (reaction.id === user.uid) {\r\n\t\t\tif (message.emojiReactions.length > 0) {\r\n\t\t\t\tmessage.emojiReactions.forEach(rec => {\r\n\t\t\t\t\tif (rec !== null && rec.id !== user.uid) {\r\n\t\t\t\t\t\totherUserReaction = rec\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tconst indexOfMessage = chat.messages.indexOf(message)\r\n\r\n\t\t\tchat.messages[indexOfMessage] = {\r\n\t\t\t\t...chat.messages[indexOfMessage],\r\n\t\t\t\temojiReactions: [otherUserReaction],\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\t\tmessages: [...chat.messages],\r\n\t\t\t\t})\r\n\t\t\t\tsetEmojiReactions([])\r\n\t\t\t\tsetShowModal(false)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst getDoc = id => {\r\n\t\tlet res = null\r\n\r\n\t\tif (users) {\r\n\t\t\tres = users.filter(doc => {\r\n\t\t\t\tif (doc.id === id) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t})[0]\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst getLocalUser = id => {\r\n\t\tlet res = null\r\n\r\n\t\tif (chat) {\r\n\t\t\tchat.assignedUsers.forEach(u => {\r\n\t\t\t\tif (u.id === id) {\r\n\t\t\t\t\tres = u\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst isTop = () => {\r\n\t\tif (\r\n\t\t\telements[i + 1] &&\r\n\t\t\t(!elements[i - 1] ||\r\n\t\t\t\telements[i - 1].createdBy !== message.createdBy ||\r\n\t\t\t\telements[i + 1].response !== null ||\r\n\t\t\t\tshowSendDate(elements, i) ||\r\n\t\t\t\tmessage.response !== null) &&\r\n\t\t\telements[i + 1].createdBy === message.createdBy &&\r\n\t\t\telements[i + 1].response === null &&\r\n\t\t\t!showSendDate2(elements, i)\r\n\t\t) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tconst isMiddle = () => {\r\n\t\tif (\r\n\t\t\telements[i - 1] &&\r\n\t\t\telements[i + 1] &&\r\n\t\t\t(elements[i - 1].createdBy === message.createdBy || elements[i - 1].response !== null) &&\r\n\t\t\telements[i + 1].createdBy === message.createdBy &&\r\n\t\t\telements[i + 1].response === null &&\r\n\t\t\t!showSendDate(elements, i) &&\r\n\t\t\t!showSendDate2(elements, i)\r\n\t\t) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tconst isBottom = () => {\r\n\t\tif (\r\n\t\t\telements[i - 1] &&\r\n\t\t\telements[i - 1].createdBy === message.createdBy &&\r\n\t\t\tmessage.response === null &&\r\n\t\t\t((!elements[i + 1] && message.response === null) ||\r\n\t\t\t\t(elements[i + 1] &&\r\n\t\t\t\t\t(elements[i + 1].response !== null ||\r\n\t\t\t\t\t\telements[i + 1].createdBy !== message.createdBy ||\r\n\t\t\t\t\t\tshowSendDate2(elements, i)))) &&\r\n\t\t\t!showSendDate(elements, i)\r\n\t\t) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tconst handleMessageStyle = () => {\r\n\t\tif (isTop()) {\r\n\t\t\tif (message.createdBy === user.uid) {\r\n\t\t\t\treturn 'group-top owner'\r\n\t\t\t} else {\r\n\t\t\t\treturn 'group-top'\r\n\t\t\t}\r\n\t\t} else if (isMiddle()) {\r\n\t\t\tif (message.createdBy === user.uid) {\r\n\t\t\t\treturn 'group-middle owner'\r\n\t\t\t} else {\r\n\t\t\t\treturn 'group-middle'\r\n\t\t\t}\r\n\t\t} else if (isBottom()) {\r\n\t\t\tif (message.createdBy === user.uid) {\r\n\t\t\t\treturn 'group-bottom owner'\r\n\t\t\t} else {\r\n\t\t\t\treturn 'group-bottom'\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (message.createdBy === user.uid) {\r\n\t\t\t\treturn 'owner'\r\n\t\t\t} else {\r\n\t\t\t\treturn ''\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{message.isSpecial && <div className='messages__centered mt2 mb2'>{message.content}</div>}\r\n\t\t\t{!message.isSpecial && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{showSendDate(elements, i) && (\r\n\t\t\t\t\t\t<div className='messages__centered mb1 mt2'>{formatDate(message.createdAt)}</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tclassName={`${handleMessageStyle()} ${message.deleted ? 'deleted' : ''} ${\r\n\t\t\t\t\t\t\tmessage.emojiReactions && message.emojiReactions.filter(r => r === null).length === 0\r\n\t\t\t\t\t\t\t\t? 'emoji-response'\r\n\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\tid={message.id}>\r\n\t\t\t\t\t\t{message.createdBy !== user.uid && (isTop() || !(isMiddle() || isBottom())) && (\r\n\t\t\t\t\t\t\t<p className='message-author'>{getLocalUser(message.createdBy).nickname}</p>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{message.response !== null && (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tonClick={() => scrollToResponse(chat.messages[message.response].id)}\r\n\t\t\t\t\t\t\t\tclassName={`response ${chat.messages[message.response].deleted ? 'deleted' : ''}`}>\r\n\t\t\t\t\t\t\t\t{message.createdBy !== user.uid && <div className='left-margin'></div>}\r\n\r\n\t\t\t\t\t\t\t\t{chat.messages[message.response].content && (\r\n\t\t\t\t\t\t\t\t\t<div className='response__message'>{chat.messages[message.response].content.substring(0, 55)}</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t<div className='response__img'>\r\n\t\t\t\t\t\t\t\t\t{chat.messages[message.response].image &&\r\n\t\t\t\t\t\t\t\t\t\t(chat.messages[message.response].fileType === 'image' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={chat.messages[message.response].image} alt='' />\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<video src={chat.messages[message.response].image}></video>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div className='message-content'>\r\n\t\t\t\t\t\t\t{message.createdBy !== user.uid && (\r\n\t\t\t\t\t\t\t\t<div className='left-margin'>\r\n\t\t\t\t\t\t\t\t\t{!isMiddle() &&\r\n\t\t\t\t\t\t\t\t\t\t!(\r\n\t\t\t\t\t\t\t\t\t\t\t// top\r\n\t\t\t\t\t\t\t\t\t\t\tisTop()\r\n\t\t\t\t\t\t\t\t\t\t) && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='cursor-pointer' onClick={() => setShowProfilePrev(message.id)}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<AvatarWithStatus userId={message.createdBy} noStatus={true} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ProfilePreview\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshow={showProfilePrev === message.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetShow={setShowProfilePrev}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserId={message.createdBy}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpos='right'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talign='end'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<div className='message-content__text'>\r\n\t\t\t\t\t\t\t\t{message.content && <p>{message.content}</p>}\r\n\r\n\t\t\t\t\t\t\t\t{message.image && message.fileType === 'image' && (\r\n\t\t\t\t\t\t\t\t\t<div className='file-message' onClick={e => showFullImage(e)}>\r\n\t\t\t\t\t\t\t\t\t\t<img src={message.image} alt='' />\r\n\t\t\t\t\t\t\t\t\t\t<div className='file-message__preview'>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-up-right-and-down-left-from-center'></i>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{message.image && message.fileType === 'video' && (\r\n\t\t\t\t\t\t\t\t\t<div className='file-message'>\r\n\t\t\t\t\t\t\t\t\t\t<video src={message.image} controls playsInline />\r\n\t\t\t\t\t\t\t\t\t\t<div className='file-message__preview'>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-up-right-and-down-left-from-center'></i>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{message.emojiReactions && message.emojiReactions.length > 0 && (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='emoji-reactions'\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEmojiReactions(message.emojiReactions)\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowModal(true)\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t{message.emojiReactions.map(reaction =>\r\n\t\t\t\t\t\t\t\t\t\t\t\treaction !== null ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={reaction.id} className='emoji-reactions__reaction'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='content'>{reaction.content}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='display-name'>{handleReactionNicknames(reaction)}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Modal show={showModal} setShow={() => setShowModal(false)} onClose={() => setEmojiReactions([])}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='show-reactions'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3>Reactions</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{emojiReactions.map(reaction =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treaction !== null ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`reaction ${reaction.id === user.uid ? 'cursor-pointer' : ''}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteEmojiReaction(message, reaction)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={reaction.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='reaction__author'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={getDoc(reaction.id).photoURL} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{getLocalUser(reaction.id).nickname}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{reaction.id === user.uid && <p>Click to delete</p>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='reaction__emoji'>{reaction.content}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Modal>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{showEmojis === message && (\r\n\t\t\t\t\t\t\t\t<div className='react-with-emoji'>\r\n\t\t\t\t\t\t\t\t\t<OutsideClickHandler\r\n\t\t\t\t\t\t\t\t\t\tonOutsideClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowEmojis(null)\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={showEmojis === message ? false : true}>\r\n\t\t\t\t\t\t\t\t\t\t<EmojiPicker\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='emoji-picker'\r\n\t\t\t\t\t\t\t\t\t\t\tonEmojiClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treactWithEmoji(e, message)\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\ttheme={Theme.DARK}\r\n\t\t\t\t\t\t\t\t\t\t\tpreviewConfig={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultCaption: '',\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultEmoji: null,\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\twidth={300}\r\n\t\t\t\t\t\t\t\t\t\t\theight={400}\r\n\t\t\t\t\t\t\t\t\t\t\t// lazyLoadEmojis={true}\r\n\t\t\t\t\t\t\t\t\t\t\temojiStyle={EmojiStyle.NATIVE}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</OutsideClickHandler>\r\n\r\n\t\t\t\t\t\t\t\t\t<svg height='12' viewBox='0 0 25 12' width='25' data-darkreader-inline-fill=''>\r\n\t\t\t\t\t\t\t\t\t\t<path d='M24.553.103c-2.791.32-5.922 1.53-7.78 3.455l-9.62 7.023c-2.45 2.54-5.78 1.645-5.78-2.487V2.085C1.373 1.191.846.422.1.102h24.453z'></path>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{!message.deleted && (\r\n\t\t\t\t\t\t\t\t<div className={`message-tools ${showEmojis === message ? 'visible' : ''}`}>\r\n\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\tclassName='fa-regular fa-face-smile'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowEmojis(message)\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<Tooltip>React</Tooltip>\r\n\t\t\t\t\t\t\t\t\t</i>\r\n\r\n\t\t\t\t\t\t\t\t\t{user.uid === message.createdBy && (\r\n\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-trash-can' onClick={() => setMessageToDelete(message)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip>Remove</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t</i>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\tclassName='fa-solid fa-reply'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tonMessageResponse(Number(chat.messages.indexOf(message)))\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<Tooltip>Reply</Tooltip>\r\n\t\t\t\t\t\t\t\t\t</i>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\t\tpos='top'\r\n\t\t\t\t\t\t\t\talign='center'\r\n\t\t\t\t\t\t\t\tclassName={`message-createdAt ${showEmojis === message ? 'hidden' : ''}`}>\r\n\t\t\t\t\t\t\t\t<span>{formatDate(message.createdAt)}</span>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='seen'>\r\n\t\t\t\t\t\t\t{chat.assignedUsers.map(\r\n\t\t\t\t\t\t\t\tu =>\r\n\t\t\t\t\t\t\t\t\tu.lastRead === message.id &&\r\n\t\t\t\t\t\t\t\t\tu.id !== user.uid && (\r\n\t\t\t\t\t\t\t\t\t\t<React.Fragment key={u.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Avatar src={getDoc(u.id) !== null ? getDoc(u.id).photoURL : ''} />\r\n\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { useAuthContext } from '../../../hooks/useAuthContext'\r\nimport { useDates } from '../../../hooks/useDates'\r\nimport { useFirestore } from '../../../hooks/useFirestore'\r\nimport { useLocation } from 'react-router-dom'\r\nimport FileSaver from 'file-saver'\r\nimport Message from './Message/Message'\r\n\r\n// Styles && Assets\r\nimport './Messages.scss'\r\nimport Modal from '../../../components/Modal/Modal'\r\n\r\nconst Messages = ({ chat, onMessageResponse, setBottomDiv, otherUser, currentUser }) => {\r\n\tconst { user } = useAuthContext()\r\n\tconst { dates } = useDates()\r\n\tconst { updateDocument } = useFirestore('projects')\r\n\r\n\tconst [showImage, setShowImage] = useState('')\r\n\tconst [messageToDelete, setMessageToDelete] = useState(null)\r\n\tconst [showModal, setShowModal] = useState(false)\r\n\r\n\tconst location = useLocation()\r\n\tconst bottomRef = useRef()\r\n\tconst scrollDownRef = useRef()\r\n\r\n\tuseEffect(() => {\r\n\t\tsetBottomDiv(bottomRef)\r\n\t\tscrollToBottom()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetBottomDiv(bottomRef)\r\n\t\tscrollToBottom()\r\n\t\tonMessageResponse(null)\r\n\t}, [location])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (messageToDelete !== null) {\r\n\t\t\tsetShowModal(true)\r\n\t\t} else {\r\n\t\t\tsetShowModal(false)\r\n\t\t}\r\n\t}, [messageToDelete, showModal])\r\n\r\n\tconst deleteMessage = async message => {\r\n\t\tif (user.uid === message.createdBy) {\r\n\t\t\tchat.messages[chat.messages.indexOf(message)] = {\r\n\t\t\t\t...chat.messages[chat.messages.indexOf(message)],\r\n\t\t\t\tcontent: 'Message deleted',\r\n\t\t\t\temojiReactions: null,\r\n\t\t\t\tdeleted: true,\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\t\tmessages: [...chat.messages],\r\n\t\t\t\t})\r\n\t\t\t\tsetMessageToDelete(null)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst hideFullImage = () => {\r\n\t\tsetShowImage('')\r\n\t}\r\n\r\n\tconst downloadImage = () => {\r\n\t\tFileSaver.saveAs(showImage)\r\n\t}\r\n\r\n\tconst scrollToBottom = () => {\r\n\t\tif (bottomRef.current) {\r\n\t\t\tbottomRef.current.scrollIntoView({\r\n\t\t\t\tblock: 'end',\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleScrollDownBtn = e => {\r\n\t\tconst winScroll = e.target.scrollTop\r\n\r\n\t\tif (-winScroll <= 300) {\r\n\t\t\tscrollDownRef.current.classList.remove('active')\r\n\t\t}\r\n\r\n\t\tif (-winScroll >= 300) {\r\n\t\t\tscrollDownRef.current.classList.add('active')\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ul className='messages custom-scrollbar' id='messages' onScroll={e => handleScrollDownBtn(e)}>\r\n\t\t\t{showImage && (\r\n\t\t\t\t<div className='full-img'>\r\n\t\t\t\t\t<div className='full-img__background'>\r\n\t\t\t\t\t\t<div className='backdrop-blur'></div>\r\n\t\t\t\t\t\t<img src={showImage} alt='' className='' />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='wrapper'>\r\n\t\t\t\t\t\t<img src={showImage} alt='' className='full-img__img' />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='full-img__tools'>\r\n\t\t\t\t\t\t<div className='tool' onClick={() => downloadImage()}>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-download'></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='tool' onClick={() => hideFullImage()}>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-xmark'></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<div className='messages-wrapper'>\r\n\t\t\t\t<div className='messages__conversation-start'>\r\n\t\t\t\t\t<p>This is the start of your conversation with this user</p>\r\n\t\t\t\t\t<p>{dates(chat.createdAt).fullDate}</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{chat.messages.length > 0 &&\r\n\t\t\t\t\tchat.messages.map((message, i, elements) => (\r\n\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\tkey={message.id}\r\n\t\t\t\t\t\t\tmessage={message}\r\n\t\t\t\t\t\t\telements={elements}\r\n\t\t\t\t\t\t\ti={i}\r\n\t\t\t\t\t\t\tchat={chat}\r\n\t\t\t\t\t\t\tonMessageResponse={onMessageResponse}\r\n\t\t\t\t\t\t\tsetMessageToDelete={setMessageToDelete}\r\n\t\t\t\t\t\t\tshowImage={showImage}\r\n\t\t\t\t\t\t\tsetShowImage={setShowImage}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t<div ref={bottomRef} className='bottom-ref'></div>\r\n\t\t\t</div>\r\n\t\t\t<div className='scroll-down' onClick={() => scrollToBottom()} ref={scrollDownRef}>\r\n\t\t\t\t<i className='fa-solid fa-arrow-down'></i>\r\n\t\t\t</div>\r\n\t\t\t{messageToDelete !== null && (\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tshow={showModal}\r\n\t\t\t\t\tsetShow={() => setMessageToDelete(null)}\r\n\t\t\t\t\t// onClose={() => {}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className='confirm-message-delete'>\r\n\t\t\t\t\t\t<h2>Delete message</h2>\r\n\t\t\t\t\t\t<p>Do you really want to delete this message?</p>\r\n\r\n\t\t\t\t\t\t<p>Message to delete: </p>\r\n\t\t\t\t\t\t<div className='message-to-delete custom-scrollbar'>\r\n\t\t\t\t\t\t\t{messageToDelete.content && <span>\"{messageToDelete.content}\"</span>}\r\n\t\t\t\t\t\t\t{messageToDelete.image && <img src={messageToDelete.image} alt='' />}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='vertical-btns'>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='btn btn--secondary'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetMessageToDelete(null)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button className='btn' onClick={() => deleteMessage(messageToDelete)}>\r\n\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal>\r\n\t\t\t)}\r\n\t\t</ul>\r\n\t)\r\n}\r\n\r\nexport default Messages\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { timestamp, projectStorage } from '../../../firebase/config'\r\nimport { useAuthContext } from '../../../hooks/useAuthContext'\r\nimport { useFirestore } from '../../../hooks/useFirestore'\r\nimport { v4 as uuid } from 'uuid'\r\nimport { getDownloadURL, ref, uploadBytes } from 'firebase/storage'\r\nimport { useCollection } from '../../../hooks/useCollection'\r\nimport EmojiPicker, { Emoji, EmojiStyle, Theme } from 'emoji-picker-react'\r\nimport OutsideClickHandler from 'react-outside-click-handler'\r\nimport imageCompression from 'browser-image-compression'\r\n// import Cryptr from 'cryptr'\r\n\r\n// Styles && Assets\r\nimport './MessageField.scss'\r\n\r\nconst MessageField = ({ chat, messageResponse, onMessageResponse, bottomDiv, inputRef, otherUser, currentUser }) => {\r\n\t// const cryptr = new Cryptr('myTotallySecretKey', { pbkdf2Iterations: 10000, saltLength: 10 })\r\n\r\n\tconst uniqueId = uuid()\r\n\r\n\tconst { updateDocument, response } = useFirestore('projects')\r\n\tconst { documents: users } = useCollection('users')\r\n\tconst { user } = useAuthContext()\r\n\r\n\tconst [newComment, setNewComment] = useState('')\r\n\tconst [imgUpload, setImgUpload] = useState(null)\r\n\tconst [isAssignedUser, setIsAssignedUser] = useState(false)\r\n\tconst [fastEmoji, setFastEmoji] = useState(chat.chatEmoji)\r\n\tconst [sendFastEmoji, setSendFastEmoji] = useState(false)\r\n\tconst [showEmojis, setShowEmojis] = useState(false)\r\n\tconst [seen, setSeen] = useState(false)\r\n\tconst fileInputRef = useRef(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tinputRef.current.focus()\r\n\t}, [messageResponse])\r\n\r\n\tuseEffect(() => {\r\n\t\tchat.assignedUsersId.forEach(id => {\r\n\t\t\tif (id === user.uid) setIsAssignedUser(true)\r\n\t\t})\r\n\t}, [setIsAssignedUser, chat.assignedUsersId, user.uid])\r\n\r\n\tconst scrollToBottom = () => {\r\n\t\tbottomDiv.current.scrollIntoView({\r\n\t\t\tblock: 'end',\r\n\t\t})\r\n\t}\r\n\r\n\tconst sendMessage = async () => {\r\n\t\t// let encryptedMessage\r\n\t\t// encryptedMessage = cryptr.encrypt(sendFastEmoji ? fastEmoji : newComment)\r\n\r\n\t\tconst commentToAdd = {\r\n\t\t\tid: uniqueId,\r\n\t\t\tcontent: sendFastEmoji ? fastEmoji : newComment,\r\n\t\t\tcreatedAt: timestamp.fromDate(new Date()),\r\n\t\t\tcreatedBy: user.uid,\r\n\t\t\tresponse: messageResponse !== null ? messageResponse : null,\r\n\t\t}\r\n\r\n\t\tif (commentToAdd.content.trim() !== '' && newComment.length < 900 && isAssignedUser) {\r\n\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\tmessages: [...chat.messages, commentToAdd],\r\n\t\t\t\tupdatedAt: timestamp.fromDate(new Date()),\r\n\t\t\t})\r\n\t\t\tif (!response.error) {\r\n\t\t\t\tsetSeen(!seen)\r\n\t\t\t\tscrollToBottom()\r\n\t\t\t\tsetNewComment('')\r\n\t\t\t\tsetSendFastEmoji(false)\r\n\t\t\t\tonMessageResponse(null)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (document.messages && document.messages.length > 0) {\r\n\t\t\tupdateDocument(chat.id, {\r\n\t\t\t\tisRead: true,\r\n\t\t\t\tassignedUsers: [\r\n\t\t\t\t\totherUser,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: currentUser.id,\r\n\t\t\t\t\t\tnickname: currentUser.nickname,\r\n\t\t\t\t\t\tlastRead: chat.messages[chat.messages.length - 1].id,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t})\r\n\t\t}\r\n\t}, [seen])\r\n\r\n\tconst sendImage = async () => {\r\n\t\tconst acceptedFileTypes = ['image', 'video']\r\n\r\n\t\tif (acceptedFileTypes.includes(imgUpload.type.split('/')[0])) {\r\n\t\t\tconst storageRef = ref(\r\n\t\t\t\tprojectStorage,\r\n\t\t\t\t`imgs/${chat.assignedUsersId[0] + chat.assignedUsersId[1]}/${uuid() + imgUpload.name}`\r\n\t\t\t)\r\n\t\t\tconst uploadTask = uploadBytes(storageRef, imgUpload)\r\n\r\n\t\t\tuploadTask.then(snapshot => {\r\n\t\t\t\tgetDownloadURL(snapshot.ref).then(async downloadURL => {\r\n\t\t\t\t\tconst commentToAdd = {\r\n\t\t\t\t\t\tid: uniqueId,\r\n\t\t\t\t\t\t// content: newComment,\r\n\t\t\t\t\t\tfileType: imgUpload.type.includes('image/') ? 'image' : 'video',\r\n\t\t\t\t\t\timage: downloadURL,\r\n\t\t\t\t\t\tcreatedAt: timestamp.fromDate(new Date()),\r\n\t\t\t\t\t\tcreatedBy: user.uid,\r\n\t\t\t\t\t\tresponse: messageResponse !== null ? messageResponse : null,\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (isAssignedUser) {\r\n\t\t\t\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\t\t\t\tmessages: [...chat.messages, commentToAdd],\r\n\t\t\t\t\t\t\tupdatedAt: timestamp.fromDate(new Date()),\r\n\t\t\t\t\t\t\tisRead: false,\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tif (!response.error) {\r\n\t\t\t\t\t\t\tsetSeen(!seen)\r\n\t\t\t\t\t\t\tscrollToBottom()\r\n\t\t\t\t\t\t\tsetImgUpload(null)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleImageUpload = async e => {\r\n\t\tconst imageFile = e.target.files[0]\r\n\r\n\t\tconst options = {\r\n\t\t\tmaxSizeMB: 1,\r\n\t\t\tmaxWidthOrHeight: 1920,\r\n\t\t\tuseWebWorker: true,\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst compressedFile = await imageCompression(imageFile, options)\r\n\t\t\tawait setImgUpload(compressedFile)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSubmit = e => {\r\n\t\te.preventDefault()\r\n\r\n\t\tif (imgUpload) {\r\n\t\t\tsendImage()\r\n\t\t} else {\r\n\t\t\tsendMessage()\r\n\t\t}\r\n\t}\r\n\r\n\tconst getDoc = id => {\r\n\t\tlet res = null\r\n\r\n\t\tif (users) {\r\n\t\t\tres = users.filter(doc => {\r\n\t\t\t\tif (doc.id === id) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t})[0]\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst handleKey = e => {\r\n\t\te.code === 'Enter' && handleSubmit(e)\r\n\t}\r\n\r\n\tconst [fileThumbnail, setFileThumbnail] = useState('')\r\n\r\n\tconst handleFileChange = e => {\r\n\t\thandleImageUpload(e)\r\n\t\tsetFileThumbnail(URL.createObjectURL(e.target.files[0]))\r\n\t}\r\n\r\n\tconst resetFileInput = e => {\r\n\t\te.preventDefault()\r\n\t\tfileInputRef.current.value = ''\r\n\t\tsetImgUpload(null)\r\n\t}\r\n\r\n\tconst handleEmojis = e => {\r\n\t\tsetNewComment(newComment => newComment + e.emoji)\r\n\t}\r\n\r\n\treturn (\r\n\t\tchat && (\r\n\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t{messageResponse !== null && (\r\n\t\t\t\t\t<div className='response'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<p className='response__to'>\r\n\t\t\t\t\t\t\t\tResponding to{' '}\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t{/* //! */}\r\n\t\t\t\t\t\t\t\t\t{getDoc(chat.messages[messageResponse].createdBy).displayName === user.displayName ? (\r\n\t\t\t\t\t\t\t\t\t\t'yourself'\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<b>{chat.messages[messageResponse].displayName}</b>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<p className='response__content'>\r\n\t\t\t\t\t\t\t\t{chat.messages[messageResponse].content && (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t{chat.messages[messageResponse].content.substring(0, 70)}\r\n\t\t\t\t\t\t\t\t\t\t{chat.messages[messageResponse].content.length > 70 ? <span>...</span> : ''}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{chat.messages[messageResponse].image && chat.messages[messageResponse].fileType === 'image'\r\n\t\t\t\t\t\t\t\t\t? 'Image'\r\n\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t\t\t\t\t\t\t{chat.messages[messageResponse].image && chat.messages[messageResponse].fileType === 'video'\r\n\t\t\t\t\t\t\t\t\t? 'Video'\r\n\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='response__close-btn' onClick={() => onMessageResponse(null)}>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-xmark'></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<div className='add-comment'>\r\n\t\t\t\t\t<label className='attach-image'>\r\n\t\t\t\t\t\t<input ref={fileInputRef} type='file' accept='video/*, image/*' onChange={e => handleFileChange(e)} />\r\n\t\t\t\t\t\t<i className='fa-regular fa-image'></i>\r\n\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t<div className='message-field'>\r\n\t\t\t\t\t\t<div className='column'>\r\n\t\t\t\t\t\t\t{imgUpload && (\r\n\t\t\t\t\t\t\t\t<div className='thumbnails'>\r\n\t\t\t\t\t\t\t\t\t<div className='file-thumbnail'>\r\n\t\t\t\t\t\t\t\t\t\t<img src={fileThumbnail} alt='' />\r\n\t\t\t\t\t\t\t\t\t\t<button className='remove-img' onClick={e => resetFileInput(e)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-xmark close-btn'></i>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tmaxLength='900'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Aa'\r\n\t\t\t\t\t\t\t\t\tonChange={e => setNewComment(e.target.value)}\r\n\t\t\t\t\t\t\t\t\tvalue={newComment}\r\n\t\t\t\t\t\t\t\t\tonKeyDown={e => handleKey(e)}\r\n\t\t\t\t\t\t\t\t\tref={inputRef}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='toggle-emoji-picker'\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\tsetShowEmojis(!showEmojis)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<i className='fa-regular fa-face-smile'></i>\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t{showEmojis && (\r\n\t\t\t\t\t\t\t<OutsideClickHandler\r\n\t\t\t\t\t\t\t\tonOutsideClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetShowEmojis(false)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<EmojiPicker\r\n\t\t\t\t\t\t\t\t\tclassName='emoji-picker'\r\n\t\t\t\t\t\t\t\t\tonEmojiClick={e => {\r\n\t\t\t\t\t\t\t\t\t\thandleEmojis(e)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttheme={Theme.DARK}\r\n\t\t\t\t\t\t\t\t\tpreviewConfig={{\r\n\t\t\t\t\t\t\t\t\t\tdefaultCaption: '',\r\n\t\t\t\t\t\t\t\t\t\tdefaultEmoji: null,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t// lazyLoadEmojis={true}\r\n\t\t\t\t\t\t\t\t\temojiStyle={EmojiStyle.NATIVE}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</OutsideClickHandler>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{!imgUpload && newComment.trim() === '' && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='input-tool'\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\tsetFastEmoji(e.target.innerText)\r\n\t\t\t\t\t\t\t\tsetSendFastEmoji(true)\r\n\t\t\t\t\t\t\t\t// sendMessage()\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{chat.chatEmoji && <Emoji unified={chat.chatEmoji} emojiStyle={EmojiStyle.NATIVE} size={33} />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{(newComment.trim() !== '' || imgUpload) && (\r\n\t\t\t\t\t\t<button type='submit' className='input-tool'>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-paper-plane'></i>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{newComment.length >= 900 && <p className='error'>Message can't be longer than 900 characters</p>}\r\n\t\t\t</form>\r\n\t\t)\r\n\t)\r\n}\r\n\r\nexport default MessageField\r\n","export default __webpack_public_path__ + \"static/media/british-person.a8ef58d2.jpg\";","// Components\r\nimport Avatar from '../Avatar/Avatar'\r\n\r\n// Styles && Assets\r\nimport britImg from '../../assets/british-person.jpg'\r\nimport Modal from '../Modal/Modal'\r\n\r\nconst ThemePreview = ({\r\n\totherUserMessage,\r\n\tcurUserMessage,\r\n\tbgDark,\r\n\tborderRadius,\r\n\ttextColors,\r\n\tinputColors,\r\n\tconfirmCustomTheme,\r\n\tsetConfirmCustomTheme,\r\n\tsubmitCustomTheme,\r\n\teditedTheme,\r\n\tsetShowThemePicker,\r\n\tsetShowThemeCreator,\r\n\tbuttonColor,\r\n\tname,\r\n}) => {\r\n\tconst spreadColors = () => {\r\n\t\tlet colors = null\r\n\r\n\t\tcurUserMessage.bg.forEach(color => {\r\n\t\t\tcolors === null ? (colors = `${color.value}`) : (colors = `${colors}, ${color.value}`)\r\n\t\t})\r\n\r\n\t\tif (curUserMessage.bg.length === 1) {\r\n\t\t\treturn `linear-gradient(${colors}, ${colors})`\r\n\t\t} else {\r\n\t\t\treturn `linear-gradient(${colors})`\r\n\t\t}\r\n\t}\r\n\r\n\tconst messageStyles = {\r\n\t\tbackgroundColor: otherUserMessage.bg,\r\n\t\tcolor: otherUserMessage.text,\r\n\t\tborder: `1px solid ${otherUserMessage.border}`,\r\n\t}\r\n\r\n\tconst messageOwnerStyles = {\r\n\t\tbackgroundImage: `${spreadColors()}`,\r\n\t\tbackgroundAttachment: 'fixed',\r\n\t\tbackgroundPosition: 'center 100%',\r\n\t\tbackgroundSize: 'auto 35%',\r\n\t\tborderRadius: '25px',\r\n\t\tborder: `1px solid ${curUserMessage.border}`,\r\n\t\tcolor: curUserMessage.text,\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='theme-creator__preview'>\r\n\t\t\t<div className='chat-preview' style={{ backgroundColor: bgDark.value, borderRadius: `${borderRadius.value}px` }}>\r\n\t\t\t\t<div className='chat-preview__top-bar'>\r\n\t\t\t\t\t<div className='chat-preview__top-bar__user'>\r\n\t\t\t\t\t\t<Avatar src={britImg} />\r\n\t\t\t\t\t\t<span style={{ color: textColors.primary }}>John Doe</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<i className='fa-solid fa-ellipsis-vertical' style={{ color: textColors.accent }}></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='chat-preview__messages'>\r\n\t\t\t\t\t<div className='message owner' style={{ ...messageOwnerStyles, borderRadius: '25px 25px 5px 25px' }}>\r\n\t\t\t\t\t\tHello mate\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='message owner' style={{ ...messageOwnerStyles, borderRadius: '25px 5px 25px 25px' }}>\r\n\t\t\t\t\t\tit's tuesday init?\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='centered' style={{ color: textColors.lowContrast }}>\r\n\t\t\t\t\t\tSet quick emoji to ☕\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='message' style={{ ...messageStyles, borderRadius: '25px 25px 25px 5px' }}>\r\n\t\t\t\t\t\toh yes yes\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='message' style={{ ...messageStyles, borderRadius: '5px 25px 25px 5px' }}>\r\n\t\t\t\t\t\twhat a lovely weather we have today\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='message' style={{ ...messageStyles, borderRadius: '5px 25px 25px 25px' }}>\r\n\t\t\t\t\t\t🌞\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<br />\r\n\r\n\t\t\t\t\t<div className='message owner' style={{ ...messageOwnerStyles, borderRadius: '25px 25px 25px 25px' }}>\r\n\t\t\t\t\t\t*sips tea 🍵*\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='flex-row'>\r\n\t\t\t\t\t<i className='fa-regular fa-image' style={{ color: textColors.accent }}></i>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='chat-preview__input'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tbackgroundColor: inputColors.bg,\r\n\t\t\t\t\t\t\tcolor: inputColors.text,\r\n\t\t\t\t\t\t\tborder: `1px solid ${inputColors.border}`,\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<span>I love tea 😍</span>\r\n\r\n\t\t\t\t\t\t<i className='fa-regular fa-face-smile' style={{ color: textColors.accent }}></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='chat-preview__quick-emoji'>☕</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<Modal show={confirmCustomTheme} setShow={() => setConfirmCustomTheme(false)}>\r\n\t\t\t\t<h3>Are you sure you want to proceed?</h3>\r\n\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t<div className='btn btn--secondary' onClick={() => setConfirmCustomTheme(false)}>\r\n\t\t\t\t\t\tgo back\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='btn' onClick={() => submitCustomTheme()}>\r\n\t\t\t\t\t\t{editedTheme !== null ? 'edit' : 'create'} theme\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t<div className='btn-group'>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='btn btn--secondary'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetShowThemeCreator(false)\r\n\t\t\t\t\t\tsetShowThemePicker(true)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tcolor: textColors.accent,\r\n\t\t\t\t\t\tborder: `1px solid ${textColors.accent}`,\r\n\t\t\t\t\t\tborderRadius: `${borderRadius.value}px`,\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tcancel\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t{name.length > 0 && (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\tclassName='btn'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetConfirmCustomTheme(true)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tcolor: buttonColor.value,\r\n\t\t\t\t\t\t\tborderRadius: `${borderRadius.value}px`,\r\n\t\t\t\t\t\t\tborder: `1px solid ${textColors.accent}`,\r\n\t\t\t\t\t\t\tbackgroundColor: textColors.accent,\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{editedTheme !== null ? 'edit' : 'create'}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{name.length <= 0 && (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='btn'\r\n\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tcolor: buttonColor.value,\r\n\t\t\t\t\t\t\tborderRadius: `${borderRadius.value}px`,\r\n\t\t\t\t\t\t\tborder: `1px solid ${textColors.accent}`,\r\n\t\t\t\t\t\t\tbackgroundColor: textColors.accent,\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{editedTheme !== null ? 'edit' : 'create'}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ThemePreview\r\n","const Field = ({ title, setShow, show, children }) => {\r\n\treturn (\r\n\t\t<div className='field'>\r\n\t\t\t<p\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetShow()\r\n\t\t\t\t}}>\r\n\t\t\t\t<i className={`fa-solid fa-angle-right ${show ? 'active' : ''}`}></i>\r\n\t\t\t\t<span>{title}</span>\r\n\t\t\t</p>\r\n\r\n\t\t\t{show && children}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Field\r\n","// Styles\r\nimport './ColorPicker.scss'\r\n\r\nconst ColorPicker = ({ value, setValue, separator, children }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{separator && (\r\n\t\t\t\t<div className='separator'>\r\n\t\t\t\t\t<span>{separator}</span>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<div className='color-picker'>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tclassName='color-picker__value'\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\tsetValue(e)\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='color'\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\tsetValue(e)\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default ColorPicker\r\n","// Styles\r\nimport './FieldContainer.scss'\r\n\r\nconst FieldContainer = ({ children, error, title, helpText, optional, containerClass }) => {\r\n\treturn (\r\n\t\t<div className={`field ${containerClass ? containerClass : ''}`}>\r\n\t\t\t{title && (\r\n\t\t\t\t<p className='field__title'>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t\t{optional && <span className='input-field__optional'> - Optional</span>}\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{children}\r\n\r\n\t\t\t{helpText && !error && <p className='field__help-text'>{helpText}</p>}\r\n\t\t\t{error && <p className='field__error'>{error}</p>}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default FieldContainer\r\n","import { useState } from 'react'\r\n\r\n// Styles\r\nimport '../InputStyles.scss'\r\n\r\n// Components\r\nimport FieldContainer from '../FieldContainer/FieldContainer'\r\n\r\nconst Field = ({\r\n\tvalue,\r\n\tsetValue,\r\n\tlabel,\r\n\tplaceholder,\r\n\ttitle,\r\n\thelpText,\r\n\terror,\r\n\tresetError,\r\n\tonLostFocus,\r\n\ttype,\r\n\toptional,\r\n\tonClick,\r\n\tcontainerClass,\r\n\tinputClass,\r\n\tafter,\r\n}) => {\r\n\tconst [showPassword, setShowPassword] = useState(false)\r\n\r\n\tif ((value, setValue)) {\r\n\t\treturn (\r\n\t\t\t<FieldContainer\r\n\t\t\t\terror={error}\r\n\t\t\t\ttitle={title}\r\n\t\t\t\thelpText={helpText}\r\n\t\t\t\toptional={optional}\r\n\t\t\t\tcontainerClass={containerClass}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={`input-field ${error ? 'field-error' : ''}`}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (onClick) onClick()\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{label && (\r\n\t\t\t\t\t\t<div className={`input-field__label ${value.trim().length > 0 ? 'active' : ''}`}>\r\n\t\t\t\t\t\t\t{label}\r\n\t\t\t\t\t\t\t{optional && <span className='input-field__optional'> - Optional</span>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype={showPassword ? 'text' : type}\r\n\t\t\t\t\t\tclassName={inputClass ? inputClass : ''}\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={e => setValue(e.target.value)}\r\n\t\t\t\t\t\tplaceholder={placeholder && !label ? placeholder : ''}\r\n\t\t\t\t\t\tonBlur={() => {\r\n\t\t\t\t\t\t\tif (resetError) resetError()\r\n\t\t\t\t\t\t\tif (onLostFocus) onLostFocus()\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{!error && after && <div className='input-field__icon input-field__icon--after'>{after}</div>}\r\n\r\n\t\t\t\t\t{error && type !== 'password' && (\r\n\t\t\t\t\t\t<i className='fa-solid fa-circle-exclamation  input-field__icon input-field__icon--error'></i>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{type === 'password' && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{showPassword && (\r\n\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\tclassName='fa-regular fa-eye input-field__icon input-field__icon--password'\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetShowPassword(false)\r\n\t\t\t\t\t\t\t\t\t}}></i>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{!showPassword && (\r\n\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\tclassName='fa-regular fa-eye-slash input-field__icon input-field__icon--password'\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetShowPassword(true)\r\n\t\t\t\t\t\t\t\t\t}}></i>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</FieldContainer>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Field\r\n","import React, { useState } from 'react'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\n\r\n// Components\r\nimport ThemePreview from './ThemePreview'\r\nimport ThemeField from './Field'\r\nimport ColorPicker from '../ColorPicker/ColorPicker'\r\nimport Field from '../Inputs/Field/Field'\r\n\r\n// Styles && Assets\r\nimport './ThemeCreator.scss'\r\n\r\nexport default function ThemeCreator({\r\n\tsetShowThemePicker,\r\n\tsetShowThemeCreator,\r\n\tchat,\r\n\teditedTheme,\r\n\tsetConfirmCustomTheme,\r\n\tconfirmCustomTheme,\r\n}) {\r\n\tconst { updateDocument } = useFirestore('projects')\r\n\r\n\tconst [name, setName] = useState(editedTheme ? editedTheme.name : '')\r\n\tconst [bgDark, setBgDark] = useState({\r\n\t\tshow: true,\r\n\t\tvalue: editedTheme ? editedTheme.colors.bgDark : '#0e0f10',\r\n\t})\r\n\r\n\tconst [borderRadius, setBorderRadius] = useState({\r\n\t\tshow: false,\r\n\t\tvalue: editedTheme ? editedTheme.borderRadius : 15,\r\n\t})\r\n\tconst [curUserMessage, setCurUserMessage] = useState({\r\n\t\tshow: false,\r\n\t\tbg: editedTheme\r\n\t\t\t? editedTheme.colors.msgBgOwner\r\n\t\t\t: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 0,\r\n\t\t\t\t\t\tvalue: '#533e7a',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tvalue: '#14545c',\r\n\t\t\t\t\t},\r\n\t\t\t  ],\r\n\t\ttext: editedTheme ? editedTheme.colors.messageColorOwner : '#e8e8e8',\r\n\t\tborder: editedTheme ? editedTheme.colors.msgBorderOwner : '#121212',\r\n\t})\r\n\r\n\tconst [otherUserMessage, setOtherUserMessage] = useState({\r\n\t\tshow: false,\r\n\t\tbg: editedTheme ? editedTheme.colors.msgBg : '#1e1e1e',\r\n\t\ttext: editedTheme ? editedTheme.colors.messageColor : '#cacaca',\r\n\t\tborder: editedTheme ? editedTheme.colors.msgBorder : '#1e1e1e',\r\n\t})\r\n\r\n\tconst [inputColors, setInputColors] = useState({\r\n\t\tshow: false,\r\n\t\tbg: editedTheme ? editedTheme.colors.inputBg : '#1e1e1e',\r\n\t\ttext: editedTheme ? editedTheme.colors.inputText : '#c4c4c4',\r\n\t\tborder: editedTheme ? editedTheme.colors.inputBorder : '#1e1e1e',\r\n\t})\r\n\r\n\tconst [textColors, setTextColors] = useState({\r\n\t\tshow: false,\r\n\t\tprimary: editedTheme ? editedTheme.colors.textPrimary : '#d9d9d9',\r\n\t\taccent: editedTheme ? editedTheme.colors.textAccent : '#5b3ba5',\r\n\t\tlowContrast: editedTheme ? editedTheme.colors.textLowContrast : '#646464',\r\n\t})\r\n\tconst [buttonColor, setButtonColor] = useState({\r\n\t\tshow: false,\r\n\t\tvalue: editedTheme ? editedTheme.colors.buttonColor : '#dedede',\r\n\t})\r\n\r\n\tconst updateMessageBg = (index, e) => {\r\n\t\tlet newArr = [...curUserMessage.bg]\r\n\t\tnewArr[index] = { value: e.target.value, id: index }\r\n\t\tsetCurUserMessage({ ...curUserMessage, bg: newArr })\r\n\t}\r\n\r\n\tconst submitCustomTheme = async () => {\r\n\t\t// setDoc(doc(projectFirestore, 'themes', 'green'), {\r\n\t\t// \tid: name,\r\n\t\t// \tname: name,\r\n\t\t// \tcolors: {\r\n\t\t// \t\tbgDark: bgDark.value,\r\n\t\t// \t\tbgSecondary: bgSecondary.value,\r\n\t\t// \t\tinputBg: inputColors.bg,\r\n\t\t// \t\tinputText: inputColors.text,\r\n\t\t// \t\ttextAccent: textColors.accent,\r\n\t\t// \t\ttextLowContrast: textColors.lowContrast,\r\n\t\t// \t\tmsgBg: otherUserMessage.bg,\r\n\t\t// \t\tmessageColor: otherUserMessage.text,\r\n\t\t// \t\tmsgBgOwner: curUserMessage.bg,\r\n\t\t// \t\tmessageColorOwner: curUserMessage.text,\r\n\t\t// \t},\r\n\t\t// \tborderRadius: borderRadius.value,\r\n\t\t// })\r\n\r\n\t\tconst themeToAdd = {\r\n\t\t\tid: `${name}`,\r\n\t\t\tname: `${name}`,\r\n\t\t\tcolors: {\r\n\t\t\t\tbgDark: `${bgDark.value}`,\r\n\t\t\t\tinputBg: `${inputColors.bg}`,\r\n\t\t\t\tinputText: `${inputColors.text}`,\r\n\t\t\t\tinputBorder: `${inputColors.border}`,\r\n\t\t\t\ttextPrimary: `${textColors.primary}`,\r\n\t\t\t\ttextAccent: `${textColors.accent}`,\r\n\t\t\t\ttextLowContrast: `${textColors.lowContrast}`,\r\n\t\t\t\tmsgBg: `${otherUserMessage.bg}`,\r\n\t\t\t\tmessageColor: `${otherUserMessage.text}`,\r\n\t\t\t\tmsgBgOwner: curUserMessage.bg,\r\n\t\t\t\tmessageColorOwner: `${curUserMessage.text}`,\r\n\t\t\t\tmsgBorderOwner: `${curUserMessage.border}`,\r\n\t\t\t\tmsgBorder: `${otherUserMessage.border}`,\r\n\t\t\t\tbuttonColor: `${buttonColor.value}`,\r\n\t\t\t},\r\n\t\t\tborderRadius: borderRadius.value,\r\n\t\t\tisCustom: true,\r\n\t\t}\r\n\t\tif (editedTheme === null) {\r\n\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\tcustomThemes: [...chat.customThemes, themeToAdd],\r\n\t\t\t})\r\n\t\t\tsetConfirmCustomTheme(false)\r\n\t\t\tsetShowThemeCreator(false)\r\n\t\t}\r\n\t\tif (editedTheme !== null) {\r\n\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\tcustomThemes: updateCustomThemes(editedTheme, themeToAdd),\r\n\t\t\t\ttheme: {\r\n\t\t\t\t\tisCustom: true,\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\tsetConfirmCustomTheme(false)\r\n\t\t\tsetShowThemeCreator(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst updateCustomThemes = (editedTheme, theme) => {\r\n\t\tconst index = chat.customThemes.indexOf(editedTheme)\r\n\t\tlet newArr = [...chat.customThemes]\r\n\r\n\t\tnewArr[index] = theme\r\n\r\n\t\treturn newArr\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='theme-creator'>\r\n\t\t\t<form className='theme-creator__form custom-scrollbar'>\r\n\t\t\t\t<div className='field'>\r\n\t\t\t\t\t<Field type='text' value={name} setValue={setName} label='Theme name' />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<ThemeField\r\n\t\t\t\t\ttitle={'Background color'}\r\n\t\t\t\t\tsetShow={() => setBgDark({ ...bgDark, show: !bgDark.show })}\r\n\t\t\t\t\tshow={bgDark.show}>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={bgDark.value}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetBgDark({ ...bgDark, value: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ThemeField>\r\n\r\n\t\t\t\t<ThemeField\r\n\t\t\t\t\ttitle={'Input colors'}\r\n\t\t\t\t\tsetShow={() => setInputColors({ ...inputColors, show: !inputColors.show })}\r\n\t\t\t\t\tshow={inputColors.show}>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={inputColors.bg}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetInputColors({ ...inputColors, bg: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'background'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={inputColors.text}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetInputColors({ ...inputColors, text: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'text'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={inputColors.border}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetInputColors({ ...inputColors, border: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'border'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ThemeField>\r\n\r\n\t\t\t\t<ThemeField\r\n\t\t\t\t\ttitle={'Button color'}\r\n\t\t\t\t\tsetShow={() => setButtonColor({ ...buttonColor, show: !buttonColor.show })}\r\n\t\t\t\t\tshow={buttonColor.show}>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={buttonColor.value}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetButtonColor({ ...buttonColor, value: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ThemeField>\r\n\r\n\t\t\t\t<ThemeField\r\n\t\t\t\t\ttitle={'Text colors'}\r\n\t\t\t\t\tsetShow={() => setTextColors({ ...textColors, show: !textColors.show })}\r\n\t\t\t\t\tshow={textColors.show}>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={textColors.primary}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetTextColors({ ...textColors, primary: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'primary'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={textColors.accent}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetTextColors({ ...textColors, accent: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'accent'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={textColors.lowContrast}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetTextColors({ ...textColors, lowContrast: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'low contrast'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ThemeField>\r\n\r\n\t\t\t\t<ThemeField\r\n\t\t\t\t\ttitle={'Other user messages'}\r\n\t\t\t\t\tsetShow={() => setOtherUserMessage({ ...otherUserMessage, show: !otherUserMessage.show })}\r\n\t\t\t\t\tshow={otherUserMessage.show}>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={otherUserMessage.bg}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetOtherUserMessage({ ...otherUserMessage, bg: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'background'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={otherUserMessage.text}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetOtherUserMessage({ ...otherUserMessage, text: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'text'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={otherUserMessage.border}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetOtherUserMessage({ ...otherUserMessage, border: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'border'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ThemeField>\r\n\r\n\t\t\t\t<ThemeField\r\n\t\t\t\t\ttitle={'Current user messages'}\r\n\t\t\t\t\tsetShow={() => setCurUserMessage({ ...curUserMessage, show: !curUserMessage.show })}\r\n\t\t\t\t\tshow={curUserMessage.show}>\r\n\t\t\t\t\t<div className='separator'>\r\n\t\t\t\t\t\t<span>background</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='colors-list custom-scrollbar'>\r\n\t\t\t\t\t\t{curUserMessage.bg.map((color, index) => (\r\n\t\t\t\t\t\t\t<React.Fragment key={color.id}>\r\n\t\t\t\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\t\t\t\tvalue={color.value}\r\n\t\t\t\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\t\t\t\tupdateMessageBg(index, e)\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\tclassName='fa-solid fa-xmark remove-color'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetCurUserMessage({ ...curUserMessage, bg: curUserMessage.bg.filter(c => c !== color) })\r\n\t\t\t\t\t\t\t\t\t\t}></i>\r\n\t\t\t\t\t\t\t\t</ColorPicker>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='add-color'\r\n\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\tsetCurUserMessage({\r\n\t\t\t\t\t\t\t\t...curUserMessage,\r\n\t\t\t\t\t\t\t\tbg: [...curUserMessage.bg, { value: '#643e7a', id: Math.random(0, 100) * 100 }],\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t<i className='fa-solid fa-plus'></i>\r\n\t\t\t\t\t\t<span>add another color</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={curUserMessage.text}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetCurUserMessage({ ...curUserMessage, text: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'text'}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={curUserMessage.border}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetCurUserMessage({ ...curUserMessage, border: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'border'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ThemeField>\r\n\r\n\t\t\t\t<ThemeField\r\n\t\t\t\t\ttitle={'Border radius'}\r\n\t\t\t\t\tsetShow={() => setBorderRadius({ ...borderRadius, show: !borderRadius.show })}\r\n\t\t\t\t\tshow={borderRadius.show}>\r\n\t\t\t\t\t<div className='flex-row'>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='range'\r\n\t\t\t\t\t\t\tvalue={borderRadius.value}\r\n\t\t\t\t\t\t\tonChange={e => setBorderRadius({ ...borderRadius, value: e.target.value })}\r\n\t\t\t\t\t\t\tmin='0'\r\n\t\t\t\t\t\t\tmax='25'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span>{borderRadius.value}px</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</ThemeField>\r\n\t\t\t</form>\r\n\r\n\t\t\t<ThemePreview\r\n\t\t\t\totherUserMessage={otherUserMessage}\r\n\t\t\t\tcurUserMessage={curUserMessage}\r\n\t\t\t\tbgDark={bgDark}\r\n\t\t\t\tborderRadius={borderRadius}\r\n\t\t\t\ttextColors={textColors}\r\n\t\t\t\tinputColors={inputColors}\r\n\t\t\t\tconfirmCustomTheme={confirmCustomTheme}\r\n\t\t\t\tsetConfirmCustomTheme={setConfirmCustomTheme}\r\n\t\t\t\tsubmitCustomTheme={submitCustomTheme}\r\n\t\t\t\teditedTheme={editedTheme}\r\n\t\t\t\tsetShowThemeCreator={setShowThemeCreator}\r\n\t\t\t\tsetShowThemePicker={setShowThemePicker}\r\n\t\t\t\tname={name}\r\n\t\t\t\tbuttonColor={buttonColor}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useFirestore } from '../../hooks/useFirestore'\r\nimport Modal from '../Modal/Modal'\r\n\r\n// Styles\r\nimport './ThemePicker.scss'\r\n\r\nconst ThemePicker = ({\r\n\tthemes,\r\n\tchat,\r\n\tsetShowThemeCreator,\r\n\tsetEditedTheme,\r\n\tsetConfirmThemeDelete,\r\n\tconfirmThemeDelete,\r\n}) => {\r\n\tconst { updateDocument } = useFirestore('projects')\r\n\r\n\tconst changeTheme = async theme => {\r\n\t\ttry {\r\n\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\ttheme: {\r\n\t\t\t\t\tname: theme.id,\r\n\t\t\t\t\tisCustom: theme.isCustom ? theme.isCustom : false,\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err)\r\n\t\t}\r\n\t}\r\n\r\n\tconst spreadColors = theme => {\r\n\t\tlet colors = null\r\n\r\n\t\ttheme.colors.msgBgOwner.forEach(color => {\r\n\t\t\tcolors === null ? (colors = `${color.value}`) : (colors = `${colors}, ${color.value}`)\r\n\t\t})\r\n\r\n\t\tif (theme.colors.msgBgOwner.length === 1) {\r\n\t\t\treturn `linear-gradient(${colors}, ${colors})`\r\n\t\t} else {\r\n\t\t\treturn `linear-gradient(${colors})`\r\n\t\t}\r\n\t}\r\n\r\n\tconst removeCustomTheme = async theme => {\r\n\t\ttry {\r\n\t\t\tif (chat.theme && chat.theme.name === theme.id) {\r\n\t\t\t\tchangeTheme({ id: 'frosty', isCustom: false })\r\n\t\t\t}\r\n\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\tcustomThemes: [...chat.customThemes.filter(t => t !== theme)],\r\n\t\t\t})\r\n\t\t\tsetConfirmThemeDelete(null)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err)\r\n\t\t}\r\n\t}\r\n\r\n\tconst editCustomTheme = theme => {\r\n\t\tsetShowThemeCreator(true)\r\n\t\tsetEditedTheme(theme)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='theme-picker'>\r\n\t\t\t<div className='theme-picker__themes'>\r\n\t\t\t\t{themes &&\r\n\t\t\t\t\tchat &&\r\n\t\t\t\t\tthemes.map(theme => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={`theme-picker__themes__theme ${\r\n\t\t\t\t\t\t\t\tchat.theme && theme.id === chat.theme.name && !theme.isCustom ? 'current' : ''\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\tkey={theme.id}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tchangeTheme(theme)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName='fa-solid fa-check theme-tick'\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackgroundImage: spreadColors(theme),\r\n\t\t\t\t\t\t\t\t}}></i>\r\n\r\n\t\t\t\t\t\t\t<div className='theme-bg' style={{ background: spreadColors(theme) }}></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='separator'>\r\n\t\t\t\t<span>create your own theme</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='theme-picker__themes'>\r\n\t\t\t\t{chat.customThemes.length > 0 &&\r\n\t\t\t\t\tchat.customThemes.map(theme => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tkey={theme.id}\r\n\t\t\t\t\t\t\tclassName={`theme-picker__themes__theme ${\r\n\t\t\t\t\t\t\t\tchat.theme && theme.id === chat.theme.name && theme.isCustom === chat.theme.isCustom ? 'current' : ''\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tchangeTheme(theme)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName='fa-solid fa-check theme-tick'\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackgroundImage: `${spreadColors(theme)}`,\r\n\t\t\t\t\t\t\t\t}}></i>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName='theme-bg'\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackground: spreadColors(theme),\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<div className='theme-tools'>\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName='theme-tools__edit'\r\n\t\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\t\t\t\t\teditCustomTheme(theme)\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-pen'></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName='theme-tools__remove'\r\n\t\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\t\t\t\t\t// removeCustomTheme(theme)\r\n\t\t\t\t\t\t\t\t\t\t\tsetConfirmThemeDelete(theme)\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-trash-can'></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\r\n\t\t\t\t{chat.customThemes.length < 3 && (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='create-theme'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetShowThemeCreator(true)\r\n\t\t\t\t\t\t\t// setShowThemePicker(false)\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<i className='fa-solid fa-plus'></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<Modal show={confirmThemeDelete !== null} setShow={() => setConfirmThemeDelete(null)}>\r\n\t\t\t\t\t<h3>Are you sure you want to proceed?</h3>\r\n\t\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t\t<div className='btn btn--50 btn--secondary' onClick={() => setConfirmThemeDelete(null)}>\r\n\t\t\t\t\t\t\tgo back\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='btn btn--50' onClick={() => removeCustomTheme(confirmThemeDelete)}>\r\n\t\t\t\t\t\t\tdelete theme\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ThemePicker\r\n","import { useEffect, useState } from 'react'\r\nimport { useFirestore } from '../../../hooks/useFirestore'\r\nimport { timestamp } from '../../../firebase/config'\r\nimport { useCollection } from '../../../hooks/useCollection'\r\nimport { v4 as uuid } from 'uuid'\r\nimport { useDocument } from '../../../hooks/useDocument'\r\n\r\n// Components\r\nimport OutsideClickHandler from 'react-outside-click-handler'\r\nimport EmojiPicker, { EmojiStyle, Theme } from 'emoji-picker-react'\r\nimport Modal from '../../../components/Modal/Modal'\r\nimport Avatar from '../../../components/Avatar/Avatar'\r\nimport ThemeCreator from '../../../components/ThemeCreator/ThemeCreator'\r\nimport ThemePicker from '../../../components/ThemePicker/ThemePicker'\r\n\r\n// Styles && Assets\r\nimport './ChatOptions.scss'\r\nimport AvatarWithStatus from '../../../components/AvatarWithStatus/AvatarWithStatus'\r\nimport MediaQuery from 'react-responsive'\r\nimport Field from '../../../components/Inputs/Field/Field'\r\n\r\nexport default function ChatOptions({\r\n\tonMessageResponse,\r\n\totherUser,\r\n\tchat,\r\n\tcurrentTheme,\r\n\totherUserLocal,\r\n\tsetShowChatOptions,\r\n}) {\r\n\tconst uniqueId = uuid()\r\n\r\n\tconst { updateDocument, response } = useFirestore('projects')\r\n\tconst { documents: themes } = useCollection('themes')\r\n\tconst { document: defaultThemeDoc } = useDocument('themes', 'frosty')\r\n\tconst { documents: users } = useCollection('users')\r\n\r\n\tconst [showEmojiPicker, setShowEmojiPicker] = useState(false)\r\n\tconst [showNicknameModal, setShowNicknameModal] = useState(false)\r\n\tconst [showNicknameInput, setShowNicknameInput] = useState(null)\r\n\tconst [newNickname, setNewNickname] = useState('')\r\n\tconst [showThemePicker, setShowThemePicker] = useState(false)\r\n\tconst [showThemeCreator, setShowThemeCreator] = useState(false)\r\n\tconst [editedTheme, setEditedTheme] = useState(defaultThemeDoc)\r\n\tconst [confirmCustomTheme, setConfirmCustomTheme] = useState(false)\r\n\tconst [confirmThemeDelete, setConfirmThemeDelete] = useState(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetShowThemeCreator(false)\r\n\t\tsetShowNicknameModal(false)\r\n\t}, [chat.id])\r\n\r\n\tconst sendMessage = async content => {\r\n\t\tconst commentToAdd = {\r\n\t\t\tid: uniqueId,\r\n\t\t\tcontent: content,\r\n\t\t\tcreatedAt: timestamp.fromDate(new Date()),\r\n\t\t\tisSpecial: true,\r\n\t\t}\r\n\r\n\t\tawait updateDocument(chat.id, {\r\n\t\t\tmessages: [...chat.messages, commentToAdd],\r\n\t\t})\r\n\t\tif (!response.error) {\r\n\t\t\tonMessageResponse(null)\r\n\t\t}\r\n\t}\r\n\r\n\tconst changeChatEmoji = async e => {\r\n\t\tawait updateDocument(chat.id, {\r\n\t\t\tchatEmoji: e.unified,\r\n\t\t})\r\n\t\tif (!response.error) {\r\n\t\t\tsendMessage(`Set quick emoji to ${e.emoji}`)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleNicknameInput = u => {\r\n\t\tsetShowNicknameInput(u.id)\r\n\t}\r\n\r\n\tconst changeNickname = user => {\r\n\t\tif (newNickname.trim() !== '' && newNickname.trim().length < 80) {\r\n\t\t\tchat.assignedUsers.forEach(u => {\r\n\t\t\t\tif (u.id !== user.id) {\r\n\t\t\t\t\tupdateDocument(chat.id, {\r\n\t\t\t\t\t\tassignedUsers: [\r\n\t\t\t\t\t\t\tu,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: user.id,\r\n\t\t\t\t\t\t\t\tnickname: newNickname.trim(),\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetShowNicknameModal(false)\r\n\t\t\t\t}\r\n\t\t\t\tif (u.id === user.id) {\r\n\t\t\t\t\tsendMessage(`Set nickname of user ${getDoc(u.id).displayName} to ${newNickname.trim()}`, newNickname.trim())\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst spreadColors = theme => {\r\n\t\tlet colors = null\r\n\r\n\t\ttheme.colors.msgBgOwner.forEach(color => {\r\n\t\t\tcolors === null ? (colors = `${color.value}`) : (colors = `${colors}, ${color.value}`)\r\n\t\t})\r\n\r\n\t\tif (theme.colors.msgBgOwner.length === 1) {\r\n\t\t\treturn colors\r\n\t\t} else {\r\n\t\t\treturn `linear-gradient(${colors})`\r\n\t\t}\r\n\t}\r\n\r\n\tconst getDoc = id => {\r\n\t\tlet res = null\r\n\r\n\t\tif (users) {\r\n\t\t\tres = users.filter(doc => {\r\n\t\t\t\tif (doc.id === id) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t})[0]\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\treturn (\r\n\t\t<aside className='chat-options'>\r\n\t\t\t<MediaQuery maxWidth={768}>\r\n\t\t\t\t<i className='fa-solid fa-arrow-left close-chat-options' onClick={() => setShowChatOptions(false)}></i>\r\n\t\t\t</MediaQuery>\r\n\r\n\t\t\t{otherUser && <AvatarWithStatus userId={otherUser.id} linkToProfile={true} />}\r\n\t\t\t<h3>{otherUserLocal.nickname}</h3>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName='option'\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetShowThemePicker(true)\r\n\t\t\t\t}}>\r\n\t\t\t\t<div className='option__name'>Change theme</div>\r\n\t\t\t\t<div className='option__icon' style={{ background: spreadColors(currentTheme) }}></div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName='option'\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetShowEmojiPicker(true)\r\n\t\t\t\t}}>\r\n\t\t\t\t<div className='option__name'>Change emoji icon</div>\r\n\t\t\t\t<div className='option__icon'>\r\n\t\t\t\t\t<i className='fa-solid fa-thumbs-up'></i>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName='option'\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetShowNicknameModal(true)\r\n\t\t\t\t}}>\r\n\t\t\t\t<div className='option__name'>Edit nicknames</div>\r\n\t\t\t\t<div className='option__icon'>Aa</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{themes && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\tshow={showThemePicker}\r\n\t\t\t\t\t\tsetShow={() => setShowThemePicker(false)}\r\n\t\t\t\t\t\tonClose={() => setConfirmThemeDelete(null)}\r\n\t\t\t\t\t\tdisableOCH={showThemeCreator}>\r\n\t\t\t\t\t\t<ThemePicker\r\n\t\t\t\t\t\t\tthemes={themes}\r\n\t\t\t\t\t\t\tchat={chat}\r\n\t\t\t\t\t\t\tsetShowThemeCreator={setShowThemeCreator}\r\n\t\t\t\t\t\t\tsetEditedTheme={setEditedTheme}\r\n\t\t\t\t\t\t\tsetConfirmThemeDelete={setConfirmThemeDelete}\r\n\t\t\t\t\t\t\tconfirmThemeDelete={confirmThemeDelete}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\tshow={showThemeCreator}\r\n\t\t\t\t\t\tsetShow={() => setShowThemeCreator(false)}\r\n\t\t\t\t\t\tonClose={() => {\r\n\t\t\t\t\t\t\tsetEditedTheme(null)\r\n\t\t\t\t\t\t\tsetConfirmCustomTheme(false)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tdisableOCH={confirmCustomTheme}>\r\n\t\t\t\t\t\t<ThemeCreator\r\n\t\t\t\t\t\t\tsetShowThemePicker={setShowThemePicker}\r\n\t\t\t\t\t\t\tsetShowThemeCreator={setShowThemeCreator}\r\n\t\t\t\t\t\t\tchat={chat}\r\n\t\t\t\t\t\t\teditedTheme={editedTheme}\r\n\t\t\t\t\t\t\tsetConfirmCustomTheme={setConfirmCustomTheme}\r\n\t\t\t\t\t\t\tconfirmCustomTheme={confirmCustomTheme}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\r\n\t\t\t{showEmojiPicker && (\r\n\t\t\t\t<OutsideClickHandler\r\n\t\t\t\t\tonOutsideClick={() => {\r\n\t\t\t\t\t\tsetShowEmojiPicker(false)\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<EmojiPicker\r\n\t\t\t\t\t\tclassName='emoji-picker'\r\n\t\t\t\t\t\tonEmojiClick={e => {\r\n\t\t\t\t\t\t\tchangeChatEmoji(e)\r\n\t\t\t\t\t\t\tsetShowEmojiPicker(false)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttheme={Theme.DARK}\r\n\t\t\t\t\t\tpreviewConfig={{\r\n\t\t\t\t\t\t\tdefaultCaption: '',\r\n\t\t\t\t\t\t\tdefaultEmoji: null,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t// lazyLoadEmojis={true}\r\n\t\t\t\t\t\temojiStyle={EmojiStyle.NATIVE}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</OutsideClickHandler>\r\n\t\t\t)}\r\n\r\n\t\t\t<Modal\r\n\t\t\t\tshow={showNicknameModal}\r\n\t\t\t\tsetShow={() => setShowNicknameModal(false)}\r\n\t\t\t\tonClose={() => {\r\n\t\t\t\t\tsetNewNickname('')\r\n\t\t\t\t\tsetShowNicknameInput(null)\r\n\t\t\t\t}}>\r\n\t\t\t\t{chat.assignedUsers.map(u => (\r\n\t\t\t\t\t// <OutsideClickHandler onOutsideClick={() => setShowNicknameInput(null)}>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tkey={u.id}\r\n\t\t\t\t\t\tclassName='user'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetNewNickname('')\r\n\t\t\t\t\t\t\thandleNicknameInput(u)\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<div className='author'>\r\n\t\t\t\t\t\t\t<Avatar src={getDoc(u.id) !== null ? getDoc(u.id).photoURL : ''} />\r\n\t\t\t\t\t\t\t{showNicknameInput !== u.id && (\r\n\t\t\t\t\t\t\t\t<div className='flex-column'>\r\n\t\t\t\t\t\t\t\t\t<p className='user__display-name'>{u.nickname}</p>\r\n\t\t\t\t\t\t\t\t\t<p>Set nickname</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{/* <input\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tplaceholder={u.nickname}\r\n\t\t\t\t\t\t\t\t\tvalue={newNickname}\r\n\t\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\t\tsetNewNickname(e.target.value)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t\t{showNicknameInput === u.id && (\r\n\t\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\t\tvalue={newNickname}\r\n\t\t\t\t\t\t\t\t\tsetValue={setNewNickname}\r\n\t\t\t\t\t\t\t\t\tplaceholder={u.nickname}\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tcontainerClass='mb0'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{showNicknameInput !== u.id && <i className='fa-solid fa-pen-to-square'></i>}\r\n\t\t\t\t\t\t{showNicknameInput === u.id && (\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName='fa-solid fa-check'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tchangeNickname(u)\r\n\t\t\t\t\t\t\t\t}}></i>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t// </OutsideClickHandler>\r\n\t\t\t\t))}\r\n\t\t\t</Modal>\r\n\t\t</aside>\r\n\t)\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport { useDocument } from '../../hooks/useDocument'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\n\r\n// Styles && Assets\r\nimport './Chat.scss'\r\n\r\n// Components\r\nimport Messages from './Messages/Messages'\r\nimport MessageField from './MessageField/MessageField'\r\nimport Avatar from '../../components/Avatar/Avatar'\r\nimport ChatOptions from './ChatOptions/ChatOptions'\r\nimport { useMediaQuery } from 'react-responsive'\r\nimport MediaQuery from 'react-responsive'\r\n\r\nexport default function Chat({ setCurrentChat, inputRef, currentTheme, showChat, setShowChat }) {\r\n\tconst { user } = useAuthContext()\r\n\tconst { id } = useParams()\r\n\tconst { error, document } = useDocument('projects', id)\r\n\tconst { updateDocument } = useFirestore('projects')\r\n\r\n\tconst [isAssignedUser, setIsAssignedUser] = useState(false)\r\n\tconst [messageResponse, onMessageResponse] = useState(null)\r\n\tconst [bottomDiv, setBottomDiv] = useState(null)\r\n\tconst [showChatOptions, setShowChatOptions] = useState(false)\r\n\r\n\tconst [otherUserLocal, setOtherUserLocal] = useState(null)\r\n\tconst [currentUserLocal, setCurrentUserLocal] = useState(null)\r\n\r\n\tconst { document: otherUserDoc } = useDocument('users', otherUserLocal ? otherUserLocal.id : null)\r\n\tconst { document: currentUserDoc } = useDocument('users', currentUserLocal ? currentUserLocal.id : null)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (document !== null) {\r\n\t\t\tdocument.assignedUsers.forEach(u => {\r\n\t\t\t\tif (u.id !== user.uid) {\r\n\t\t\t\t\tsetOtherUserLocal({ ...u })\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tdocument.assignedUsers.forEach(u => {\r\n\t\t\t\tif (u.id === user.uid) {\r\n\t\t\t\t\tsetCurrentUserLocal({ ...u })\r\n\t\t\t\t\tsetIsAssignedUser(true)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tsetCurrentChat(document)\r\n\t}, [id, document])\r\n\r\n\tconst handleSeen = async () => {\r\n\t\tif (document.messages && document.messages.length > 0) {\r\n\t\t\tawait updateDocument(document.id, {\r\n\t\t\t\tisRead: true,\r\n\t\t\t\tassignedUsers: [\r\n\t\t\t\t\totherUserLocal,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: currentUserDoc.id,\r\n\t\t\t\t\t\tnickname: currentUserLocal.nickname,\r\n\t\t\t\t\t\tlastRead: document.messages[document.messages.length - 1].id\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tconst queryMd = useMediaQuery({ query: '(max-width: 768px)' })\r\n\r\n\tif (error) {\r\n\t\treturn <div className='error'>{error}</div>\r\n\t}\r\n\r\n\tif (!document) {\r\n\t\treturn <div className='loading'>Loading...</div>\r\n\t}\r\n\r\n\treturn (\r\n\t\tisAssignedUser &&\r\n\t\totherUserDoc &&\r\n\t\tcurrentUserDoc &&\r\n\t\t(queryMd ? showChat : true) && (\r\n\t\t\t<div className={`chat ${showChat ? 'active' : ''}`}>\r\n\t\t\t\t<div className='vertical-container'>\r\n\t\t\t\t\t<div className='chat__top-bar'>\r\n\t\t\t\t\t\t<div className='flex-row'>\r\n\t\t\t\t\t\t\t<MediaQuery maxWidth={768}>\r\n\t\t\t\t\t\t\t\t<i className='fa-solid fa-arrow-left close-chat' onClick={() => setShowChat(false)}></i>\r\n\t\t\t\t\t\t\t</MediaQuery>\r\n\r\n\t\t\t\t\t\t\t<Avatar src={otherUserDoc.photoURL} />\r\n\t\t\t\t\t\t\t<div className='vertical-container'>\r\n\t\t\t\t\t\t\t\t<h3>{otherUserLocal.nickname}</h3>\r\n\t\t\t\t\t\t\t\t{<p className='isActive'>{otherUserDoc.status ? otherUserDoc.status : ''}</p>}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName='top-bar-options'\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\tsetShowChatOptions(prevValue => !prevValue)\r\n\t\t\t\t\t\t\t\te.target.classList.toggle('active')\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-ellipsis-vertical'></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='chat__comments'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\thandleSeen()\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<Messages\r\n\t\t\t\t\t\t\tchat={document}\r\n\t\t\t\t\t\t\tonMessageResponse={onMessageResponse}\r\n\t\t\t\t\t\t\tsetBottomDiv={setBottomDiv}\r\n\t\t\t\t\t\t\totherUser={otherUserDoc}\r\n\t\t\t\t\t\t\tcurrentUser={currentUserDoc}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<MessageField\r\n\t\t\t\t\t\t\tchat={document}\r\n\t\t\t\t\t\t\tmessageResponse={messageResponse}\r\n\t\t\t\t\t\t\tonMessageResponse={onMessageResponse}\r\n\t\t\t\t\t\t\tbottomDiv={bottomDiv}\r\n\t\t\t\t\t\t\tinputRef={inputRef}\r\n\t\t\t\t\t\t\thandleSeen={handleSeen}\r\n\t\t\t\t\t\t\totherUser={otherUserDoc}\r\n\t\t\t\t\t\t\tcurrentUser={currentUserDoc}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{showChatOptions && (\r\n\t\t\t\t\t<ChatOptions\r\n\t\t\t\t\t\tonMessageResponse={onMessageResponse}\r\n\t\t\t\t\t\totherUser={otherUserDoc}\r\n\t\t\t\t\t\tchat={document}\r\n\t\t\t\t\t\tcurrentTheme={currentTheme}\r\n\t\t\t\t\t\totherUserLocal={otherUserLocal}\r\n\t\t\t\t\t\tsetShowChatOptions={setShowChatOptions}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t)\r\n\t)\r\n}\r\n","import { PhoneAuthProvider, RecaptchaVerifier } from 'firebase/auth'\r\nimport { useState, useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { projectAuth, projectFirestore, projectGitHub, projectGoogle } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useLogin = () => {\r\n\tconst navigate = useNavigate()\r\n\r\n\tconst { dispatch } = useAuthContext()\r\n\r\n\tconst [isCancelled, setIsCancelled] = useState(false)\r\n\tconst [error, setError] = useState(null)\r\n\tconst [isPending, setIsPending] = useState(false)\r\n\tconst [isFinished, setIsFinished] = useState(false)\r\n\r\n\tconst login = async (email, password) => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\t// Login\r\n\t\t\tconst res = await projectAuth.signInWithEmailAndPassword(email, password)\r\n\r\n\t\t\t// Update online status\r\n\r\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).update({\r\n\t\t\t\tonline: true,\r\n\t\t\t})\r\n\r\n\t\t\t// Dispatch login action\r\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n\t\t\t// Update state\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst loginWithGoogle = async () => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\t// Login\r\n\t\t\tconst res = await projectAuth.signInWithPopup(projectGoogle)\r\n\r\n\t\t\t// Update online status\r\n\r\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).update({\r\n\t\t\t\tonline: true,\r\n\t\t\t})\r\n\r\n\t\t\t// Dispatch login action\r\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n\t\t\t// Update state\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst loginWithGithub = async () => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\t// Login\r\n\t\t\tconst res = await projectAuth.signInWithPopup(projectGitHub)\r\n\t\t\t// Update online status\r\n\r\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).update({\r\n\t\t\t\tonline: true,\r\n\t\t\t})\r\n\r\n\t\t\t// Dispatch login action\r\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n\t\t\t// Update state\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst sendPasswordReset = async email => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\t\tsetIsFinished(false)\r\n\r\n\t\ttry {\r\n\t\t\tawait projectAuth.sendPasswordResetEmail(email)\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t\tsetIsFinished(true)\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnavigate('/login')\r\n\t\t\t\t}, 15000)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetIsFinished(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst resetPassword = async (code, newPassword) => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\t\tsetIsFinished(false)\r\n\r\n\t\ttry {\r\n\t\t\tawait projectAuth.confirmPasswordReset(code, newPassword)\r\n\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t\tsetIsFinished(true)\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnavigate('/login')\r\n\t\t\t\t}, 1000)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetIsFinished(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst setUpRecaptcha = async number => {\r\n\t\t// user.unlink(provider.providerId)\r\n\r\n\t\tconst provider = new PhoneAuthProvider(projectAuth)\r\n\t\tconst recaptchaVerifier = new RecaptchaVerifier('recaptcha-container', {}, projectAuth)\r\n\r\n\t\trecaptchaVerifier.render()\r\n\r\n\t\tconst verificationId = await provider.verifyPhoneNumber(number, recaptchaVerifier)\r\n\r\n\t\treturn verificationId\r\n\r\n\t\t// const credential = PhoneAuthProvider.credential(verificationId, OTPCode)\r\n\t\t// return signInWithPhoneNumber(projectAuth, number, recaptchaVerifier)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => setIsCancelled(true)\r\n\t}, [])\r\n\r\n\treturn {\r\n\t\tlogin,\r\n\t\tloginWithGoogle,\r\n\t\tloginWithGithub,\r\n\t\tsendPasswordReset,\r\n\t\tresetPassword,\r\n\t\tsetUpRecaptcha,\r\n\t\tisPending,\r\n\t\terror,\r\n\t\tisFinished,\r\n\t}\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo-no-bg.bc52095c.png\";","// Styles & assets\r\nimport './AuthTemplate.scss'\r\nimport logo from '../../assets/logo-no-bg.png'\r\n\r\nconst AuthTemplate = ({ children }) => {\r\n\treturn (\r\n\t\t<div className='auth'>\r\n\t\t\t<div className='wrapper'>\r\n\t\t\t\t<div className='auth__logo'>\r\n\t\t\t\t\t<img src={logo} alt='someapp logo' />\r\n\t\t\t\t\t<h1>Someapp</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='auth__background-canvas'>\r\n\t\t\t\t\t<div className='auth__background-canvas-container'>\r\n\t\t\t\t\t\t<svg id='visual' viewBox='0 0 1920 1080' version='1.1' className='one'>\r\n\t\t\t\t\t\t\t<g transform='translate(1920, 0)'>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\td='M0 756C-87 722 -174.1 688.1 -272.9 658.7C-371.6 629.4 -482.1 604.7 -534.6 534.6C-587.1 464.4 -581.6 348.9 -608.8 252.2C-636.1 155.5 -696 77.8 -756 0L0 0Z'\r\n\t\t\t\t\t\t\t\t\tfill='#1d1f20'></path>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t<svg id='visual' viewBox='0 0 1920 1080' version='1.1' className='two'>\r\n\t\t\t\t\t\t\t<g transform='translate(0, 1080)'>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\td='M0 -756C92.7 -731.4 185.5 -706.7 279.4 -674.4C373.2 -642.1 468.2 -602.2 534.6 -534.6C600.9 -466.9 638.6 -371.5 670.7 -277.8C702.9 -184.1 729.4 -92.1 756 0L0 0Z'\r\n\t\t\t\t\t\t\t\t\tfill='#1d1f20'></path>\r\n\t\t\t\t\t\t\t</g>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className='auth__form'>{children}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default AuthTemplate\r\n","export default __webpack_public_path__ + \"static/media/btn_google_dark_normal_ios.9fe90a17.svg\";","import { useLogin } from '../../hooks/useLogin'\r\n\r\n// Styles && Assets\r\nimport './GoogleButton.scss'\r\nimport googleLogo from '../../assets/btn_google_dark_normal_ios.svg'\r\n\r\nconst GoogleButton = () => {\r\n\tconst { loginWithGoogle, isPending, error } = useLogin()\r\n\r\n\tconst handleSubmitWithGoogle = () => {\r\n\t\tloginWithGoogle()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<button className='google-btn' onClick={() => handleSubmitWithGoogle()}>\r\n\t\t\t\t<img src={googleLogo} alt='google logo' />\r\n\t\t\t\t{!isPending && <span>Sign in with google</span>}\r\n\t\t\t\t{isPending && <span>Signing in with google</span>}\r\n\t\t\t</button>\r\n\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default GoogleButton\r\n","import { useLogin } from '../../hooks/useLogin'\r\n\r\n// Styles && Assets\r\nimport './GithubButton.scss'\r\nimport githubLogo from '../../assets/GitHub-Mark-Light-32px.png'\r\n\r\nconst GithubButton = () => {\r\n\tconst { loginWithGithub, isPending, error } = useLogin()\r\n\r\n\tconst handleSubmitWithGithub = () => {\r\n\t\tloginWithGithub()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<button className='github-btn' onClick={() => handleSubmitWithGithub()}>\r\n\t\t\t\t<img src={githubLogo} alt='github logo' />\r\n\t\t\t\t{!isPending && <span>Sign in with GitHub</span>}\r\n\t\t\t\t{isPending && <span>Signing in with GitHub</span>}\r\n\t\t\t</button>\r\n\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default GithubButton\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII=\"","import { useState } from 'react'\r\nimport { useLogin } from '../../../hooks/useLogin'\r\nimport { Link } from 'react-router-dom'\r\n\r\n// Components\r\nimport AuthTemplate from '../AuthTemplate'\r\nimport Field from '../../../components/Inputs/Field/Field'\r\nimport GoogleButton from '../../../components/GoogleButton/GoogleButton'\r\nimport GithubButton from '../../../components/GithubButton/GithubButton'\r\n\r\nexport default function Login() {\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n\tconst { login, isPending, error } = useLogin()\r\n\r\n\tconst handleSubmit = () => {\r\n\t\t// Validation\r\n\r\n\t\tif (!email.match(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)) {\r\n\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t...existing,\r\n\t\t\t\temail: 'Enter a valid email',\r\n\t\t\t}))\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (password.trim().length < 6) {\r\n\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t...existing,\r\n\t\t\t\tpassword: 'Password must be at least 6 characters long',\r\n\t\t\t}))\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlogin(email, password)\r\n\t}\r\n\r\n\tconst [formErrors, setFormErrors] = useState({\r\n\t\tusername: '',\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t})\r\n\r\n\treturn (\r\n\t\t<AuthTemplate>\r\n\t\t\t<div className='auth__form-title'>\r\n\t\t\t\t<h2>Welcome back!</h2>\r\n\r\n\t\t\t\t<p className='auth__change-page'>\r\n\t\t\t\t\tDon't have an account? <Link to='/signup'>Sign up</Link>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<Field\r\n\t\t\t\ttype='email'\r\n\t\t\t\tvalue={email}\r\n\t\t\t\tsetValue={setEmail}\r\n\t\t\t\tlabel='Email'\r\n\t\t\t\terror={formErrors.email}\r\n\t\t\t\tresetError={() =>\r\n\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\temail: '',\r\n\t\t\t\t\t}))\r\n\t\t\t\t}\r\n\t\t\t\tonLostFocus={() => {\r\n\t\t\t\t\tif (email !== '' && !email.match(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)) {\r\n\t\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\t\temail: 'Please enter a valid email address',\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\thelpText='Eg. icecream@gmail.com'\r\n\t\t\t/>\r\n\r\n\t\t\t<Field\r\n\t\t\t\ttype='password'\r\n\t\t\t\tvalue={password}\r\n\t\t\t\tsetValue={setPassword}\r\n\t\t\t\tlabel='Password'\r\n\t\t\t\terror={formErrors.password}\r\n\t\t\t\tresetError={() =>\r\n\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\tpassword: '',\r\n\t\t\t\t\t}))\r\n\t\t\t\t}\r\n\t\t\t\tonLostFocus={() => {\r\n\t\t\t\t\tif (password !== '' && password.trim().length < 6) {\r\n\t\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\t\tpassword: 'Password must be at least 6 characters long',\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t\t<Link to={'/recover-password'} className='auth__form-reset-password'>\r\n\t\t\t\tForgot password?\r\n\t\t\t</Link>\r\n\r\n\t\t\t{!isPending && (\r\n\t\t\t\t<button className='btn' onClick={() => handleSubmit()}>\r\n\t\t\t\t\tLogin\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t\t{isPending && (\r\n\t\t\t\t<button className='btn' disabled>\r\n\t\t\t\t\tLoading\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className='separator mt2 mb2'>\r\n\t\t\t\t<span>or</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<GoogleButton />\r\n\t\t\t<GithubButton />\r\n\r\n\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t</AuthTemplate>\r\n\t)\r\n}\r\n","import { useState } from 'react'\r\nimport { useSignup } from '../../../hooks/useSignup'\r\nimport { Link } from 'react-router-dom'\r\n\r\n// Components\r\nimport AuthTemplate from '../AuthTemplate'\r\nimport Field from '../../../components/Inputs/Field/Field'\r\nimport GoogleButton from '../../../components/GoogleButton/GoogleButton'\r\nimport GithubButton from '../../../components/GithubButton/GithubButton'\r\n\r\nexport default function Signup() {\r\n\tconst { signup, isPending, error } = useSignup()\r\n\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n\tconst [displayName, setDisplayName] = useState('')\r\n\r\n\t// const [thumbnail, setThumbnail] = useState(null)\r\n\t// const [thumbnailError, setThumbnailError] = useState(null)\r\n\r\n\tconst [formErrors, setFormErrors] = useState({\r\n\t\tdisplayName: '',\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t})\r\n\r\n\tconst handleSubmit = () => {\r\n\t\t// Validation\r\n\r\n\t\tif (!email.match(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)) {\r\n\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t...existing,\r\n\t\t\t\temail: 'Enter a valid email',\r\n\t\t\t}))\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (password.trim().length < 6) {\r\n\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t...existing,\r\n\t\t\t\tpassword: 'Password must be at least 6 characters long',\r\n\t\t\t}))\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (displayName.trim().length < 3) {\r\n\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t...existing,\r\n\t\t\t\tdisplayName: 'Username must be at least 3 characters long',\r\n\t\t\t}))\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsignup(email, password, displayName, '')\r\n\t}\r\n\r\n\t// const handleFileChange = e => {\r\n\t// \tsetThumbnail(null)\r\n\t// \tlet selected = e.target.files[0]\r\n\r\n\t// \tif (!selected) {\r\n\t// \t\tsetThumbnailError('Please select a file')\r\n\t// \t\treturn\r\n\t// \t}\r\n\t// \tif (!selected.type.includes('image')) {\r\n\t// \t\tsetThumbnailError('Selected file must be an image')\r\n\t// \t\treturn\r\n\t// \t}\r\n\t// \tif (!selected.size > 100000) {\r\n\t// \t\tsetThumbnailError('Image file size must be less than 100kb')\r\n\t// \t\treturn\r\n\t// \t}\r\n\r\n\t// \tsetThumbnailError(null)\r\n\t// \tsetThumbnail(selected)\r\n\t// }\r\n\r\n\treturn (\r\n\t\t<AuthTemplate>\r\n\t\t\t<div className='auth__form-title'>\r\n\t\t\t\t<h2>\r\n\t\t\t\t\tCreate an account<span style={{ color: 'var(--text-accent)' }}>.</span>\r\n\t\t\t\t</h2>\r\n\r\n\t\t\t\t<p className='auth__change-page'>\r\n\t\t\t\t\tAlready a member? <Link to='/login'>Log in</Link>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<Field\r\n\t\t\t\ttype='email'\r\n\t\t\t\tvalue={email}\r\n\t\t\t\tsetValue={setEmail}\r\n\t\t\t\tlabel='Email'\r\n\t\t\t\terror={formErrors.email}\r\n\t\t\t\tresetError={() =>\r\n\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\temail: '',\r\n\t\t\t\t\t}))\r\n\t\t\t\t}\r\n\t\t\t\tonLostFocus={() => {\r\n\t\t\t\t\tif (email !== '' && !email.match(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)) {\r\n\t\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\t\temail: 'Please enter a valid email address',\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\thelpText='Eg. icecream@gmail.com'\r\n\t\t\t/>\r\n\r\n\t\t\t<Field\r\n\t\t\t\ttype='text'\r\n\t\t\t\tvalue={displayName}\r\n\t\t\t\tsetValue={setDisplayName}\r\n\t\t\t\tlabel='Username'\r\n\t\t\t\terror={formErrors.displayName}\r\n\t\t\t\tresetError={() =>\r\n\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\tdisplayName: '',\r\n\t\t\t\t\t}))\r\n\t\t\t\t}\r\n\t\t\t\tonLostFocus={() => {\r\n\t\t\t\t\tif (displayName !== '' && displayName.trim().length < 3) {\r\n\t\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\t\tdisplayName: 'Username must be at least 3 characters long',\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t\t<Field\r\n\t\t\t\ttype='password'\r\n\t\t\t\tvalue={password}\r\n\t\t\t\tsetValue={setPassword}\r\n\t\t\t\tlabel='Password'\r\n\t\t\t\terror={formErrors.password}\r\n\t\t\t\tresetError={() =>\r\n\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\tpassword: '',\r\n\t\t\t\t\t}))\r\n\t\t\t\t}\r\n\t\t\t\tonLostFocus={() => {\r\n\t\t\t\t\tif (password !== '' && password.trim().length < 6) {\r\n\t\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\t\tpassword: 'Password must be at least 6 characters long',\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t\t{/* <label>\r\n\t\t\t\t\t\t\t<span>Profile thumbnail:</span>\r\n\t\t\t\t\t\t\t<input type='file' required onChange={handleFileChange} />\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{thumbnailError && <div className='error'>{thumbnailError}</div>}\r\n\t\t\t\t\t\t</label> */}\r\n\r\n\t\t\t{!isPending && (\r\n\t\t\t\t<button className='btn' onClick={() => handleSubmit()}>\r\n\t\t\t\t\tCreate account\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t\t{isPending && (\r\n\t\t\t\t<button className='btn' disabled>\r\n\t\t\t\t\tLoading\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\r\n\t\t\t<div className='separator mt2 mb2'>\r\n\t\t\t\t<span>or</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<GoogleButton />\r\n\r\n\t\t\t<GithubButton />\r\n\r\n\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t</AuthTemplate>\r\n\t)\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { projectAuth, projectFirestore, projectStorage, projectGoogle, projectGitHub } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\nimport randomColor from 'randomcolor'\r\n\r\nexport const useSignup = () => {\r\n\tconst [isCancelled, setIsCancelled] = useState(false)\r\n\tconst [error, setError] = useState(null)\r\n\tconst [isPending, setIsPending] = useState(false)\r\n\tconst { dispatch } = useAuthContext()\r\n\r\n\tconst randColor = randomColor()\r\n\r\n\tconst signup = async (email, password, displayName, thumbnail) => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\t// Signup\r\n\t\t\tconst res = await projectAuth.createUserWithEmailAndPassword(email, password)\r\n\r\n\t\t\tif (!res) {\r\n\t\t\t\tthrow new Error('Could not complete signup')\r\n\t\t\t}\r\n\t\t\tlet imgUrl = ''\r\n\r\n\t\t\tif (thumbnail) {\r\n\t\t\t\t// Upload thumbnail\r\n\t\t\t\tconst uploadPath = `thumbnails/${res.user.uid}/${thumbnail.name}`\r\n\t\t\t\tconst img = await projectStorage.ref(uploadPath).put(thumbnail)\r\n\t\t\t\timgUrl = await img.ref.getDownloadURL()\r\n\t\t\t}\r\n\r\n\t\t\t// Add display name to user\r\n\t\t\tawait res.user.updateProfile({ displayName, photoURL: imgUrl })\r\n\r\n\t\t\t// Create a user document\r\n\t\t\tawait projectFirestore\r\n\t\t\t\t.collection('users')\r\n\t\t\t\t.doc(res.user.uid)\r\n\t\t\t\t.set({\r\n\t\t\t\t\tonline: true,\r\n\t\t\t\t\tdisplayName: displayName,\r\n\t\t\t\t\tphotoURL: imgUrl,\r\n\t\t\t\t\tcreatedAt: `${new Date(res.user.metadata.creationTime).toLocaleString('default', {\r\n\t\t\t\t\t\tday: '2-digit',\r\n\t\t\t\t\t\tmonth: 'short',\r\n\t\t\t\t\t\tyear: 'numeric',\r\n\t\t\t\t\t})}`,\r\n\t\t\t\t\tstatus: 'invisible',\r\n\t\t\t\t\tbanner: `${randColor}`,\r\n\t\t\t\t})\r\n\r\n\t\t\t// Dispatch login action\r\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst signInWithGoogle = async () => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\t// Signup\r\n\t\t\tconst res = await projectAuth.signInWithPopup(projectGoogle)\r\n\r\n\t\t\tif (!res) {\r\n\t\t\t\tthrow new Error('Could not complete signup')\r\n\t\t\t}\r\n\r\n\t\t\t// Add display name to user\r\n\t\t\tawait res.user.updateProfile({ displayName: res.user.displayName, photoURL: res.user.photoURL })\r\n\r\n\t\t\t// Create a user document\r\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).set({\r\n\t\t\t\tonline: true,\r\n\t\t\t\tdisplayName: res.user.displayName,\r\n\t\t\t\tphotoURL: res.user.photoURL,\r\n\t\t\t})\r\n\r\n\t\t\t// Dispatch login action\r\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst signInWithGithub = async () => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\t// Signup\r\n\t\t\tconst res = await projectAuth.signInWithPopup(projectGitHub)\r\n\r\n\t\t\tif (!res) {\r\n\t\t\t\tthrow new Error('Could not complete signup')\r\n\t\t\t}\r\n\r\n\t\t\t// Add display name to user\r\n\t\t\tawait res.user.updateProfile({ displayName: res.additionalUserInfo.username, photoURL: res.user.photoURL })\r\n\r\n\t\t\t// Create a user document\r\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).set({\r\n\t\t\t\tonline: true,\r\n\t\t\t\tdisplayName: res.user.displayName,\r\n\t\t\t\tphotoURL: res.user.photoURL,\r\n\t\t\t})\r\n\r\n\t\t\t// Dispatch login action\r\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => setIsCancelled(true)\r\n\t}, [])\r\n\r\n\treturn { signup, signInWithGoogle, signInWithGithub, error, isPending }\r\n}\r\n","export default function PrivacyPolicy() {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div class='privacy-section'>\r\n\t\t\t\t<h3>Zbieranie danych</h3>\r\n\t\t\t\t<p>Kiedy zbieramy Twoje dane? Twój email oraz hasło zapisywane są podczas rejestracji na naszej stronie.</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class='privacy-section'>\r\n\t\t\t\t<h3>Cele przetwarzania danych</h3>\r\n\r\n\t\t\t\t<p>\r\n\t\t\t\t\tTwoje dane zebrane podczas rejestracji przetwarzane są jedynie w celu umożliwienia korzystania ze strony. Nie\r\n\t\t\t\t\tudostępniamy ich nikomu, nie sprzedajemy ich. Rejestracja jest dobrowolna.\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t<div class='privacy-section'>\r\n\t\t\t\t<h3>Bezpieczeństwo danych</h3>\r\n\r\n\t\t\t\t<p>\r\n\t\t\t\t\tTwoje dane są automatycznie szyfrowane przez usługę firebase od google. Nikt nie ma dostępu do twoich danych.\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t<div class='privacy-section'>\r\n\t\t\t\t<h3>Usuwanie danych</h3>\r\n\r\n\t\t\t\t<p>\r\n\t\t\t\t\tJeśli zrezygnujesz z używania naszej aplikacji w każdym momencie możesz usunąć konto oraz swoje dane\r\n\t\t\t\t\t{'(settings => account details => delete account)'}.\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class='privacy-section'>\r\n\t\t\t\t<h3>Pozostałe informacje</h3>\r\n\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<span>W razie jakichkolwiek pytań, prosimy o kontakt na adresie mailowym: matkowsky808@gmail.com</span>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/shrek-gif.df094210.gif\";","import { useEffect, useState } from 'react'\r\nimport { useLogin } from '../../../hooks/useLogin'\r\nimport { Link } from 'react-router-dom'\r\n\r\n// Styles & assets\r\nimport ShrekGif from '../../../assets/shrek-gif.gif'\r\n\r\n// Components\r\nimport Field from '../../../components/Inputs/Field/Field'\r\nimport AuthTemplate from '../AuthTemplate'\r\n\r\nexport default function ResetPassword() {\r\n\tconst { sendPasswordReset, isPending, error, isFinished } = useLogin()\r\n\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [timeToRedirect, setTimeToRedirect] = useState(15)\r\n\r\n\tconst [formErrors, setFormErrors] = useState({\r\n\t\temail: ''\r\n\t})\r\n\r\n\tconst handlePasswordReset = () => {\r\n\t\tif (!email.match(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)) {\r\n\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t...existing,\r\n\t\t\t\temail: 'Enter a valid email'\r\n\t\t\t}))\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsendPasswordReset(email)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isFinished === true) {\r\n\t\t\tcountdown()\r\n\t\t}\r\n\t}, [isFinished])\r\n\r\n\tconst countdown = () => {\r\n\t\tlet redirectCountdown = setInterval(() => {\r\n\t\t\tif (timeToRedirect <= 0) {\r\n\t\t\t\tclearInterval(redirectCountdown)\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeToRedirect(prevTimeToRedirect => prevTimeToRedirect - 1)\r\n\t\t\t}\r\n\t\t}, 1000)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<AuthTemplate>\r\n\t\t\t{isFinished && (\r\n\t\t\t\t<div className='text-center auth__form-email-sent'>\r\n\t\t\t\t\t<img src={ShrekGif} alt='shrek' />\r\n\r\n\t\t\t\t\t<div className='auth__form-title'>\r\n\t\t\t\t\t\t<h2>Check your email</h2>\r\n\t\t\t\t\t\t<p>A password reset email has been sent to your email address</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<p className='auth__change-page'>\r\n\t\t\t\t\t\tGo back to <Link to='/login'>Login</Link>\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<p className='redirect'>Redirecting in {timeToRedirect} s</p>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{!isFinished && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className='auth__form-title'>\r\n\t\t\t\t\t\t<h2>Forgot password?</h2>\r\n\t\t\t\t\t\t<p>Enter your email below to recieve password reset instructions</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\tsetValue={setEmail}\r\n\t\t\t\t\t\tlabel='Email'\r\n\t\t\t\t\t\terror={formErrors.email}\r\n\t\t\t\t\t\tresetError={() =>\r\n\t\t\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\t\t\temail: ''\r\n\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonLostFocus={() => {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\temail !== '' &&\r\n\t\t\t\t\t\t\t\t!email.match(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\t\t\t\temail: 'Please enter a valid email address'\r\n\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\thelpText='Eg. icecream@gmail.com'\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{!isPending && (\r\n\t\t\t\t\t\t<button className='btn forgot-password' onClick={() => handlePasswordReset()}>\r\n\t\t\t\t\t\t\tSend reset link\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{isPending && (\r\n\t\t\t\t\t\t<button className='btn forgot-password' disabled>\r\n\t\t\t\t\t\t\tSending email...\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<p className='auth__change-page'>\r\n\t\t\t\t\t\tNo longer have Alzheimer? <Link to='/login'>Login</Link>\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</AuthTemplate>\r\n\t)\r\n}\r\n","import { useState } from 'react'\r\nimport { useLogin } from '../../../hooks/useLogin'\r\nimport { Link } from 'react-router-dom'\r\nimport { useQuery } from '../../../hooks/useQuery'\r\n\r\n// Styles & assets\r\nimport ShrekGif from '../../../assets/shrek-gif.gif'\r\n\r\n// Components\r\nimport AuthTemplate from '../AuthTemplate'\r\nimport Field from '../../../components/Inputs/Field/Field'\r\n\r\nexport default function SetNewPassword() {\r\n\tconst { resetPassword, isPending, error, isFinished } = useLogin()\r\n\r\n\tconst [newPassword, setNewPassword] = useState('')\r\n\r\n\tconst oobCode = useQuery('oobCode')\r\n\r\n\tconst handleSubmit = async () => {\r\n\t\tif (newPassword.trim().length < 6) {\r\n\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t...existing,\r\n\t\t\t\tpassword: 'Password must be at least 6 characters long',\r\n\t\t\t}))\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tawait resetPassword(oobCode, newPassword)\r\n\t}\r\n\r\n\tconst [formErrors, setFormErrors] = useState({\r\n\t\tpassword: '',\r\n\t})\r\n\r\n\treturn (\r\n\t\t<AuthTemplate>\r\n\t\t\t{isFinished && (\r\n\t\t\t\t<div className='auth__form-email-sent'>\r\n\t\t\t\t\t<img src={ShrekGif} alt='' />\r\n\t\t\t\t\t<div className='auth__form-title'>\r\n\t\t\t\t\t\t<h2>Password set successfully</h2>\r\n\t\t\t\t\t\t<p>You can now log in with your new password</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<Link to='/login'>\r\n\t\t\t\t\t\t<button className='btn'>Back to Login</button>\r\n\t\t\t\t\t</Link>\r\n\r\n\t\t\t\t\t<p className='auth__change-page'>\r\n\t\t\t\t\t\tNow log in and remember your password. <Link to='/login'> Login</Link>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{!isFinished && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className='auth__form-title'>\r\n\t\t\t\t\t\t<h2>Set a new password</h2>\r\n\t\t\t\t\t\t<p>Enter a password that you will remember this time...</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\tvalue={newPassword}\r\n\t\t\t\t\t\tsetValue={setNewPassword}\r\n\t\t\t\t\t\tlabel='New Password'\r\n\t\t\t\t\t\terror={formErrors.password}\r\n\t\t\t\t\t\tresetError={() =>\r\n\t\t\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\t\t\tpassword: '',\r\n\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonLostFocus={() => {\r\n\t\t\t\t\t\t\tif (newPassword !== '' && newPassword.trim().length < 6) {\r\n\t\t\t\t\t\t\t\tsetFormErrors(existing => ({\r\n\t\t\t\t\t\t\t\t\t...existing,\r\n\t\t\t\t\t\t\t\t\tpassword: 'Password must be at least 6 characters long',\r\n\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{!isPending && (\r\n\t\t\t\t\t\t<button className='btn mb1' onClick={() => handleSubmit()}>\r\n\t\t\t\t\t\t\tReset password\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{isPending && (\r\n\t\t\t\t\t\t<button className='btn mb1' disabled>\r\n\t\t\t\t\t\t\tSetting new password...\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<p className='auth__change-page'>\r\n\t\t\t\t\t\t<Link to='/login'>Login</Link> instead?\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</AuthTemplate>\r\n\t)\r\n}\r\n","import { useLocation } from 'react-router-dom'\r\n\r\nexport const useQuery = queryName => {\r\n\tconst location = useLocation()\r\n\tconst query = new URLSearchParams(location.search).get(queryName)\r\n\treturn query\r\n}\r\n","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport formatDistanceToNowStrict from 'date-fns/formatDistanceToNow'\r\n\r\n// Styles && Assets\r\nimport './ChatsList.scss'\r\n\r\n// Components\r\nimport AvatarWithStatus from '../AvatarWithStatus/AvatarWithStatus'\r\n\r\nexport default function ChatsList({ chats, inputRef, setShowChat }) {\r\n\tconst { user } = useAuthContext()\r\n\r\n\tconst replaceDistanceToNow = {\r\n\t\tabout: '',\r\n\t\tminute: 'min',\r\n\t\tminutes: 'min',\r\n\t\t'less than a minute': '1 min',\r\n\t}\r\n\r\n\tconst focusInput = () => {\r\n\t\tif (inputRef.current !== null) {\r\n\t\t\tinputRef.current.focus()\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSeen = chat => {\r\n\t\tlet res = false\r\n\r\n\t\tif (chat.messages && chat.messages[chat.messages.length - 1]) {\r\n\t\t\tchat.assignedUsers.forEach(u => {\r\n\t\t\t\tif (u.id === user.uid && u.lastRead !== chat.messages[chat.messages.length - 1].id) {\r\n\t\t\t\t\tres = true\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='chats__list custom-scrollbar'>\r\n\t\t\t{chats.length === 0 && <p>No chats yet!</p>}\r\n\t\t\t{chats.map(chat => (\r\n\t\t\t\t<NavLink\r\n\t\t\t\t\tto={`/u/${chat.id}`}\r\n\t\t\t\t\tkey={chat.id}\r\n\t\t\t\t\tclassName={`chats__list-chat ${handleSeen(chat) ? 'unread' : ''}`}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tfocusInput()\r\n\t\t\t\t\t\tsetShowChat(true)\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{chat.assignedUsers.map(\r\n\t\t\t\t\t\tu =>\r\n\t\t\t\t\t\t\tu.id !== user.uid && (\r\n\t\t\t\t\t\t\t\t<React.Fragment key={u.id}>\r\n\t\t\t\t\t\t\t\t\t<AvatarWithStatus userId={u.id} />\r\n\t\t\t\t\t\t\t\t\t<div className='flex-column justify-center'>\r\n\t\t\t\t\t\t\t\t\t\t<p className='display-name'>\r\n\t\t\t\t\t\t\t\t\t\t\t{u.nickname.substring(0, 18)}\r\n\t\t\t\t\t\t\t\t\t\t\t<span>{u.nickname.length >= 18 && '...'}</span>\r\n\t\t\t\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div className='last-chat'>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className='last-message text-clip'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{chat.messages.length !== 0 && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{chat &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1] &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].createdBy === user.uid &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'You: '}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{chat.messages[chat.messages.length - 1].content &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].fileType === undefined &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].content.substring(0, 15)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!chat.messages[chat.messages.length - 1].content &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].fileType === 'image' &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`sent a photo`}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!chat.messages[chat.messages.length - 1].content &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].fileType === 'video' &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`sent a video`}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{chat.messages[chat.messages.length - 1].content &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].content.length >= 15 &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'...'}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t{chat.messages.length === 0 && 'No messages yet'}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{chat.messages.length !== 0 && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='dot'></div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='comment-date'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatDistanceToNowStrict(chat.messages[chat.messages.length - 1].createdAt.toDate(), {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taddSuffix: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}).replace(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/\\b(?:about|less than a minute|minute|minutes)\\b/gi,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmatched => replaceDistanceToNow[matched]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t)}\r\n\t\t\t\t</NavLink>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\nimport { useDocument } from '../../hooks/useDocument'\r\nimport { useCollection } from '../../hooks/useCollection'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\n\r\n// Styles\r\nimport './Pinned.scss'\r\n\r\n// Components\r\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd'\r\nimport { Link } from 'react-router-dom'\r\nimport Modal from '../Modal/Modal'\r\nimport Avatar from '../Avatar/Avatar'\r\nimport Field from '../Inputs/Field/Field'\r\n\r\nconst Pinned = ({ orientation }) => {\r\n\tconst { user } = useAuthContext()\r\n\tconst { documents: chats } = useCollection(\r\n\t\t'projects',\r\n\t\t['assignedUsersId', 'array-contains', user.uid],\r\n\t\t['updatedAt', 'desc']\r\n\t)\r\n\tconst { updateDocument } = useFirestore('users')\r\n\tconst { documents: users } = useCollection('users')\r\n\tconst { document: userDoc } = useDocument('users', user.uid)\r\n\r\n\tconst [favs, setFavs] = useState([])\r\n\tconst [showFavs, setShowFavs] = useState(false)\r\n\tconst [searchValue, setSearchValue] = useState('')\r\n\tconst [favsCopy, setFavsCopy] = useState(favs)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chats && chats !== null && chats.length !== 0) {\r\n\t\t\tif (userDoc && userDoc.pinned && userDoc.pinned !== undefined) {\r\n\t\t\t\tsetFavs(userDoc.pinned)\r\n\t\t\t} else {\r\n\t\t\t\tsetFavs([null, null, null, null])\r\n\t\t\t\tsetFavsCopy([null, null, null, null])\r\n\t\t\t}\r\n\t\t}\r\n\t}, [chats, userDoc])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userDoc && userDoc.pinned !== null) {\r\n\t\t\tsetFavs(userDoc.pinned)\r\n\t\t}\r\n\t}, [userDoc])\r\n\r\n\tconst getDoc = id => {\r\n\t\tlet res = null\r\n\r\n\t\tif (users) {\r\n\t\t\tres = users.filter(doc => {\r\n\t\t\t\tif (doc.id === id) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t})[0]\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst filterChats = chat => {\r\n\t\tlet result = false\r\n\t\tif (favsCopy) {\r\n\t\t\tfavsCopy.forEach(fav => {\r\n\t\t\t\tif (fav !== null) {\r\n\t\t\t\t\tif (fav.id === chat.id) {\r\n\t\t\t\t\t\tresult = true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn result\r\n\t}\r\n\r\n\tconst handleOnDragEnd = async result => {\r\n\t\tif (!result.destination) return\r\n\t\tconst items = Array.from(favs)\r\n\t\tconst [reorderedItem] = items.splice(result.source.index, 1)\r\n\t\titems.splice(result.destination.index, 0, reorderedItem)\r\n\r\n\t\tsetFavs(items)\r\n\t\tawait updateDocument(user.uid, {\r\n\t\t\tpinned: items\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleOnDragEndCopy = result => {\r\n\t\tif (!result.destination) return\r\n\r\n\t\tif (result.source.droppableId === result.destination.droppableId && result.source.droppableId === 'manage-favs') {\r\n\t\t\tconst items = Array.from(favsCopy)\r\n\t\t\tconst [reorderedItem] = items.splice(result.source.index, 1)\r\n\t\t\titems.splice(result.destination.index, 0, reorderedItem)\r\n\t\t\tsetFavsCopy(items)\r\n\t\t}\r\n\r\n\t\tif (result.destination.droppableId === 'empty-slots') {\r\n\t\t\tconst favs = Array.from(favsCopy)\r\n\t\t\tconst items = Array.from(chats.filter(chat => !filterChats(chat)))\r\n\r\n\t\t\tconst chatToAdd = items[result.source.index]\r\n\t\t\tlet userToAdd\r\n\t\t\tlet index\r\n\r\n\t\t\tif (!chatToAdd.isGroup) {\r\n\t\t\t\tchatToAdd.assignedUsers.forEach(u => {\r\n\t\t\t\t\tif (u.id !== user.uid) {\r\n\t\t\t\t\t\tuserToAdd = {\r\n\t\t\t\t\t\t\tid: chatToAdd.id,\r\n\t\t\t\t\t\t\tuid: u.id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tfavs.forEach(item => {\r\n\t\t\t\tif (item === null) {\r\n\t\t\t\t\tindex = favsCopy.indexOf(item)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tfavs.splice(index, 1, userToAdd)\r\n\r\n\t\t\tsetFavsCopy(favs)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleRemoveFav = fav => {\r\n\t\tconst items = Array.from(favsCopy)\r\n\t\t// const [reorderedItem] = items.splice(favs.indexOf(fav), 1)\r\n\t\titems.splice(favsCopy.indexOf(fav), 1)\r\n\t\titems.push(null)\r\n\r\n\t\tsetFavsCopy(items)\r\n\t}\r\n\r\n\tconst addFav = chat => {\r\n\t\tlet items = [null, null, null, null]\r\n\r\n\t\tif (!favsCopy) {\r\n\t\t\tsetFavsCopy([null, null, null, null])\r\n\t\t}\r\n\r\n\t\tif (favsCopy) {\r\n\t\t\titems = Array.from(favsCopy)\r\n\t\t}\r\n\r\n\t\tlet index\r\n\t\tlet userToAdd\r\n\r\n\t\tif (!chat.isGroup) {\r\n\t\t\tchat.assignedUsers.forEach(u => {\r\n\t\t\t\tif (u.id !== user.uid) {\r\n\t\t\t\t\tuserToAdd = {\r\n\t\t\t\t\t\tid: chat.id,\r\n\t\t\t\t\t\tuid: u.id\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\titems.forEach(item => {\r\n\t\t\tif (item === null) {\r\n\t\t\t\tindex = favsCopy.indexOf(item)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\titems.splice(index, 1, userToAdd)\r\n\t\tsetFavsCopy(items)\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<DragDropContext onDragEnd={handleOnDragEnd}>\r\n\t\t\t\t<Droppable droppableId='favourites' direction={orientation === 'horizontal' ? 'horizontal' : 'vertical'}>\r\n\t\t\t\t\t{provided => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={`pinned ${orientation} ${favs && favs.filter(f => f !== null).length === 4 ? 'full' : ''}`}\r\n\t\t\t\t\t\t\t{...provided.droppableProps}\r\n\t\t\t\t\t\t\tref={provided.innerRef}>\r\n\t\t\t\t\t\t\t{favs &&\r\n\t\t\t\t\t\t\t\tfavs.map(\r\n\t\t\t\t\t\t\t\t\t(f, index) =>\r\n\t\t\t\t\t\t\t\t\t\tf !== null && (\r\n\t\t\t\t\t\t\t\t\t\t\t<Draggable key={f.id} draggableId={f.id} index={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{provided => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/u/${f.id}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdraggable='true'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={getDoc(f.uid) ? getDoc(f.uid).photoURL : ''} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName='pinned__add'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetShowFavs(true)\r\n\t\t\t\t\t\t\t\t\tif (favs) {\r\n\t\t\t\t\t\t\t\t\t\tsetFavsCopy(favs)\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tsetFavsCopy([null, null, null, null])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<i className='fa-regular fa-star'></i>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Droppable>\r\n\t\t\t</DragDropContext>\r\n\r\n\t\t\t<Modal show={showFavs} setShow={() => setShowFavs(false)}>\r\n\t\t\t\t<div className='pinned__modal'>\r\n\t\t\t\t\t<DragDropContext onDragEnd={handleOnDragEndCopy}>\r\n\t\t\t\t\t\t<Droppable droppableId='manage-favs' direction='horizontal' type='manage-favs'>\r\n\t\t\t\t\t\t\t{provided => (\r\n\t\t\t\t\t\t\t\t<div className='pinned__modal-current-favs' {...provided.droppableProps} ref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t{favsCopy &&\r\n\t\t\t\t\t\t\t\t\t\tfavsCopy.map(\r\n\t\t\t\t\t\t\t\t\t\t\t(f, index) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tf !== null && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Draggable key={f.id} draggableId={f.id} index={index} type='FAVS-LIST'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{provided => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fav'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdraggable='true'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={getDoc(f.uid) ? getDoc(f.uid).photoURL : ''} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fav__remove'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleRemoveFav(f)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-xmark'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t{provided.placeholder}\r\n\r\n\t\t\t\t\t\t\t\t\t{favsCopy && favsCopy.includes(null) && (\r\n\t\t\t\t\t\t\t\t\t\t<Droppable droppableId='empty-slots' direction='horizontal'>\r\n\t\t\t\t\t\t\t\t\t\t\t{provided => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='flex-row' {...provided.droppableProps} ref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{favsCopy.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(f, index) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tf === null && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='fav fav--empty'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='fa-regular fa-star'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Droppable>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Droppable>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<Field type='text' value={searchValue} setValue={setSearchValue} label='Find a user' />\r\n\t\t\t\t\t\t\t<Droppable droppableId='chats-list' isDropDisabled={true}>\r\n\t\t\t\t\t\t\t\t{provided => (\r\n\t\t\t\t\t\t\t\t\t<ul\r\n\t\t\t\t\t\t\t\t\t\tclassName='pinned__modal-chats-list custom-scrollbar'\r\n\t\t\t\t\t\t\t\t\t\t{...provided.droppableProps}\r\n\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t\t{chats &&\r\n\t\t\t\t\t\t\t\t\t\t\tchats\r\n\t\t\t\t\t\t\t\t\t\t\t\t.filter(chat => !filterChats(chat))\r\n\t\t\t\t\t\t\t\t\t\t\t\t.map((chat, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment key={chat.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Code for groups */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* {chat.isGroup &&\r\n                                                    chat.groupName\r\n                                                        .toLowerCase()\r\n                                                        .trim()\r\n                                                        .replace(/\\s+/g, '')\r\n                                                        .includes(searchValue.toLowerCase()) && (\r\n                                                        <li key={chat.id}>\r\n                                                            <Avatar src={chat.photoURL} />\r\n                                                            <p>{chat.displayName}</p>\r\n                                                        </li>\r\n                                                    )} */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!chat.isGroup &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchat.assignedUsers.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tu =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tu.id !== user.uid &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetDoc(u.id) !== null &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetDoc(u.id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.displayName.toLowerCase()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.trim()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.replace(/\\s+/g, '')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.includes(searchValue.toLowerCase()) && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Draggable key={u.id} draggableId={u.id} index={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(provided, snapshot) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={chat.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`${snapshot.isDragging ? 'dragged' : ''} ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsnapshot.draggingOver === 'empty-slots' ? 'hover-over-slot' : ''\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => addFav(chat)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: '10px !important' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='flex-row'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!snapshot.isDragging && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={getDoc(u.id) ? getDoc(u.id).photoURL : ''} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!snapshot.isDragging && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{getDoc(u.id) ? getDoc(u.id).displayName : ''}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='handle' {...provided.dragHandleProps}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!snapshot.isDragging && <i className='fa-solid fa-grip-vertical'></i>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{snapshot.isDragging && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={getDoc(u.id) ? getDoc(u.id).photoURL : ''} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Droppable>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</DragDropContext>\r\n\r\n\t\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t\t<div className='btn btn--secondary' onClick={() => setShowFavs(false)}>\r\n\t\t\t\t\t\t\tcancel\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName='btn'\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tupdateDocument(user.uid, {\r\n\t\t\t\t\t\t\t\t\tpinned: favsCopy\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tsetShowFavs(false)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tfinish\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Pinned\r\n","import React, { useState } from 'react'\r\nimport { useCollection } from '../../hooks/useCollection'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { Link } from 'react-router-dom'\r\n\r\n// Styles\r\nimport './Chats.scss'\r\n\r\n// Compontents\r\nimport ChatsList from './ChatsList'\r\nimport Avatar from '../Avatar/Avatar'\r\nimport AvatarWithStatus from '../AvatarWithStatus/AvatarWithStatus'\r\nimport MediaQuery from 'react-responsive'\r\nimport Pinned from '../Pinned/Pinned'\r\n\r\nexport default function Chats({ currentChat, inputRef, setShowChat }) {\r\n\tconst { user } = useAuthContext()\r\n\tconst { documents: users } = useCollection('users')\r\n\tconst { documents: chats } = useCollection(\r\n\t\t'projects',\r\n\t\t['assignedUsersId', 'array-contains', user.uid],\r\n\t\t['updatedAt', 'desc']\r\n\t)\r\n\r\n\tconst [query, setQuery] = useState('')\r\n\r\n\tconst getDoc = id => {\r\n\t\tlet res = null\r\n\r\n\t\tif (users) {\r\n\t\t\tres = users.filter(doc => {\r\n\t\t\t\tif (doc.id === id) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t})[0]\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst filterChats = chat => {\r\n\t\tlet result = false\r\n\t\t// chat.displayName.toLowerCase().trim().replace(/\\s+/g, '').includes(query.toLowerCase())\r\n\r\n\t\tchat.assignedUsers.forEach(u => {\r\n\t\t\tif (u.id !== user.uid) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tgetDoc(u.id).displayName.toLowerCase().trim().replace(/\\s+/g, '').includes(query.toLowerCase()) ||\r\n\t\t\t\t\t(u.nickname && u.nickname.toLowerCase().trim().replace(/\\s+/g, '').includes(query.toLowerCase()))\r\n\t\t\t\t) {\r\n\t\t\t\t\tresult = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn result\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='chats'>\r\n\t\t\t<div className='page-title'>\r\n\t\t\t\t<h2>Chats</h2>\r\n\t\t\t\t<MediaQuery maxWidth={768}>\r\n\t\t\t\t\t<Link to={`/profile/${user.uid}`}>\r\n\t\t\t\t\t\t<AvatarWithStatus userId={user.uid} linkToProfile={false} noTooltip={true} />\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</MediaQuery>\r\n\t\t\t</div>\r\n\r\n\t\t\t<MediaQuery maxWidth={768}>\r\n\t\t\t\t<Pinned orientation='horizontal' />\r\n\t\t\t</MediaQuery>\r\n\r\n\t\t\t<label className='chats__search-bar'>\r\n\t\t\t\t<i className='fa-solid fa-magnifying-glass'></i>\r\n\r\n\t\t\t\t<input type='text' placeholder='Find a user' onChange={e => setQuery(e.target.value)} value={query} />\r\n\t\t\t</label>\r\n\r\n\t\t\t{query !== '' && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className='chats__filtered'>\r\n\t\t\t\t\t\t{chats &&\r\n\t\t\t\t\t\t\tchats\r\n\t\t\t\t\t\t\t\t.filter(chat => filterChats(chat))\r\n\t\t\t\t\t\t\t\t.map(chat =>\r\n\t\t\t\t\t\t\t\t\tchat.assignedUsers.map(\r\n\t\t\t\t\t\t\t\t\t\tu =>\r\n\t\t\t\t\t\t\t\t\t\t\tu.id !== user.uid && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/u/${chat.id}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={u.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='chats__filtered-user'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetQuery('')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={getDoc(u.id).photoURL} />\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{getDoc(u.id).displayName}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\r\n\t\t\t{query === '' && chats && (\r\n\t\t\t\t<ChatsList chats={chats} currentChat={currentChat} inputRef={inputRef} setShowChat={setShowChat} />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { NavLink, useLocation } from 'react-router-dom'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useCollection } from '../../hooks/useCollection'\r\nimport { useDocument } from '../../hooks/useDocument'\r\n\r\n// Styles\r\nimport './ToolBar.scss'\r\nimport AvatarWithStatus from '../AvatarWithStatus/AvatarWithStatus'\r\nimport ProfilePreview from '../ProfilePreview/ProfilePreview'\r\nimport Pinned from '../Pinned/Pinned'\r\n\r\nconst ToolBar = () => {\r\n\tconst location = useLocation()\r\n\r\n\tconst { user } = useAuthContext()\r\n\tconst { documents: chats } = useCollection(\r\n\t\t'projects',\r\n\t\t['assignedUsersId', 'array-contains', user.uid],\r\n\t\t['updatedAt', 'desc']\r\n\t)\r\n\tconst { document: userDoc } = useDocument('users', user.uid)\r\n\r\n\tconst [latestChat, setLatestChat] = useState()\r\n\tconst [currentPath, setCurrentPath] = useState('')\r\n\tconst [showProfile, setShowProfile] = useState(false)\r\n\tconst [invitesAmount, setInvitesAmount] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chats && chats !== null && chats.length !== 0) {\r\n\t\t\tsetLatestChat(chats[0])\r\n\t\t} else {\r\n\t\t\tsetLatestChat('')\r\n\t\t}\r\n\t}, [chats, userDoc])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCurrentPath(location.pathname)\r\n\t}, [location])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userDoc && userDoc.friends) {\r\n\t\t\tsetInvitesAmount(\r\n\t\t\t\tuserDoc.friends.filter(f => {\r\n\t\t\t\t\tif (f.isPending) return true\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}).length\r\n\t\t\t)\r\n\t\t}\r\n\t}, [userDoc])\r\n\r\n\treturn (\r\n\t\tuserDoc && (\r\n\t\t\t<div className='tool-bar'>\r\n\t\t\t\t<nav className='tool-bar__pages'>\r\n\t\t\t\t\t<NavLink to={`/u/${latestChat && latestChat.id}`} className={currentPath.includes('/u/') ? 'active' : ''}>\r\n\t\t\t\t\t\t<i className='fa-solid fa-comment'></i>\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t<NavLink to='/'>\r\n\t\t\t\t\t\t<i className='fa-solid fa-house'></i>\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t<NavLink to='/friends' className='friends'>\r\n\t\t\t\t\t\t<i className='fa-solid fa-address-book'></i>\r\n\t\t\t\t\t\t{invitesAmount > 0 && (\r\n\t\t\t\t\t\t\t<div className='pending-indicator'>\r\n\t\t\t\t\t\t\t\t<p>{invitesAmount}</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</NavLink>\r\n\r\n\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\tto='/settings/account-details'\r\n\t\t\t\t\t\tclassName={`${\r\n\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t'/settings/account-details',\r\n\t\t\t\t\t\t\t\t'/settings/profile',\r\n\t\t\t\t\t\t\t\t'/settings/theme',\r\n\t\t\t\t\t\t\t\t'/settings',\r\n\t\t\t\t\t\t\t\t'/settings/',\r\n\t\t\t\t\t\t\t\t'/settings/become-cool',\r\n\t\t\t\t\t\t\t\t'/settings/privacy-and-security',\r\n\t\t\t\t\t\t\t].includes(location.pathname)\r\n\t\t\t\t\t\t\t\t? 'active'\r\n\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t}`}>\r\n\t\t\t\t\t\t<i className='fa-solid fa-gear'></i>\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</nav>\r\n\r\n\t\t\t\t<div className='separator-no-text'></div>\r\n\r\n\t\t\t\t<Pinned orientation='vertical' />\r\n\r\n\t\t\t\t<div className='separator-no-text'></div>\r\n\r\n\t\t\t\t<div className='tool-bar__profile-menu'>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetShowProfile(true)\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<AvatarWithStatus userId={userDoc.id} linkToProfile={false} noTooltip={true} />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<ProfilePreview show={showProfile} setShow={() => setShowProfile(false)} userId={userDoc.id} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t)\r\n}\r\n\r\nexport default ToolBar\r\n","export default __webpack_public_path__ + \"static/media/premium-account.5a5ada39.png\";","// Styles\r\nimport './Loader.scss'\r\n\r\nexport default function Loader() {\r\n\treturn (\r\n\t\t<div className='loader'>\r\n\t\t\t<span></span>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState } from 'react'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useDocument } from '../../hooks/useDocument'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\nimport { useCollection } from '../../hooks/useCollection'\r\nimport { timestamp } from '../../firebase/config'\r\nimport { useDates } from '../../hooks/useDates'\r\nimport { v4 as uuid } from 'uuid'\r\nimport ReactCountryFlag from 'react-country-flag'\r\n\r\n// Styles && Assets\r\nimport './Profile.scss'\r\nimport premiumIcon from '../../assets/premium-account.png'\r\n\r\n// Components\r\nimport AvatarWithStatus from '../../components/AvatarWithStatus/AvatarWithStatus'\r\nimport Tooltip from '../../components/Tooltip/Tooltip'\r\nimport randomColor from 'randomcolor'\r\nimport Avatar from '../../components/Avatar/Avatar'\r\nimport Modal from '../../components/Modal/Modal'\r\nimport OutsideClickHandler from 'react-outside-click-handler'\r\nimport EmojiPicker, { EmojiStyle, Theme } from 'emoji-picker-react'\r\nimport Field from '../../components/Inputs/Field/Field'\r\nimport Loader from '../../components/Loader/Loader'\r\n\r\nexport default function Profile() {\r\n\tconst randColor = randomColor()\r\n\tconst uniqueId = uuid()\r\n\r\n\tconst { id } = useParams()\r\n\tconst { user } = useAuthContext()\r\n\tconst { error, document: userDoc } = useDocument('users', id)\r\n\tconst { document: currentUserDoc } = useDocument('users', user.uid)\r\n\tconst { documents: chats } = useCollection('projects')\r\n\tconst { documents } = useCollection('users')\r\n\tconst { updateDocument } = useFirestore('users')\r\n\tconst { formatDate } = useDates()\r\n\r\n\tconst [confirmDelete, setConfirmDelete] = useState(null)\r\n\tconst [comment, setComment] = useState('')\r\n\tconst [showEmojiPicker, setShowEmojiPicker] = useState(false)\r\n\tconst [showInputControls, setShowInputControls] = useState(false)\r\n\tconst [inputError, setInputError] = useState('')\r\n\r\n\tconst getDoc = id => {\r\n\t\tlet res = null\r\n\t\tif (documents) {\r\n\t\t\tres = documents.filter(doc => {\r\n\t\t\t\tif (doc.id === id) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t})[0]\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst addComment = async () => {\r\n\t\tif (comment.trim() === '') return\r\n\r\n\t\tif (userDoc.profileComments) {\r\n\t\t\tawait updateDocument(id, {\r\n\t\t\t\tprofileComments: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: uniqueId,\r\n\t\t\t\t\t\tcontent: comment,\r\n\t\t\t\t\t\tcreatedBy: user.uid,\r\n\t\t\t\t\t\tcreatedAt: timestamp.fromDate(new Date()),\r\n\t\t\t\t\t},\r\n\t\t\t\t\t...userDoc.profileComments,\r\n\t\t\t\t],\r\n\t\t\t})\r\n\t\t\tsetShowInputControls(false)\r\n\t\t\tsetComment('')\r\n\t\t} else {\r\n\t\t\tawait updateDocument(id, {\r\n\t\t\t\tprofileComments: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: uniqueId,\r\n\t\t\t\t\t\tcontent: comment,\r\n\t\t\t\t\t\tcreatedBy: user.uid,\r\n\t\t\t\t\t\tcreatedAt: timestamp.fromDate(new Date()),\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t})\r\n\t\t\tsetShowInputControls(false)\r\n\t\t\tsetComment('')\r\n\t\t}\r\n\r\n\t\tsetComment('')\r\n\t}\r\n\r\n\tconst deleteComment = async comment => {\r\n\t\tawait updateDocument(id, {\r\n\t\t\tprofileComments: [\r\n\t\t\t\t...userDoc.profileComments.filter(comm => {\r\n\t\t\t\t\treturn comment !== comm\r\n\t\t\t\t}),\r\n\t\t\t],\r\n\t\t})\r\n\r\n\t\tsetConfirmDelete(null)\r\n\t}\r\n\r\n\tconst handleEmojis = e => {\r\n\t\tsetComment(comment => comment + e.emoji)\r\n\t}\r\n\r\n\tconst getChatId = id => {\r\n\t\tlet res = ''\r\n\r\n\t\tif (chats) {\r\n\t\t\tchats.filter(chat => {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!chat.isGroup &&\r\n\t\t\t\t\t(chat.assignedUsersId[0] === id || chat.assignedUsersId[0] === user.uid) &&\r\n\t\t\t\t\t(chat.assignedUsersId[1] === id || chat.assignedUsersId[1] === user.uid)\r\n\t\t\t\t) {\r\n\t\t\t\t\tres = chat.id\r\n\t\t\t\t\treturn true\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst notInFriends = () => {\r\n\t\tif (!currentUserDoc.friends) return true\r\n\r\n\t\tlet count = 0\r\n\r\n\t\tcurrentUserDoc.friends.forEach(f => {\r\n\t\t\tif (f.id !== userDoc.id) {\r\n\t\t\t\tcount += 1\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn currentUserDoc.friends.length === count ? true : false\r\n\t}\r\n\r\n\tif (error !== null) {\r\n\t\treturn <div className='error'>{error}</div>\r\n\t}\r\n\r\n\tif (!userDoc) {\r\n\t\treturn <Loader />\r\n\t}\r\n\r\n\tif (userDoc) {\r\n\t\treturn (\r\n\t\t\t<div className='profile custom-scrollbar'>\r\n\t\t\t\t<div className='wrapper flex-column'>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='banner'\r\n\t\t\t\t\t\tstyle={userDoc.banner ? { background: userDoc.banner } : { background: randColor }}></div>\r\n\r\n\t\t\t\t\t<div className='profile__header'>\r\n\t\t\t\t\t\t<div className='profile__header-user'>\r\n\t\t\t\t\t\t\t<AvatarWithStatus userId={userDoc.id} />\r\n\t\t\t\t\t\t\t<div className='flex-column'>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<h3 className='name'>{userDoc.displayName}</h3>\r\n\t\t\t\t\t\t\t\t\t{userDoc.bio && <p className='bio'>{userDoc.bio}</p>}\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className='badges'>\r\n\t\t\t\t\t\t\t\t\t{userDoc.createdAt && (\r\n\t\t\t\t\t\t\t\t\t\t<div className='badges__badge'>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>Joined</span> - {userDoc.createdAt}\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t{userDoc.pronouns && (\r\n\t\t\t\t\t\t\t\t\t\t<div className='badges__badge'>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span>Pronouns</span> - {userDoc.pronouns}\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t{userDoc.country && (\r\n\t\t\t\t\t\t\t\t\t\t<div className='badges__badge'>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className='country'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ReactCountryFlag countryCode={`${userDoc.country.code}`} svg />\r\n\t\t\t\t\t\t\t\t\t\t\t\t{userDoc.country.name}\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='profile__header-additional'>\r\n\t\t\t\t\t\t\t\t{userDoc.premium && (\r\n\t\t\t\t\t\t\t\t\t<div className='premium'>\r\n\t\t\t\t\t\t\t\t\t\t<img src={premiumIcon} alt='Icon for premium account' />\r\n\t\t\t\t\t\t\t\t\t\t<span>Premium</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t\t\t\t\t{id === user.uid && (\r\n\t\t\t\t\t\t\t\t\t\t<Link to='/settings/profile'>\r\n\t\t\t\t\t\t\t\t\t\t\t<button className='action-btn btn'>edit profile</button>\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t{id !== user.uid && (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t{currentUserDoc && currentUserDoc.friends && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{currentUserDoc.friends.some(f => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (f.id === userDoc.id && f.accepted === true && f.isPending === false) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}) && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to={`/u/${getChatId(userDoc.id)}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className='action-btn btn'>send message</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{currentUserDoc.friends.some(f => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (f.id === userDoc.id && f.accepted === false && f.isPending === false) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}) && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to={`/friends`}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button className='action-btn btn'>invite sent</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{currentUserDoc && notInFriends() && <button className='action-btn btn'>invite friend</button>}\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='separator mt1'></div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<p className='mb2'>will finish someday</p>\r\n\r\n\t\t\t\t\t<div className='profile__comments'>\r\n\t\t\t\t\t\t{/* <div className='separator'></div> */}\r\n\t\t\t\t\t\t<div className='comment-input'>\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tvalue={comment}\r\n\t\t\t\t\t\t\t\tsetValue={setComment}\r\n\t\t\t\t\t\t\t\tlabel='Add a comment'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetShowInputControls(true)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\terror={inputError}\r\n\t\t\t\t\t\t\t\tresetError={() => setInputError('')}\r\n\t\t\t\t\t\t\t\tonLostFocus={() => {\r\n\t\t\t\t\t\t\t\t\tif (comment === '') {\r\n\t\t\t\t\t\t\t\t\t\tsetInputError('Please enter a comment')\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t{showInputControls && (\r\n\t\t\t\t\t\t\t\t<div className='input-controls'>\r\n\t\t\t\t\t\t\t\t\t<i className='fa-regular fa-face-smile' onClick={() => setShowEmojiPicker(true)}>\r\n\t\t\t\t\t\t\t\t\t\t{showEmojiPicker && (\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip pos='right' align='start'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<OutsideClickHandler\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonOutsideClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetShowEmojiPicker(false)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<EmojiPicker\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='emoji-picker'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonEmojiClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleEmojis(e)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttheme={Theme.DARK}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpreviewConfig={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultCaption: '',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultEmoji: null,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// lazyLoadEmojis={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\temojiStyle={EmojiStyle.NATIVE}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</OutsideClickHandler>\r\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</i>\r\n\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tclassName='btn cancel-btn'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowInputControls(false)\r\n\t\t\t\t\t\t\t\t\t\t\tsetComment('')\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tcancel\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t{comment.trim().length === 0 && (\r\n\t\t\t\t\t\t\t\t\t\t<button className='btn' disabled>\r\n\t\t\t\t\t\t\t\t\t\t\tcomment\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t{comment.trim().length > 0 && (\r\n\t\t\t\t\t\t\t\t\t\t<button className='btn' onClick={() => addComment()}>\r\n\t\t\t\t\t\t\t\t\t\t\tcomment\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='comments-container custom-scrollbar'>\r\n\t\t\t\t\t\t\t{userDoc.profileComments &&\r\n\t\t\t\t\t\t\t\tuserDoc.profileComments.map(\r\n\t\t\t\t\t\t\t\t\tcomment =>\r\n\t\t\t\t\t\t\t\t\t\tgetDoc(comment.createdBy) !== null && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='comments-container__comment' key={comment.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={getDoc(comment.createdBy) && getDoc(comment.createdBy).photoURL} />\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='flex-column'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='flex-row'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{getDoc(comment.createdBy) && getDoc(comment.createdBy).displayName}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{formatDate(comment.createdAt)}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{comment.content}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t{(id === user.uid || comment.createdBy === user.uid) && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fa-solid fa-trash-can delete-comment'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setConfirmDelete(comment)}></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t<Modal show={confirmDelete !== null} setShow={() => setConfirmDelete(null)}>\r\n\t\t\t\t\t\t\t\t<div className='flex-column'>\r\n\t\t\t\t\t\t\t\t\t<h3 className='mt1'>Delete comment</h3>\r\n\r\n\t\t\t\t\t\t\t\t\t<p className='mb3'>Are you sure you want to delete this comment?</p>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t\t\t\t\t\t<button className='btn btn--secondary' onClick={() => setConfirmDelete(null)}>\r\n\t\t\t\t\t\t\t\t\t\t\tcancel\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='btn'\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteComment(confirmDelete)\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\tdelete\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Modal>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n","import { useEffect, useState } from 'react'\nimport { projectAuth } from '../firebase/config'\nimport { useAuthContext } from './useAuthContext'\n\nexport const useLogout = () => {\n\tconst [isCancelled, setIsCancelled] = useState(false)\n\tconst [error, setError] = useState(null)\n\tconst [isPending, setIsPending] = useState(false)\n\tconst { dispatch } = useAuthContext()\n\n\tconst logout = async () => {\n\t\tsetError(null)\n\t\tsetIsPending(true)\n\n\t\ttry {\n\t\t\t// Sign the user out\n\t\t\tawait projectAuth.signOut()\n\n\t\t\t// Dispatch logout action\n\t\t\tdispatch({ type: 'LOGOUT' })\n\n\t\t\t// Update state\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetIsPending(false)\n\t\t\t\tsetError(null)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetError(err.message)\n\t\t\t\tsetIsPending(false)\n\t\t\t}\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\treturn () => setIsCancelled(true)\n\t}, [])\n\n\treturn { logout, error, isPending }\n}\n","import { useState } from 'react'\r\nimport { useFirestore } from '../../../../../hooks/useFirestore'\r\nimport { useAuthContext } from '../../../../../hooks/useAuthContext'\r\nimport { updateProfile } from 'firebase/auth'\r\nimport { toast, ToastContainer } from 'react-toastify'\r\n\r\n// Components\r\nimport Modal from '../../../../../components/Modal/Modal'\r\nimport Loader from '../../../../../components/Loader/Loader'\r\nimport Field from '../../../../../components/Inputs/Field/Field'\r\n\r\nconst Username = () => {\r\n\tconst { user } = useAuthContext()\r\n\tconst { updateDocument } = useFirestore('users')\r\n\r\n\tconst [error, setError] = useState('')\r\n\tconst [isPending, setIsPending] = useState(false)\r\n\r\n\tconst [username, setUsername] = useState('')\r\n\tconst [show, setShow] = useState(false)\r\n\r\n\tconst notify = message =>\r\n\t\ttoast.success(message, {\r\n\t\t\tposition: 'bottom-right',\r\n\t\t\tautoClose: 5000,\r\n\t\t\thideProgressBar: false,\r\n\t\t\tcloseOnClick: true,\r\n\t\t\tpauseOnHover: true,\r\n\t\t\tdraggable: true,\r\n\t\t\tprogress: undefined,\r\n\t\t\ttheme: 'dark',\r\n\t\t})\r\n\r\n\tconst updateUsername = async () => {\r\n\t\tsetError(null)\r\n\t\tif (username.length > 3) {\r\n\t\t\tsetIsPending(true)\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait updateProfile(user, {\r\n\t\t\t\t\tdisplayName: username,\r\n\t\t\t\t})\r\n\t\t\t\tawait updateDocument(user.uid, {\r\n\t\t\t\t\tdisplayName: username,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t\tsetShow(false)\r\n\t\t\t\tsetUsername('')\r\n\t\t\t\tnotify('Successfully set a new username')\r\n\t\t\t} catch (error) {\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t\tconsole.log(error.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetError('Username must be at least 3 characters long')\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='account-details__details-field'>\r\n\t\t\t<ToastContainer />\r\n\t\t\t<h3>username</h3>\r\n\t\t\t<p>{user.displayName}</p>\r\n\t\t\t{/* <i className='fa-solid fa-pencil' onClick={() => setShow(true)}>\r\n\t\t\t\t\t\t\t<Tooltip>Edit</Tooltip>\r\n\t\t\t\t\t\t</i> */}\r\n\t\t\t<button className='btn btn--secondary' onClick={() => setShow(true)}>\r\n\t\t\t\tedit\r\n\t\t\t</button>\r\n\t\t\t<Modal\r\n\t\t\t\tshow={show}\r\n\t\t\t\tsetShow={() => setShow(false)}\r\n\t\t\t\tonClose={() => {\r\n\t\t\t\t\tsetIsPending(false)\r\n\t\t\t\t\tsetError(null)\r\n\t\t\t\t\tsetShow(false)\r\n\t\t\t\t\tsetUsername('')\r\n\t\t\t\t}}>\r\n\t\t\t\t<h3>Change your username</h3>\r\n\t\t\t\t<p>Enter a new, always cool username</p>\r\n\r\n\t\t\t\t<Field type='text' value={username} setValue={setUsername} label='Username' />\r\n\r\n\t\t\t\t{isPending && <Loader />}\r\n\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t<button className='btn btn--secondary' onClick={() => setShow(false)}>\r\n\t\t\t\t\t\tcancel\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button className='btn' onClick={() => updateUsername()}>\r\n\t\t\t\t\t\tupdate\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Username\r\n","import { useState } from 'react'\r\nimport { useAuthContext } from '../../../../../hooks/useAuthContext'\r\nimport { toast, ToastContainer } from 'react-toastify'\r\nimport { projectAuth } from '../../../../../firebase/config'\r\n\r\n// Components\r\nimport Modal from '../../../../../components/Modal/Modal'\r\nimport Loader from '../../../../../components/Loader/Loader'\r\nimport Field from '../../../../../components/Inputs/Field/Field'\r\n\r\nconst Email = () => {\r\n\tconst { user } = useAuthContext()\r\n\r\n\tconst [error, setError] = useState('')\r\n\tconst [isPending, setIsPending] = useState(false)\r\n\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [show, setShow] = useState(false)\r\n\tconst [currentPassword, setCurrentPassword] = useState('')\r\n\r\n\tconst notify = message =>\r\n\t\ttoast.success(message, {\r\n\t\t\tposition: 'bottom-right',\r\n\t\t\tautoClose: 5000,\r\n\t\t\thideProgressBar: false,\r\n\t\t\tcloseOnClick: true,\r\n\t\t\tpauseOnHover: true,\r\n\t\t\tdraggable: true,\r\n\t\t\tprogress: undefined,\r\n\t\t\ttheme: 'dark',\r\n\t\t})\r\n\r\n\tconst updateEmail = async () => {\r\n\t\tconst regex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/\r\n\r\n\t\tsetError(null)\r\n\r\n\t\tif (!email.match(regex)) {\r\n\t\t\treturn setError('Invalid email address')\r\n\t\t}\r\n\t\tif (currentPassword === '') {\r\n\t\t\treturn setError('Enter your password')\r\n\t\t}\r\n\r\n\t\tsetIsPending(true)\r\n\r\n\t\tprojectAuth\r\n\t\t\t.signInWithEmailAndPassword(user.email, currentPassword)\r\n\t\t\t.then(userCredential => {\r\n\t\t\t\tuserCredential.user\r\n\t\t\t\t\t.updateEmail(email)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tsetIsPending(false)\r\n\t\t\t\t\t\tsetError(null)\r\n\t\t\t\t\t\tsetShow(false)\r\n\t\t\t\t\t\tsetEmail('')\r\n\t\t\t\t\t\tnotify('Successfully updated email address')\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.log(error.message)\r\n\t\t\t\t\t\tsetError(error.message)\r\n\t\t\t\t\t\tsetIsPending(false)\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.log(error.message)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='account-details__details-field'>\r\n\t\t\t<ToastContainer />\r\n\t\t\t<h3>email</h3>\r\n\t\t\t<p>{user.email}</p>\r\n\t\t\t<button className='btn btn--secondary' onClick={() => setShow(true)}>\r\n\t\t\t\tedit\r\n\t\t\t</button>\r\n\t\t\t<Modal\r\n\t\t\t\tshow={show}\r\n\t\t\t\tsetShow={() => setShow(false)}\r\n\t\t\t\tonClose={() => {\r\n\t\t\t\t\tsetIsPending(false)\r\n\t\t\t\t\tsetError(null)\r\n\t\t\t\t\tsetShow(false)\r\n\t\t\t\t\tsetEmail('')\r\n\t\t\t\t}}>\r\n\t\t\t\t<h3 className='mb05'>Change your email address</h3>\r\n\t\t\t\t<p>Enter a new email address</p>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<Field value={email} setValue={setEmail} label='Email' type='email' />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<Field value={currentPassword} setValue={setCurrentPassword} label='Password' type='password' />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{isPending && <Loader />}\r\n\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t<button className='btn btn--secondary' onClick={() => setShow(false)}>\r\n\t\t\t\t\t\tcancel\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button className='btn' onClick={() => updateEmail()}>\r\n\t\t\t\t\t\tupdate\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Email\r\n","import { useState } from 'react'\r\nimport { useAuthContext } from '../../../../../hooks/useAuthContext'\r\nimport { toast, ToastContainer } from 'react-toastify'\r\nimport { linkWithCredential, PhoneAuthProvider, updatePhoneNumber } from 'firebase/auth'\r\nimport { projectAuth } from '../../../../../firebase/config'\r\nimport { useLogin } from '../../../../../hooks/useLogin'\r\n\r\n// Styles\r\nimport 'react-phone-input-2/lib/bootstrap.css'\r\n\r\n// Components\r\nimport Loader from '../../../../../components/Loader/Loader'\r\nimport Modal from '../../../../../components/Modal/Modal'\r\nimport PhoneInput from 'react-phone-input-2'\r\nimport Field from '../../../../../components/Inputs/Field/Field'\r\n\r\nconst PhoneNumber = () => {\r\n\tconst { user } = useAuthContext()\r\n\tconst { setUpRecaptcha } = useLogin()\r\n\r\n\tconst [error, setError] = useState('')\r\n\tconst [isPending, setIsPending] = useState(false)\r\n\r\n\tconst [phoneNumber, setPhoneNumber] = useState('')\r\n\tconst [show, setShow] = useState(false)\r\n\tconst [confirmUnlink, setConfirmUnlink] = useState(false)\r\n\r\n\tconst [showOTP, setShowOTP] = useState(false)\r\n\tconst [captchaResponse, setCaptchaResponse] = useState('')\r\n\tconst [OTPCode, setOTPCode] = useState('')\r\n\r\n\tconst notify = message =>\r\n\t\ttoast.success(message, {\r\n\t\t\tposition: 'bottom-right',\r\n\t\t\tautoClose: 5000,\r\n\t\t\thideProgressBar: false,\r\n\t\t\tcloseOnClick: true,\r\n\t\t\tpauseOnHover: true,\r\n\t\t\tdraggable: true,\r\n\t\t\tprogress: undefined,\r\n\t\t\ttheme: 'dark',\r\n\t\t})\r\n\r\n\tconst unlinkPhoneNumber = () => {\r\n\t\tconst provider = new PhoneAuthProvider(projectAuth)\r\n\r\n\t\tuser.unlink(provider.providerId)\r\n\t\tnotify('Successfully unlinked phone number')\r\n\t}\r\n\r\n\tconst handleOTPInput = e => {\r\n\t\tconst limit = 6\r\n\t\tsetOTPCode(e.target.value.slice(0, limit))\r\n\t}\r\n\r\n\tconst sendOTP = async () => {\r\n\t\tconsole.log(`${phoneNumber}`)\r\n\t\tsetError(null)\r\n\t\tif (phoneNumber === '' || phoneNumber === undefined || phoneNumber === null) {\r\n\t\t\tsetError('Please enter a valid Phone Number!')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst response = await setUpRecaptcha(`+${phoneNumber}`)\r\n\r\n\t\t\tsetCaptchaResponse(response)\r\n\t\t\tsetShowOTP(true)\r\n\t\t} catch (err) {\r\n\t\t\tsetError(err.message)\r\n\t\t\tconsole.log(err.message)\r\n\t\t}\r\n\t}\r\n\r\n\tconst verifyOTP = async () => {\r\n\t\tif (OTPCode === '' || OTPCode === null) return\r\n\r\n\t\ttry {\r\n\t\t\tsetError(null)\r\n\t\t\tsetIsPending(true)\r\n\r\n\t\t\tconst authCredential = PhoneAuthProvider.credential(captchaResponse, OTPCode)\r\n\r\n\t\t\tif (user.phoneNumber === null || user.phoneNumber === undefined) {\r\n\t\t\t\tawait linkWithCredential(user, authCredential)\r\n\t\t\t} else {\r\n\t\t\t\tawait updatePhoneNumber(user, authCredential)\r\n\t\t\t}\r\n\r\n\t\t\tsetIsPending(false)\r\n\t\t\tsetShow(false)\r\n\t\t\tsetShowOTP(false)\r\n\t\t\tsetPhoneNumber('')\r\n\t\t\tsetOTPCode('')\r\n\t\t\tsetCaptchaResponse('')\r\n\t\t\tnotify('Successfully changed phone number')\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err.message)\r\n\t\t\tsetError(err.message)\r\n\t\t\tsetIsPending(false)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='account-details__details-field'>\r\n\t\t\t<ToastContainer />\r\n\t\t\t<h3>phone</h3>\r\n\t\t\t<p>{user.phoneNumber ? user.phoneNumber : \"You haven't added a phone number yet\"}</p>\r\n\r\n\t\t\t<div className='flex-row'>\r\n\t\t\t\t{/* <i className='fa-solid fa-pencil' onClick={() => setShow(true)}>\r\n                <Tooltip>Edit</Tooltip>\r\n            </i> */}\r\n\t\t\t\t{user.phoneNumber && (\r\n\t\t\t\t\t<button className='btn' onClick={() => setConfirmUnlink(true)}>\r\n\t\t\t\t\t\tremove\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t\t<button className='btn btn--secondary' onClick={() => setShow(true)}>\r\n\t\t\t\t\t{user.phoneNumber ? 'edit' : 'add'}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t<Modal show={confirmUnlink} setShow={() => setConfirmUnlink(false)}>\r\n\t\t\t\t<h3 className='mb05'>Remove phone number</h3>\r\n\t\t\t\t<p>Are you sure you want to remove your phone number from this account?</p>\r\n\r\n\t\t\t\t{/* // !! Require password for remove */}\r\n\r\n\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t<button className='btn btn--secondary' onClick={() => setConfirmUnlink(false)}>\r\n\t\t\t\t\t\tcancel\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button className='btn' onClick={() => unlinkPhoneNumber()}>\r\n\t\t\t\t\t\tremove\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t<Modal\r\n\t\t\t\tshow={show}\r\n\t\t\t\tsetShow={() => setShow(false)}\r\n\t\t\t\tonClose={() => {\r\n\t\t\t\t\tsetIsPending(false)\r\n\t\t\t\t\tsetShow(false)\r\n\t\t\t\t\tsetShowOTP(false)\r\n\t\t\t\t\tsetPhoneNumber('')\r\n\t\t\t\t\tsetOTPCode('')\r\n\t\t\t\t\tsetCaptchaResponse('')\r\n\t\t\t\t}}>\r\n\t\t\t\t{!showOTP && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<h3 className='mb05'>Enter a phone number</h3>\r\n\t\t\t\t\t\t<p>You will recive a message containing a verification code.</p>\r\n\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<p>Your new phone number</p>\r\n\t\t\t\t\t\t\t<PhoneInput\r\n\t\t\t\t\t\t\t\tcountry={'pl'}\r\n\t\t\t\t\t\t\t\tvalue={phoneNumber}\r\n\t\t\t\t\t\t\t\tonChange={setPhoneNumber}\r\n\t\t\t\t\t\t\t\tenableSearch={true}\r\n\t\t\t\t\t\t\t\tdropdownClass='custom-scrollbar'\r\n\t\t\t\t\t\t\t\tcopyNumbersOnly={false}\r\n\t\t\t\t\t\t\t\tsearchPlaceholder='Search for countries'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t{isPending && <Loader />}\r\n\t\t\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t\t\t\t<div id='recaptcha-container' />\r\n\r\n\t\t\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t\t\t<button className='btn btn--secondary' onClick={() => setShow(false)}>\r\n\t\t\t\t\t\t\t\tcancel\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button className='btn' onClick={() => sendOTP()}>\r\n\t\t\t\t\t\t\t\tSend code\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{showOTP && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<h3 className='mb05'>OTP Verification</h3>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\tEnter the OTP sent to <span style={{ fontWeight: 'bold' }}>+{phoneNumber}</span>\r\n\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t<label className='otp-code'>\r\n\t\t\t\t\t\t\t{/* <input type='number' value={OTPCode} onChange={e => handleOTPInput(e)} /> */}\r\n\t\t\t\t\t\t\t<Field value={OTPCode} setValue={setOTPCode} onChange={e => handleOTPInput(e)} type='number' />\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\r\n\t\t\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t\t\t<button className='btn btn--secondary' onClick={() => setShowOTP(false)}>\r\n\t\t\t\t\t\t\t\tgo back\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button className='btn' onClick={() => verifyOTP()}>\r\n\t\t\t\t\t\t\t\tChange number\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default PhoneNumber\r\n","import { useState } from 'react'\r\nimport { useAuthContext } from '../../../../../hooks/useAuthContext'\r\nimport { projectAuth } from '../../../../../firebase/config'\r\nimport { useLogout } from '../../../../../hooks/useLogout'\r\n\r\n// Components\r\nimport Modal from '../../../../../components/Modal/Modal'\r\nimport Loader from '../../../../../components/Loader/Loader'\r\nimport Field from '../../../../../components/Inputs/Field/Field'\r\n\r\nconst Password = () => {\r\n\tconst { user } = useAuthContext()\r\n\tconst { logout } = useLogout()\r\n\r\n\tconst [error, setError] = useState('')\r\n\tconst [isPending, setIsPending] = useState(false)\r\n\tconst [show, setShow] = useState(false)\r\n\r\n\tconst [currentPassword, setCurrentPassword] = useState('')\r\n\tconst [newPassword, setNewPassword] = useState('')\r\n\tconst [confirmNewPassword, setConfirmNewPassword] = useState('')\r\n\r\n\tconst updatePassword = () => {\r\n\t\tsetError(null)\r\n\r\n\t\tif (currentPassword === '') {\r\n\t\t\treturn setError('Enter a password')\r\n\t\t}\r\n\t\tif (newPassword === '' || confirmNewPassword === '') {\r\n\t\t\treturn setError('Enter a new password')\r\n\t\t}\r\n\t\tif (newPassword !== confirmNewPassword) {\r\n\t\t\treturn setError('Passwords must match')\r\n\t\t}\r\n\r\n\t\tsetIsPending(true)\r\n\r\n\t\tprojectAuth\r\n\t\t\t.signInWithEmailAndPassword(user.email, currentPassword)\r\n\t\t\t.then(userCredential => {\r\n\t\t\t\tuserCredential.user\r\n\t\t\t\t\t.updatePassword(newPassword)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tsetIsPending(false)\r\n\t\t\t\t\t\tsetError(null)\r\n\t\t\t\t\t\tsetShow(false)\r\n\t\t\t\t\t\tsetCurrentPassword('')\r\n\t\t\t\t\t\tsetNewPassword('')\r\n\t\t\t\t\t\tsetConfirmNewPassword('')\r\n\t\t\t\t\t\tlogout()\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.log(error.message)\r\n\t\t\t\t\t\tsetError(error.message)\r\n\t\t\t\t\t\tsetIsPending(false)\r\n\t\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.log(error.message)\r\n\t\t\t\tsetError('Enter a correct password')\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='account-details__details-field'>\r\n\t\t\t<h3>password</h3>\r\n\t\t\t<p>***************</p>\r\n\r\n\t\t\t<button className='btn btn--secondary' onClick={() => setShow(true)}>\r\n\t\t\t\tedit\r\n\t\t\t</button>\r\n\t\t\t<Modal\r\n\t\t\t\tshow={show}\r\n\t\t\t\tsetShow={() => setShow(false)}\r\n\t\t\t\tonClose={() => {\r\n\t\t\t\t\tsetIsPending(false)\r\n\t\t\t\t\tsetError(null)\r\n\t\t\t\t\tsetShow(false)\r\n\t\t\t\t\tsetCurrentPassword('')\r\n\t\t\t\t\tsetNewPassword('')\r\n\t\t\t\t\tsetConfirmNewPassword('')\r\n\t\t\t\t}}>\r\n\t\t\t\t<h3 className='mb05'>Change password</h3>\r\n\t\t\t\t<p>Enter your current password and a new password. Also remember that your name isn't a good password...</p>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<Field value={currentPassword} setValue={setCurrentPassword} label='Current password' type='password' />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<Field value={newPassword} setValue={setNewPassword} label='New password' type='password' />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<Field value={confirmNewPassword} setValue={setConfirmNewPassword} label='Password' type='password' />\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{isPending && <Loader />}\r\n\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t<button className='btn btn--secondary' onClick={() => setShow(false)}>\r\n\t\t\t\t\t\tcancel\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button className='btn' onClick={() => updatePassword()}>\r\n\t\t\t\t\t\tupdate\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Password\r\n","import { useEffect, useState } from 'react'\r\nimport { useAuthContext } from '../../../../../hooks/useAuthContext'\r\n\r\n// Components\r\nimport Loader from '../../../../../components/Loader/Loader'\r\nimport Modal from '../../../../../components/Modal/Modal'\r\nimport { deleteUser } from 'firebase/auth'\r\nimport { projectAuth } from '../../../../../firebase/config'\r\nimport TextField from '../../../../../components/Inputs/Field/Field'\r\n\r\nconst DeleteAccount = () => {\r\n\tconst { user } = useAuthContext()\r\n\r\n\tconst [error, setError] = useState(null)\r\n\tconst [isPending, setIsPending] = useState(null)\r\n\r\n\tconst [show, setShow] = useState(false)\r\n\tconst [confirm, setConfirm] = useState('')\r\n\tconst [startCountdown, setStartCountdown] = useState(false)\r\n\tconst [timeToDelete, setTimeToDelete] = useState(10)\r\n\tconst [credential, setCredential] = useState(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (startCountdown === true) {\r\n\t\t\tfinalCountdown()\r\n\t\t}\r\n\t}, [startCountdown])\r\n\r\n\tconst checkPassword = () => {\r\n\t\tif (isPasswordProvider()) {\r\n\t\t\tif (confirm === '') return setError('You must enter a valid password')\r\n\r\n\t\t\tprojectAuth\r\n\t\t\t\t.signInWithEmailAndPassword(user.email, confirm)\r\n\t\t\t\t.then(userCredential => {\r\n\t\t\t\t\tsetStartCountdown(true)\r\n\t\t\t\t\tsetCredential(userCredential)\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\tconsole.log(error.message)\r\n\t\t\t\t\tsetError('The password you entered is invalid')\r\n\t\t\t\t})\r\n\t\t}\r\n\t\tsetStartCountdown(true)\r\n\t}\r\n\r\n\tconst finalCountdown = () => {\r\n\t\tlet redirectCountdown = setInterval(() => {\r\n\t\t\tif (timeToDelete < 0) {\r\n\t\t\t\tclearInterval(redirectCountdown)\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeToDelete(prevTimeToRedirect => prevTimeToRedirect - 1)\r\n\t\t\t}\r\n\t\t}, 1000)\r\n\t\tsetTimeout(() => {\r\n\t\t\thandleDeleteUser()\r\n\t\t}, 10000)\r\n\t}\r\n\r\n\tconst handleDeleteUser = () => {\r\n\t\tsetError(null)\r\n\r\n\t\tdeleteUser(user)\r\n\t\t\t.then(() => {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t\tsetShow(false)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.log(error.message)\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst isPasswordProvider = () => {\r\n\t\tlet res = false\r\n\r\n\t\tuser.providerData.forEach(provider => {\r\n\t\t\tif (provider.providerId === 'password') {\r\n\t\t\t\tres = true\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='account-details__details-delete-account'>\r\n\t\t\t<button className='btn' onClick={() => setShow(true)}>\r\n\t\t\t\tDelete Account\r\n\t\t\t</button>\r\n\r\n\t\t\t<Modal\r\n\t\t\t\tshow={show}\r\n\t\t\t\tsetShow={() => setShow(false)}\r\n\t\t\t\tonClose={() => {\r\n\t\t\t\t\tsetIsPending(false)\r\n\t\t\t\t\tsetError(null)\r\n\t\t\t\t\tsetShow(false)\r\n\t\t\t\t\tsetConfirm('')\r\n\t\t\t\t\tsetStartCountdown(false)\r\n\t\t\t\t\tsetTimeToDelete(10)\r\n\t\t\t\t}}>\r\n\t\t\t\t<div className='modal__content-padding flex-column align-center'>\r\n\t\t\t\t\t{startCountdown && (\r\n\t\t\t\t\t\t<div className='countdown'>\r\n\t\t\t\t\t\t\t<h3>Deleting account in</h3>\r\n\t\t\t\t\t\t\t<div>{timeToDelete}</div>\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='btn'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetShow(false)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tcancel\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{!startCountdown && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-trash-can'></i>\r\n\r\n\t\t\t\t\t\t\t<h3>Delete Account?</h3>\r\n\t\t\t\t\t\t\t<p className='mb0'>You'll permanently lose your:</p>\r\n\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-xmark'></i>\r\n\t\t\t\t\t\t\t\t\t<span>Profile</span>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-xmark'></i>\r\n\t\t\t\t\t\t\t\t\t<span>Messages</span>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-xmark'></i>\r\n\t\t\t\t\t\t\t\t\t<span>Personal data</span>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t\t\t{isPasswordProvider() && (\r\n\t\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t\t<p>Enter your password to confirm</p>\r\n\r\n\t\t\t\t\t\t\t\t\t<TextField value={confirm} setValue={setConfirm} label='Password' type='password' />\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{isPending && <Loader />}\r\n\t\t\t\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{!startCountdown && (\r\n\t\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='btn btn--secondary'\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetShow(false)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tcancel\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='btn'\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tcheckPassword()\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tconfirm\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default DeleteAccount\r\n","import { useState } from 'react'\r\nimport { useAuthContext } from '../../../../hooks/useAuthContext'\r\nimport { useDocument } from '../../../../hooks/useDocument'\r\n\r\n// Styles && Assets\r\nimport './AccountDetails.scss'\r\n\r\n// Components\r\nimport Loader from '../../../../components/Loader/Loader'\r\nimport Username from './fields/Username'\r\nimport Email from './fields/Email'\r\nimport PhoneNumber from './fields/PhoneNumber'\r\nimport Password from './fields/Password'\r\nimport DeleteAccount from './fields/DeleteAccount'\r\n\r\nconst AccountDetails = () => {\r\n\tconst { user } = useAuthContext()\r\n\tconst { document: userDoc, error: docError } = useDocument('users', user.uid)\r\n\r\n\tconst [copyBtnText, setCopyBtnText] = useState('copy')\r\n\r\n\tconst isPasswordProvider = () => {\r\n\t\tlet res = false\r\n\r\n\t\tuser.providerData.forEach(provider => {\r\n\t\t\tif (provider.providerId === 'password') {\r\n\t\t\t\tres = true\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst copyInviteCode = () => {\r\n\t\tnavigator.clipboard.writeText(user.uid)\r\n\t\tsetCopyBtnText('copied')\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetCopyBtnText('copy')\r\n\t\t}, 1000)\r\n\t}\r\n\r\n\tif (docError) {\r\n\t\treturn <div className='error'>{docError}</div>\r\n\t}\r\n\tif (userDoc && user)\r\n\t\treturn (\r\n\t\t\t<div className='account-details'>\r\n\t\t\t\t<h2 className='setting-title'>account details</h2>\r\n\r\n\t\t\t\t<div className='account-details__details'>\r\n\t\t\t\t\t<div className='account-details__details-field'>\r\n\t\t\t\t\t\t<h3>invite code</h3>\r\n\t\t\t\t\t\t<p className='text-clip'>{user.uid}</p>\r\n\r\n\t\t\t\t\t\t<button className='btn btn--secondary' onClick={() => copyInviteCode()}>\r\n\t\t\t\t\t\t\t{copyBtnText}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='separator'></div>\r\n\r\n\t\t\t\t\t<Username />\r\n\t\t\t\t\t<div className='separator'></div>\r\n\r\n\t\t\t\t\t{isPasswordProvider() && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Email />\r\n\t\t\t\t\t\t\t<div className='separator'></div>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<PhoneNumber />\r\n\t\t\t\t\t<div className='separator'></div>\r\n\r\n\t\t\t\t\t{isPasswordProvider() && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Password />\r\n\t\t\t\t\t\t\t<div className='separator'></div>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<DeleteAccount />\r\n\t\t\t</div>\r\n\t\t)\r\n\r\n\tif (!userDoc && user) return <Loader />\r\n}\r\n\r\nexport default AccountDetails\r\n","export const createImage = url =>\r\n\tnew Promise((resolve, reject) => {\r\n\t\tconst image = new Image()\r\n\t\timage.addEventListener('load', () => resolve(image))\r\n\t\timage.addEventListener('error', error => reject(error))\r\n\t\timage.setAttribute('crossOrigin', 'anonymous')\r\n\t\timage.src = url\r\n\t})\r\n\r\nexport function getRadianAngle(degreeValue) {\r\n\treturn (degreeValue * Math.PI) / 180\r\n}\r\n\r\nexport function rotateSize(width, height, rotation) {\r\n\tconst rotRad = getRadianAngle(rotation)\r\n\r\n\treturn {\r\n\t\twidth: Math.abs(Math.cos(rotRad) * width) + Math.abs(Math.sin(rotRad) * height),\r\n\t\theight: Math.abs(Math.sin(rotRad) * width) + Math.abs(Math.cos(rotRad) * height),\r\n\t}\r\n}\r\n\r\nexport default async function getCroppedImg(\r\n\timageSrc,\r\n\tpixelCrop,\r\n\trotation = 0,\r\n\tflip = { horizontal: false, vertical: false }\r\n) {\r\n\tconst image = await createImage(imageSrc)\r\n\tconst canvas = document.createElement('canvas')\r\n\tconst ctx = canvas.getContext('2d')\r\n\r\n\tif (!ctx) {\r\n\t\treturn null\r\n\t}\r\n\r\n\tconst rotRad = getRadianAngle(rotation)\r\n\r\n\tconst { width: bBoxWidth, height: bBoxHeight } = rotateSize(image.width, image.height, rotation)\r\n\r\n\t// set canvas size to match the bounding box\r\n\tcanvas.width = bBoxWidth\r\n\tcanvas.height = bBoxHeight\r\n\r\n\tctx.translate(bBoxWidth / 2, bBoxHeight / 2)\r\n\tctx.rotate(rotRad)\r\n\tctx.scale(flip.horizontal ? -1 : 1, flip.vertical ? -1 : 1)\r\n\tctx.translate(-image.width / 2, -image.height / 2)\r\n\r\n\tctx.drawImage(image, 0, 0)\r\n\r\n\tconst data = ctx.getImageData(pixelCrop.x, pixelCrop.y, pixelCrop.width, pixelCrop.height)\r\n\r\n\tcanvas.width = pixelCrop.width\r\n\tcanvas.height = pixelCrop.height\r\n\r\n\tctx.putImageData(data, 0, 0)\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tcanvas.toBlob(file => {\r\n\t\t\tconsole.log('file-from-crop', file)\r\n\t\t\t// resolve(URL.createObjectURL(file))\r\n\t\t\tresolve(file)\r\n\t\t}, 'image/jpeg')\r\n\t})\r\n}\r\n","import { useDropzone } from 'react-dropzone'\r\nimport { useAuthContext } from '../../../../../hooks/useAuthContext'\r\nimport { useFirestore } from '../../../../../hooks/useFirestore'\r\nimport { useCallback, useEffect, useReducer, useState } from 'react'\r\nimport { deleteObject, getDownloadURL, getStorage, list, ref, uploadBytes } from 'firebase/storage'\r\nimport { toast } from 'react-toastify'\r\nimport { projectStorage } from '../../../../../firebase/config'\r\nimport { updateProfile } from 'firebase/auth'\r\nimport getCroppedImg from '../CropImg'\r\n\r\n// Components\r\nimport Modal from '../../../../../components/Modal/Modal'\r\nimport Cropper from 'react-easy-crop'\r\n\r\nconst AvatarField = ({ setAvatarState, userDoc, setShowAvatarModal, showAvatarModal }) => {\r\n\tconst { user } = useAuthContext()\r\n\r\n\tconst { updateDocument } = useFirestore('users')\r\n\tconst { acceptedFiles, getRootProps, getInputProps, isDragAccept, isDragReject, open } = useDropzone({\r\n\t\tnoClick: true,\r\n\t\tmultiple: false,\r\n\t\taccept: {\r\n\t\t\t'image/*': [],\r\n\t\t},\r\n\t\tonDrop: acceptedFiles => {\r\n\t\t\tsetFiles(\r\n\t\t\t\tObject.assign(acceptedFiles[0], {\r\n\t\t\t\t\tpreview: URL.createObjectURL(acceptedFiles[0]),\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t},\r\n\t})\r\n\r\n\tconst [error, setError] = useState(null)\r\n\tconst [isPending, setIsPending] = useState(false)\r\n\r\n\tconst [files, setFiles] = useState(null)\r\n\r\n\tconst [crop, setCrop] = useState({ x: 0, y: 0 })\r\n\tconst [zoom, setZoom] = useState(1)\r\n\tconst [croppedAreaPixels, setCroppedAreaPixels] = useState(null)\r\n\tconst [croppedImage, setCroppedImage] = useState(null)\r\n\r\n\tconst onCropComplete = useCallback((croppedArea, croppedAreaPixels) => {\r\n\t\tsetCroppedAreaPixels(croppedAreaPixels)\r\n\t}, [])\r\n\r\n\tconst showCroppedImage = useCallback(async () => {\r\n\t\ttry {\r\n\t\t\tconst croppedImage = await getCroppedImg(files.preview, croppedAreaPixels, 0)\r\n\t\t\tsetCroppedImage(croppedImage)\r\n\t\t\tupdateAvatar(croppedImage, true)\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t}, [croppedAreaPixels, files])\r\n\r\n\tconst Undo = ({ onUndo, closeToast }) => {\r\n\t\tconst handleClick = () => {\r\n\t\t\tonUndo()\r\n\t\t\tcloseToast()\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className='reset-toast'>\r\n\t\t\t\tAvatar Deleted <button onClick={handleClick}>UNDO</button>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\tconst deletePhotoURLFromStorage = () => {\r\n\t\tconst storageRef = ref(projectStorage, `thumbnails/${user.uid}/`)\r\n\r\n\t\tlist(storageRef)\r\n\t\t\t.then(res => {\r\n\t\t\t\tconst deleteRef = ref(projectStorage, res.items[0].fullPath)\r\n\t\t\t\tdeleteObject(deleteRef)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t\tconsole.log(error.message)\r\n\t\t\t})\r\n\t}\r\n\r\n\tconst removePhotoURLs = async () => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\tawait updateProfile(user, {\r\n\t\t\t\tphotoURL: '',\r\n\t\t\t})\r\n\t\t\tawait updateDocument(user.uid, {\r\n\t\t\t\tphotoURL: '',\r\n\t\t\t})\r\n\t\t\tdeletePhotoURLFromStorage()\r\n\t\t\tsetIsPending(false)\r\n\t\t\tsetError(null)\r\n\t\t} catch (error) {\r\n\t\t\tsetError(error.message)\r\n\t\t\tconsole.log(error.message)\r\n\t\t\tsetIsPending(false)\r\n\t\t}\r\n\t}\r\n\r\n\tfunction reducer(state, action) {\r\n\t\tswitch (action.type) {\r\n\t\t\tcase 'QUEUE_FOR_REMOVAL':\r\n\t\t\t\treturn {\r\n\t\t\t\t\turl: state.url,\r\n\t\t\t\t\tremove: true,\r\n\t\t\t\t}\r\n\t\t\tcase 'CLEAN_COLLECTION':\r\n\t\t\t\tif (state.remove) {\r\n\t\t\t\t\tremovePhotoURLs()\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\turl: state.remove ? '' : state.url,\r\n\t\t\t\t\tremove: false,\r\n\t\t\t\t}\r\n\t\t\tcase 'UNDO':\r\n\t\t\t\treturn {\r\n\t\t\t\t\turl: state.url,\r\n\t\t\t\t\tremove: false,\r\n\t\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t\treturn state\r\n\t\t}\r\n\t}\r\n\r\n\tconst [state, dispatch] = useReducer(reducer, {\r\n\t\turl: null,\r\n\t\tremove: false,\r\n\t})\r\n\r\n\tuseEffect(() => {\r\n\t\tsetAvatarState(state)\r\n\t}, [state])\r\n\r\n\tconst handleRemoveAvatar = () => {\r\n\t\tdispatch({\r\n\t\t\ttype: 'QUEUE_FOR_REMOVAL',\r\n\t\t})\r\n\t\ttoast.info(<Undo onUndo={() => dispatch({ type: 'UNDO' })} />, {\r\n\t\t\tposition: 'bottom-right',\r\n\t\t\tautoClose: 15000,\r\n\t\t\thideProgressBar: false,\r\n\t\t\t// closeButton: false,\r\n\t\t\tcloseOnClick: false,\r\n\t\t\tpauseOnHover: true,\r\n\t\t\tdraggable: true,\r\n\t\t\tprogress: undefined,\r\n\t\t\ttheme: 'dark',\r\n\t\t\tonClose: () => dispatch({ type: 'CLEAN_COLLECTION' }),\r\n\t\t})\r\n\t}\r\n\r\n\tconst updateAvatar = async image => {\r\n\t\tconst storage = getStorage()\r\n\t\tconst uploadPath = `thumbnails/${user.uid}/${image.name}`\r\n\t\tconst storageRef = ref(storage, uploadPath)\r\n\r\n\t\tawait uploadBytes(storageRef, image)\r\n\t\t\t.then(snapshot => {\r\n\t\t\t\tgetDownloadURL(snapshot.ref).then(async downloadURL => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tawait updateDocument(user.uid, {\r\n\t\t\t\t\t\t\tphotoURL: downloadURL,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tawait user.updateProfile({ photoURL: downloadURL })\r\n\r\n\t\t\t\t\t\tsetShowAvatarModal(false)\r\n\t\t\t\t\t\tsetFiles(null)\r\n\t\t\t\t\t\tsetCrop({ x: 0, y: 0 })\r\n\t\t\t\t\t\tsetZoom(1)\r\n\t\t\t\t\t\tsetCroppedAreaPixels(null)\r\n\t\t\t\t\t\tsetCroppedImage(null)\r\n\t\t\t\t\t\ttoast.success('Succesfully updated your avatar', {\r\n\t\t\t\t\t\t\tposition: 'bottom-right',\r\n\t\t\t\t\t\t\tautoClose: 5000,\r\n\t\t\t\t\t\t\thideProgressBar: false,\r\n\t\t\t\t\t\t\tcloseOnClick: true,\r\n\t\t\t\t\t\t\tpauseOnHover: true,\r\n\t\t\t\t\t\t\tdraggable: true,\r\n\t\t\t\t\t\t\tprogress: undefined,\r\n\t\t\t\t\t\t\ttheme: 'dark',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tconsole.log(error.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.log(error.message)\r\n\t\t\t})\r\n\t}\r\n\r\n\treturn (\r\n\t\tuserDoc && (\r\n\t\t\t<div className='profile-settings__fields-field'>\r\n\t\t\t\t<h3 className='field-title'>avatar</h3>\r\n\r\n\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<button className='btn' onClick={() => setShowAvatarModal(true)}>\r\n\t\t\t\t\t\t\tchange avatar\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t<Modal show={showAvatarModal} setShow={() => setShowAvatarModal(false)}>\r\n\t\t\t\t\t\t\t{!files && (\r\n\t\t\t\t\t\t\t\t<section\r\n\t\t\t\t\t\t\t\t\t{...getRootProps({\r\n\t\t\t\t\t\t\t\t\t\tclassName: `dropzone-container ${isDragAccept ? 'accepted' : ''} ${isDragReject ? 'rejected' : ''}`,\r\n\t\t\t\t\t\t\t\t\t})}>\r\n\t\t\t\t\t\t\t\t\t<input {...getInputProps()} />\r\n\t\t\t\t\t\t\t\t\t<button className='btn' onClick={open}>\r\n\t\t\t\t\t\t\t\t\t\tbrowse files\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t<p>...or drag and drop image</p>\r\n\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{files && (\r\n\t\t\t\t\t\t\t\t<div className='crop-container'>\r\n\t\t\t\t\t\t\t\t\t<div className='modal__content-padding'>\r\n\t\t\t\t\t\t\t\t\t\t<section>\r\n\t\t\t\t\t\t\t\t\t\t\t<h3>Edit Image</h3>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<Cropper\r\n\t\t\t\t\t\t\t\t\t\t\t\timage={files.preview}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcrop={crop}\r\n\t\t\t\t\t\t\t\t\t\t\t\tzoom={zoom}\r\n\t\t\t\t\t\t\t\t\t\t\t\taspect={1 / 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcropShape='round'\r\n\t\t\t\t\t\t\t\t\t\t\t\tonCropChange={setCrop}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonCropComplete={onCropComplete}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonZoomChange={setZoom}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmaxZoom={3}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='controls'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype='range'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={zoom}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax={3}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstep={0.01}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-labelledby='Zoom'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetZoom(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='zoom-range'\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t\t\t\t\t\t<button className='btn btn--secondary' onClick={() => updateAvatar(files)}>\r\n\t\t\t\t\t\t\t\t\t\t\tSkip\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<div className='flex-row gap1'>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='btn btn--secondary'\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetFiles(null)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetCrop({ x: 0, y: 0 })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetZoom(1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button className='btn' onClick={showCroppedImage}>\r\n\t\t\t\t\t\t\t\t\t\t\t\tApply\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Modal>\r\n\t\t\t\t\t</>\r\n\r\n\t\t\t\t\t{userDoc.photoURL && !state.remove && (\r\n\t\t\t\t\t\t<button className='btn btn--secondary' onClick={handleRemoveAvatar}>\r\n\t\t\t\t\t\t\tremove avatar\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t// notifyAvatar(() => (\r\n\t\t\t\t\t\t// \t<div className='reset-toast'>\r\n\t\t\t\t\t\t// \t\tRemoved avatar <span>reset</span>\r\n\t\t\t\t\t\t// \t</div>\r\n\t\t\t\t\t\t// ))\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t</div>\r\n\t\t)\r\n\t)\r\n}\r\n\r\nexport default AvatarField\r\n","import { useFirestore } from '../../../../../hooks/useFirestore'\r\nimport { useState } from 'react'\r\nimport { useAuthContext } from '../../../../../hooks/useAuthContext'\r\nimport { toast } from 'react-toastify'\r\n\r\n// Components\r\nimport ColorPicker from '../../../../../components/ColorPicker/ColorPicker'\r\n\r\nexport default function BannerField({ setBannerColor, bannerColor }) {\r\n\tconst { user } = useAuthContext()\r\n\tconst { updateDocument } = useFirestore('users')\r\n\r\n\tconst [error, setError] = useState(null)\r\n\tconst [isPending, setIsPending] = useState(false)\r\n\r\n\tconst notify = message =>\r\n\t\ttoast.success(message, {\r\n\t\t\tposition: 'bottom-right',\r\n\t\t\tautoClose: 5000,\r\n\t\t\thideProgressBar: false,\r\n\t\t\tcloseOnClick: true,\r\n\t\t\tpauseOnHover: true,\r\n\t\t\tdraggable: true,\r\n\t\t\tprogress: undefined,\r\n\t\t\ttheme: 'dark',\r\n\t\t})\r\n\r\n\tconst updateBanner = async () => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\tawait updateDocument(user.uid, {\r\n\t\t\t\tbanner: `${bannerColor}`,\r\n\t\t\t})\r\n\r\n\t\t\tsetIsPending(false)\r\n\t\t\tsetError(null)\r\n\t\t\tnotify('Updated banner')\r\n\t\t} catch (error) {\r\n\t\t\tsetError(error.message)\r\n\t\t\tconsole.log(error.message)\r\n\t\t\tsetIsPending(false)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='profile-settings__fields-field flex-row align-end gap1'>\r\n\t\t\t<div className='flex-column'>\r\n\t\t\t\t<h3 className='field-title'>banner color</h3>\r\n\r\n\t\t\t\t<ColorPicker\r\n\t\t\t\t\tvalue={bannerColor}\r\n\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\tsetBannerColor(e.target.value)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName='mb0'\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<button className='btn btn--secondary' onClick={() => updateBanner()}>\r\n\t\t\t\tUpdate Banner\r\n\t\t\t</button>\r\n\r\n\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useState } from 'react'\r\nimport { toast } from 'react-toastify'\r\nimport { useAuthContext } from '../../../../../hooks/useAuthContext'\r\nimport { useFirestore } from '../../../../../hooks/useFirestore'\r\n\r\nexport default function AboutField({ about, setAbout }) {\r\n\tconst { user } = useAuthContext()\r\n\tconst { updateDocument } = useFirestore('users')\r\n\r\n\tconst [error, setError] = useState(null)\r\n\tconst [isPending, setIsPending] = useState(false)\r\n\r\n\tconst notify = message =>\r\n\t\ttoast.success(message, {\r\n\t\t\tposition: 'bottom-right',\r\n\t\t\tautoClose: 5000,\r\n\t\t\thideProgressBar: false,\r\n\t\t\tcloseOnClick: true,\r\n\t\t\tpauseOnHover: true,\r\n\t\t\tdraggable: true,\r\n\t\t\tprogress: undefined,\r\n\t\t\ttheme: 'dark',\r\n\t\t})\r\n\r\n\tconst updateBio = async () => {\r\n\t\tsetError(null)\r\n\r\n\t\tif (about.length < 71) {\r\n\t\t\ttry {\r\n\t\t\t\tawait updateDocument(user.uid, {\r\n\t\t\t\t\tbio: about,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t\tnotify('Updated about me')\r\n\t\t\t} catch (error) {\r\n\t\t\t\tsetError(error.message)\r\n\t\t\t\tconsole.log(error.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetError('About me must be less than 169 character long')\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='profile-settings__fields-field'>\r\n\t\t\t<h3 className='field-title'>about me</h3>\r\n\r\n\t\t\t<div className='textarea-container'>\r\n\t\t\t\t<textarea value={about} onChange={e => setAbout(e.target.value)}></textarea>\r\n\r\n\t\t\t\t<div className={`textarea-container__char-counter ${about.length > 70 ? 'limit' : ''}`}>\r\n\t\t\t\t\t{70 - about.length}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t<button className='btn btn--secondary text-capitalize' onClick={() => updateBio()}>\r\n\t\t\t\tupdate about me\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import AvatarWithStatus from '../../../../components/AvatarWithStatus/AvatarWithStatus'\r\n\r\nexport default function Preview({ userDoc, avatarState, about, bannerColor, setShowAvatarModal }) {\r\n\treturn (\r\n\t\t<div className='profile-preview'>\r\n\t\t\t<div className='profile-preview__banner' style={{ backgroundColor: bannerColor }}></div>\r\n\t\t\t<div className='profile-preview__header'>\r\n\t\t\t\t<div\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetShowAvatarModal(true)\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<AvatarWithStatus userId={userDoc.id} src={avatarState && !avatarState.remove ? avatarState.url : ''} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='profile-preview__info'>\r\n\t\t\t\t<h3 className='name'>{userDoc.displayName}</h3>\r\n\r\n\t\t\t\t<div className='cards'>\r\n\t\t\t\t\t<div className='cards__card'>\r\n\t\t\t\t\t\t{about && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<h4>About me</h4>\r\n\t\t\t\t\t\t\t\t<p className='bio'>{about}</p>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='cards__card'>\r\n\t\t\t\t\t\t<h4>Member since</h4>\r\n\t\t\t\t\t\t<p>{userDoc.createdAt}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useState } from 'react'\r\nimport { useAuthContext } from '../../../../hooks/useAuthContext'\r\nimport { useDocument } from '../../../../hooks/useDocument'\r\nimport { useEffect } from 'react'\r\n\r\n// Styles && Assets\r\nimport './Profile.scss'\r\n\r\n// Components\r\nimport { ToastContainer } from 'react-toastify'\r\nimport AvatarField from './fields/AvatarField'\r\nimport BannerField from './fields/BannerField'\r\nimport AboutField from './fields/AboutField'\r\nimport Loader from '../../../../components/Loader/Loader'\r\nimport Preview from './Preview'\r\n\r\nconst Profile = () => {\r\n\tconst { user } = useAuthContext()\r\n\tconst { document: userDoc } = useDocument('users', user.uid)\r\n\r\n\tconst [bannerColor, setBannerColor] = useState('#354167')\r\n\r\n\tconst [avatarState, setAvatarState] = useState({})\r\n\tconst [showAvatarModal, setShowAvatarModal] = useState(false)\r\n\r\n\tconst [about, setAbout] = useState('')\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userDoc) {\r\n\t\t\tif (userDoc.banner) setBannerColor(userDoc.banner)\r\n\r\n\t\t\tif (userDoc.bio) setAbout(userDoc.bio)\r\n\t\t}\r\n\t}, [userDoc])\r\n\r\n\tif (!userDoc) return <Loader />\r\n\r\n\tif (userDoc)\r\n\t\treturn (\r\n\t\t\t<div className='profile-settings'>\r\n\t\t\t\t<ToastContainer />\r\n\t\t\t\t<h2 className='setting-title'>customize profile</h2>\r\n\r\n\t\t\t\t<div className='profile-settings__container'>\r\n\t\t\t\t\t<Preview\r\n\t\t\t\t\t\tuserDoc={userDoc}\r\n\t\t\t\t\t\tavatarState={avatarState}\r\n\t\t\t\t\t\tbannerColor={bannerColor}\r\n\t\t\t\t\t\tabout={about}\r\n\t\t\t\t\t\tsetShowAvatarModal={setShowAvatarModal}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<div className='profile-settings__fields'>\r\n\t\t\t\t\t\t<BannerField setBannerColor={setBannerColor} bannerColor={bannerColor} />\r\n\r\n\t\t\t\t\t\t<AvatarField\r\n\t\t\t\t\t\t\tsetAvatarState={e => setAvatarState(e)}\r\n\t\t\t\t\t\t\tuserDoc={userDoc}\r\n\t\t\t\t\t\t\tsetShowAvatarModal={setShowAvatarModal}\r\n\t\t\t\t\t\t\tshowAvatarModal={showAvatarModal}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<AboutField about={about} setAbout={setAbout} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n}\r\n\r\nexport default Profile\r\n","const Theme = () => {\r\n\treturn <div className='mt3'>Do I even want to spend time on that?</div>\r\n}\r\n\r\nexport default Theme\r\n","const Premium = () => {\r\n\treturn (\r\n\t\t<div className='mt3'>\r\n\t\t\t<a href='https://buycoffee.to/mhada' target='_blank' rel='noreferrer'>\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc='https://buycoffee.to/btn/buycoffeeto-btn-primary.svg'\r\n\t\t\t\t\tstyle={{ width: '170px' }}\r\n\t\t\t\t\talt='Postaw mi kawę na buycoffee.to'\r\n\t\t\t\t/>\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Premium\r\n","const PrivacyAndSecurity = () => {\r\n\treturn <div className='mt3'>I guarantee that it's safe</div>\r\n}\r\n\r\nexport default PrivacyAndSecurity\r\n","import { Link, NavLink, Route, Routes } from 'react-router-dom'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useLogout } from '../../hooks/useLogout'\r\nimport { useState } from 'react'\r\nimport { useMediaQuery } from 'react-responsive'\r\n\r\n// Styles && Assets\r\nimport './Settings.scss'\r\nimport premiumIcon from '../../assets/premium-account.png'\r\n\r\n// Components\r\nimport AvatarWithStatus from '../../components/AvatarWithStatus/AvatarWithStatus'\r\nimport AccountDetails from './subpages/AccountDetails/AccountDetails'\r\nimport Profile from './subpages/Profile/Profile'\r\nimport Theme from './subpages/Theme/Theme'\r\nimport Premium from './subpages/Premium/Premium'\r\nimport PrivacyAndSecurity from './subpages/PrivacyAndSecurity/PrivacyAndSecurity'\r\n// import Modal from '../../components/Modal/Modal'\r\n// import Loader from '../../components/Loader/Loader'\r\n\r\nexport default function Settings() {\r\n\tconst { user } = useAuthContext()\r\n\tconst { logout, error, isPending } = useLogout()\r\n\r\n\tconst [showPage, setShowPage] = useState(false)\r\n\tconst mediaQueryXL = useMediaQuery({ query: '(min-width: 992px)' })\r\n\t// const [confirmLogout, setConfirmLogout] = useState(false)\r\n\treturn (\r\n\t\t<div className='settings'>\r\n\t\t\t<div className='wrapper'>\r\n\t\t\t\t<aside className='settings__sidebar'>\r\n\t\t\t\t\t<Link to={`/profile/${user.uid}`} className='settings__sidebar-user'>\r\n\t\t\t\t\t\t<AvatarWithStatus userId={user.uid} />\r\n\t\t\t\t\t\t<div className='flex-column'>\r\n\t\t\t\t\t\t\t<h3>{user.displayName}</h3>\r\n\t\t\t\t\t\t\t<p>{user.email && user.email}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Link>\r\n\r\n\t\t\t\t\t<div className='custom-scrollbar flex-column'>\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tto='/settings/account-details'\r\n\t\t\t\t\t\t\tclassName='settings__sidebar-link'\r\n\t\t\t\t\t\t\tonClick={() => setShowPage(true)}>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-circle-user'></i>\r\n\t\t\t\t\t\t\t<span>account details</span>\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t<NavLink to='/settings/profile' className='settings__sidebar-link' onClick={() => setShowPage(true)}>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-address-card'></i>\r\n\t\t\t\t\t\t\t<span>profile</span>\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t<NavLink to='/settings/theme' className='settings__sidebar-link' onClick={() => setShowPage(true)}>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-paintbrush'></i>\r\n\t\t\t\t\t\t\t<span>theme</span>\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t<NavLink to='/settings/become-cool' className='settings__sidebar-link' onClick={() => setShowPage(true)}>\r\n\t\t\t\t\t\t\t<img src={premiumIcon} alt='Icon for premium account' />\r\n\t\t\t\t\t\t\t<span>premium</span>\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\tto='/settings/privacy-and-security'\r\n\t\t\t\t\t\t\tclassName='settings__sidebar-link'\r\n\t\t\t\t\t\t\tonClick={() => setShowPage(true)}>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-shield-halved'></i>\r\n\t\t\t\t\t\t\t<span>privacy & security</span>\r\n\t\t\t\t\t\t</NavLink>\r\n\r\n\t\t\t\t\t\t<div className='settings__sidebar-link logout' onClick={() => logout()}>\r\n\t\t\t\t\t\t\t<span>log out</span>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-arrow-right-from-bracket'></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* <Modal show={confirmLogout} setShow={() => setConfirmLogout(false)}>\r\n\t\t\t\t\t\t{!isPending && <i className='fa-regular fa-hand mb05'></i>}\r\n\r\n\t\t\t\t\t\t{isPending && <Loader />}\r\n\r\n\t\t\t\t\t\t<h3 className='mb05'>Come back soon!</h3>\r\n\t\t\t\t\t\t<p>Are you sure you want to Log Out?</p>\r\n\r\n\t\t\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t\t\t<button className='btn btn--secondary' onClick={() => setConfirmLogout(false)}>\r\n\t\t\t\t\t\t\t\tcancel\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button className='btn' onClick={() => logout()}>\r\n\t\t\t\t\t\t\t\tlogout\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t\t\t</Modal> */}\r\n\t\t\t\t</aside>\r\n\r\n\t\t\t\t{(showPage || mediaQueryXL) && (\r\n\t\t\t\t\t<div className='settings__content custom-scrollbar'>\r\n\t\t\t\t\t\t{!mediaQueryXL && <i className='fa-solid fa-arrow-left close-btn' onClick={() => setShowPage(false)}></i>}\r\n\r\n\t\t\t\t\t\t<Routes>\r\n\t\t\t\t\t\t\t<Route path='account-details' element={<AccountDetails />} />\r\n\t\t\t\t\t\t\t<Route path='profile' element={<Profile />} />\r\n\t\t\t\t\t\t\t<Route path='theme' element={<Theme />} />\r\n\t\t\t\t\t\t\t<Route path='become-cool' element={<Premium />} />\r\n\t\t\t\t\t\t\t<Route path='privacy-and-security' element={<PrivacyAndSecurity />} />\r\n\t\t\t\t\t\t</Routes>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useState } from 'react'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { Link } from 'react-router-dom'\r\nimport { useDocument } from '../../hooks/useDocument'\r\nimport { useCollection } from '../../hooks/useCollection'\r\n\r\n// Components\r\nimport AvatarWithStatus from '../../components/AvatarWithStatus/AvatarWithStatus'\r\nimport Field from '../../components/Inputs/Field/Field'\r\nimport { useMediaQuery } from 'react-responsive'\r\n\r\nconst FriendsList = () => {\r\n\tconst { user } = useAuthContext()\r\n\tconst { document: currentUserDoc } = useDocument('users', user.uid)\r\n\tconst { documents: users } = useCollection('users')\r\n\r\n\tconst [search, setSearch] = useState('')\r\n\tconst [filter, setFilter] = useState('all')\r\n\r\n\tconst getDoc = id => {\r\n\t\tlet res = null\r\n\r\n\t\tif (users) {\r\n\t\t\tres = users.filter(doc => {\r\n\t\t\t\tif (doc.id === id) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t})[0]\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst filterUsers = f => {\r\n\t\tif (getDoc(f.id)) {\r\n\t\t\tlet flt\r\n\r\n\t\t\tswitch (filter) {\r\n\t\t\t\tcase 'offline':\r\n\t\t\t\t\tflt = 'invisible'\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'do not disturb':\r\n\t\t\t\t\tflt = 'do-not-disturb'\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'all':\r\n\t\t\t\t\tflt = getDoc(f.id).status\r\n\t\t\t\t\tbreak\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tflt = filter\r\n\t\t\t\t\tbreak\r\n\t\t\t}\r\n\r\n\t\t\tif (getDoc(f.id).status === flt && f.accepted) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tgetDoc(f.id).displayName.toLowerCase().trim().replace(/\\s+/g, '').includes(search.toLowerCase()) ||\r\n\t\t\t\t\tsearch === ''\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\tconst styleStatus = status => {\r\n\t\tlet styled\r\n\r\n\t\tswitch (status) {\r\n\t\t\tcase 'invisible':\r\n\t\t\t\tstyled = 'Offline'\r\n\t\t\t\tbreak\r\n\t\t\tcase 'do-not-disturb':\r\n\t\t\t\tstyled = 'Do Not Disturb'\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t\t\tstyled = status\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\treturn styled\r\n\t}\r\n\r\n\tconst queryMd = useMediaQuery({ query: '(min-width: 768px)' })\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className={`friends__filter`}>\r\n\t\t\t\t<div className={`friends__filter-item ${filter === 'all' ? 'active' : ''}`} onClick={() => setFilter('all')}>\r\n\t\t\t\t\t<span>all</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={`friends__filter-item ${filter === 'online' ? 'active' : ''}`}\r\n\t\t\t\t\tonClick={() => setFilter('online')}>\r\n\t\t\t\t\t<div className='status status--online'></div>\r\n\t\t\t\t\t{queryMd && <span>online</span>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`friends__filter-item ${filter === 'idle' ? 'active' : ''}`} onClick={() => setFilter('idle')}>\r\n\t\t\t\t\t<div className='status status--idle'></div>\r\n\t\t\t\t\t{queryMd && <span>idle</span>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={`friends__filter-item ${filter === 'do not disturb' ? 'active' : ''}`}\r\n\t\t\t\t\tonClick={() => setFilter('do not disturb')}>\r\n\t\t\t\t\t<div className='status status--do-not-disturb'></div>\r\n\t\t\t\t\t{queryMd && <span>do not disturb</span>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={`friends__filter-item ${filter === 'offline' ? 'active' : ''}`}\r\n\t\t\t\t\tonClick={() => setFilter('offline')}>\r\n\t\t\t\t\t<div className='status status--offline'></div>\r\n\t\t\t\t\t{queryMd && <span>offline</span>}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<Field\r\n\t\t\t\tvalue={search}\r\n\t\t\t\tsetValue={setSearch}\r\n\t\t\t\tlabel='Search'\r\n\t\t\t\tafter={<i className='fa-solid fa-magnifying-glass'></i>}\r\n\t\t\t\tbefore={<i className='fa-solid fa-magnifying-glass'></i>}\r\n\t\t\t/>\r\n\r\n\t\t\t{currentUserDoc && currentUserDoc.friends && currentUserDoc.friends.filter(f => filterUsers(f)).length > 0 ? (\r\n\t\t\t\t<div className='friends__list'>\r\n\t\t\t\t\t<div className='friends__list-title'>\r\n\t\t\t\t\t\t{filter} - {currentUserDoc.friends.filter(f => filterUsers(f)).length}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='friends__list-users'>\r\n\t\t\t\t\t\t{currentUserDoc.friends.map(\r\n\t\t\t\t\t\t\tf =>\r\n\t\t\t\t\t\t\t\tfilterUsers(f) && (\r\n\t\t\t\t\t\t\t\t\t<Link to={`/profile/${f.id}`} className='user' key={f.id}>\r\n\t\t\t\t\t\t\t\t\t\t<div className='flex-row gap05 w100'>\r\n\t\t\t\t\t\t\t\t\t\t\t<AvatarWithStatus userId={f.id} />\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='flex-column w100 overflow-hidden'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{getDoc(f.id) && getDoc(f.id).displayName}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{getDoc(f.id) && styleStatus(getDoc(f.id).status)}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div className='absolute-center'>No user to be found</div>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default FriendsList\r\n","import { useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { toast, ToastContainer } from 'react-toastify'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useCollection } from '../../hooks/useCollection'\r\nimport { useDocument } from '../../hooks/useDocument'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\n\r\n// Components\r\nimport Field from '../../components/Inputs/Field/Field'\r\n\r\nconst AddFriend = () => {\r\n\tconst { user } = useAuthContext()\r\n\tconst { document: currentUserDoc } = useDocument('users', user.uid)\r\n\tconst { documents: users } = useCollection('users')\r\n\tconst { updateDocument } = useFirestore('users')\r\n\r\n\tconst [inputError, setInputError] = useState(null)\r\n\tconst [userCode, setUserCode] = useState('')\r\n\r\n\tconst notify = message =>\r\n\t\ttoast.success(message, {\r\n\t\t\tposition: 'bottom-right',\r\n\t\t\tautoClose: 5000,\r\n\t\t\thideProgressBar: false,\r\n\t\t\tcloseOnClick: true,\r\n\t\t\tpauseOnHover: true,\r\n\t\t\tdraggable: true,\r\n\t\t\tprogress: undefined,\r\n\t\t\ttheme: 'dark',\r\n\t\t})\r\n\r\n\tconst addFriend = async () => {\r\n\t\tsetInputError(null)\r\n\r\n\t\tlet userDoc = null\r\n\r\n\t\tusers.forEach(u => {\r\n\t\t\tif (u.id === userCode.trim()) {\r\n\t\t\t\tuserDoc = u\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tif (userCode === '') {\r\n\t\t\tsetInputError('Please enter code')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (userDoc === null) {\r\n\t\t\tsetInputError('Could not find user with this id')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (currentUserDoc.friends && currentUserDoc.friends.some(f => f.id === userCode.trim())) {\r\n\t\t\tsetInputError(\"You've already invited this user or this user has invited you\")\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tawait updateDocument(user.uid, {\r\n\t\t\t\tfriends: [\r\n\t\t\t\t\t...(currentUserDoc.friends ? currentUserDoc.friends : []),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: userDoc.id,\r\n\t\t\t\t\t\tisPending: false,\r\n\t\t\t\t\t\taccepted: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t})\r\n\r\n\t\t\tawait updateDocument(userDoc.id, {\r\n\t\t\t\tfriends: [\r\n\t\t\t\t\t...(userDoc.friends ? userDoc.friends : []),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: currentUserDoc.id,\r\n\t\t\t\t\t\tisPending: true,\r\n\t\t\t\t\t\taccepted: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t})\r\n\r\n\t\t\tnotify('Successfully sent invite')\r\n\t\t\tsetUserCode('')\r\n\t\t} catch (error) {\r\n\t\t\tsetInputError(error.message)\r\n\t\t\tconsole.log(error.message)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='friends__add'>\r\n\t\t\t<ToastContainer />\r\n\t\t\t<h3 className='friends__add-title'>add friend</h3>\r\n\t\t\t<div className='friends__add-description'>\r\n\t\t\t\t<span>Enter invite code of user you want to add. </span>\r\n\t\t\t\t<span>\r\n\t\t\t\t\tYou can find the code in <Link to='/settings/account-details'>account settings.</Link>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<Field\r\n\t\t\t\tvalue={userCode}\r\n\t\t\t\tsetValue={setUserCode}\r\n\t\t\t\tplaceholder='Enter Code'\r\n\t\t\t\terror={inputError}\r\n\t\t\t\tresetError={() => setInputError(null)}\r\n\t\t\t\tafter={\r\n\t\t\t\t\t<button className='btn btn--secondary text-capitalize' onClick={() => addFriend()}>\r\n\t\t\t\t\t\tinvite\r\n\t\t\t\t\t</button>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default AddFriend\r\n","import { useState } from 'react'\r\nimport { toast, ToastContainer } from 'react-toastify'\r\nimport Avatar from '../../components/Avatar/Avatar'\r\nimport Tooltip from '../../components/Tooltip/Tooltip'\r\nimport { projectFirestore, timestamp } from '../../firebase/config'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useCollection } from '../../hooks/useCollection'\r\nimport { useDocument } from '../../hooks/useDocument'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\nimport { doc, setDoc } from 'firebase/firestore'\r\n\r\nconst PendingInvites = () => {\r\n\tconst { user } = useAuthContext()\r\n\tconst { documents: users } = useCollection('users')\r\n\tconst { documents: chats } = useCollection('projects')\r\n\tconst { document: currentUserDoc } = useDocument('users', user.uid)\r\n\tconst { updateDocument } = useFirestore('users')\r\n\r\n\tconst [error, setError] = useState(null)\r\n\r\n\tconst notify = message =>\r\n\t\ttoast.success(message, {\r\n\t\t\tposition: 'bottom-right',\r\n\t\t\tautoClose: 5000,\r\n\t\t\thideProgressBar: false,\r\n\t\t\tcloseOnClick: true,\r\n\t\t\tpauseOnHover: true,\r\n\t\t\tdraggable: true,\r\n\t\t\tprogress: undefined,\r\n\t\t\ttheme: 'dark',\r\n\t\t})\r\n\r\n\tconst getDoc = id => {\r\n\t\tlet res = null\r\n\r\n\t\tif (users) {\r\n\t\t\tres = users.filter(doc => {\r\n\t\t\t\tif (doc.id === id) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t})[0]\r\n\t\t}\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst handleSelect = async addUser => {\r\n\t\tconst combinedId = user.uid > addUser.id ? user.uid + addUser.id : addUser.id + user.uid\r\n\r\n\t\tconst docToAdd = {\r\n\t\t\tid: combinedId,\r\n\t\t\tassignedUsers: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: user.uid,\r\n\t\t\t\t\tnickname: user.displayName,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: addUser.id,\r\n\t\t\t\t\tnickname: addUser.displayName,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tassignedUsersId: [user.uid, addUser.id],\r\n\t\t\tchatEmoji: '1f44d',\r\n\t\t\tmessages: [],\r\n\t\t\tupdatedAt: timestamp.fromDate(new Date()),\r\n\t\t\tcreatedAt: timestamp.fromDate(new Date()),\r\n\t\t\tcustomThemes: [],\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst exists = chats.some(c => c.id === combinedId)\r\n\r\n\t\t\tif (!exists && user.uid !== addUser.id) {\r\n\t\t\t\t// Create a chat in chats collection\r\n\r\n\t\t\t\t// await addDocument(docToAdd)\r\n\t\t\t\tawait setDoc(doc(projectFirestore, 'projects', combinedId), docToAdd)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err.message)\r\n\t\t\tsetError(err.message)\r\n\t\t}\r\n\t}\r\n\r\n\tconst acceptInvite = async (u, index) => {\r\n\t\tsetError(null)\r\n\r\n\t\tconst arrCopy = currentUserDoc.friends\r\n\r\n\t\tarrCopy[index] = {\r\n\t\t\tid: u.id,\r\n\t\t\tisPending: false,\r\n\t\t\taccepted: true,\r\n\t\t}\r\n\r\n\t\tconst arrCopy2 = getDoc(u.id).friends\r\n\t\tlet index2\r\n\r\n\t\tarrCopy2.some((f, i) => {\r\n\t\t\tif (f.id === currentUserDoc.id) {\r\n\t\t\t\tindex2 = i\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\t})\r\n\r\n\t\tarrCopy2[index2] = {\r\n\t\t\tid: currentUserDoc.id,\r\n\t\t\tisPending: false,\r\n\t\t\taccepted: true,\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tawait updateDocument(user.uid, {\r\n\t\t\t\tfriends: arrCopy,\r\n\t\t\t})\r\n\r\n\t\t\tawait updateDocument(u.id, {\r\n\t\t\t\tfriends: arrCopy2,\r\n\t\t\t})\r\n\r\n\t\t\tawait handleSelect(getDoc(u.id))\r\n\r\n\t\t\tnotify('Successfully added user to your friends')\r\n\t\t} catch (error) {\r\n\t\t\tsetError(error.message)\r\n\t\t\tconsole.log(error.message)\r\n\t\t}\r\n\t}\r\n\r\n\tconst declineInvite = async (u, index) => {\r\n\t\tsetError(null)\r\n\r\n\t\tconst arrCopy = currentUserDoc.friends\r\n\t\tarrCopy.splice(index, 1)\r\n\r\n\t\tconst arrCopy2 = getDoc(u.id).friends\r\n\r\n\t\tlet index2\r\n\t\tarrCopy2.some((f, i) => {\r\n\t\t\tif (f.id === currentUserDoc.id) {\r\n\t\t\t\tindex2 = i\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t\treturn false\r\n\t\t})\r\n\t\tarrCopy2.splice(index2, 1)\r\n\r\n\t\ttry {\r\n\t\t\tawait updateDocument(user.uid, {\r\n\t\t\t\tfriends: arrCopy,\r\n\t\t\t})\r\n\r\n\t\t\tawait updateDocument(u.id, {\r\n\t\t\t\tfriends: arrCopy2,\r\n\t\t\t})\r\n\r\n\t\t\tnotify('Successfully declined/canceled invitation')\r\n\t\t} catch (error) {\r\n\t\t\tsetError(error.message)\r\n\t\t\tconsole.log(error.message)\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='friends__invites mt2'>\r\n\t\t\t<ToastContainer />\r\n\t\t\t{currentUserDoc && currentUserDoc.friends && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{currentUserDoc.friends.map(\r\n\t\t\t\t\t\t(f, index) =>\r\n\t\t\t\t\t\t\t!f.isPending &&\r\n\t\t\t\t\t\t\t!f.accepted && (\r\n\t\t\t\t\t\t\t\t<div className='friends__invites-user' key={f.id}>\r\n\t\t\t\t\t\t\t\t\t<div className='flex-row gap1 w100'>\r\n\t\t\t\t\t\t\t\t\t\t<Avatar src={getDoc(f.id) && getDoc(f.id).photoURL} />\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div className='flex-column flex-grow-1'>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>{getDoc(f.id) && getDoc(f.id).displayName}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>You invited this user</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className='flex-row gap1 options'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='options__decline' onClick={() => declineInvite(f, index)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip>Cancel invite</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-xmark'></i>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{currentUserDoc.friends.filter(f => !f.accepted && !f.isPending).length > 0 ? (\r\n\t\t\t\t\t\t<div className='separator mb1 mt1'></div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t''\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{currentUserDoc.friends.filter(f => !f.accepted).length === 0 ? (\r\n\t\t\t\t\t\t<div className='absolute-center'>There are no pending invites</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t''\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{currentUserDoc.friends.map(\r\n\t\t\t\t\t\t(f, index) =>\r\n\t\t\t\t\t\t\tf.isPending &&\r\n\t\t\t\t\t\t\t!f.accepted && (\r\n\t\t\t\t\t\t\t\t<div className='friends__invites-user' key={f.id}>\r\n\t\t\t\t\t\t\t\t\t<div className='flex-row gap1'>\r\n\t\t\t\t\t\t\t\t\t\t<Avatar src={getDoc(f.id) && getDoc(f.id).photoURL} />\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div className='flex-column'>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>{getDoc(f.id) && getDoc(f.id).displayName}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Sent you an invite</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className='flex-row gap1 options'>\r\n\t\t\t\t\t\t\t\t\t\t<div className='options__decline' onClick={() => declineInvite(f, index)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip>Decline</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-xmark'></i>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div className='options__accept' onClick={() => acceptInvite(f, index)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip>Accept</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-check'></i>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t)}\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\r\n\t\t\t{(!currentUserDoc || !currentUserDoc.friends || currentUserDoc.friends.length === 0) && (\r\n\t\t\t\t<p className='absolute-center'>No pending invites</p>\r\n\t\t\t)}\r\n\r\n\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t</div>\r\n\t)\r\n}\r\nexport default PendingInvites\r\n","import { useEffect, useState } from 'react'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useDocument } from '../../hooks/useDocument'\r\nimport { useMediaQuery } from 'react-responsive'\r\n\r\n// Styles\r\nimport './Friends.scss'\r\n\r\n// Components\r\nimport FriendsList from './FriendsList'\r\nimport AddFriend from './AddFriend'\r\nimport PendingInvites from './PendingInvites'\r\n\r\nconst Friends = () => {\r\n\tconst { user } = useAuthContext()\r\n\tconst { document: currentUserDoc } = useDocument('users', user.uid)\r\n\r\n\tconst [view, setView] = useState('list') // list, pending, add\r\n\tconst [invitesAmount, setInvitesAmount] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentUserDoc && currentUserDoc.friends) {\r\n\t\t\tsetInvitesAmount(\r\n\t\t\t\tcurrentUserDoc.friends.filter(f => {\r\n\t\t\t\t\tif (f.isPending) return true\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}).length\r\n\t\t\t)\r\n\t\t}\r\n\t}, [currentUserDoc])\r\n\r\n\tconst queryMd = useMediaQuery({ query: '(max-width: 768px)' })\r\n\r\n\treturn (\r\n\t\tcurrentUserDoc && (\r\n\t\t\t<div className='friends wrapper'>\r\n\t\t\t\t<div className='friends__title-bar'>\r\n\t\t\t\t\t<div className='friends__title-bar-title' onClick={() => setView('list')}>\r\n\t\t\t\t\t\t<h2>Friends</h2>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='flex-row gap1'>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={`friends__title-bar-pending ${view === 'pending' ? 'active' : ''}`}\r\n\t\t\t\t\t\t\tonClick={() => setView('pending')}>\r\n\t\t\t\t\t\t\t{!queryMd && <span>pending</span>}\r\n\t\t\t\t\t\t\t{queryMd && invitesAmount === 0 && <i className='fa-solid fa-envelope'></i>}\r\n\t\t\t\t\t\t\t{invitesAmount > 0 && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-envelope'></i>\r\n\t\t\t\t\t\t\t\t\t<div className='pending-indicator'>\r\n\t\t\t\t\t\t\t\t\t\t<p>{invitesAmount}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={`friends__title-bar-add ${view === 'add' ? 'active' : ''} ${queryMd ? 'mobile' : ''}`}\r\n\t\t\t\t\t\t\tonClick={() => setView('add')}>\r\n\t\t\t\t\t\t\t{!queryMd && (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<span>add friend</span>\r\n\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-user-plus'></i>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{queryMd && <i className='fa-solid fa-user-plus mobile'></i>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{view === 'list' && <FriendsList />}\r\n\t\t\t\t{view === 'add' && <AddFriend />}\r\n\t\t\t\t{view === 'pending' && <PendingInvites />}\r\n\t\t\t</div>\r\n\t\t)\r\n\t)\r\n}\r\n\r\nexport default Friends\r\n","import React, { useEffect, useState } from 'react'\r\nimport { NavLink, useLocation } from 'react-router-dom'\r\nimport { useAuthContext } from '../../../hooks/useAuthContext'\r\nimport { useCollection } from '../../../hooks/useCollection'\r\nimport { useDocument } from '../../../hooks/useDocument'\r\n\r\n// Styles\r\nimport './TabBar.scss'\r\n\r\nexport default function TabBar() {\r\n\tconst location = useLocation()\r\n\r\n\tconst { user } = useAuthContext()\r\n\tconst { documents: chats } = useCollection(\r\n\t\t'projects',\r\n\t\t['assignedUsersId', 'array-contains', user.uid],\r\n\t\t['updatedAt', 'desc']\r\n\t)\r\n\r\n\tconst { document: userDoc } = useDocument('users', user.uid)\r\n\r\n\tconst [currentPath, setCurrentPath] = useState('')\r\n\tconst [latestChat, setLatestChat] = useState()\r\n\tconst [invitesAmount, setInvitesAmount] = useState(0)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chats && chats !== null && chats.length !== 0) {\r\n\t\t\tsetLatestChat(chats[0])\r\n\t\t} else {\r\n\t\t\tsetLatestChat('')\r\n\t\t}\r\n\t}, [chats, userDoc])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userDoc && userDoc.friends) {\r\n\t\t\tsetInvitesAmount(\r\n\t\t\t\tuserDoc.friends.filter(f => {\r\n\t\t\t\t\tif (f.isPending) return true\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}).length\r\n\t\t\t)\r\n\t\t}\r\n\t}, [userDoc])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCurrentPath(location.pathname)\r\n\t}, [location])\r\n\r\n\treturn (\r\n\t\t<nav className='tab-bar'>\r\n\t\t\t<NavLink\r\n\t\t\t\tto={`/u/${latestChat && latestChat.id}`}\r\n\t\t\t\tclassName={`tab-bar__link  ${currentPath.includes('/u/') ? 'active' : ''}`}>\r\n\t\t\t\t<i className='fa-solid fa-comment'></i>\r\n\t\t\t\t<div className='tab-bar__link-description'>Chat</div>\r\n\t\t\t</NavLink>\r\n\r\n\t\t\t<NavLink to='/' className='tab-bar__link'>\r\n\t\t\t\t<i className='fa-solid fa-house'></i>\r\n\t\t\t\t<div className='tab-bar__link-description'>Home</div>\r\n\t\t\t</NavLink>\r\n\r\n\t\t\t<NavLink to='/friends' className='tab-bar__link tab-bar__link--friends'>\r\n\t\t\t\t<i className='fa-solid fa-address-book'></i>\r\n\t\t\t\t{invitesAmount > 0 && (\r\n\t\t\t\t\t<div className='pending-indicator'>\r\n\t\t\t\t\t\t<p>{invitesAmount}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\t<div className='tab-bar__link-description'>Friends</div>\r\n\t\t\t</NavLink>\r\n\r\n\t\t\t<NavLink\r\n\t\t\t\tto='/settings/account-details'\r\n\t\t\t\tclassName={`tab-bar__link ${\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t'/settings/account-details',\r\n\t\t\t\t\t\t'/settings/profile',\r\n\t\t\t\t\t\t'/settings/theme',\r\n\t\t\t\t\t\t'/settings',\r\n\t\t\t\t\t\t'/settings/',\r\n\t\t\t\t\t\t'/settings/become-cool',\r\n\t\t\t\t\t\t'/settings/privacy-and-security',\r\n\t\t\t\t\t].includes(location.pathname)\r\n\t\t\t\t\t\t? 'active'\r\n\t\t\t\t\t\t: ''\r\n\t\t\t\t}`}>\r\n\t\t\t\t<i className='fa-solid fa-gear'></i>\r\n\t\t\t\t<div className='tab-bar__link-description'>Settings</div>\r\n\t\t\t</NavLink>\r\n\t\t</nav>\r\n\t)\r\n}\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport { BrowserRouter, Route, Routes, Navigate, Link } from 'react-router-dom'\r\nimport { useAuthContext } from './hooks/useAuthContext'\r\nimport { GlobalStyles } from './theme/GlobalStyles'\r\nimport { useCollection } from './hooks/useCollection'\r\nimport { ThemeProvider } from 'styled-components'\r\n\r\n// Styles\r\nimport './App.scss'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\n\r\n// Components && Pages\r\nimport Dashboard from './pages/dashboard/Dashboard'\r\nimport Chat from './pages/chat/Chat'\r\nimport Login from './pages/auth/login/Login'\r\nimport Signup from './pages/auth/signup/Signup'\r\nimport PrivacyPolicy from './pages/privacyPolicy/privacyPolicy'\r\nimport ResetPassword from './pages/auth/resetPassword/ResetPassword'\r\nimport SetNewPassword from './pages/auth/resetPassword/SetNewPassword'\r\nimport Chats from './components/Chats/Chats'\r\nimport ToolBar from './components/ToolBar/ToolBar'\r\nimport Profile from './pages/profile/Profile'\r\nimport Settings from './pages/settings/Settings'\r\nimport Friends from './pages/friends/Friends'\r\n\r\nimport MediaQuery from 'react-responsive'\r\nimport TabBar from './components/Mobile/TabBar/TabBar'\r\n\r\nfunction App() {\r\n\tconst inputRef = useRef(null)\r\n\r\n\tconst { user, authIsReady } = useAuthContext()\r\n\tconst { documents: themes } = useCollection('themes')\r\n\r\n\tconst [currentChat, setCurrentChat] = useState(null)\r\n\tconst [theme, setTheme] = useState(themes)\r\n\r\n\tconst filterTheme = themeToSet => {\r\n\t\tlet filteredTheme\r\n\r\n\t\tif (themeToSet.isCustom === true) {\r\n\t\t\tif (currentChat.customThemes) {\r\n\t\t\t\tcurrentChat.customThemes.forEach(theme => {\r\n\t\t\t\t\tif (theme.id === themeToSet.name) filteredTheme = theme\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (themes) {\r\n\t\t\t\tthemes.forEach(theme => {\r\n\t\t\t\t\tif (theme.id === themeToSet.name) filteredTheme = theme\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn filteredTheme\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentChat) {\r\n\t\t\tcurrentChat.theme\r\n\t\t\t\t? setTheme(filterTheme(currentChat.theme))\r\n\t\t\t\t: setTheme(filterTheme({ name: 'default', isCustom: false }))\r\n\t\t} else if (themes) {\r\n\t\t\tsetTheme(filterTheme({ name: 'default', isCustom: false }))\r\n\t\t}\r\n\t}, [themes, currentChat])\r\n\r\n\tconst [showChat, setShowChat] = useState(false)\r\n\r\n\t// // Admin tools\r\n\t// const { addDocument: addTheme } = useFirestore('themes')\r\n\t// const { document: adminTheme } = useDocument('themes', 'default')\r\n\t// const { document: adminConversation } = useDocument(\r\n\t// \t'projects',\r\n\t// \t'cM8CaZG73ENA7ABO8AhkIwsRQSl1ZpVutXM9nTMk4zt2m6peODLoOml2'\r\n\t// )\r\n\r\n\t// const addThemeAdmin = async () => {\r\n\t// \ttry {\r\n\t// \t\tconst themeToAdd = {\r\n\t// \t\t\tid: 'default',\r\n\t// \t\t\tname: 'default',\r\n\t// \t\t\tcolors: {\r\n\t// \t\t\t\ttextPrimary: '#d9d9d9',\r\n\t// \t\t\t\tbuttonColor: '#dedede',\r\n\t// \t\t\t\tmsgBorder: '#1e1e1e',\r\n\t// \t\t\t\tinputBorder: '#1e1e1e',\r\n\t// \t\t\t\tmsgBg: '#1e1e1e',\r\n\t// \t\t\t\tmessageColor: '#cacaca',\r\n\t// \t\t\t\ttextAccent: '#5b3ba5',\r\n\t// \t\t\t\tbgDark: '#0e0f10',\r\n\t// \t\t\t\tinputBg: '#1e1e1e',\r\n\t// \t\t\t\tinputText: '#c4c4c4',\r\n\t// \t\t\t\ttextLowContrast: '#646464',\r\n\t// \t\t\t\tmessageColorOwner: '#e8e8e8',\r\n\t// \t\t\t\tmsgBgOwner: [\r\n\t// \t\t\t\t\t{\r\n\t// \t\t\t\t\t\tvalue: '#533e7a',\r\n\t// \t\t\t\t\t\tid: 0,\r\n\t// \t\t\t\t\t},\r\n\t// \t\t\t\t\t{\r\n\t// \t\t\t\t\t\tvalue: '#14545c',\r\n\t// \t\t\t\t\t\tid: 1,\r\n\t// \t\t\t\t\t},\r\n\t// \t\t\t\t],\r\n\t// \t\t\t\tmsgBorderOwner: '#121212',\r\n\t// \t\t\t\tbgSecondary: '#18191b',\r\n\t// \t\t\t},\r\n\t// \t\t\tborderRadius: '15',\r\n\t// \t\t\tisCustom: true,\r\n\t// \t\t}\r\n\r\n\t// \t\tawait setDoc(doc(projectFirestore, 'themes', themeToAdd.id), themeToAdd)\r\n\r\n\t// \t\tconsole.log('added theme')\r\n\t// \t} catch (error) {\r\n\t// \t\tconsole.log(error.message)\r\n\t// \t}\r\n\t// }\r\n\r\n\treturn (\r\n\t\tauthIsReady &&\r\n\t\ttheme && (\r\n\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t<GlobalStyles />\r\n\r\n\t\t\t\t<div className='App'>\r\n\t\t\t\t\t{/* <button\r\n\t\t\t\t\t\tstyle={{ position: 'fixed', top: '0', left: '0', padding: '10px', zIndex: '100000' }}\r\n\t\t\t\t\t\tonClick={() => addThemeAdmin()}>\r\n\t\t\t\t\t\tadd theme\r\n\t\t\t\t\t</button> */}\r\n\r\n\t\t\t\t\t<BrowserRouter>\r\n\t\t\t\t\t\t<MediaQuery minWidth={769}>{user && <ToolBar />}</MediaQuery>\r\n\t\t\t\t\t\t<Routes>\r\n\t\t\t\t\t\t\t<Route path='/' element={user ? <Dashboard /> : <Navigate to='/login' />} />\r\n\t\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\t\tpath='/u/:id'\r\n\t\t\t\t\t\t\t\telement={\r\n\t\t\t\t\t\t\t\t\tuser ? (\r\n\t\t\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\t\t\t<Chats currentChat={currentChat} inputRef={inputRef} key='chats' setShowChat={setShowChat} />,\r\n\t\t\t\t\t\t\t\t\t\t\t<Chat\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetCurrentChat={setCurrentChat}\r\n\t\t\t\t\t\t\t\t\t\t\t\tinputRef={inputRef}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentTheme={theme}\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey='chat'\r\n\t\t\t\t\t\t\t\t\t\t\t\tshowChat={showChat}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowChat={setShowChat}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<Navigate to='/' />\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\t\tpath='/u/'\r\n\t\t\t\t\t\t\t\telement={\r\n\t\t\t\t\t\t\t\t\t<div className='no-chats absolute-center '>\r\n\t\t\t\t\t\t\t\t\t\t<h2>no chats yet</h2>\r\n\t\t\t\t\t\t\t\t\t\t<Link to='/friends/'>\r\n\t\t\t\t\t\t\t\t\t\t\t<button className='btn btn--secondary'>add friends</button>\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Route path='/profile/:id' element={user ? <Profile /> : <Navigate to='/' />} />\r\n\t\t\t\t\t\t\t<Route path='/friends' element={user ? <Friends /> : <Navigate to='/' />} />\r\n\t\t\t\t\t\t\t<Route path='/settings/*' element={user ? <Settings /> : <Navigate to='/' />} />\r\n\t\t\t\t\t\t\t<Route path='/privacy-policy' element={<PrivacyPolicy />} />\r\n\t\t\t\t\t\t\t<Route path='/recover-password' element={<ResetPassword />} />\r\n\t\t\t\t\t\t\t<Route path='/login' element={user ? <Navigate to='/' /> : <Login />} />\r\n\t\t\t\t\t\t\t<Route path='/signup' element={user ? <Navigate to='/' /> : <Signup />} />\r\n\t\t\t\t\t\t\t<Route path='/set-new-password' element={<SetNewPassword />} />\r\n\t\t\t\t\t\t</Routes>\r\n\r\n\t\t\t\t\t\t<MediaQuery maxWidth={768}>{user && <TabBar />}</MediaQuery>\r\n\t\t\t\t\t</BrowserRouter>\r\n\t\t\t\t</div>\r\n\t\t\t</ThemeProvider>\r\n\t\t)\r\n\t)\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\nimport { AuthContextProvider } from './context/AuthContext'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<AuthContextProvider>\n\t\t\t<App />\n\t\t</AuthContextProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n)\n\t"],"sourceRoot":""}