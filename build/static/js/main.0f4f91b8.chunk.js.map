{"version":3,"sources":["firebase/config.js","context/AuthContext.js","hooks/useAuthContext.js","theme/GlobalStyles.js","hooks/useCollection.js","pages/dashboard/Dashboard.js","hooks/useDocument.js","hooks/useFirestore.js","hooks/useDates.js","components/Avatar/Avatar.js","hooks/useEscapeKey.js","components/Modal/Modal.js","pages/chat/Messages/Message/Message.js","pages/chat/Messages/Messages.js","pages/chat/MessageField/MessageField.js","assets/british-person.jpg","components/ThemeCreator/ThemePreview.js","components/ThemeCreator/Field.js","components/ThemeCreator/ColorPicker.js","components/ThemeCreator/ThemeCreator.js","components/ThemePicker/ThemePicker.js","pages/chat/ChatOptions/ChatOptions.js","pages/chat/Chat.js","hooks/useLogin.js","assets/btn_google_dark_normal_ios.svg","assets/GitHub-Mark-Light-32px.png","pages/login/Login.js","pages/signup/Signup.js","hooks/useSignup.js","pages/privacyPolicy/privacyPolicy.js","assets/shrek-gif.gif","pages/resetPassword/ResetPassword.js","pages/resetPassword/SetNewPassword.js","hooks/useQuery.js","components/Chats/ChatsList.js","components/Chats/Chats.js","hooks/useLogout.js","components/ToolBar/ToolBar.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","projectFirestore","firestore","projectAuth","auth","projectStorage","storage","projectGoogle","GoogleAuthProvider","projectGitHub","GithubAuthProvider","setCustomParameters","prompt","timestamp","Timestamp","AuthContext","createContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","children","useReducer","dispatch","useEffect","unsub","onAuthStateChanged","Provider","value","useAuthContext","context","useContext","Error","adjustBrightness","col","amt","usePound","slice","R","parseInt","substring","G","B","toString","length","GlobalStyles","createGlobalStyle","theme","colors","bgDark","bgSecondary","inputBg","inputText","inputBorder","msgBg","messageColor","msgBorder","msgBgOwner","forEach","color","spreadColors","messageColorOwner","msgBorderOwner","textAccent","borderRadius","textPrimary","textLowContrast","buttonColor","useCollection","collection","_query","_orderBy","useState","documents","setDocuments","error","setError","query","useRef","current","orderBy","ref","where","unsubscribe","onSnapshot","snapshot","results","docs","doc","push","data","id","console","log","Dashboard","className","useDocument","document","setDocument","err","message","initialState","isPending","success","firestoreReducer","useFirestore","response","isCancelled","setIsCancelled","dispatchIfNotCancelled","addDocument","a","createdAt","fromDate","Date","add","addedDocument","deleteDocument","delete","updateDocument","updates","update","updatedDocument","useDates","dayOfMonth","dayOfWeek","month","year","hour","curDate","fullDate","today","toLocaleDateString","weekday","formatDate","comment","date","toDate","getDay","getFullYear","getMonth","getDate","toLocaleTimeString","minute","dateToFormat","lastMonday","setDate","setHours","getTime","isCurrentWeek","dates","Avatar","src","alt","KEY_EVENT_TYPE","Modal","show","setShow","onClose","disableOCH","handleClose","handleEscKey","useCallback","event","key","addEventListener","removeEventListener","useEscapeKey","onOutsideClick","disabled","onClick","Message","elements","i","chat","onMessageResponse","setMessageToDelete","showImage","setShowImage","otherUser","showEmojis","setShowEmojis","showModal","setShowModal","emojiReactions","setEmojiReactions","showSendDate","value1","value2","date1","date2","Math","abs","showSendDate2","reactWithEmoji","e","indexOfMessage","messages","indexOf","otherUserReaction","rec","uid","emojiToAdd","photoURL","content","emoji","displayName","handleReactionNicknames","reaction","nickname","assignedUsers","u","deleteEmojiReaction","isSpecial","prev","next","prevIsDate","nextIsDate","createdBy","handleMessageStyle","deleted","getElementById","scrollIntoView","block","setTimeout","classList","remove","scrollToResponse","image","fileType","style","padding","backgroundColor","target","showFullImage","controls","playsInline","map","onEmojiClick","Theme","DARK","previewConfig","defaultCaption","defaultEmoji","width","height","emojiStyle","EmojiStyle","NATIVE","viewBox","d","Number","Messages","setBottomDiv","currentUser","messageToDelete","history","useHistory","bottomRef","scrollDownRef","scrollToBottom","listen","deleteMessage","onScroll","winScroll","scrollTop","handleScrollDownBtn","FileSaver","saveAs","MessageField","messageResponse","bottomDiv","inputRef","uniqueId","uuid","newComment","setNewComment","imgUpload","setImgUpload","isAssignedUser","setIsAssignedUser","chatEmoji","fastEmoji","setFastEmoji","sendFastEmoji","setSendFastEmoji","fileInputRef","focus","assignedUsersId","sendMessage","commentToAdd","trim","updatedAt","isRead","sendImage","includes","split","storageRef","name","uploadBytes","then","getDownloadURL","downloadURL","handleImageUpload","imageFile","files","options","maxSizeMB","maxWidthOrHeight","useWebWorker","imageCompression","compressedFile","handleSubmit","preventDefault","fileThumbnail","setFileThumbnail","onSubmit","accept","onChange","URL","createObjectURL","handleFileChange","resetFileInput","maxLength","placeholder","onKeyDown","code","handleKey","handleEmojis","innerText","unified","size","ThemePreview","otherUserMessage","curUserMessage","textColors","inputColors","confirmCustomTheme","setConfirmCustomTheme","submitCustomTheme","editedTheme","setShowThemePicker","setShowThemeCreator","messageStyles","bg","text","border","messageOwnerStyles","backgroundImage","backgroundAttachment","backgroundPosition","backgroundSize","britImg","primary","accent","lowContrast","Field","title","ColorPicker","setValue","separator","ThemeCreator","setName","setBgDark","setBgSecondary","setBorderRadius","setCurUserMessage","setOtherUserMessage","setInputColors","btn","btnText","setTextColors","setButtonColor","themeToAdd","isCustom","customThemes","updateCustomThemes","index","newArr","required","Fragment","updateMessageBg","filter","c","random","min","max","ThemePicker","themes","setEditedTheme","setConfirmThemeDelete","confirmThemeDelete","changeTheme","removeCustomTheme","t","background","stopPropagation","editCustomTheme","ChatOptions","currentTheme","defaultThemeDoc","showEmojiPicker","setShowEmojiPicker","showNicknameModal","setShowNicknameModal","showNicknameInput","setShowNicknameInput","newNickname","setNewNickname","showThemePicker","showThemeCreator","changeChatEmoji","handleNicknameInput","Chat","setCurrentChat","useParams","users","showChatOptions","setShowChatOptions","setOtherUser","setCurrentUser","otherUserActive","setOtherUserActive","online","prevValue","toggle","useLogin","setIsPending","isFinished","setIsFinished","login","email","password","signInWithEmailAndPassword","res","loginWithGoogle","signInWithPopup","loginWithGithub","sendPasswordReset","sendPasswordResetEmail","resetPassword","newPassword","confirmPasswordReset","Login","setEmail","setPassword","to","googleLogo","githubLogo","Signup","setDisplayName","thumbnail","setThumbnail","thumbnailError","setThumbnailError","signup","createUserWithEmailAndPassword","uploadPath","put","img","imgUrl","updateProfile","set","signInWithGoogle","signInWithGithub","additionalUserInfo","username","useSignup","selected","PrivacyPolicy","class","ResetPassword","timeToRedirect","setTimeToRedirect","handlePasswordReset","countdown","redirectCountdown","setInterval","clearInterval","prevTimeToRedirect","ShrekGif","SetNewPassword","setNewPassword","oobCode","queryName","location","useLocation","URLSearchParams","search","get","useQuery","ChatsList","chats","currentChat","onlineUsers","rightUrl","rightDisplayName","rightId","replaceDistanceToNow","about","minutes","onMouseMove","getElementsByClassName","card","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","setProperty","undefined","formatDistanceToNowStrict","addSuffix","replace","matched","Chats","logout","signOut","useLogout","setQuery","eyes","handleMouseMove","eye","clientWidth","clientHeight","rotation","atan2","pageX","pageY","PI","transform","window","result","toLowerCase","filterChats","ToolBar","userDoc","latestChat","setLatestChat","currentPath","setCurrentPath","favs","setFavs","showFavs","setShowFavs","searchValue","setSearchValue","favsCopy","setFavsCopy","setChatsCopy","pinned","pathname","handleOnDragEnd","destination","items","Array","from","splice","source","reorderedItem","fav","exact","onDragEnd","droppableId","provided","droppableProps","innerRef","f","draggableId","draggable","draggableProps","dragHandleProps","thumb","userToAdd","chatToAdd","isGroup","item","direction","handleRemoveFav","isDropDisabled","isDragging","draggingOver","addFav","App","setTheme","filterTheme","themeToSet","filteredTheme","path","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.0f4f91b8.chunk.js","sourcesContent":["import firebase from 'firebase/compat/app'\r\nimport 'firebase/compat/firestore'\r\nimport 'firebase/compat/auth'\r\nimport 'firebase/compat/storage'\r\n\r\nconst firebaseConfig = {\r\n\tapiKey: 'AIzaSyBMB6C-_B61S1wd1RYAr34jomKZpvq16eA',\r\n\tauthDomain: 'better-react-messenger.firebaseapp.com',\r\n\tprojectId: 'better-react-messenger',\r\n\tstorageBucket: 'better-react-messenger.appspot.com',\r\n\tmessagingSenderId: '381225253186',\r\n\tappId: '1:381225253186:web:43a9fb8cce6b202f31f0db',\r\n}\r\n\r\n// Firebase init\r\nfirebase.initializeApp(firebaseConfig)\r\n\r\n// Services init\r\nconst projectFirestore = firebase.firestore()\r\nconst projectAuth = firebase.auth()\r\nconst projectStorage = firebase.storage()\r\n\r\nconst projectGoogle = new firebase.auth.GoogleAuthProvider()\r\nconst projectGitHub = new firebase.auth.GithubAuthProvider()\r\n\r\nprojectGoogle.setCustomParameters({ prompt: 'select_account' })\r\n// Timestamp\r\nconst timestamp = firebase.firestore.Timestamp\r\n\r\nexport { projectFirestore, projectAuth, timestamp, projectStorage, projectGoogle, projectGitHub }\r\n","import { createContext, useReducer, useEffect } from 'react'\nimport { projectAuth } from '../firebase/config'\n\nexport const AuthContext = createContext()\n\nexport const authReducer = (state, action) => {\n\tswitch (action.type) {\n\t\tcase 'LOGIN':\n\t\t\treturn { ...state, user: action.payload }\n\t\tcase 'LOGOUT':\n\t\t\treturn { ...state, user: null }\n\t\tcase 'AUTH_IS_READY':\n\t\t\treturn { user: action.payload, authIsReady: true }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const AuthContextProvider = ({ children }) => {\n\tconst [state, dispatch] = useReducer(authReducer, {\n\t\tuser: null,\n\t\tauthIsReady: false,\n\t})\n\n\tuseEffect(() => {\n\t\tconst unsub = projectAuth.onAuthStateChanged(user => {\n\t\t\tdispatch({ type: 'AUTH_IS_READY', payload: user })\n\t\t\tunsub()\n\t\t})\n\t}, [])\n\n\treturn <AuthContext.Provider value={{ ...state, dispatch }}>{children}</AuthContext.Provider>\n}\n","import { AuthContext } from \"../context/AuthContext\"\nimport { useContext } from \"react\"\n\nexport const useAuthContext = () => {\n  const context = useContext(AuthContext)\n\n  if(!context) {\n    throw Error('useAuthContext must be used inside an AuthContextProvider')\n  }\n\n  return context\n}","import { createGlobalStyle } from 'styled-components'\r\n\r\nconst spreadColors = theme => {\r\n\tlet colors = null\r\n\ttheme.colors.msgBgOwner.forEach(color => {\r\n\t\tcolors === null ? (colors = `${color.value}`) : (colors = `${colors}, ${color.value}`)\r\n\t})\r\n\r\n\tif (theme.colors.msgBgOwner.length === 1) {\r\n\t\treturn colors\r\n\t} else {\r\n\t\treturn `linear-gradient(${colors})`\r\n\t}\r\n}\r\n\r\n// function hexToHSL(H) {\r\n// \tif (H) {\r\n// \t\t// Convert hex to RGB first\r\n// \t\tlet r = 0,\r\n// \t\t\tg = 0,\r\n// \t\t\tb = 0\r\n// \t\tif (H.length === 4) {\r\n// \t\t\tr = '0x' + H[1] + H[1]\r\n// \t\t\tg = '0x' + H[2] + H[2]\r\n// \t\t\tb = '0x' + H[3] + H[3]\r\n// \t\t} else if (H.length === 7) {\r\n// \t\t\tr = '0x' + H[1] + H[2]\r\n// \t\t\tg = '0x' + H[3] + H[4]\r\n// \t\t\tb = '0x' + H[5] + H[6]\r\n// \t\t}\r\n// \t\t// Then to HSL\r\n// \t\tr /= 255\r\n// \t\tg /= 255\r\n// \t\tb /= 255\r\n// \t\tlet cmin = Math.min(r, g, b),\r\n// \t\t\tcmax = Math.max(r, g, b),\r\n// \t\t\tdelta = cmax - cmin,\r\n// \t\t\th = 0,\r\n// \t\t\ts = 0,\r\n// \t\t\tl = 0\r\n\r\n// \t\tif (delta === 0) h = 0\r\n// \t\telse if (cmax === r) h = ((g - b) / delta) % 6\r\n// \t\telse if (cmax === g) h = (b - r) / delta + 2\r\n// \t\telse h = (r - g) / delta + 4\r\n\r\n// \t\th = Math.round(h * 60)\r\n\r\n// \t\tif (h < 0) h += 360\r\n\r\n// \t\tl = (cmax + cmin) / 2\r\n// \t\ts = delta === 0 ? 0 : delta / (1 - Math.abs(2 * l - 1))\r\n// \t\ts = +(s * 100).toFixed(1)\r\n// \t\tl = +(l * 100).toFixed(1)\r\n\r\n// \t\treturn 'hsl(' + h + ',' + s + '%,' + l + '%)'\r\n// \t}\r\n// }\r\n\r\nfunction adjustBrightness(col, amt) {\r\n\tvar usePound = false\r\n\tif (col) {\r\n\t\tif (col[0] === '#') {\r\n\t\t\tcol = col.slice(1)\r\n\t\t\tusePound = true\r\n\t\t}\r\n\r\n\t\tvar R = parseInt(col.substring(0, 2), 16)\r\n\t\tvar G = parseInt(col.substring(2, 4), 16)\r\n\t\tvar B = parseInt(col.substring(4, 6), 16)\r\n\r\n\t\t// to make the colour less bright than the input\r\n\t\t// change the following three \"+\" symbols to \"-\"\r\n\t\tR = R + amt\r\n\t\tG = G + amt\r\n\t\tB = B + amt\r\n\r\n\t\tif (R > 255) R = 255\r\n\t\telse if (R < 0) R = 0\r\n\r\n\t\tif (G > 255) G = 255\r\n\t\telse if (G < 0) G = 0\r\n\r\n\t\tif (B > 255) B = 255\r\n\t\telse if (B < 0) B = 0\r\n\r\n\t\tvar RR = R.toString(16).length === 1 ? '0' + R.toString(16) : R.toString(16)\r\n\t\tvar GG = G.toString(16).length === 1 ? '0' + G.toString(16) : G.toString(16)\r\n\t\tvar BB = B.toString(16).length === 1 ? '0' + B.toString(16) : B.toString(16)\r\n\r\n\t\treturn (usePound ? '#' : '') + RR + GG + BB\r\n\t}\r\n}\r\n\r\nexport const GlobalStyles = createGlobalStyle`\r\n#root {\r\n    --bg-dark: ${({ theme }) => theme.colors.bgDark};\r\n    --bg-dark-lighten5: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 5)};\r\n    --bg-dark-lighten10: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 10)};\r\n    --bg-dark-lighten15: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 15)};\r\n    --bg-dark-lighten20: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 20)};\r\n    --bg-dark-lighten90: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 90)};\r\n    --bg-dark-lighten120: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 120)};\r\n    --bg-dark-darken80: #0000ff;\r\n\r\n    --bg-secondary: ${({ theme }) => theme.colors.bgSecondary};\r\n\t--bg-secondary-lighten5: ${({ theme }) => adjustBrightness(theme.colors.bgSecondary, 5)};\r\n\t--bg-secondary-lighten10: ${({ theme }) => adjustBrightness(theme.colors.bgSecondary, 10)};\r\n\t--bg-secondary-lighten15: ${({ theme }) => adjustBrightness(theme.colors.bgSecondary, 15)};\r\n\t--bg-secondary-lighten50: ${({ theme }) => adjustBrightness(theme.colors.bgSecondary, 50)};\r\n\r\n    --input-bg: ${({ theme }) => theme.colors.inputBg};\r\n    --input-text: ${({ theme }) => theme.colors.inputText};\r\n\t--input-border: ${({ theme }) => theme.colors.inputBorder};\r\n\r\n    --message-bg: ${({ theme }) => theme.colors.msgBg};\r\n    --message-color: ${({ theme }) => theme.colors.messageColor};\r\n\t--message-border: ${({ theme }) => theme.colors.msgBorder};\r\n\t\r\n    --message-bg-owner: ${({ theme }) => spreadColors(theme)};\r\n    --message-color-owner: ${({ theme }) => theme.colors.messageColorOwner};\r\n\t--message-border-owner: ${({ theme }) => theme.colors.msgBorderOwner};\r\n\t\r\n    --text-accent: ${({ theme }) => theme.colors.textAccent};\r\n    --text-accent-darken25: ${({ theme }) => adjustBrightness(theme.colors.textAccent, -25)};\r\n    --text-accent-darken35: ${({ theme }) => adjustBrightness(theme.colors.textAccent, -55)};\r\n\r\n    --border-radius: ${({ theme }) => theme.borderRadius}px;\r\n    --border-color: ${({ theme }) => adjustBrightness(theme.colors.bgDark, 15)};\r\n\r\n    --text-primary:  ${({ theme }) => theme.colors.textPrimary};\r\n    --text-primary-darken100:  ${({ theme }) => adjustBrightness(theme.colors.textPrimary, -100)};\r\n\r\n    --text-heading: ${({ theme }) => adjustBrightness(theme.colors.textPrimary, 30)};\r\n    --text-low-contrast: ${({ theme }) => theme.colors.textLowContrast}; \r\n    --text-mid-contrast: ${({ theme }) => adjustBrightness(theme.colors.textLowContrast, 40)}; \r\n\t\r\n    --btn-text: ${({ theme }) => theme.colors.buttonColor};\r\n\r\n}\r\n`\r\n","import { useEffect, useState, useRef } from \"react\"\nimport { projectFirestore } from \"../firebase/config\"\n\nexport const useCollection = (collection, _query, _orderBy) => {\n  const [documents, setDocuments] = useState(null)\n  const [error, setError] = useState(null)\n\n  // if we don't use a ref --> infinite loop in useEffect\n  // _query is an array and is \"different\" on every function call\n  const query = useRef(_query).current\n  const orderBy = useRef(_orderBy).current\n\n  useEffect(() => {\n    let ref = projectFirestore.collection(collection)\n\n    if (query) {\n      ref = ref.where(...query)\n    }\n    if (orderBy) {\n      ref = ref.orderBy(...orderBy)\n    }\n\n    const unsubscribe = ref.onSnapshot(snapshot => {\n      let results = []\n      snapshot.docs.forEach(doc => {\n        results.push({...doc.data(), id: doc.id})\n      });\n      \n      // update state\n      setDocuments(results)\n      setError(null)\n    }, error => {\n      console.log(error)\n      setError('could not fetch the data')\n    })\n\n    // unsubscribe on unmount\n    return () => unsubscribe()\n\n  }, [collection, query, orderBy])\n\n  return { documents, error }\n}","// Styles\r\nimport './Dashboard.scss'\r\n\r\nexport default function Dashboard() {\r\n\treturn <div className='dashboard'></div>\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { projectFirestore } from '../firebase/config'\r\n\r\nexport const useDocument = (collection, id) => {\r\n\tconst [document, setDocument] = useState(null)\r\n\tconst [error, setError] = useState(null)\r\n\r\n\t// Realtime data for document\r\n\tuseEffect(() => {\r\n\t\tif (id !== null) {\r\n\t\t\tconst ref = projectFirestore.collection(collection).doc(id)\r\n\r\n\t\t\tconst unsub = ref.onSnapshot(\r\n\t\t\t\tsnapshot => {\r\n\t\t\t\t\tif (snapshot.data()) {\r\n\t\t\t\t\t\tsetDocument({ ...snapshot.data(), id: snapshot.id })\r\n\t\t\t\t\t\tsetError(null)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetError('No such document exists')\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terr => {\r\n\t\t\t\t\tconsole.log(err.message)\r\n\t\t\t\t\tsetError('Failed to get document')\r\n\t\t\t\t}\r\n\t\t\t)\r\n\r\n\t\t\treturn () => unsub()\r\n\t\t}\r\n\t}, [collection, id])\r\n\r\n\treturn { document, error }\r\n}\r\n","import { useReducer, useEffect, useState } from 'react'\nimport { projectFirestore, timestamp } from '../firebase/config'\n\nlet initialState = {\n\tdocument: null,\n\tisPending: false,\n\terror: null,\n\tsuccess: null,\n}\n\nconst firestoreReducer = (state, action) => {\n\tswitch (action.type) {\n\t\tcase 'IS_PENDING':\n\t\t\treturn { isPending: true, document: null, success: false, error: null }\n\t\tcase 'ADDED_DOCUMENT':\n\t\t\treturn { isPending: false, document: action.payload, success: true, error: null }\n\t\tcase 'DELETED_DOCUMENT':\n\t\t\treturn { isPending: false, document: null, success: true, error: null }\n\t\tcase 'UPDATED_DOCUMENT':\n\t\t\treturn { isPending: false, document: action.payload, success: true, error: null }\n\t\tcase 'ERROR':\n\t\t\treturn { isPending: false, document: null, success: false, error: action.payload }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport const useFirestore = collection => {\n\tconst [response, dispatch] = useReducer(firestoreReducer, initialState)\n\tconst [isCancelled, setIsCancelled] = useState(false)\n\n\t// Collection ref\n\tconst ref = projectFirestore.collection(collection)\n\n\t// Only dispatch is not cancelled\n\tconst dispatchIfNotCancelled = action => {\n\t\tif (!isCancelled) {\n\t\t\tdispatch(action)\n\t\t}\n\t}\n\n\t// Add a document\n\tconst addDocument = async doc => {\n\t\tdispatch({ type: 'IS_PENDING' })\n\n\t\ttry {\n\t\t\tconst createdAt = timestamp.fromDate(new Date())\n\n\t\t\tconst addedDocument = await ref.add({ ...doc, createdAt })\n\t\t\tdispatchIfNotCancelled({ type: 'ADDED_DOCUMENT', payload: addedDocument })\n\t\t} catch (err) {\n\t\t\tdispatchIfNotCancelled({ type: 'ERROR', payload: err.message })\n\t\t}\n\t}\n\n\t// Delete a document\n\tconst deleteDocument = async id => {\n\t\tdispatch({ type: 'IS_PENDING' })\n\n\t\ttry {\n\t\t\tawait ref.doc(id).delete()\n\t\t\tdispatchIfNotCancelled({ type: 'DELETED_DOCUMENT' })\n\t\t} catch (err) {\n\t\t\tdispatchIfNotCancelled({ type: 'ERROR', payload: 'could not delete' })\n\t\t}\n\t}\n\n\t// Update documents\n\n\tconst updateDocument = async (id, updates) => {\n\t\tdispatch({ type: 'IS_PENDING' })\n\n\t\ttry {\n\t\t\tconst updatedDocument = await ref.doc(id).update(updates)\n\n\t\t\tdispatchIfNotCancelled({ type: 'UPDATED_DOCUMENT', payload: updatedDocument })\n\t\t\treturn updatedDocument\n\t\t} catch (err) {\n\t\t\tdispatchIfNotCancelled({ type: 'ERROR', payload: err.message })\n\t\t\treturn null\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\treturn () => setIsCancelled(true)\n\t}, [])\n\n\treturn { addDocument, deleteDocument, updateDocument, response }\n}\n","export const useDates = () => {\r\n\tlet today = new Date().toLocaleDateString()\r\n\tlet weekday = []\r\n\tlet dayOfMonth, dayOfWeek, month, year, hour, curDate, fullDate\r\n\r\n\tconst dates = dateToFormat => {\r\n\t\tconst date = dateToFormat.toDate()\r\n\t\tweekday = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\r\n\t\tdayOfWeek = weekday[date.getDay()]\r\n\r\n\t\tyear = date.getFullYear()\r\n\r\n\t\tmonth = date.getMonth() + 1 < 10 ? '0' + date.getMonth() + 1 : date.getMonth() + 1\r\n\r\n\t\tdayOfMonth = date.getDate() < 10 ? '0' + date.getDate().toString() : date.getDate().toString()\r\n\r\n\t\tcurDate = `${dayOfMonth}/${month}/${year}`\r\n\t\thour = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\r\n\t\tfullDate = `${dayOfMonth}.${month}.${year}, ${hour}`\r\n\r\n\t\treturn { weekday, dayOfWeek, year, month, dayOfMonth, curDate, hour, fullDate }\r\n\t}\r\n\r\n\tconst isCurrentWeek = dateToFormat => {\r\n\t\tlet lastMonday = new Date() // Creating new date object for today\r\n\t\tlastMonday.setDate(lastMonday.getDate() - (lastMonday.getDay() - 1)) // Setting date to last monday\r\n\t\tlastMonday.setHours(0, 0, 0, 0) // Setting Hour to 00:00:00:00\r\n\r\n\t\tconst res =\r\n\t\t\tlastMonday.getTime() <= dateToFormat.getTime() && dateToFormat.getTime() < lastMonday.getTime() + 604800000\r\n\r\n\t\treturn res\r\n\t}\r\n\r\n\tconst formatDate = comment => {\r\n\t\tconst date = comment.createdAt.toDate()\r\n\r\n\t\tweekday = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\r\n\t\tdayOfWeek = weekday[date.getDay()]\r\n\r\n\t\tyear = date.getFullYear()\r\n\r\n\t\tmonth = date.getMonth() + 1 < 10 ? '0' + date.getMonth() + 1 : date.getMonth() + 1\r\n\r\n\t\tdayOfMonth = date.getDate() < 10 ? '0' + date.getDate().toString() : date.getDate().toString()\r\n\r\n\t\tcurDate = `${dayOfMonth}/${month}/${year}`\r\n\t\thour = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\r\n\t\tif (curDate === today) {\r\n\t\t\treturn hour\r\n\t\t} else if (isCurrentWeek(date)) {\r\n\t\t\treturn `${dayOfWeek}. ${hour}`\r\n\t\t} else {\r\n\t\t\treturn `${dayOfMonth}.${month}.${year}, ${hour}`\r\n\t\t}\r\n\t}\r\n\r\n\treturn { formatDate, dates, dayOfMonth, dayOfWeek, month, year, hour, curDate }\r\n}\r\n","// Styles\r\nimport './Avatar.scss'\r\n\r\nexport default function Avatar({ src }) {\r\n\treturn (\r\n\t\t<div className='avatar'>\r\n\t\t\t<img src={src} alt='' />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useCallback, useEffect } from 'react'\r\n\r\nconst KEY_NAME_ESC = 'Escape'\r\nconst KEY_EVENT_TYPE = 'keyup'\r\n\r\nexport function useEscapeKey(handleClose) {\r\n\tconst handleEscKey = useCallback(\r\n\t\tevent => {\r\n\t\t\tif (event.key === KEY_NAME_ESC) {\r\n\t\t\t\thandleClose()\r\n\t\t\t}\r\n\t\t},\r\n\t\t[handleClose]\r\n\t)\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener(KEY_EVENT_TYPE, handleEscKey, false)\r\n\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(KEY_EVENT_TYPE, handleEscKey, false)\r\n\t\t}\r\n\t}, [handleEscKey])\r\n}\r\n","import { useEffect } from 'react'\r\nimport OutsideClickHandler from 'react-outside-click-handler'\r\nimport { useEscapeKey } from '../../hooks/useEscapeKey'\r\n\r\n// Styles\r\nimport './Modal.scss'\r\n\r\nexport default function Modal({ children, show, setShow, onClose, disableOCH }) {\r\n\tuseEffect(() => {\r\n\t\tif (show === false && onClose) {\r\n\t\t\tonClose()\r\n\t\t}\r\n\t}, [show])\r\n\r\n\tconst hideModal = () => {\r\n\t\tsetShow()\r\n\t}\r\n\r\n\tuseEscapeKey(hideModal)\r\n\r\n\treturn (\r\n\t\tshow && (\r\n\t\t\t<div className='modal'>\r\n\t\t\t\t<OutsideClickHandler\r\n\t\t\t\t\tonOutsideClick={() => {\r\n\t\t\t\t\t\tsetShow()\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tdisabled={disableOCH}>\r\n\t\t\t\t\t<div className='modal__content'>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t\t<i className='fa-solid fa-xmark close-btn' onClick={() => setShow()}></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</OutsideClickHandler>\r\n\t\t\t</div>\r\n\t\t)\r\n\t)\r\n}\r\n","import React from 'react'\r\nimport { useState } from 'react'\r\nimport { useAuthContext } from '../../../../hooks/useAuthContext'\r\nimport { useFirestore } from '../../../../hooks/useFirestore'\r\nimport EmojiPicker, { EmojiStyle, Theme } from 'emoji-picker-react'\r\nimport { useDates } from '../../../../hooks/useDates'\r\nimport OutsideClickHandler from 'react-outside-click-handler'\r\n\r\n// Styles && Assets\r\nimport './Message.scss'\r\nimport Avatar from '../../../../components/Avatar/Avatar'\r\nimport Modal from '../../../../components/Modal/Modal'\r\n\r\nexport default function Message({\r\n\tmessage,\r\n\telements,\r\n\ti,\r\n\tchat,\r\n\tonMessageResponse,\r\n\tsetMessageToDelete,\r\n\tshowImage,\r\n\tsetShowImage,\r\n\totherUser,\r\n}) {\r\n\tconst { user } = useAuthContext()\r\n\tconst { updateDocument } = useFirestore('projects')\r\n\tconst { formatDate } = useDates()\r\n\r\n\tconst [showEmojis, setShowEmojis] = useState(null)\r\n\tconst [showModal, setShowModal] = useState(false)\r\n\tconst [emojiReactions, setEmojiReactions] = useState([])\r\n\r\n\tconst showSendDate = (elements, i) => {\r\n\t\tif (elements[i] && elements[i - 1]) {\r\n\t\t\tconst value1 = elements[i].createdAt.toDate().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\t\t\tconst value2 = elements[i - 1].createdAt.toDate().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\r\n\t\t\t// Get miliseconds of each message.createdAt\r\n\t\t\tconst date1 = new Date('01/01/2022 ' + value1 + ':00').getTime()\r\n\t\t\tconst date2 = new Date('01/01/2022 ' + value2 + ':00').getTime()\r\n\r\n\t\t\tconst minuteDiff = Math.abs(date1 - date2)\r\n\r\n\t\t\t// Check if difference between when message was created is greater than 15 minutes\r\n\t\t\tif (minuteDiff >= 900000) {\r\n\t\t\t\treturn true\r\n\t\t\t} else {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst showSendDate2 = (elements, i) => {\r\n\t\tif (elements[i + 1] && elements[i]) {\r\n\t\t\tconst value1 = elements[i + 1].createdAt.toDate().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\t\t\tconst value2 = elements[i].createdAt.toDate().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n\r\n\t\t\t// Get miliseconds of each message.createdAt\r\n\t\t\tconst date1 = new Date('01/01/2022 ' + value1 + ':00').getTime()\r\n\t\t\tconst date2 = new Date('01/01/2022 ' + value2 + ':00').getTime()\r\n\r\n\t\t\tconst minuteDiff = Math.abs(date1 - date2)\r\n\r\n\t\t\t// Check if difference between when message was created is greater than 15 minutes\r\n\t\t\tif (minuteDiff >= 900000) {\r\n\t\t\t\treturn true\r\n\t\t\t} else {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst showFullImage = e => {\r\n\t\tif (showImage !== e.target.src) {\r\n\t\t\tsetShowImage(e.target.src)\r\n\t\t}\r\n\t}\r\n\r\n\tconst scrollToResponse = id => {\r\n\t\tconst ref = document.getElementById(id)\r\n\t\tref.scrollIntoView({ block: 'center' })\r\n\t\tsetTimeout(() => {\r\n\t\t\tref.classList.add('pop')\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tref.classList.remove('pop')\r\n\t\t\t}, 800)\r\n\t\t}, 400)\r\n\t}\r\n\r\n\tconst reactWithEmoji = async (e, message) => {\r\n\t\tconst indexOfMessage = chat.messages.indexOf(message)\r\n\r\n\t\tlet otherUserReaction = null\r\n\r\n\t\tif (message.emojiReactions && message.emojiReactions.length > 0) {\r\n\t\t\tmessage.emojiReactions.forEach(rec => {\r\n\t\t\t\tif (rec !== null) {\r\n\t\t\t\t\tif (rec.id !== user.uid) {\r\n\t\t\t\t\t\totherUserReaction = rec\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tconst emojiToAdd = {\r\n\t\t\tid: user.uid,\r\n\t\t\tphotoURL: user.photoURL,\r\n\t\t\tcontent: e.emoji,\r\n\t\t\tdisplayName: user.displayName,\r\n\t\t}\r\n\r\n\t\tchat.messages[indexOfMessage] = {\r\n\t\t\t...chat.messages[indexOfMessage],\r\n\t\t\temojiReactions: [\r\n\t\t\t\totherUserReaction ? otherUserReaction : null,\r\n\t\t\t\t{\r\n\t\t\t\t\t...emojiToAdd,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\tmessages: [...chat.messages],\r\n\t\t\t})\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleMessageStyle = (message, prev, next, prevIsDate, nextIsDate) => {\r\n\t\tif (\r\n\t\t\tnext &&\r\n\t\t\t(!prev ||\r\n\t\t\t\tprev.createdBy !== message.createdBy ||\r\n\t\t\t\tnext.response !== null ||\r\n\t\t\t\tprevIsDate ||\r\n\t\t\t\tmessage.response !== null) &&\r\n\t\t\tnext.createdBy === message.createdBy &&\r\n\t\t\tnext.response === null &&\r\n\t\t\t!nextIsDate\r\n\t\t) {\r\n\t\t\tif (message.createdBy === user.uid) {\r\n\t\t\t\treturn 'group-top owner'\r\n\t\t\t} else {\r\n\t\t\t\treturn 'group-top'\r\n\t\t\t}\r\n\t\t} else if (\r\n\t\t\tprev &&\r\n\t\t\tnext &&\r\n\t\t\t(prev.createdBy === message.createdBy || prev.response !== null) &&\r\n\t\t\tnext.createdBy === message.createdBy &&\r\n\t\t\tnext.response === null &&\r\n\t\t\t!prevIsDate &&\r\n\t\t\t!nextIsDate\r\n\t\t) {\r\n\t\t\tif (message.createdBy === user.uid) {\r\n\t\t\t\treturn 'group-middle owner'\r\n\t\t\t} else {\r\n\t\t\t\treturn 'group-middle'\r\n\t\t\t}\r\n\t\t} else if (\r\n\t\t\t// prettier-ignore\r\n\t\t\tprev &&\r\n\t\t\tprev.createdBy === message.createdBy &&\r\n\t\t\tmessage.response === null &&\r\n\t\t\t(\r\n\t\t\t\t(!next && message.response === null) ||\r\n\t\t\t\t(\r\n\t\t\t\t\tnext && \r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tnext.response !== null ||\r\n\t\t\t\t\t\tnext.createdBy !== message.createdBy ||\r\n\t\t\t\t\t\tnextIsDate\r\n\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t) &&\r\n\t\t\t!prevIsDate\r\n\t\t) {\r\n\t\t\tif (message.createdBy === user.uid) {\r\n\t\t\t\treturn 'group-bottom owner'\r\n\t\t\t} else {\r\n\t\t\t\treturn 'group-bottom'\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (message.createdBy === user.uid) {\r\n\t\t\t\treturn 'owner'\r\n\t\t\t} else {\r\n\t\t\t\treturn ''\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleReactionNicknames = reaction => {\r\n\t\tlet nickname\r\n\t\tchat.assignedUsers.forEach(u => {\r\n\t\t\tif (u.id === reaction.id) {\r\n\t\t\t\tif (u.nickname !== '') {\r\n\t\t\t\t\tnickname = u.nickname\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnickname = u.displayName\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn nickname\r\n\t}\r\n\r\n\tconst deleteEmojiReaction = async (message, reaction) => {\r\n\t\tlet otherUserReaction = null\r\n\t\tif (reaction.id === user.uid) {\r\n\t\t\tif (message.emojiReactions.length > 0) {\r\n\t\t\t\t// otherUserReaction = message.emojiReactions.find(rec => rec.id !== user.uid)\r\n\r\n\t\t\t\tmessage.emojiReactions.forEach(rec => {\r\n\t\t\t\t\tif (rec !== null && rec.id !== user.uid) {\r\n\t\t\t\t\t\totherUserReaction = rec\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tconst indexOfMessage = chat.messages.indexOf(message)\r\n\r\n\t\t\tchat.messages[indexOfMessage] = {\r\n\t\t\t\t...chat.messages[indexOfMessage],\r\n\t\t\t\temojiReactions: [otherUserReaction],\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\t\tmessages: [...chat.messages],\r\n\t\t\t\t})\r\n\t\t\t\tsetEmojiReactions([])\r\n\t\t\t\tsetShowModal(false)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{message.isSpecial && <div className='messages__centered mb05'>{message.content}</div>}\r\n\t\t\t{!message.isSpecial && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{showSendDate(elements, i) && <div className='messages__centered mb1 mt2'>{formatDate(message)}</div>}\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tclassName={`${handleMessageStyle(\r\n\t\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\t\telements[i - 1],\r\n\t\t\t\t\t\t\telements[i + 1],\r\n\t\t\t\t\t\t\tshowSendDate(elements, i),\r\n\t\t\t\t\t\t\tshowSendDate2(elements, i)\r\n\t\t\t\t\t\t)} ${message.deleted ? 'deleted' : ''} ${message.emojiReactions ? 'emoji-response' : ''}`}\r\n\t\t\t\t\t\tid={message.id}>\r\n\t\t\t\t\t\t{message.createdBy !== user.uid && // top\r\n\t\t\t\t\t\t\t((elements[i + 1] &&\r\n\t\t\t\t\t\t\t\t(!elements[i - 1] ||\r\n\t\t\t\t\t\t\t\t\telements[i - 1].createdBy !== message.createdBy ||\r\n\t\t\t\t\t\t\t\t\telements[i + 1].response !== null ||\r\n\t\t\t\t\t\t\t\t\tshowSendDate(elements, i) ||\r\n\t\t\t\t\t\t\t\t\tmessage.response !== null) &&\r\n\t\t\t\t\t\t\t\telements[i + 1].createdBy === message.createdBy &&\r\n\t\t\t\t\t\t\t\telements[i + 1].response === null &&\r\n\t\t\t\t\t\t\t\t!showSendDate2(elements, i)) ||\r\n\t\t\t\t\t\t\t\t!(\r\n\t\t\t\t\t\t\t\t\t// middle\r\n\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t(elements[i - 1] &&\r\n\t\t\t\t\t\t\t\t\t\t\telements[i + 1] &&\r\n\t\t\t\t\t\t\t\t\t\t\t(elements[i - 1].createdBy === message.createdBy || elements[i - 1].response !== null) &&\r\n\t\t\t\t\t\t\t\t\t\t\telements[i + 1].createdBy === message.createdBy &&\r\n\t\t\t\t\t\t\t\t\t\t\telements[i + 1].response === null &&\r\n\t\t\t\t\t\t\t\t\t\t\t!showSendDate(elements, i) &&\r\n\t\t\t\t\t\t\t\t\t\t\t!showSendDate2(elements, i)) ||\r\n\t\t\t\t\t\t\t\t\t\t// bottom\r\n\t\t\t\t\t\t\t\t\t\t(elements[i - 1] &&\r\n\t\t\t\t\t\t\t\t\t\t\telements[i - 1].createdBy === message.createdBy &&\r\n\t\t\t\t\t\t\t\t\t\t\tmessage.response === null &&\r\n\t\t\t\t\t\t\t\t\t\t\t((!elements[i + 1] && message.response === null) ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t(elements[i + 1] &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t(elements[i + 1].response !== null ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telements[i + 1].createdBy !== message.createdBy ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowSendDate2(elements, i)))) &&\r\n\t\t\t\t\t\t\t\t\t\t\t!showSendDate(elements, i))\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)) && <p className='message-author'>{otherUser.nickname}</p>}\r\n\r\n\t\t\t\t\t\t{message.response !== null && (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tonClick={() => scrollToResponse(chat.messages[message.response].id)}\r\n\t\t\t\t\t\t\t\tclassName={`response ${chat.messages[message.response].deleted ? 'deleted' : ''}`}>\r\n\t\t\t\t\t\t\t\t{message.createdBy !== user.uid && <div className='left-margin'></div>}\r\n\r\n\t\t\t\t\t\t\t\t{chat.messages[message.response].content && (\r\n\t\t\t\t\t\t\t\t\t<div className='response__message'>{chat.messages[message.response].content.substring(0, 55)}</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t<div className='response__img'>\r\n\t\t\t\t\t\t\t\t\t{chat.messages[message.response].image &&\r\n\t\t\t\t\t\t\t\t\t\t(chat.messages[message.response].fileType === 'image' ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<img src={chat.messages[message.response].image} alt='' />\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<video src={chat.messages[message.response].image}></video>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div className='message-content'>\r\n\t\t\t\t\t\t\t{message.createdBy !== user.uid && (\r\n\t\t\t\t\t\t\t\t<div className='left-margin'>\r\n\t\t\t\t\t\t\t\t\t{!(\r\n\t\t\t\t\t\t\t\t\t\t// middle\r\n\t\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t\telements[i - 1] &&\r\n\t\t\t\t\t\t\t\t\t\t\telements[i + 1] &&\r\n\t\t\t\t\t\t\t\t\t\t\t(elements[i - 1].createdBy === message.createdBy || elements[i - 1].response !== null) &&\r\n\t\t\t\t\t\t\t\t\t\t\telements[i + 1].createdBy === message.createdBy &&\r\n\t\t\t\t\t\t\t\t\t\t\telements[i + 1].response === null &&\r\n\t\t\t\t\t\t\t\t\t\t\t!showSendDate(elements, i) &&\r\n\t\t\t\t\t\t\t\t\t\t\t!showSendDate2(elements, i)\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t) &&\r\n\t\t\t\t\t\t\t\t\t\t!(\r\n\t\t\t\t\t\t\t\t\t\t\t// top\r\n\t\t\t\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\t\t\t\telements[i + 1] &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t(!elements[i - 1] ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\telements[i - 1].createdBy !== message.createdBy ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\telements[i + 1].response !== null ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowSendDate(elements, i) ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmessage.response !== null) &&\r\n\t\t\t\t\t\t\t\t\t\t\t\telements[i + 1].createdBy === message.createdBy &&\r\n\t\t\t\t\t\t\t\t\t\t\t\telements[i + 1].response === null &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t!showSendDate2(elements, i)\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t) && <Avatar src={message.photoURL} />}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName='message-content__text'\r\n\t\t\t\t\t\t\t\tstyle={message.image ? { padding: 0, backgroundColor: 'transparent' } : null}>\r\n\t\t\t\t\t\t\t\t{message.content && <p>{message.content}</p>}\r\n\r\n\t\t\t\t\t\t\t\t{message.image && message.fileType === 'image' && (\r\n\t\t\t\t\t\t\t\t\t<div className='file-message' onClick={e => showFullImage(e)}>\r\n\t\t\t\t\t\t\t\t\t\t<img src={message.image} alt='' />\r\n\t\t\t\t\t\t\t\t\t\t<div className='file-message__preview'>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-up-right-and-down-left-from-center'></i>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{message.image && message.fileType === 'video' && (\r\n\t\t\t\t\t\t\t\t\t<div className='file-message'>\r\n\t\t\t\t\t\t\t\t\t\t<video src={message.image} controls playsInline />\r\n\t\t\t\t\t\t\t\t\t\t<div className='file-message__preview'>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-up-right-and-down-left-from-center'></i>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{message.emojiReactions && message.emojiReactions.length > 0 && (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='emoji-reactions'\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetEmojiReactions(message.emojiReactions)\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetShowModal(true)\r\n\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t{message.emojiReactions.map(reaction =>\r\n\t\t\t\t\t\t\t\t\t\t\t\treaction !== null ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={reaction.id} className='emoji-reactions__reaction'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='content'>{reaction.content}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='display-name'>{handleReactionNicknames(reaction)}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Modal show={showModal} setShow={() => setShowModal(false)} onClose={() => setEmojiReactions([])}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='show-reactions'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h3>Reactions</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{emojiReactions.map(reaction =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treaction !== null ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`reaction ${reaction.id === user.uid ? 'cursor-pointer' : ''}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteEmojiReaction(message, reaction)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={reaction.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='reaction__author'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={reaction.photoURL} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{reaction.displayName}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{reaction.id === user.uid && <p>Click to delete</p>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className='reaction__emoji'>{reaction.content}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Modal>\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{showEmojis === message && (\r\n\t\t\t\t\t\t\t\t<div className='react-with-emoji'>\r\n\t\t\t\t\t\t\t\t\t<OutsideClickHandler\r\n\t\t\t\t\t\t\t\t\t\tonOutsideClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowEmojis(null)\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={showEmojis === message ? false : true}>\r\n\t\t\t\t\t\t\t\t\t\t<EmojiPicker\r\n\t\t\t\t\t\t\t\t\t\t\tclassName='emoji-picker'\r\n\t\t\t\t\t\t\t\t\t\t\tonEmojiClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treactWithEmoji(e, message)\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\ttheme={Theme.DARK}\r\n\t\t\t\t\t\t\t\t\t\t\tpreviewConfig={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultCaption: '',\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultEmoji: null,\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\twidth={300}\r\n\t\t\t\t\t\t\t\t\t\t\theight={400}\r\n\t\t\t\t\t\t\t\t\t\t\t// lazyLoadEmojis={true}\r\n\t\t\t\t\t\t\t\t\t\t\temojiStyle={EmojiStyle.NATIVE}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</OutsideClickHandler>\r\n\r\n\t\t\t\t\t\t\t\t\t<svg height='12' viewBox='0 0 25 12' width='25' data-darkreader-inline-fill=''>\r\n\t\t\t\t\t\t\t\t\t\t<path d='M24.553.103c-2.791.32-5.922 1.53-7.78 3.455l-9.62 7.023c-2.45 2.54-5.78 1.645-5.78-2.487V2.085C1.373 1.191.846.422.1.102h24.453z'></path>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{!message.deleted && (\r\n\t\t\t\t\t\t\t\t<div className={`message-tools ${showEmojis === message ? 'visible' : ''}`}>\r\n\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\tclassName='fa-regular fa-face-smile'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetShowEmojis(message)\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<div className='tool-tip'>React</div>\r\n\t\t\t\t\t\t\t\t\t</i>\r\n\r\n\t\t\t\t\t\t\t\t\t{user.uid === message.createdBy && (\r\n\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-trash-can' onClick={() => setMessageToDelete(message)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className='tool-tip'>Remove</div>\r\n\t\t\t\t\t\t\t\t\t\t</i>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\tclassName='fa-solid fa-reply'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tonMessageResponse(Number(chat.messages.indexOf(message)))\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<div className='tool-tip'>Reply</div>\r\n\t\t\t\t\t\t\t\t\t</i>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t<div className={`message-createdAt ${showEmojis === message ? 'hidden' : ''}`}>{formatDate(message)}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { useAuthContext } from '../../../hooks/useAuthContext'\r\nimport { useDates } from '../../../hooks/useDates'\r\nimport { useFirestore } from '../../../hooks/useFirestore'\r\nimport { useHistory } from 'react-router-dom'\r\nimport FileSaver from 'file-saver'\r\nimport Message from './Message/Message'\r\n\r\n// Styles && Assets\r\nimport './Messages.scss'\r\nimport Modal from '../../../components/Modal/Modal'\r\n\r\nconst Messages = ({ chat, onMessageResponse, setBottomDiv, otherUser, currentUser }) => {\r\n\tconst { user } = useAuthContext()\r\n\tconst { dates } = useDates()\r\n\tconst { updateDocument } = useFirestore('projects')\r\n\r\n\tconst [showImage, setShowImage] = useState('')\r\n\tconst [messageToDelete, setMessageToDelete] = useState(null)\r\n\tconst [showModal, setShowModal] = useState(false)\r\n\r\n\tconst history = useHistory()\r\n\tconst bottomRef = useRef()\r\n\tconst scrollDownRef = useRef()\r\n\r\n\tuseEffect(() => {\r\n\t\tsetBottomDiv(bottomRef)\r\n\t\tscrollToBottom()\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\treturn history.listen(() => {\r\n\t\t\tsetBottomDiv(bottomRef)\r\n\t\t\tscrollToBottom()\r\n\t\t\tonMessageResponse(null)\r\n\t\t})\r\n\t}, [history])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (messageToDelete !== null) {\r\n\t\t\tsetShowModal(true)\r\n\t\t} else {\r\n\t\t\tsetShowModal(false)\r\n\t\t}\r\n\t}, [messageToDelete, showModal])\r\n\r\n\tconst deleteMessage = async message => {\r\n\t\tif (user.uid === message.createdBy) {\r\n\t\t\tchat.messages[chat.messages.indexOf(message)] = {\r\n\t\t\t\t...chat.messages[chat.messages.indexOf(message)],\r\n\t\t\t\tcontent: 'Message deleted',\r\n\t\t\t\temojiReactions: null,\r\n\t\t\t\tdeleted: true,\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\t\tmessages: [...chat.messages],\r\n\t\t\t\t})\r\n\t\t\t\tsetMessageToDelete(null)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst hideFullImage = () => {\r\n\t\tsetShowImage('')\r\n\t}\r\n\r\n\tconst downloadImage = () => {\r\n\t\tFileSaver.saveAs(showImage)\r\n\t}\r\n\r\n\tconst scrollToBottom = () => {\r\n\t\tif (bottomRef.current) {\r\n\t\t\tbottomRef.current.scrollIntoView({\r\n\t\t\t\tblock: 'end',\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleScrollDownBtn = e => {\r\n\t\tconst winScroll = e.target.scrollTop\r\n\r\n\t\tif (-winScroll <= 300) {\r\n\t\t\tscrollDownRef.current.classList.remove('active')\r\n\t\t}\r\n\r\n\t\tif (-winScroll >= 300) {\r\n\t\t\tscrollDownRef.current.classList.add('active')\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ul className='messages custom-scrollbar' id='messages' onScroll={e => handleScrollDownBtn(e)}>\r\n\t\t\t{showImage && (\r\n\t\t\t\t<div className='full-img'>\r\n\t\t\t\t\t<div className='full-img__background'>\r\n\t\t\t\t\t\t<div className='backdrop-blur'></div>\r\n\t\t\t\t\t\t<img src={showImage} alt='' className='' />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='wrapper'>\r\n\t\t\t\t\t\t<img src={showImage} alt='' className='full-img__img' />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='full-img__tools'>\r\n\t\t\t\t\t\t<div className='tool' onClick={() => downloadImage()}>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-download'></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='tool' onClick={() => hideFullImage()}>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-xmark'></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<div className='messages-wrapper'>\r\n\t\t\t\t<div className='messages__conversation-start'>\r\n\t\t\t\t\t<p>This is the start of your conversation with this user</p>\r\n\t\t\t\t\t<p>{dates(chat.createdAt).fullDate}</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{chat.messages.length > 0 &&\r\n\t\t\t\t\tchat.messages.map((message, i, elements) => (\r\n\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\tkey={message.id}\r\n\t\t\t\t\t\t\tmessage={message}\r\n\t\t\t\t\t\t\telements={elements}\r\n\t\t\t\t\t\t\ti={i}\r\n\t\t\t\t\t\t\tchat={chat}\r\n\t\t\t\t\t\t\tonMessageResponse={onMessageResponse}\r\n\t\t\t\t\t\t\tsetMessageToDelete={setMessageToDelete}\r\n\t\t\t\t\t\t\tshowImage={showImage}\r\n\t\t\t\t\t\t\tsetShowImage={setShowImage}\r\n\t\t\t\t\t\t\totherUser={otherUser}\r\n\t\t\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t<div ref={bottomRef} className='bottom-ref'></div>\r\n\t\t\t</div>\r\n\t\t\t<div className='scroll-down' onClick={() => scrollToBottom()} ref={scrollDownRef}>\r\n\t\t\t\t<i className='fa-solid fa-arrow-down'></i>\r\n\t\t\t</div>\r\n\t\t\t{messageToDelete !== null && (\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tshow={showModal}\r\n\t\t\t\t\tsetShow={() => setMessageToDelete(null)}\r\n\t\t\t\t\t// onClose={() => {}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className='confirm-message-delete'>\r\n\t\t\t\t\t\t<h2>Delete message</h2>\r\n\t\t\t\t\t\t<p>Do you really want to delete this message?</p>\r\n\r\n\t\t\t\t\t\t<p>Message to delete: </p>\r\n\t\t\t\t\t\t<div className='message-to-delete custom-scrollbar'>\r\n\t\t\t\t\t\t\t{messageToDelete.content && <span>\"{messageToDelete.content}\"</span>}\r\n\t\t\t\t\t\t\t{messageToDelete.image && <img src={messageToDelete.image} alt='' />}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='vertical-btns'>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName='btn btn--secondary'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetMessageToDelete(null)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button className='btn' onClick={() => deleteMessage(messageToDelete)}>\r\n\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal>\r\n\t\t\t)}\r\n\t\t</ul>\r\n\t)\r\n}\r\n\r\nexport default Messages\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { timestamp, projectStorage } from '../../../firebase/config'\r\nimport { useAuthContext } from '../../../hooks/useAuthContext'\r\nimport { useFirestore } from '../../../hooks/useFirestore'\r\nimport { v4 as uuid } from 'uuid'\r\nimport { getDownloadURL, ref, uploadBytes } from 'firebase/storage'\r\nimport EmojiPicker, { Emoji, EmojiStyle, Theme } from 'emoji-picker-react'\r\nimport OutsideClickHandler from 'react-outside-click-handler'\r\nimport imageCompression from 'browser-image-compression'\r\n\r\n// Styles && Assets\r\nimport './MessageField.scss'\r\n\r\nconst MessageField = ({ chat, messageResponse, onMessageResponse, bottomDiv, inputRef }) => {\r\n\tconst uniqueId = uuid()\r\n\r\n\tconst { updateDocument, response } = useFirestore('projects')\r\n\tconst { user } = useAuthContext()\r\n\r\n\tconst [newComment, setNewComment] = useState('')\r\n\tconst [imgUpload, setImgUpload] = useState(null)\r\n\tconst [isAssignedUser, setIsAssignedUser] = useState(false)\r\n\tconst [fastEmoji, setFastEmoji] = useState(chat.chatEmoji)\r\n\tconst [sendFastEmoji, setSendFastEmoji] = useState(false)\r\n\tconst [showEmojis, setShowEmojis] = useState(false)\r\n\r\n\tconst fileInputRef = useRef(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tinputRef.current.focus()\r\n\t}, [messageResponse])\r\n\r\n\tuseEffect(() => {\r\n\t\tchat.assignedUsersId.forEach(id => {\r\n\t\t\tif (id === user.uid) setIsAssignedUser(true)\r\n\t\t})\r\n\t}, [setIsAssignedUser, chat.assignedUsersId, user.uid])\r\n\r\n\tconst scrollToBottom = () => {\r\n\t\tbottomDiv.current.scrollIntoView({\r\n\t\t\tblock: 'end',\r\n\t\t})\r\n\t}\r\n\r\n\tconst sendMessage = async () => {\r\n\t\tconst commentToAdd = {\r\n\t\t\tid: uniqueId,\r\n\t\t\tdisplayName: user.displayName,\r\n\t\t\tphotoURL: user.photoURL,\r\n\t\t\tcontent: sendFastEmoji ? fastEmoji : newComment,\r\n\t\t\tcreatedAt: timestamp.fromDate(new Date()),\r\n\t\t\tcreatedBy: user.uid,\r\n\t\t\tresponse: messageResponse !== null ? messageResponse : null,\r\n\t\t}\r\n\r\n\t\tif (commentToAdd.content.trim() !== '' && newComment.length < 900 && isAssignedUser) {\r\n\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\tmessages: [...chat.messages, commentToAdd],\r\n\t\t\t\tupdatedAt: timestamp.fromDate(new Date()),\r\n\t\t\t\tisRead: false,\r\n\t\t\t})\r\n\t\t\tif (!response.error) {\r\n\t\t\t\tscrollToBottom()\r\n\t\t\t\tsetNewComment('')\r\n\t\t\t\tsetSendFastEmoji(false)\r\n\t\t\t\tonMessageResponse(null)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst sendImage = async () => {\r\n\t\tconst acceptedFileTypes = ['image', 'video']\r\n\r\n\t\tif (acceptedFileTypes.includes(imgUpload.type.split('/')[0])) {\r\n\t\t\tconst storageRef = ref(\r\n\t\t\t\tprojectStorage,\r\n\t\t\t\t`imgs/${chat.assignedUsersId[0] + chat.assignedUsersId[1]}/${uuid() + imgUpload.name}`\r\n\t\t\t)\r\n\t\t\tconst uploadTask = uploadBytes(storageRef, imgUpload)\r\n\r\n\t\t\tuploadTask.then(snapshot => {\r\n\t\t\t\tgetDownloadURL(snapshot.ref).then(async downloadURL => {\r\n\t\t\t\t\tconst commentToAdd = {\r\n\t\t\t\t\t\tid: uniqueId,\r\n\t\t\t\t\t\tdisplayName: user.displayName,\r\n\t\t\t\t\t\tphotoURL: user.photoURL,\r\n\t\t\t\t\t\t// content: newComment,\r\n\t\t\t\t\t\tfileType: imgUpload.type.includes('image/') ? 'image' : 'video',\r\n\t\t\t\t\t\timage: downloadURL,\r\n\t\t\t\t\t\tcreatedAt: timestamp.fromDate(new Date()),\r\n\t\t\t\t\t\tcreatedBy: user.uid,\r\n\t\t\t\t\t\tresponse: messageResponse !== null ? messageResponse : null,\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (isAssignedUser) {\r\n\t\t\t\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\t\t\t\tmessages: [...chat.messages, commentToAdd],\r\n\t\t\t\t\t\t\tupdatedAt: timestamp.fromDate(new Date()),\r\n\t\t\t\t\t\t\tisRead: false,\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tif (!response.error) {\r\n\t\t\t\t\t\t\tscrollToBottom()\r\n\t\t\t\t\t\t\tsetImgUpload(null)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleImageUpload = async e => {\r\n\t\tconst imageFile = e.target.files[0]\r\n\r\n\t\tconst options = {\r\n\t\t\tmaxSizeMB: 1,\r\n\t\t\tmaxWidthOrHeight: 1920,\r\n\t\t\tuseWebWorker: true,\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst compressedFile = await imageCompression(imageFile, options)\r\n\t\t\tawait setImgUpload(compressedFile)\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSubmit = e => {\r\n\t\te.preventDefault()\r\n\r\n\t\tif (imgUpload) {\r\n\t\t\tsendImage()\r\n\t\t} else {\r\n\t\t\tsendMessage()\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleKey = e => {\r\n\t\te.code === 'Enter' && handleSubmit(e)\r\n\t}\r\n\r\n\tconst [fileThumbnail, setFileThumbnail] = useState('')\r\n\r\n\tconst handleFileChange = e => {\r\n\t\thandleImageUpload(e)\r\n\t\tsetFileThumbnail(URL.createObjectURL(e.target.files[0]))\r\n\t}\r\n\r\n\tconst resetFileInput = e => {\r\n\t\te.preventDefault()\r\n\t\tfileInputRef.current.value = ''\r\n\t\tsetImgUpload(null)\r\n\t}\r\n\r\n\tconst handleEmojis = e => {\r\n\t\tsetNewComment(newComment => newComment + e.emoji)\r\n\t}\r\n\r\n\treturn (\r\n\t\tchat && (\r\n\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t{messageResponse !== null && (\r\n\t\t\t\t\t<div className='response'>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<p className='response__to'>\r\n\t\t\t\t\t\t\t\tResponding to{' '}\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t{chat.messages[messageResponse].displayName === user.displayName ? (\r\n\t\t\t\t\t\t\t\t\t\t'yourself'\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<b>{chat.messages[messageResponse].displayName}</b>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<p className='response__content'>\r\n\t\t\t\t\t\t\t\t{chat.messages[messageResponse].content && (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t{chat.messages[messageResponse].content.substring(0, 70)}\r\n\t\t\t\t\t\t\t\t\t\t{chat.messages[messageResponse].content.length > 70 ? <span>...</span> : ''}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{chat.messages[messageResponse].image && chat.messages[messageResponse].fileType === 'image'\r\n\t\t\t\t\t\t\t\t\t? 'Image'\r\n\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t\t\t\t\t\t\t{chat.messages[messageResponse].image && chat.messages[messageResponse].fileType === 'video'\r\n\t\t\t\t\t\t\t\t\t? 'Video'\r\n\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className='response__close-btn' onClick={() => onMessageResponse(null)}>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-xmark'></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<div className='add-comment'>\r\n\t\t\t\t\t<label className='attach-image'>\r\n\t\t\t\t\t\t<input ref={fileInputRef} type='file' accept='video/*, image/*' onChange={e => handleFileChange(e)} />\r\n\t\t\t\t\t\t<i className='fa-regular fa-image'></i>\r\n\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t<div className='message-field'>\r\n\t\t\t\t\t\t<div className='column'>\r\n\t\t\t\t\t\t\t{imgUpload && (\r\n\t\t\t\t\t\t\t\t<div className='thumbnails'>\r\n\t\t\t\t\t\t\t\t\t<div className='file-thumbnail'>\r\n\t\t\t\t\t\t\t\t\t\t<img src={fileThumbnail} alt='' />\r\n\t\t\t\t\t\t\t\t\t\t<button className='remove-img' onClick={e => resetFileInput(e)}>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-xmark close-btn'></i>\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tmaxLength='900'\r\n\t\t\t\t\t\t\t\t\tplaceholder='Aa'\r\n\t\t\t\t\t\t\t\t\tonChange={e => setNewComment(e.target.value)}\r\n\t\t\t\t\t\t\t\t\tvalue={newComment}\r\n\t\t\t\t\t\t\t\t\tonKeyDown={e => handleKey(e)}\r\n\t\t\t\t\t\t\t\t\tref={inputRef}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='toggle-emoji-picker'\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\te.preventDefault()\r\n\t\t\t\t\t\t\t\tsetShowEmojis(!showEmojis)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<i className='fa-regular fa-face-smile'></i>\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t{showEmojis && (\r\n\t\t\t\t\t\t\t<OutsideClickHandler\r\n\t\t\t\t\t\t\t\tonOutsideClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetShowEmojis(false)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<EmojiPicker\r\n\t\t\t\t\t\t\t\t\tclassName='emoji-picker'\r\n\t\t\t\t\t\t\t\t\tonEmojiClick={e => {\r\n\t\t\t\t\t\t\t\t\t\thandleEmojis(e)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\ttheme={Theme.DARK}\r\n\t\t\t\t\t\t\t\t\tpreviewConfig={{\r\n\t\t\t\t\t\t\t\t\t\tdefaultCaption: '',\r\n\t\t\t\t\t\t\t\t\t\tdefaultEmoji: null,\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t// lazyLoadEmojis={true}\r\n\t\t\t\t\t\t\t\t\temojiStyle={EmojiStyle.NATIVE}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</OutsideClickHandler>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{!imgUpload && newComment.trim() === '' && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclassName='input-tool'\r\n\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\tsetFastEmoji(e.target.innerText)\r\n\t\t\t\t\t\t\t\tsetSendFastEmoji(true)\r\n\t\t\t\t\t\t\t\t// sendMessage()\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{chat.chatEmoji && <Emoji unified={chat.chatEmoji} emojiStyle={EmojiStyle.NATIVE} size={33} />}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{(newComment.trim() !== '' || imgUpload) && (\r\n\t\t\t\t\t\t<button type='submit' className='input-tool'>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-paper-plane'></i>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t{newComment.length >= 900 && <p className='error'>Message can't be longer than 900 characters</p>}\r\n\t\t\t</form>\r\n\t\t)\r\n\t)\r\n}\r\n\r\nexport default MessageField\r\n","export default __webpack_public_path__ + \"static/media/british-person.a8ef58d2.jpg\";","// Components\r\nimport Avatar from '../Avatar/Avatar'\r\n\r\n// Styles && Assets\r\nimport britImg from '../../assets/british-person.jpg'\r\nimport Modal from '../Modal/Modal'\r\n\r\nconst ThemePreview = ({\r\n\totherUserMessage,\r\n\tcurUserMessage,\r\n\tbgDark,\r\n\tborderRadius,\r\n\ttextColors,\r\n\tinputColors,\r\n\tconfirmCustomTheme,\r\n\tsetConfirmCustomTheme,\r\n\tsubmitCustomTheme,\r\n\teditedTheme,\r\n\tsetShowThemePicker,\r\n\tsetShowThemeCreator,\r\n\tbuttonColor,\r\n\tname,\r\n}) => {\r\n\tconst spreadColors = () => {\r\n\t\tlet colors = null\r\n\r\n\t\tcurUserMessage.bg.forEach(color => {\r\n\t\t\tcolors === null ? (colors = `${color.value}`) : (colors = `${colors}, ${color.value}`)\r\n\t\t})\r\n\r\n\t\tif (curUserMessage.bg.length === 1) {\r\n\t\t\treturn `linear-gradient(${colors}, ${colors})`\r\n\t\t} else {\r\n\t\t\treturn `linear-gradient(${colors})`\r\n\t\t}\r\n\t}\r\n\r\n\tconst messageStyles = {\r\n\t\tbackgroundColor: otherUserMessage.bg,\r\n\t\tcolor: otherUserMessage.text,\r\n\t\tborder: `1px solid ${otherUserMessage.border}`,\r\n\t}\r\n\r\n\tconst messageOwnerStyles = {\r\n\t\tbackgroundImage: `${spreadColors()}`,\r\n\t\tbackgroundAttachment: 'fixed',\r\n\t\tbackgroundPosition: 'center 100%',\r\n\t\tbackgroundSize: 'auto 35%',\r\n\t\tborderRadius: '25px',\r\n\t\tborder: `1px solid ${curUserMessage.border}`,\r\n\t\tcolor: curUserMessage.text,\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='theme-creator__preview'>\r\n\t\t\t<div className='chat-preview' style={{ backgroundColor: bgDark.value, borderRadius: `${borderRadius.value}px` }}>\r\n\t\t\t\t<div className='chat-preview__top-bar'>\r\n\t\t\t\t\t<div className='chat-preview__top-bar__user'>\r\n\t\t\t\t\t\t<Avatar src={britImg} />\r\n\t\t\t\t\t\t<span style={{ color: textColors.primary }}>John Doe</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<i className='fa-solid fa-ellipsis-vertical' style={{ color: textColors.accent }}></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='chat-preview__messages'>\r\n\t\t\t\t\t<div className='message owner' style={{ ...messageOwnerStyles, borderRadius: '25px 25px 5px 25px' }}>\r\n\t\t\t\t\t\tHello mate\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='message owner' style={{ ...messageOwnerStyles, borderRadius: '25px 5px 25px 25px' }}>\r\n\t\t\t\t\t\tit's tuesday init?\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='centered' style={{ color: textColors.lowContrast }}>\r\n\t\t\t\t\t\tSet quick emoji to \r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='message' style={{ ...messageStyles, borderRadius: '25px 25px 25px 5px' }}>\r\n\t\t\t\t\t\toh yes yes\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='message' style={{ ...messageStyles, borderRadius: '5px 25px 25px 5px' }}>\r\n\t\t\t\t\t\twhat a lovely weather we have today\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='message' style={{ ...messageStyles, borderRadius: '5px 25px 25px 25px' }}>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<br />\r\n\r\n\t\t\t\t\t<div className='message owner' style={{ ...messageOwnerStyles, borderRadius: '25px 25px 25px 25px' }}>\r\n\t\t\t\t\t\t*sips tea *\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='flex-row'>\r\n\t\t\t\t\t<i className='fa-regular fa-image' style={{ color: textColors.accent }}></i>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='chat-preview__input'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tbackgroundColor: inputColors.bg,\r\n\t\t\t\t\t\t\tcolor: inputColors.text,\r\n\t\t\t\t\t\t\tborder: `1px solid ${inputColors.border}`,\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<span>I love tea </span>\r\n\r\n\t\t\t\t\t\t<i className='fa-regular fa-face-smile' style={{ color: textColors.accent }}></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='chat-preview__quick-emoji'></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<Modal show={confirmCustomTheme} setShow={() => setConfirmCustomTheme(false)}>\r\n\t\t\t\t<h3>Are you sure you want to proceed?</h3>\r\n\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t<div className='btn btn--secondary' onClick={() => setConfirmCustomTheme(false)}>\r\n\t\t\t\t\t\tgo back\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='btn' onClick={() => submitCustomTheme()}>\r\n\t\t\t\t\t\t{editedTheme !== null ? 'edit' : 'create'} theme\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t<div className='btn-group'>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName='btn btn--secondary'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetShowThemeCreator(false)\r\n\t\t\t\t\t\tsetShowThemePicker(true)\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tcolor: textColors.accent,\r\n\t\t\t\t\t\tborder: `1px solid ${textColors.accent}`,\r\n\t\t\t\t\t\tborderRadius: `${borderRadius.value}px`,\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tcancel\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t{name.length > 0 && (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\tclassName='btn'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetConfirmCustomTheme(true)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tcolor: buttonColor.value,\r\n\t\t\t\t\t\t\tborderRadius: `${borderRadius.value}px`,\r\n\t\t\t\t\t\t\tborder: `1px solid ${textColors.accent}`,\r\n\t\t\t\t\t\t\tbackgroundColor: textColors.accent,\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{editedTheme !== null ? 'edit' : 'create'}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{name.length <= 0 && (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='btn'\r\n\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tcolor: buttonColor.value,\r\n\t\t\t\t\t\t\tborderRadius: `${borderRadius.value}px`,\r\n\t\t\t\t\t\t\tborder: `1px solid ${textColors.accent}`,\r\n\t\t\t\t\t\t\tbackgroundColor: textColors.accent,\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{editedTheme !== null ? 'edit' : 'create'}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ThemePreview\r\n","const Field = ({ title, setShow, show, children }) => {\r\n\treturn (\r\n\t\t<div className='field'>\r\n\t\t\t<p\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetShow()\r\n\t\t\t\t}}>\r\n\t\t\t\t<i className={`fa-solid fa-angle-right ${show ? 'active' : ''}`}></i>\r\n\t\t\t\t<span>{title}</span>\r\n\t\t\t</p>\r\n\r\n\t\t\t{show && children}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Field\r\n","const ColorPicker = ({ value, setValue, separator, children }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{separator && (\r\n\t\t\t\t<div className='separator'>\r\n\t\t\t\t\t<span>{separator}</span>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t\t<div className='color-picker'>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='text'\r\n\t\t\t\t\tclassName='color-picker__value'\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\tsetValue(e)\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype='color'\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\tsetValue(e)\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default ColorPicker\r\n","import React, { useState } from 'react'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\n\r\n// Components\r\nimport ThemePreview from './ThemePreview'\r\nimport Field from './Field.js'\r\nimport ColorPicker from './ColorPicker'\r\n\r\n// Styles && Assets\r\nimport './ThemeCreator.scss'\r\n\r\nexport default function ThemeCreator({\r\n\tsetShowThemePicker,\r\n\tsetShowThemeCreator,\r\n\tchat,\r\n\teditedTheme,\r\n\tsetConfirmCustomTheme,\r\n\tconfirmCustomTheme,\r\n}) {\r\n\tconst { updateDocument } = useFirestore('projects')\r\n\r\n\tconst [name, setName] = useState(editedTheme ? editedTheme.name : '')\r\n\tconst [bgDark, setBgDark] = useState({\r\n\t\tshow: true,\r\n\t\tvalue: editedTheme ? editedTheme.colors.bgDark : '#121212',\r\n\t})\r\n\tconst [bgSecondary, setBgSecondary] = useState({\r\n\t\tshow: false,\r\n\t\tvalue: editedTheme ? editedTheme.colors.bgSecondary : '#1e1e1e',\r\n\t})\r\n\r\n\tconst [borderRadius, setBorderRadius] = useState({\r\n\t\tshow: false,\r\n\t\tvalue: editedTheme ? editedTheme.borderRadius : 8,\r\n\t})\r\n\tconst [curUserMessage, setCurUserMessage] = useState({\r\n\t\tshow: false,\r\n\t\tbg: editedTheme\r\n\t\t\t? editedTheme.colors.msgBgOwner\r\n\t\t\t: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 0,\r\n\t\t\t\t\t\tvalue: '#643e7a',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tvalue: '#643e7a',\r\n\t\t\t\t\t},\r\n\t\t\t  ],\r\n\t\ttext: editedTheme ? editedTheme.colors.messageColorOwner : '#cacaca',\r\n\t\tborder: editedTheme ? editedTheme.colors.msgBorderOwner : '#252525',\r\n\t})\r\n\r\n\tconst [otherUserMessage, setOtherUserMessage] = useState({\r\n\t\tshow: false,\r\n\t\tbg: editedTheme ? editedTheme.colors.msgBg : '#1e1e1e',\r\n\t\ttext: editedTheme ? editedTheme.colors.messageColor : '#cacaca',\r\n\t\tborder: editedTheme ? editedTheme.colors.msgBorder : '#252525',\r\n\t})\r\n\r\n\tconst [inputColors, setInputColors] = useState({\r\n\t\tshow: false,\r\n\t\tbg: editedTheme ? editedTheme.colors.inputBg : '#1e1e1e',\r\n\t\ttext: editedTheme ? editedTheme.colors.inputText : '#c4c4c4',\r\n\t\tborder: editedTheme ? editedTheme.colors.inputBorder : '#1e1e1e',\r\n\t})\r\n\r\n\tconst [textColors, setTextColors] = useState({\r\n\t\tshow: false,\r\n\t\tprimary: editedTheme ? editedTheme.colors.textPrimary : '#ffffff',\r\n\t\taccent: editedTheme ? editedTheme.colors.textAccent : '#643e7a',\r\n\t\tlowContrast: editedTheme ? editedTheme.colors.textLowContrast : '#646464',\r\n\t\tbtn: editedTheme ? editedTheme.colors.btnText : '#ffffff',\r\n\t})\r\n\tconst [buttonColor, setButtonColor] = useState({\r\n\t\tshow: false,\r\n\t\tvalue: editedTheme ? editedTheme.colors.buttonColor : '#ffffff',\r\n\t})\r\n\r\n\tconst updateMessageBg = (index, e) => {\r\n\t\tlet newArr = [...curUserMessage.bg]\r\n\t\tnewArr[index] = { value: e.target.value, id: index }\r\n\t\tsetCurUserMessage({ ...curUserMessage, bg: newArr })\r\n\t}\r\n\r\n\tconst submitCustomTheme = async () => {\r\n\t\t// setDoc(doc(projectFirestore, 'themes', 'green'), {\r\n\t\t// \tid: name,\r\n\t\t// \tname: name,\r\n\t\t// \tcolors: {\r\n\t\t// \t\tbgDark: bgDark.value,\r\n\t\t// \t\tbgSecondary: bgSecondary.value,\r\n\t\t// \t\tinputBg: inputColors.bg,\r\n\t\t// \t\tinputText: inputColors.text,\r\n\t\t// \t\ttextAccent: textColors.accent,\r\n\t\t// \t\ttextLowContrast: textColors.lowContrast,\r\n\t\t// \t\tmsgBg: otherUserMessage.bg,\r\n\t\t// \t\tmessageColor: otherUserMessage.text,\r\n\t\t// \t\tmsgBgOwner: curUserMessage.bg,\r\n\t\t// \t\tmessageColorOwner: curUserMessage.text,\r\n\t\t// \t},\r\n\t\t// \tborderRadius: borderRadius.value,\r\n\t\t// })\r\n\r\n\t\tconst themeToAdd = {\r\n\t\t\tid: `${name}`,\r\n\t\t\tname: `${name}`,\r\n\t\t\tcolors: {\r\n\t\t\t\tbgDark: `${bgDark.value}`,\r\n\t\t\t\tbgSecondary: `${bgSecondary.value}`,\r\n\t\t\t\tinputBg: `${inputColors.bg}`,\r\n\t\t\t\tinputText: `${inputColors.text}`,\r\n\t\t\t\tinputBorder: `${inputColors.border}`,\r\n\t\t\t\ttextPrimary: `${textColors.primary}`,\r\n\t\t\t\ttextAccent: `${textColors.accent}`,\r\n\t\t\t\ttextLowContrast: `${textColors.lowContrast}`,\r\n\t\t\t\tmsgBg: `${otherUserMessage.bg}`,\r\n\t\t\t\tmessageColor: `${otherUserMessage.text}`,\r\n\t\t\t\tmsgBgOwner: curUserMessage.bg,\r\n\t\t\t\tmessageColorOwner: `${curUserMessage.text}`,\r\n\t\t\t\tmsgBorderOwner: `${curUserMessage.border}`,\r\n\t\t\t\tmsgBorder: `${otherUserMessage.border}`,\r\n\t\t\t\tbuttonColor: `${buttonColor.value}`,\r\n\t\t\t},\r\n\t\t\tborderRadius: borderRadius.value,\r\n\t\t\tisCustom: true,\r\n\t\t}\r\n\t\tif (editedTheme === null) {\r\n\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\tcustomThemes: [...chat.customThemes, themeToAdd],\r\n\t\t\t})\r\n\t\t\tsetConfirmCustomTheme(false)\r\n\t\t\tsetShowThemeCreator(false)\r\n\t\t}\r\n\t\tif (editedTheme !== null) {\r\n\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\tcustomThemes: updateCustomThemes(editedTheme, themeToAdd),\r\n\t\t\t\ttheme: {\r\n\t\t\t\t\tisCustom: true,\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\tsetConfirmCustomTheme(false)\r\n\t\t\tsetShowThemeCreator(false)\r\n\t\t}\r\n\t}\r\n\r\n\tconst updateCustomThemes = (editedTheme, theme) => {\r\n\t\tconst index = chat.customThemes.indexOf(editedTheme)\r\n\t\tlet newArr = [...chat.customThemes]\r\n\r\n\t\tnewArr[index] = theme\r\n\r\n\t\treturn newArr\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='theme-creator'>\r\n\t\t\t<form className='theme-creator__form custom-scrollbar'>\r\n\t\t\t\t<div className='field'>\r\n\t\t\t\t\t<p>Name your theme</p>\r\n\r\n\t\t\t\t\t<input type='text' placeholder='Aa' required value={name} onChange={e => setName(e.target.value)} />\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Field\r\n\t\t\t\t\ttitle={'Background color'}\r\n\t\t\t\t\tsetShow={() => setBgDark({ ...bgDark, show: !bgDark.show })}\r\n\t\t\t\t\tshow={bgDark.show}>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={bgDark.value}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetBgDark({ ...bgDark, value: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Field>\r\n\r\n\t\t\t\t<Field\r\n\t\t\t\t\ttitle={'Secondary background color'}\r\n\t\t\t\t\tsetShow={() => setBgSecondary({ ...bgSecondary, show: !bgSecondary.show })}\r\n\t\t\t\t\tshow={bgSecondary.show}>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={bgSecondary.value}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetBgSecondary({ ...bgSecondary, value: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Field>\r\n\r\n\t\t\t\t<Field\r\n\t\t\t\t\ttitle={'Input colors'}\r\n\t\t\t\t\tsetShow={() => setInputColors({ ...inputColors, show: !inputColors.show })}\r\n\t\t\t\t\tshow={inputColors.show}>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={inputColors.bg}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetInputColors({ ...inputColors, bg: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'background'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={inputColors.text}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetInputColors({ ...inputColors, text: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'text'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={inputColors.border}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetInputColors({ ...inputColors, border: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'border'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Field>\r\n\r\n\t\t\t\t<Field\r\n\t\t\t\t\ttitle={'Button color'}\r\n\t\t\t\t\tsetShow={() => setButtonColor({ ...buttonColor, show: !buttonColor.show })}\r\n\t\t\t\t\tshow={buttonColor.show}>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={buttonColor.value}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetButtonColor({ ...buttonColor, value: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Field>\r\n\r\n\t\t\t\t<Field\r\n\t\t\t\t\ttitle={'Text colors'}\r\n\t\t\t\t\tsetShow={() => setTextColors({ ...textColors, show: !textColors.show })}\r\n\t\t\t\t\tshow={textColors.show}>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={textColors.primary}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetTextColors({ ...textColors, primary: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'primary'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={textColors.accent}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetTextColors({ ...textColors, accent: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'accent'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={textColors.lowContrast}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetTextColors({ ...textColors, lowContrast: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'low contrast'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Field>\r\n\r\n\t\t\t\t<Field\r\n\t\t\t\t\ttitle={'Other user messages'}\r\n\t\t\t\t\tsetShow={() => setOtherUserMessage({ ...otherUserMessage, show: !otherUserMessage.show })}\r\n\t\t\t\t\tshow={otherUserMessage.show}>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={otherUserMessage.bg}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetOtherUserMessage({ ...otherUserMessage, bg: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'background'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={otherUserMessage.text}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetOtherUserMessage({ ...otherUserMessage, text: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'text'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={otherUserMessage.border}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetOtherUserMessage({ ...otherUserMessage, border: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'border'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Field>\r\n\r\n\t\t\t\t<Field\r\n\t\t\t\t\ttitle={'Current user messages'}\r\n\t\t\t\t\tsetShow={() => setCurUserMessage({ ...curUserMessage, show: !curUserMessage.show })}\r\n\t\t\t\t\tshow={curUserMessage.show}>\r\n\t\t\t\t\t<div className='separator'>\r\n\t\t\t\t\t\t<span>background</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className='colors-list custom-scrollbar'>\r\n\t\t\t\t\t\t{curUserMessage.bg.map((color, index) => (\r\n\t\t\t\t\t\t\t<React.Fragment key={color.id}>\r\n\t\t\t\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\t\t\t\tvalue={color.value}\r\n\t\t\t\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\t\t\t\tupdateMessageBg(index, e)\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\tclassName='fa-solid fa-xmark remove-color'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\tsetCurUserMessage({ ...curUserMessage, bg: curUserMessage.bg.filter(c => c !== color) })\r\n\t\t\t\t\t\t\t\t\t\t}></i>\r\n\t\t\t\t\t\t\t\t</ColorPicker>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='add-color'\r\n\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\tsetCurUserMessage({\r\n\t\t\t\t\t\t\t\t...curUserMessage,\r\n\t\t\t\t\t\t\t\tbg: [...curUserMessage.bg, { value: '#643e7a', id: Math.random(0, 100) * 100 }],\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}>\r\n\t\t\t\t\t\t<i className='fa-solid fa-plus'></i>\r\n\t\t\t\t\t\t<span>add another color</span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={curUserMessage.text}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetCurUserMessage({ ...curUserMessage, text: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'text'}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<ColorPicker\r\n\t\t\t\t\t\tvalue={curUserMessage.border}\r\n\t\t\t\t\t\tsetValue={e => {\r\n\t\t\t\t\t\t\tsetCurUserMessage({ ...curUserMessage, border: e.target.value })\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tseparator={'border'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Field>\r\n\r\n\t\t\t\t<Field\r\n\t\t\t\t\ttitle={'Border radius'}\r\n\t\t\t\t\tsetShow={() => setBorderRadius({ ...borderRadius, show: !borderRadius.show })}\r\n\t\t\t\t\tshow={borderRadius.show}>\r\n\t\t\t\t\t<div className='flex-row'>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='range'\r\n\t\t\t\t\t\t\tvalue={borderRadius.value}\r\n\t\t\t\t\t\t\tonChange={e => setBorderRadius({ ...borderRadius, value: e.target.value })}\r\n\t\t\t\t\t\t\tmin='0'\r\n\t\t\t\t\t\t\tmax='25'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span>{borderRadius.value}px</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Field>\r\n\t\t\t</form>\r\n\r\n\t\t\t<ThemePreview\r\n\t\t\t\totherUserMessage={otherUserMessage}\r\n\t\t\t\tcurUserMessage={curUserMessage}\r\n\t\t\t\tbgDark={bgDark}\r\n\t\t\t\tborderRadius={borderRadius}\r\n\t\t\t\ttextColors={textColors}\r\n\t\t\t\tinputColors={inputColors}\r\n\t\t\t\tconfirmCustomTheme={confirmCustomTheme}\r\n\t\t\t\tsetConfirmCustomTheme={setConfirmCustomTheme}\r\n\t\t\t\tsubmitCustomTheme={submitCustomTheme}\r\n\t\t\t\teditedTheme={editedTheme}\r\n\t\t\t\tsetShowThemeCreator={setShowThemeCreator}\r\n\t\t\t\tsetShowThemePicker={setShowThemePicker}\r\n\t\t\t\tname={name}\r\n\t\t\t\tbuttonColor={buttonColor}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useFirestore } from '../../hooks/useFirestore'\r\nimport Modal from '../Modal/Modal'\r\n\r\n// Styles\r\nimport './ThemePicker.scss'\r\n\r\nconst ThemePicker = ({\r\n\tthemes,\r\n\tchat,\r\n\tsetShowThemeCreator,\r\n\tsetEditedTheme,\r\n\tsetConfirmThemeDelete,\r\n\tconfirmThemeDelete,\r\n}) => {\r\n\tconst { updateDocument } = useFirestore('projects')\r\n\r\n\tconst changeTheme = async theme => {\r\n\t\ttry {\r\n\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\ttheme: {\r\n\t\t\t\t\tname: theme.id,\r\n\t\t\t\t\tisCustom: theme.isCustom ? theme.isCustom : false,\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err)\r\n\t\t}\r\n\t}\r\n\r\n\tconst spreadColors = theme => {\r\n\t\tlet colors = null\r\n\r\n\t\ttheme.colors.msgBgOwner.forEach(color => {\r\n\t\t\tcolors === null ? (colors = `${color.value}`) : (colors = `${colors}, ${color.value}`)\r\n\t\t})\r\n\r\n\t\tif (theme.colors.msgBgOwner.length === 1) {\r\n\t\t\treturn `linear-gradient(${colors}, ${colors})`\r\n\t\t} else {\r\n\t\t\treturn `linear-gradient(${colors})`\r\n\t\t}\r\n\t}\r\n\r\n\tconst removeCustomTheme = async theme => {\r\n\t\ttry {\r\n\t\t\tif (chat.theme && chat.theme.name === theme.id) {\r\n\t\t\t\tchangeTheme({ id: 'frosty', isCustom: false })\r\n\t\t\t}\r\n\t\t\tawait updateDocument(chat.id, {\r\n\t\t\t\tcustomThemes: [...chat.customThemes.filter(t => t !== theme)],\r\n\t\t\t})\r\n\t\t\tsetConfirmThemeDelete(null)\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err)\r\n\t\t}\r\n\t}\r\n\r\n\tconst editCustomTheme = theme => {\r\n\t\tsetShowThemeCreator(true)\r\n\t\tsetEditedTheme(theme)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='theme-picker'>\r\n\t\t\t<div className='theme-picker__themes'>\r\n\t\t\t\t{themes &&\r\n\t\t\t\t\tchat &&\r\n\t\t\t\t\tthemes.map(theme => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={`theme-picker__themes__theme ${\r\n\t\t\t\t\t\t\t\tchat.theme && theme.id === chat.theme.name && !theme.isCustom ? 'current' : ''\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\tkey={theme.id}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tchangeTheme(theme)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName='fa-solid fa-check theme-tick'\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackgroundImage: spreadColors(theme),\r\n\t\t\t\t\t\t\t\t}}></i>\r\n\r\n\t\t\t\t\t\t\t<div className='theme-bg' style={{ background: spreadColors(theme) }}></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t\t<div className='separator'>\r\n\t\t\t\t<span>create your own theme</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='theme-picker__themes'>\r\n\t\t\t\t{chat.customThemes.length > 0 &&\r\n\t\t\t\t\tchat.customThemes.map(theme => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tkey={theme.id}\r\n\t\t\t\t\t\t\tclassName={`theme-picker__themes__theme ${\r\n\t\t\t\t\t\t\t\tchat.theme && theme.id === chat.theme.name && theme.isCustom === chat.theme.isCustom ? 'current' : ''\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tchangeTheme(theme)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName='fa-solid fa-check theme-tick'\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackgroundImage: `${spreadColors(theme)}`,\r\n\t\t\t\t\t\t\t\t}}></i>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName='theme-bg'\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tbackground: spreadColors(theme),\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<div className='theme-tools'>\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName='theme-tools__edit'\r\n\t\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\t\t\t\t\teditCustomTheme(theme)\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-pen'></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclassName='theme-tools__remove'\r\n\t\t\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t\t\t\t\t\t\t\t// removeCustomTheme(theme)\r\n\t\t\t\t\t\t\t\t\t\t\tsetConfirmThemeDelete(theme)\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-trash-can'></i>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\r\n\t\t\t\t{chat.customThemes.length < 3 && (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='create-theme'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetShowThemeCreator(true)\r\n\t\t\t\t\t\t\t// setShowThemePicker(false)\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<i className='fa-solid fa-plus'></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<Modal show={confirmThemeDelete !== null} setShow={() => setConfirmThemeDelete(null)}>\r\n\t\t\t\t\t<h3>Are you sure you want to proceed?</h3>\r\n\t\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t\t<div className='btn btn--50 btn--secondary' onClick={() => setConfirmThemeDelete(null)}>\r\n\t\t\t\t\t\t\tgo back\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='btn btn--50' onClick={() => removeCustomTheme(confirmThemeDelete)}>\r\n\t\t\t\t\t\t\tdelete theme\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ThemePicker\r\n","import { useEffect, useState } from 'react'\r\nimport { useFirestore } from '../../../hooks/useFirestore'\r\nimport { timestamp } from '../../../firebase/config'\r\nimport { useCollection } from '../../../hooks/useCollection'\r\nimport { v4 as uuid } from 'uuid'\r\n\r\n// Components\r\nimport OutsideClickHandler from 'react-outside-click-handler'\r\nimport EmojiPicker, { EmojiStyle, Theme } from 'emoji-picker-react'\r\nimport Modal from '../../../components/Modal/Modal'\r\nimport Avatar from '../../../components/Avatar/Avatar'\r\nimport ThemeCreator from '../../../components/ThemeCreator/ThemeCreator'\r\nimport ThemePicker from '../../../components/ThemePicker/ThemePicker'\r\n\r\n// Styles && Assets\r\nimport './ChatOptions.scss'\r\nimport { useDocument } from '../../../hooks/useDocument'\r\n\r\nexport default function ChatOptions({ onMessageResponse, otherUser, chat, currentTheme }) {\r\n\tconst uniqueId = uuid()\r\n\r\n\tconst { updateDocument, response } = useFirestore('projects')\r\n\tconst { documents: themes } = useCollection('themes')\r\n\tconst { document: defaultThemeDoc } = useDocument('themes', 'frosty')\r\n\r\n\tconst [showEmojiPicker, setShowEmojiPicker] = useState(false)\r\n\tconst [showNicknameModal, setShowNicknameModal] = useState(false)\r\n\tconst [showNicknameInput, setShowNicknameInput] = useState(null)\r\n\tconst [newNickname, setNewNickname] = useState('')\r\n\tconst [showThemePicker, setShowThemePicker] = useState(false)\r\n\tconst [showThemeCreator, setShowThemeCreator] = useState(false)\r\n\tconst [editedTheme, setEditedTheme] = useState(defaultThemeDoc)\r\n\tconst [confirmCustomTheme, setConfirmCustomTheme] = useState(false)\r\n\tconst [confirmThemeDelete, setConfirmThemeDelete] = useState(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tsetShowThemeCreator(false)\r\n\t\tsetShowNicknameModal(false)\r\n\t}, [chat.id])\r\n\r\n\tconst sendMessage = async content => {\r\n\t\tconst commentToAdd = {\r\n\t\t\tid: uniqueId,\r\n\t\t\tcontent: content,\r\n\t\t\tcreatedAt: timestamp.fromDate(new Date()),\r\n\t\t\tisSpecial: true,\r\n\t\t}\r\n\r\n\t\tawait updateDocument(chat.id, {\r\n\t\t\tmessages: [...chat.messages, commentToAdd],\r\n\t\t})\r\n\t\tif (!response.error) {\r\n\t\t\tonMessageResponse(null)\r\n\t\t}\r\n\t}\r\n\r\n\tconst changeChatEmoji = async e => {\r\n\t\tawait updateDocument(chat.id, {\r\n\t\t\tchatEmoji: e.unified,\r\n\t\t})\r\n\t\tif (!response.error) {\r\n\t\t\tsendMessage(`Set quick emoji to ${e.emoji}`)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleNicknameInput = u => {\r\n\t\tsetShowNicknameInput(u.id)\r\n\t}\r\n\r\n\tconst changeNickname = user => {\r\n\t\tif (newNickname.trim() !== '' && newNickname.trim().length < 80) {\r\n\t\t\tchat.assignedUsers.forEach(u => {\r\n\t\t\t\tif (u !== user) {\r\n\t\t\t\t\tupdateDocument(chat.id, {\r\n\t\t\t\t\t\tassignedUsers: [\r\n\t\t\t\t\t\t\tu,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: user.id,\r\n\t\t\t\t\t\t\t\tdisplayName: user.displayName,\r\n\t\t\t\t\t\t\t\tnickname: newNickname.trim(),\r\n\t\t\t\t\t\t\t\tphotoURL: user.photoURL,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})\r\n\t\t\t\t\tsetShowNicknameModal(false)\r\n\t\t\t\t}\r\n\t\t\t\tif (u === user) {\r\n\t\t\t\t\tsendMessage(`Set nickname of user ${u.displayName} to ${newNickname.trim()}`, newNickname.trim())\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst spreadColors = theme => {\r\n\t\tlet colors = null\r\n\r\n\t\ttheme.colors.msgBgOwner.forEach(color => {\r\n\t\t\tcolors === null ? (colors = `${color.value}`) : (colors = `${colors}, ${color.value}`)\r\n\t\t})\r\n\r\n\t\tif (theme.colors.msgBgOwner.length === 1) {\r\n\t\t\treturn colors\r\n\t\t} else {\r\n\t\t\treturn `linear-gradient(${colors})`\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<aside className='chat-options'>\r\n\t\t\t<Avatar src={otherUser.photoURL} />\r\n\r\n\t\t\t<h3>{otherUser.nickname}</h3>\r\n\r\n\t\t\t{/* <button className='btn' onClick={() => addDoc()}>\r\n\t\t\t\tadd doc\r\n\t\t\t</button> */}\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName='option'\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetShowThemePicker(true)\r\n\t\t\t\t}}>\r\n\t\t\t\t<div className='option__icon' style={{ background: spreadColors(currentTheme) }}></div>\r\n\r\n\t\t\t\t<div className='option__name'>Change theme</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName='option'\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetShowEmojiPicker(true)\r\n\t\t\t\t}}>\r\n\t\t\t\t<div className='option__icon'>\r\n\t\t\t\t\t<i className='fa-solid fa-thumbs-up'></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='option__name'>Change emoji icon</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tclassName='option'\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetShowNicknameModal(true)\r\n\t\t\t\t}}>\r\n\t\t\t\t<div className='option__icon'>Aa</div>\r\n\t\t\t\t<div className='option__name'>Edit nicknames</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{themes && (showThemePicker || showThemeCreator) && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\tshow={showThemePicker}\r\n\t\t\t\t\t\tsetShow={() => setShowThemePicker(false)}\r\n\t\t\t\t\t\tonClose={() => setConfirmThemeDelete(null)}\r\n\t\t\t\t\t\tdisableOCH={showThemeCreator}>\r\n\t\t\t\t\t\t<ThemePicker\r\n\t\t\t\t\t\t\tthemes={themes}\r\n\t\t\t\t\t\t\tchat={chat}\r\n\t\t\t\t\t\t\tsetShowThemeCreator={setShowThemeCreator}\r\n\t\t\t\t\t\t\tsetEditedTheme={setEditedTheme}\r\n\t\t\t\t\t\t\tsetConfirmThemeDelete={setConfirmThemeDelete}\r\n\t\t\t\t\t\t\tconfirmThemeDelete={confirmThemeDelete}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t\t<Modal\r\n\t\t\t\t\t\tshow={showThemeCreator}\r\n\t\t\t\t\t\tsetShow={() => setShowThemeCreator(false)}\r\n\t\t\t\t\t\tonClose={() => {\r\n\t\t\t\t\t\t\tsetEditedTheme(null)\r\n\t\t\t\t\t\t\tsetConfirmCustomTheme(false)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tdisableOCH={confirmCustomTheme}>\r\n\t\t\t\t\t\t<ThemeCreator\r\n\t\t\t\t\t\t\tsetShowThemePicker={setShowThemePicker}\r\n\t\t\t\t\t\t\tsetShowThemeCreator={setShowThemeCreator}\r\n\t\t\t\t\t\t\tchat={chat}\r\n\t\t\t\t\t\t\teditedTheme={editedTheme}\r\n\t\t\t\t\t\t\tsetConfirmCustomTheme={setConfirmCustomTheme}\r\n\t\t\t\t\t\t\tconfirmCustomTheme={confirmCustomTheme}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\r\n\t\t\t{showEmojiPicker && (\r\n\t\t\t\t<OutsideClickHandler\r\n\t\t\t\t\tonOutsideClick={() => {\r\n\t\t\t\t\t\tsetShowEmojiPicker(false)\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<EmojiPicker\r\n\t\t\t\t\t\tclassName='emoji-picker'\r\n\t\t\t\t\t\tonEmojiClick={e => {\r\n\t\t\t\t\t\t\tchangeChatEmoji(e)\r\n\t\t\t\t\t\t\tsetShowEmojiPicker(false)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\ttheme={Theme.DARK}\r\n\t\t\t\t\t\tpreviewConfig={{\r\n\t\t\t\t\t\t\tdefaultCaption: '',\r\n\t\t\t\t\t\t\tdefaultEmoji: null,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t// lazyLoadEmojis={true}\r\n\t\t\t\t\t\temojiStyle={EmojiStyle.NATIVE}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</OutsideClickHandler>\r\n\t\t\t)}\r\n\r\n\t\t\t<Modal\r\n\t\t\t\tshow={showNicknameModal}\r\n\t\t\t\tsetShow={() => setShowNicknameModal(false)}\r\n\t\t\t\tonClose={() => {\r\n\t\t\t\t\tsetNewNickname('')\r\n\t\t\t\t\tsetShowNicknameInput(null)\r\n\t\t\t\t}}>\r\n\t\t\t\t{chat.assignedUsers.map(u => (\r\n\t\t\t\t\t// <OutsideClickHandler onOutsideClick={() => setShowNicknameInput(null)}>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tkey={u.id}\r\n\t\t\t\t\t\tclassName='user'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetNewNickname(' ')\r\n\t\t\t\t\t\t\thandleNicknameInput(u)\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<div className='author'>\r\n\t\t\t\t\t\t\t<Avatar src={u.photoURL} />\r\n\t\t\t\t\t\t\t{showNicknameInput !== u.id && (\r\n\t\t\t\t\t\t\t\t<div className='flex-column'>\r\n\t\t\t\t\t\t\t\t\t<p className='user__display-name'>{u.nickname}</p>\r\n\t\t\t\t\t\t\t\t\t<p>Set nickname</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{showNicknameInput === u.id && (\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\tplaceholder={u.nickname}\r\n\t\t\t\t\t\t\t\t\tvalue={newNickname}\r\n\t\t\t\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\t\t\t\tsetNewNickname(e.target.value)\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{showNicknameInput !== u.id && <i className='fa-solid fa-pen-to-square'></i>}\r\n\t\t\t\t\t\t{showNicknameInput === u.id && (\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName='fa-solid fa-check'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tchangeNickname(u)\r\n\t\t\t\t\t\t\t\t}}></i>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t// </OutsideClickHandler>\r\n\t\t\t\t))}\r\n\t\t\t</Modal>\r\n\t\t</aside>\r\n\t)\r\n}\r\n","import { useEffect, useState } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport { useDocument } from '../../hooks/useDocument'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\nimport { useCollection } from '../../hooks/useCollection'\r\n\r\n// Components\r\nimport Messages from './Messages/Messages'\r\nimport ChatInput from './MessageField/MessageField'\r\nimport Avatar from '../../components/Avatar/Avatar'\r\nimport ChatOptions from './ChatOptions/ChatOptions'\r\n\r\n// Styles && Assets\r\nimport './Chat.scss'\r\n\r\nexport default function Chat({ setCurrentChat, inputRef, currentTheme }) {\r\n\tconst { user } = useAuthContext()\r\n\tconst { id } = useParams()\r\n\tconst { error, document } = useDocument('projects', id)\r\n\tconst { documents: users } = useCollection('users')\r\n\tconst { updateDocument } = useFirestore('projects')\r\n\r\n\tconst [isAssignedUser, setIsAssignedUser] = useState(false)\r\n\tconst [messageResponse, onMessageResponse] = useState(null)\r\n\tconst [bottomDiv, setBottomDiv] = useState(null)\r\n\tconst [showChatOptions, setShowChatOptions] = useState(false)\r\n\tconst [otherUser, setOtherUser] = useState(null)\r\n\tconst [currentUser, setCurrentUser] = useState(null)\r\n\tconst [otherUserActive, setOtherUserActive] = useState(null)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (document !== null) {\r\n\t\t\tdocument.assignedUsers.forEach(u => {\r\n\t\t\t\tif (u.id !== user.uid) {\r\n\t\t\t\t\tsetOtherUser(u)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (document) {\r\n\t\t\tdocument.assignedUsers.forEach(u => {\r\n\t\t\t\tif (u.id === user.uid) {\r\n\t\t\t\t\tsetCurrentUser(u)\r\n\t\t\t\t\tsetIsAssignedUser(true)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tsetCurrentChat(document)\r\n\t}, [id, document])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (users !== null && otherUser !== null) {\r\n\t\t\tusers.forEach(u => {\r\n\t\t\t\tif (u.id === otherUser.id) {\r\n\t\t\t\t\tsetOtherUserActive(u.online)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}, [id, users, otherUser])\r\n\r\n\tif (error) {\r\n\t\treturn <div className='error'>{error}</div>\r\n\t}\r\n\r\n\tif (!document) {\r\n\t\treturn <div className='loading'>Loading...</div>\r\n\t}\r\n\r\n\tconst handleSeen = () => {\r\n\t\tif (\r\n\t\t\tdocument.messages[document.messages.length - 1] &&\r\n\t\t\tdocument.messages[document.messages.length - 1].createdBy !== user.uid\r\n\t\t) {\r\n\t\t\tupdateDocument(document.id, {\r\n\t\t\t\tisRead: true,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{isAssignedUser && otherUser && (\r\n\t\t\t\t<div className='chat'>\r\n\t\t\t\t\t<div className='vertical-container'>\r\n\t\t\t\t\t\t<div className='chat__top-bar'>\r\n\t\t\t\t\t\t\t<div className='flex-row'>\r\n\t\t\t\t\t\t\t\t<Avatar src={otherUser.photoURL} />\r\n\t\t\t\t\t\t\t\t<div className='vertical-container'>\r\n\t\t\t\t\t\t\t\t\t<h3>{otherUser.nickname}</h3>\r\n\t\t\t\t\t\t\t\t\t{otherUserActive === true && <p className='isActive'>Active now</p>}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName='top-bar-options'\r\n\t\t\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\t\t\tsetShowChatOptions(prevValue => !prevValue)\r\n\t\t\t\t\t\t\t\t\te.target.classList.toggle('active')\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<i className='fa-solid fa-ellipsis-vertical'></i>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName='chat__comments'\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\thandleSeen()\r\n\t\t\t\t\t\t\t\tinputRef.current.focus()\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<Messages\r\n\t\t\t\t\t\t\t\tchat={document}\r\n\t\t\t\t\t\t\t\tonMessageResponse={onMessageResponse}\r\n\t\t\t\t\t\t\t\tsetBottomDiv={setBottomDiv}\r\n\t\t\t\t\t\t\t\totherUser={otherUser}\r\n\t\t\t\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<ChatInput\r\n\t\t\t\t\t\t\t\tchat={document}\r\n\t\t\t\t\t\t\t\tmessageResponse={messageResponse}\r\n\t\t\t\t\t\t\t\tonMessageResponse={onMessageResponse}\r\n\t\t\t\t\t\t\t\tbottomDiv={bottomDiv}\r\n\t\t\t\t\t\t\t\tinputRef={inputRef}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{showChatOptions && (\r\n\t\t\t\t\t\t<ChatOptions\r\n\t\t\t\t\t\t\tonMessageResponse={onMessageResponse}\r\n\t\t\t\t\t\t\totherUser={otherUser}\r\n\t\t\t\t\t\t\tchat={document}\r\n\t\t\t\t\t\t\tcurrentTheme={currentTheme}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</>\r\n\t)\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { projectAuth, projectFirestore, projectGitHub, projectGoogle } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useLogin = () => {\r\n\tconst [isCancelled, setIsCancelled] = useState(false)\r\n\tconst [error, setError] = useState(null)\r\n\tconst [isPending, setIsPending] = useState(false)\r\n\tconst { dispatch } = useAuthContext()\r\n\tconst [isFinished, setIsFinished] = useState(false)\r\n\r\n\tlet history = useHistory()\r\n\r\n\tconst login = async (email, password) => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\t// Login\r\n\t\t\tconst res = await projectAuth.signInWithEmailAndPassword(email, password)\r\n\r\n\t\t\t// Update online status\r\n\r\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).update({\r\n\t\t\t\tonline: true,\r\n\t\t\t})\r\n\r\n\t\t\t// Dispatch login action\r\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n\t\t\t// Update state\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst loginWithGoogle = async () => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\t// Login\r\n\t\t\tconst res = await projectAuth.signInWithPopup(projectGoogle)\r\n\r\n\t\t\t// Update online status\r\n\r\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).update({\r\n\t\t\t\tonline: true,\r\n\t\t\t})\r\n\r\n\t\t\t// Dispatch login action\r\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n\t\t\t// Update state\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst loginWithGithub = async () => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\t// Login\r\n\t\t\tconst res = await projectAuth.signInWithPopup(projectGitHub)\r\n\t\t\t// Update online status\r\n\r\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).update({\r\n\t\t\t\tonline: true,\r\n\t\t\t})\r\n\r\n\t\t\t// Dispatch login action\r\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n\t\t\t// Update state\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst sendPasswordReset = async email => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\t\tsetIsFinished(false)\r\n\r\n\t\ttry {\r\n\t\t\tawait projectAuth.sendPasswordResetEmail(email)\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t\tsetIsFinished(true)\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\thistory.push('/login')\r\n\t\t\t\t}, 15000)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetIsFinished(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst resetPassword = async (code, newPassword) => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\t\tsetIsFinished(false)\r\n\r\n\t\ttry {\r\n\t\t\tawait projectAuth.confirmPasswordReset(code, newPassword)\r\n\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t\tsetIsFinished(true)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetIsFinished(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => setIsCancelled(true)\r\n\t}, [])\r\n\r\n\treturn { login, loginWithGoogle, loginWithGithub, sendPasswordReset, resetPassword, isPending, error, isFinished }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/btn_google_dark_normal_ios.9fe90a17.svg\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII=\"","import { useState } from 'react'\r\nimport { useLogin } from '../../hooks/useLogin'\r\nimport { Link } from 'react-router-dom'\r\n\r\n// Styles & assets\r\nimport './Login.scss'\r\nimport googleLogo from '../../assets/btn_google_dark_normal_ios.svg'\r\nimport githubLogo from '../../assets/GitHub-Mark-Light-32px.png'\r\n\r\nexport default function Login() {\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n\tconst { login, loginWithGoogle, loginWithGithub, isPending, error } = useLogin()\r\n\r\n\tconst handleSubmit = e => {\r\n\t\te.preventDefault()\r\n\t\tlogin(email, password)\r\n\t}\r\n\tconst handleSubmitWithGoogle = e => {\r\n\t\te.preventDefault()\r\n\t\tloginWithGoogle()\r\n\t}\r\n\tconst handleSubmitWithGithub = e => {\r\n\t\te.preventDefault()\r\n\t\tloginWithGithub()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='login'>\r\n\t\t\t<div className='auth-decoration'>\r\n\t\t\t\t<div className='circle'></div>\r\n\t\t\t\t<div className='blur'></div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<form className='auth-form' onSubmit={handleSubmit}>\r\n\t\t\t\t<div className='auth-form__title'>\r\n\t\t\t\t\t<h2>Welcome back</h2>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<span>Email</span>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\tplaceholder='Enter your email'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<span>Password</span>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tonChange={e => setPassword(e.target.value)}\r\n\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\tplaceholder='Enter your password'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label>\r\n\t\t\t\t<Link to={'/recover-password'} className='reset-password'>\r\n\t\t\t\t\tForgot password?\r\n\t\t\t\t</Link>\r\n\r\n\t\t\t\t{!isPending && <button className='btn'>Login</button>}\r\n\t\t\t\t{isPending && (\r\n\t\t\t\t\t<button className='btn' disabled>\r\n\t\t\t\t\t\tLoading\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<div className='others-separator'>\r\n\t\t\t\t\t<span>or</span>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<button className='google-btn' onClick={handleSubmitWithGoogle}>\r\n\t\t\t\t\t<img src={googleLogo} alt='google logo' />\r\n\t\t\t\t\t<span>Sign in with google</span>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button className='github-btn' onClick={handleSubmitWithGithub}>\r\n\t\t\t\t\t<img src={githubLogo} alt='github logo' />\r\n\t\t\t\t\t<span>Sign in with GitHub</span>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<p className='change-page'>\r\n\t\t\t\t\tDon't have an account? <Link to='/signup'>Sign up</Link>\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useState } from 'react'\r\nimport { useSignup } from '../../hooks/useSignup'\r\nimport { Link } from 'react-router-dom'\r\n\r\n// Styles\r\nimport './Signup.scss'\r\nimport googleLogo from '../../assets/btn_google_dark_normal_ios.svg'\r\nimport githubLogo from '../../assets/GitHub-Mark-Light-32px.png'\r\n\r\nexport default function Signup() {\r\n\tconst [email, setEmail] = useState('')\r\n\tconst [password, setPassword] = useState('')\r\n\tconst [displayName, setDisplayName] = useState('')\r\n\tconst [thumbnail, setThumbnail] = useState(null)\r\n\tconst [thumbnailError, setThumbnailError] = useState(null)\r\n\tconst { signup, signInWithGoogle, signInWithGithub, isPending, error } = useSignup()\r\n\r\n\tconst handleSubmit = e => {\r\n\t\te.preventDefault()\r\n\t\tsignup(email, password, displayName, thumbnail)\r\n\t}\r\n\r\n\tconst handleSubmitWithGoogle = e => {\r\n\t\te.preventDefault()\r\n\t\tsignInWithGoogle()\r\n\t}\r\n\r\n\tconst handleSubmitWithGithub = e => {\r\n\t\te.preventDefault()\r\n\t\tsignInWithGithub()\r\n\t}\r\n\r\n\tconst handleFileChange = e => {\r\n\t\tsetThumbnail(null)\r\n\t\tlet selected = e.target.files[0]\r\n\r\n\t\tif (!selected) {\r\n\t\t\tsetThumbnailError('Please select a file')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (!selected.type.includes('image')) {\r\n\t\t\tsetThumbnailError('Selected file must be an image')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (!selected.size > 100000) {\r\n\t\t\tsetThumbnailError('Image file size must be less than 100kb')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tsetThumbnailError(null)\r\n\t\tsetThumbnail(selected)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='signup'>\r\n\t\t\t<div className='auth-decoration'>\r\n\t\t\t\t<div className='circle'></div>\r\n\t\t\t\t<div className='blur'></div>\r\n\t\t\t</div>\r\n\t\t\t<form className='auth-form' onSubmit={handleSubmit}>\r\n\t\t\t\t<div className='auth-form__title'>\r\n\t\t\t\t\t<h2>Join us</h2>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<span>Email:</span>\r\n\t\t\t\t\t<input type='email' required onChange={e => setEmail(e.target.value)} value={email} placeholder='Aa' />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<span>Password:</span>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tonChange={e => setPassword(e.target.value)}\r\n\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\tplaceholder='Aa'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<span>Display name:</span>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tonChange={e => setDisplayName(e.target.value)}\r\n\t\t\t\t\t\tvalue={displayName}\r\n\t\t\t\t\t\tplaceholder='Aa'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<span>Profile thumbnail:</span>\r\n\t\t\t\t\t<input type='file' required onChange={handleFileChange} />\r\n\r\n\t\t\t\t\t{thumbnailError && <div className='error'>{thumbnailError}</div>}\r\n\t\t\t\t</label>\r\n\r\n\t\t\t\t{!isPending && <button className='btn'>Sign up</button>}\r\n\t\t\t\t{isPending && (\r\n\t\t\t\t\t<button className='btn' disabled>\r\n\t\t\t\t\t\tLoading\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<div className='others-separator'>\r\n\t\t\t\t\t<span>or</span>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<button className='google-btn' onClick={handleSubmitWithGoogle}>\r\n\t\t\t\t\t<img src={googleLogo} alt='google logo' />\r\n\t\t\t\t\t<span>Sign in with google</span>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<button className='github-btn' onClick={handleSubmitWithGithub}>\r\n\t\t\t\t\t<img src={githubLogo} alt='github logo' />\r\n\t\t\t\t\t<span>Sign in with GitHub</span>\r\n\t\t\t\t</button>\r\n\r\n\t\t\t\t<p className='change-page'>\r\n\t\t\t\t\tAlready have an account? <Link to='/login'>Login</Link>\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport { projectAuth, projectFirestore, projectStorage, projectGoogle, projectGitHub } from '../firebase/config'\r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useSignup = () => {\r\n\tconst [isCancelled, setIsCancelled] = useState(false)\r\n\tconst [error, setError] = useState(null)\r\n\tconst [isPending, setIsPending] = useState(false)\r\n\tconst { dispatch } = useAuthContext()\r\n\r\n\tconst signup = async (email, password, displayName, thumbnail) => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\t// Signup\r\n\t\t\tconst res = await projectAuth.createUserWithEmailAndPassword(email, password)\r\n\r\n\t\t\tif (!res) {\r\n\t\t\t\tthrow new Error('Could not complete signup')\r\n\t\t\t}\r\n\r\n\t\t\t// Upload thumbnail\r\n\r\n\t\t\tconst uploadPath = `thumbnails/${res.user.uid}/${thumbnail.name}`\r\n\t\t\tconst img = await projectStorage.ref(uploadPath).put(thumbnail)\r\n\t\t\tconst imgUrl = await img.ref.getDownloadURL()\r\n\r\n\t\t\t// Add display name to user\r\n\t\t\tawait res.user.updateProfile({ displayName, photoURL: imgUrl })\r\n\r\n\t\t\t// Create a user document\r\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).set({\r\n\t\t\t\tonline: true,\r\n\t\t\t\tdisplayName: displayName,\r\n\t\t\t\tphotoURL: imgUrl,\r\n\t\t\t})\r\n\r\n\t\t\t// Dispatch login action\r\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst signInWithGoogle = async () => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\t// Signup\r\n\t\t\tconst res = await projectAuth.signInWithPopup(projectGoogle)\r\n\r\n\t\t\tif (!res) {\r\n\t\t\t\tthrow new Error('Could not complete signup')\r\n\t\t\t}\r\n\r\n\t\t\t// Add display name to user\r\n\t\t\tawait res.user.updateProfile({ displayName: res.user.displayName, photoURL: res.user.photoURL })\r\n\r\n\t\t\t// Create a user document\r\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).set({\r\n\t\t\t\tonline: true,\r\n\t\t\t\tdisplayName: res.user.displayName,\r\n\t\t\t\tphotoURL: res.user.photoURL,\r\n\t\t\t})\r\n\r\n\t\t\t// Dispatch login action\r\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst signInWithGithub = async () => {\r\n\t\tsetError(null)\r\n\t\tsetIsPending(true)\r\n\r\n\t\ttry {\r\n\t\t\t// Signup\r\n\t\t\tconst res = await projectAuth.signInWithPopup(projectGitHub)\r\n\r\n\t\t\tif (!res) {\r\n\t\t\t\tthrow new Error('Could not complete signup')\r\n\t\t\t}\r\n\r\n\t\t\t// Add display name to user\r\n\t\t\tawait res.user.updateProfile({ displayName: res.additionalUserInfo.username, photoURL: res.user.photoURL })\r\n\r\n\t\t\t// Create a user document\r\n\t\t\tawait projectFirestore.collection('users').doc(res.user.uid).set({\r\n\t\t\t\tonline: true,\r\n\t\t\t\tdisplayName: res.user.displayName,\r\n\t\t\t\tphotoURL: res.user.photoURL,\r\n\t\t\t})\r\n\r\n\t\t\t// Dispatch login action\r\n\t\t\tdispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t\tsetError(null)\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tif (!isCancelled) {\r\n\t\t\t\tsetError(err.message)\r\n\t\t\t\tsetIsPending(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => setIsCancelled(true)\r\n\t}, [])\r\n\r\n\treturn { signup, signInWithGoogle, signInWithGithub, error, isPending }\r\n}\r\n","import React from 'react'\r\n\r\nexport default function PrivacyPolicy() {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div class='privacy-section'>\r\n\t\t\t\t<h3>Zbieranie danych</h3>\r\n\t\t\t\t<p>Kiedy zbieramy Twoje dane? Twj email oraz haso zapisywane s podczas rejestracji na naszej stronie.</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class='privacy-section'>\r\n\t\t\t\t<h3>Cele przetwarzania danych</h3>\r\n\r\n\t\t\t\t<p>\r\n\t\t\t\t\tTwoje dane zebrane podczas rejestracji przetwarzane s jedynie w celu umoliwienia korzystania ze strony. Nie\r\n\t\t\t\t\tudostpniamy ich nikomu, nie sprzedajemy ich. Rejestracja jest dobrowolna.\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t<div class='privacy-section'>\r\n\t\t\t\t<h3>Bezpieczestwo danych</h3>\r\n\r\n\t\t\t\t<p>\r\n\t\t\t\t\tTwoje dane s automatycznie szyfrowane przez usug firebase od google. Nikt nieautoryzowany nie ma dostpu do\r\n\t\t\t\t\ttwoich danych.\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t<div class='privacy-section'>\r\n\t\t\t\t<h3>Usuwanie danych</h3>\r\n\r\n\t\t\t\t<p>\r\n\t\t\t\t\tJeli zrezygnujesz z uywania naszej aplikacji w kadym momencie moesz do nas napisa na maila \"matkowsky808@gmail\" lub wykorzysta funkcj w ustawieniach, aby usun konto oraz swoje dane.\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class='privacy-section'>\r\n\t\t\t\t<h3>Pozostae informacje</h3>\r\n\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<span>W razie jakichkolwiek pyta, prosimy o kontakt na adresie mailowym: matkowsky808@gmail.com</span>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/shrek-gif.df094210.gif\";","import { useEffect, useState } from 'react'\r\nimport { useLogin } from '../../hooks/useLogin'\r\nimport { Link } from 'react-router-dom'\r\n\r\n// Styles & assets\r\nimport '../login/Login.scss'\r\nimport ShrekGif from '../../assets/shrek-gif.gif'\r\n\r\nexport default function ResetPassword() {\r\n\tconst [email, setEmail] = useState('')\r\n\tconst { sendPasswordReset, isPending, error, isFinished } = useLogin()\r\n\tconst [timeToRedirect, setTimeToRedirect] = useState(15)\r\n\r\n\tconst handlePasswordReset = e => {\r\n\t\te.preventDefault()\r\n\t\tsendPasswordReset(email)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isFinished === true) {\r\n\t\t\tcountdown()\r\n\t\t}\r\n\t}, [isFinished])\r\n\tconst countdown = () => {\r\n\t\tlet redirectCountdown = setInterval(() => {\r\n\t\t\tif (timeToRedirect <= 0) {\r\n\t\t\t\tclearInterval(redirectCountdown)\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeToRedirect(prevTimeToRedirect => prevTimeToRedirect - 1)\r\n\t\t\t}\r\n\t\t}, 1000)\r\n\t}\r\n\r\n\tconst handleKey = e => {\r\n\t\te.code === 'Enter' && handlePasswordReset(e)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='login'>\r\n\t\t\t<div className='auth-decoration'>\r\n\t\t\t\t<div className='circle'></div>\r\n\t\t\t\t<div className='blur'></div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='auth-form'>\r\n\t\t\t\t{isFinished && (\r\n\t\t\t\t\t<div className='text-center email-sent'>\r\n\t\t\t\t\t\t<img src={ShrekGif} alt='' className='email-sent__img' />\r\n\t\t\t\t\t\t<h2>Check your email</h2>\r\n\t\t\t\t\t\t<p>A password reset email has been sent to your email address</p>\r\n\r\n\t\t\t\t\t\t<Link to='/login'>\r\n\t\t\t\t\t\t\t<button className='btn'>Back to Login</button>\r\n\t\t\t\t\t\t</Link>\r\n\r\n\t\t\t\t\t\t<p className='redirect'>Redirecting in {timeToRedirect} s</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{!isFinished && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div className='auth-form__title'>\r\n\t\t\t\t\t\t\t<h2>Forgot password?</h2>\r\n\t\t\t\t\t\t\t<p>Enter your email below to recieve password reset instructions</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<span>Email</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='email'\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tonChange={e => setEmail(e.target.value)}\r\n\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\tplaceholder='Enter your email'\r\n\t\t\t\t\t\t\t\tonKeyDown={e => handleKey(e)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t{!isPending && (\r\n\t\t\t\t\t\t\t<button className='btn' onClick={handlePasswordReset}>\r\n\t\t\t\t\t\t\t\tSend reset link\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{isPending && (\r\n\t\t\t\t\t\t\t<button className='btn' disabled>\r\n\t\t\t\t\t\t\t\tSending email...\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<p className='change-page'>\r\n\t\t\t\t\t\t\tNo longer have Alzheimer? <Link to='/login'>Login</Link>\r\n\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useState } from 'react'\r\nimport { useLogin } from '../../hooks/useLogin'\r\nimport { Link } from 'react-router-dom'\r\nimport { useQuery } from '../../hooks/useQuery'\r\n\r\n// Styles & assets\r\nimport '../login/Login.scss'\r\nimport ShrekGif from '../../assets/shrek-gif.gif'\r\n\r\nexport default function SetNewPassword() {\r\n\tconst { resetPassword, isPending, error, isFinished } = useLogin()\r\n\r\n\tconst [newPassword, setNewPassword] = useState('')\r\n\r\n\tconst oobCode = useQuery('oobCode')\r\n\r\n\tconst handleSubmit = async e => {\r\n\t\te.preventDefault()\r\n\t\tresetPassword(oobCode, newPassword)\r\n\t}\r\n\r\n\tconst handleKey = e => {\r\n\t\te.code === 'Enter' && handleSubmit(e)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='login'>\r\n\t\t\t<div className='auth-decoration'>\r\n\t\t\t\t<div className='circle'></div>\r\n\t\t\t\t<div className='blur'></div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<form className='auth-form' onSubmit={e => handleSubmit(e)}>\r\n\t\t\t\t{isFinished && (\r\n\t\t\t\t\t<div className='text-center email-sent'>\r\n\t\t\t\t\t\t<img src={ShrekGif} alt='' className='email-sent__img' />\r\n\t\t\t\t\t\t<h2>Password set successfully</h2>\r\n\t\t\t\t\t\t<p>You can now log in with your new password</p>\r\n\r\n\t\t\t\t\t\t<Link to='/login'>\r\n\t\t\t\t\t\t\t<button className='btn'>Back to Login</button>\r\n\t\t\t\t\t\t</Link>\r\n\r\n\t\t\t\t\t\t<p className='change-page'>\r\n\t\t\t\t\t\t\tNow log in and remember your password. <Link to='/login'> Login</Link>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{!isFinished && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div className='auth-form__title'>\r\n\t\t\t\t\t\t\t<h2>Set a new password</h2>\r\n\t\t\t\t\t\t\t<p>Enter a password that you will remember this time...</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<span>Password</span>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tonChange={e => setNewPassword(e.target.value)}\r\n\t\t\t\t\t\t\t\tvalue={newPassword}\r\n\t\t\t\t\t\t\t\tplaceholder='Enter new password'\r\n\t\t\t\t\t\t\t\tonKeyDown={e => handleKey(e)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\r\n\t\t\t\t\t\t{!isPending && <button className='btn'>Reset password</button>}\r\n\t\t\t\t\t\t{isPending && (\r\n\t\t\t\t\t\t\t<button className='btn' disabled>\r\n\t\t\t\t\t\t\t\tSetting new password...\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<p className='change-page'>\r\n\t\t\t\t\t\t\t<Link to='/login'> Login</Link> instead?\r\n\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t{error && <div className='error'>{error}</div>}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useLocation } from 'react-router-dom'\r\n\r\nexport const useQuery = queryName => {\r\n\tconst location = useLocation()\r\n\tconst query = new URLSearchParams(location.search).get(queryName)\r\n\treturn query\r\n}\r\n","import {  NavLink } from 'react-router-dom'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useCollection } from '../../hooks/useCollection'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\nimport formatDistanceToNowStrict from 'date-fns/formatDistanceToNow'\r\n\r\n// Styles && Assets\r\nimport './ChatsList.scss'\r\nimport Avatar from '../Avatar/Avatar'\r\n\r\nexport default function ChatsList({ chats, currentChat, inputRef }) {\r\n\tconst { user } = useAuthContext()\r\n\tconst { documents: users } = useCollection('users')\r\n\tconst { updateDocument } = useFirestore('projects')\r\n\r\n\tlet onlineUsers = []\r\n\tlet rightUrl = ''\r\n\tlet rightDisplayName = ''\r\n\tlet rightId = ''\r\n\r\n\tconst replaceDistanceToNow = {\r\n\t\tabout: '',\r\n\t\tminute: 'min',\r\n\t\tminutes: 'min',\r\n\r\n\t\t'less than a minute': '1 min',\r\n\t}\r\n\r\n\tconst handleOnMouseMove = e => {\r\n\t\tfor (const card of document.getElementsByClassName('card')) {\r\n\t\t\tconst rect = card.getBoundingClientRect(),\r\n\t\t\t\tx = e.clientX - rect.left,\r\n\t\t\t\ty = e.clientY - rect.top\r\n\r\n\t\t\tcard.style.setProperty('--mouse-x', `${x}px`)\r\n\t\t\tcard.style.setProperty('--mouse-y', `${y}px`)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSeen = () => {\r\n\t\tif (inputRef.current !== null) {\r\n\t\t\tinputRef.current.focus()\r\n\t\t}\r\n\t\tif (\r\n\t\t\tcurrentChat &&\r\n\t\t\tcurrentChat.messages[currentChat.messages.length - 1] &&\r\n\t\t\tcurrentChat.messages[currentChat.messages.length - 1].createdBy !== user.uid\r\n\t\t) {\r\n\t\t\tupdateDocument(currentChat.id, {\r\n\t\t\t\tisRead: true,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='chat-list custom-scrollbar' onMouseMove={handleOnMouseMove}>\r\n\t\t\t{chats.length === 0 && <p>No chats yet!</p>}\r\n\t\t\t{chats.map(chat => (\r\n\t\t\t\t<NavLink\r\n\t\t\t\t\tto={`/u/${chat.id}`}\r\n\t\t\t\t\tkey={chat.id}\r\n\t\t\t\t\tclassName={`card ${\r\n\t\t\t\t\t\tchat.messages &&\r\n\t\t\t\t\t\tchat.messages[chat.messages.length - 1] &&\r\n\t\t\t\t\t\t!chat.isRead &&\r\n\t\t\t\t\t\tchat.messages[chat.messages.length - 1].createdBy !== user.uid\r\n\t\t\t\t\t\t\t? 'unread'\r\n\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t}`}\r\n\t\t\t\t\tonClick={() => handleSeen()}>\r\n\t\t\t\t\t<div className='card__content'>\r\n\t\t\t\t\t\t{chat.assignedUsers.forEach(u => {\r\n\t\t\t\t\t\t\tif (u.id !== user.uid) {\r\n\t\t\t\t\t\t\t\trightId = u.id\r\n\t\t\t\t\t\t\t\trightUrl = u.photoURL\r\n\t\t\t\t\t\t\t\trightDisplayName = u.nickname\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t{users &&\r\n\t\t\t\t\t\t\tusers.forEach(user => {\r\n\t\t\t\t\t\t\t\tif (user.online && !onlineUsers.includes(user.id)) {\r\n\t\t\t\t\t\t\t\t\tonlineUsers.push(user.id)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t\t<div className='avatar-container'>\r\n\t\t\t\t\t\t\t<Avatar src={rightUrl} />\r\n\r\n\t\t\t\t\t\t\t{onlineUsers.includes(rightId) && (\r\n\t\t\t\t\t\t\t\t<span className='online-user'>\r\n\t\t\t\t\t\t\t\t\t<div className='status-circle'></div>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{/* {console.log(chat.messages[chat.messages.length - 1].createdAt.toDate().getTime())}\r\n\t\t\t\t\t{console.log(chat)} */}\r\n\t\t\t\t\t\t<div className='chat-info'>\r\n\t\t\t\t\t\t\t<p className='display-name'>\r\n\t\t\t\t\t\t\t\t{rightDisplayName.substring(0, 18)}\r\n\t\t\t\t\t\t\t\t<span>{rightDisplayName.length >= 18 && '...'}</span>\r\n\t\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t\t<div className='last-chat'>\r\n\t\t\t\t\t\t\t\t<span className='last-message'>\r\n\t\t\t\t\t\t\t\t\t{chat &&\r\n\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1] &&\r\n\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].createdBy === user.uid &&\r\n\t\t\t\t\t\t\t\t\t\t'You: '}\r\n\r\n\t\t\t\t\t\t\t\t\t{chat.messages.length !== 0 &&\r\n\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].content &&\r\n\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].fileType === undefined &&\r\n\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].content.substring(0, 15)}\r\n\r\n\t\t\t\t\t\t\t\t\t{chat.messages.length !== 0 &&\r\n\t\t\t\t\t\t\t\t\t\t!chat.messages[chat.messages.length - 1].content &&\r\n\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].fileType === 'image' &&\r\n\t\t\t\t\t\t\t\t\t\t`sent a photo`}\r\n\r\n\t\t\t\t\t\t\t\t\t{chat.messages.length !== 0 &&\r\n\t\t\t\t\t\t\t\t\t\t!chat.messages[chat.messages.length - 1].content &&\r\n\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].fileType === 'video' &&\r\n\t\t\t\t\t\t\t\t\t\t`sent a video`}\r\n\r\n\t\t\t\t\t\t\t\t\t{chat.messages.length !== 0 &&\r\n\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].content &&\r\n\t\t\t\t\t\t\t\t\t\tchat.messages[chat.messages.length - 1].content.length >= 15 &&\r\n\t\t\t\t\t\t\t\t\t\t'...'}\r\n\t\t\t\t\t\t\t\t\t{/* {console.log(chat.messages[chat.messages.length - 1].fileType !== undefined)} */}\r\n\t\t\t\t\t\t\t\t\t{chat.messages.length === 0 && 'No messages yet'}\r\n\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t\t{chat.messages.length !== 0 && <div className='dot'></div>}\r\n\t\t\t\t\t\t\t\t<span className='comment-date'>\r\n\t\t\t\t\t\t\t\t\t{chat.messages.length !== 0 &&\r\n\t\t\t\t\t\t\t\t\t\tformatDistanceToNowStrict(chat.messages[chat.messages.length - 1].createdAt.toDate(), {\r\n\t\t\t\t\t\t\t\t\t\t\taddSuffix: false,\r\n\t\t\t\t\t\t\t\t\t\t}).replace(/\\b(?:about|less than a minute)\\b/gi, matched => replaceDistanceToNow[matched])}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</NavLink>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport { setDoc, doc, getDoc } from 'firebase/firestore'\r\nimport { projectFirestore, timestamp } from '../../firebase/config'\r\nimport { useCollection } from '../../hooks/useCollection'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useLogout } from '../../hooks/useLogout'\r\n\r\n// Compontents\r\nimport ChatsList from './ChatsList'\r\n\r\n// Styles\r\nimport './Chats.scss'\r\nimport Avatar from '../Avatar/Avatar'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function Chats({ currentChat, inputRef }) {\r\n\tconst { user } = useAuthContext()\r\n\tconst { logout, isPending } = useLogout()\r\n\tconst { documents: users } = useCollection('users')\r\n\tconst { documents: chats } = useCollection(\r\n\t\t'projects',\r\n\t\t['assignedUsersId', 'array-contains', user.uid],\r\n\t\t['updatedAt', 'desc']\r\n\t)\r\n\r\n\tconst [query, setQuery] = useState('')\r\n\r\n\tconst eyes = useRef([])\r\n\r\n\tuseEffect(() => {\r\n\t\tconst handleMouseMove = event => {\r\n\t\t\teyes.current.forEach(eye => {\r\n\t\t\t\tlet x = eye.getBoundingClientRect().left + eye.clientWidth / 2\r\n\t\t\t\tlet y = eye.getBoundingClientRect().top + eye.clientHeight / 2\r\n\r\n\t\t\t\tlet radian = Math.atan2(event.pageX - x, event.pageY - y)\r\n\t\t\t\tlet rotation = radian * (180 / Math.PI) * -1\r\n\r\n\t\t\t\teye.style.transform = `rotate(${rotation}deg)`\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('mousemove', handleMouseMove)\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('mousemove', handleMouseMove)\r\n\t\t}\r\n\t}, [])\r\n\r\n\tconst handleSelect = async addUser => {\r\n\t\t// // Check whether the group(chats in firestore) exists, if not create\r\n\t\t// const combinedId = user.uid > addUser.id ? user.uid + addUser.id : addUser.id + user.uid\r\n\t\t// try {\r\n\t\t// \tconst res = await getDoc(doc(projectFirestore, 'projects', combinedId))\r\n\t\t// \tif (!res.exists() && user.uid !== addUser.id) {\r\n\t\t// \t\t// Create a chat in chats collection\r\n\t\t// \t\tawait setDoc(doc(projectFirestore, 'projects', combinedId), {\r\n\t\t// \t\t\tid: combinedId,\r\n\t\t// \t\t\tassignedUsers: [\r\n\t\t// \t\t\t\t{\r\n\t\t// \t\t\t\t\tid: user.uid,\r\n\t\t// \t\t\t\t\tdisplayName: user.displayName,\r\n\t\t// \t\t\t\t\tnickname: user.displayName,\r\n\t\t// \t\t\t\t\tphotoURL: user.photoURL,\r\n\t\t// \t\t\t\t},\r\n\t\t// \t\t\t\t{\r\n\t\t// \t\t\t\t\tid: addUser.id,\r\n\t\t// \t\t\t\t\tdisplayName: addUser.displayName,\r\n\t\t// \t\t\t\t\tnickname: addUser.displayName,\r\n\t\t// \t\t\t\t\tphotoURL: addUser.photoURL,\r\n\t\t// \t\t\t\t},\r\n\t\t// \t\t\t],\r\n\t\t// \t\t\tassignedUsersId: [user.uid, addUser.id],\r\n\t\t// \t\t\tchatEmoji: '1f44d',\r\n\t\t// \t\t\tmessages: [],\r\n\t\t// \t\t\tupdatedAt: timestamp.fromDate(new Date()),\r\n\t\t// \t\t\tcreatedAt: timestamp.fromDate(new Date()),\r\n\t\t// \t\t\tcustomThemes: [],\r\n\t\t// \t\t})\r\n\t\t// \t}\r\n\t\t// } catch (err) {}\r\n\t\t// setQuery('')\r\n\t}\r\n\r\n\tconst filterChats = chat => {\r\n\t\tlet result = false\r\n\t\t// chat.displayName.toLowerCase().trim().replace(/\\s+/g, '').includes(query.toLowerCase())\r\n\r\n\t\tchat.assignedUsers.forEach(u => {\r\n\t\t\tif (u.id !== user.uid) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tu.displayName.toLowerCase().trim().replace(/\\s+/g, '').includes(query.toLowerCase()) ||\r\n\t\t\t\t\tu.nickname.toLowerCase().trim().replace(/\\s+/g, '').includes(query.toLowerCase())\r\n\t\t\t\t) {\r\n\t\t\t\t\tresult = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\treturn result\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='user-list'>\r\n\t\t\t{/* <div className=\"blur\"></div> */}\r\n\t\t\t<div className='search'>\r\n\t\t\t\t<h2>Chats</h2>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className='search-form'>\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<i className='fa-solid fa-magnifying-glass'></i>\r\n\t\t\t\t\t\t\t<input type='text' placeholder='Find a user' onChange={e => setQuery(e.target.value)} value={query} />\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{query !== '' && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<div className='add-users'>\r\n\t\t\t\t\t\t\t\t{chats &&\r\n\t\t\t\t\t\t\t\t\tchats\r\n\t\t\t\t\t\t\t\t\t\t.filter(chat => filterChats(chat))\r\n\t\t\t\t\t\t\t\t\t\t.map(chat =>\r\n\t\t\t\t\t\t\t\t\t\t\tchat.assignedUsers.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\tu =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tu.id !== user.uid && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to={chat.id} key={u.id} className='user-chat' onClick={() => setQuery('')}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src={u.photoURL} alt='' />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='user-chat-info'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{u.displayName}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div className='chats'>\r\n\t\t\t\t\t\t{query === '' && chats && <ChatsList chats={chats} currentChat={currentChat} inputRef={inputRef} />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='user'>\r\n\t\t\t\t<div className='character'>\r\n\t\t\t\t\t<div className='character__eyes'>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName='eye'\r\n\t\t\t\t\t\t\tref={e => {\r\n\t\t\t\t\t\t\t\teyes.current[0] = e\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<div className='pupil'></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName='eye'\r\n\t\t\t\t\t\t\tref={e => {\r\n\t\t\t\t\t\t\t\teyes.current[1] = e\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<div className='pupil'></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='flex-row'>\r\n\t\t\t\t\t<Avatar src={user.photoURL} />\r\n\t\t\t\t\t<span>{user.displayName}</span>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{!isPending && user && (\r\n\t\t\t\t\t<button className='btn ' onClick={logout}>\r\n\t\t\t\t\t\t{/* <i className='fa-solid fa-right-from-bracket'></i> */}\r\n\t\t\t\t\t\t<i className='fa-solid fa-gear'></i>\r\n\t\t\t\t\t\t{/* <span> Log out </span> */}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{isPending && (\r\n\t\t\t\t\t<button className='btn' disabled>\r\n\t\t\t\t\t\t{/* <i class='fa-solid fa-right-from-bracket'></i> */}\r\n\t\t\t\t\t\t<span>...</span>\r\n\t\t\t\t\t\t{/* <span> Logging out...</span> */}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n","import { useEffect, useState } from 'react'\nimport { projectAuth, projectFirestore } from '../firebase/config'\nimport { useAuthContext } from './useAuthContext'\n\nexport const useLogout = () => {\n\tconst [isCancelled, setIsCancelled] = useState(false)\n\tconst [error, setError] = useState(null)\n\tconst [isPending, setIsPending] = useState(false)\n\tconst { dispatch, user } = useAuthContext()\n\n\tconst logout = async () => {\n\t\tsetError(null)\n\t\tsetIsPending(true)\n\n\t\ttry {\n\t\t\t// Update online status\n\t\t\tconst { uid } = user\n\t\t\tawait projectFirestore.collection('users').doc(uid).update({\n\t\t\t\tonline: false,\n\t\t\t})\n\n\t\t\t// Sign the user out\n\t\t\tawait projectAuth.signOut()\n\n\t\t\t// Dispatch logout action\n\t\t\tdispatch({ type: 'LOGOUT' })\n\n\t\t\t// Update state\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetIsPending(false)\n\t\t\t\tsetError(null)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (!isCancelled) {\n\t\t\t\tsetError(err.message)\n\t\t\t\tsetIsPending(false)\n\t\t\t}\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\treturn () => setIsCancelled(true)\n\t}, [])\n\n\treturn { logout, error, isPending }\n}\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { Link, NavLink, useHistory } from 'react-router-dom'\r\nimport { useAuthContext } from '../../hooks/useAuthContext'\r\nimport { useCollection } from '../../hooks/useCollection'\r\nimport { useFirestore } from '../../hooks/useFirestore'\r\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd'\r\n\r\n// Components\r\nimport Avatar from '../Avatar/Avatar'\r\n\r\n// Styles\r\nimport './ToolBar.scss'\r\nimport Modal from '../Modal/Modal'\r\nimport { useDocument } from '../../hooks/useDocument'\r\n\r\nconst ToolBar = () => {\r\n\tconst history = useHistory()\r\n\r\n\tconst { user } = useAuthContext()\r\n\tconst { documents: chats } = useCollection(\r\n\t\t'projects',\r\n\t\t['assignedUsersId', 'array-contains', user.uid],\r\n\t\t['updatedAt', 'desc']\r\n\t)\r\n\tconst { updateDocument } = useFirestore('users')\r\n\tconst { document: userDoc } = useDocument('users', user.uid)\r\n\r\n\tconst [latestChat, setLatestChat] = useState()\r\n\tconst [currentPath, setCurrentPath] = useState('')\r\n\tconst [favs, setFavs] = useState([])\r\n\tconst [showFavs, setShowFavs] = useState(false)\r\n\tconst [searchValue, setSearchValue] = useState('')\r\n\tconst [favsCopy, setFavsCopy] = useState(favs)\r\n\tconst [chatsCopy, setChatsCopy] = useState(chats)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (chats && chats !== null && chats.length !== 0) {\r\n\t\t\tif (userDoc && userDoc.pinned) {\r\n\t\t\t\tsetFavs(userDoc.pinned)\r\n\t\t\t} else {\r\n\t\t\t\tsetFavs([null, null, null, null])\r\n\t\t\t}\r\n\r\n\t\t\tsetChatsCopy(chats)\r\n\t\t\tsetLatestChat(chats[0])\r\n\t\t} else {\r\n\t\t\tsetLatestChat('')\r\n\t\t}\r\n\t}, [chats])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetCurrentPath(window.location.pathname)\r\n\t\treturn history.listen(location => {\r\n\t\t\tsetCurrentPath(location.pathname)\r\n\t\t})\r\n\t}, [history])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (userDoc && userDoc.pinned !== null) {\r\n\t\t\tsetFavs(userDoc.pinned)\r\n\t\t}\r\n\t}, [userDoc])\r\n\r\n\tconst handleOnDragEnd = async result => {\r\n\t\tif (!result.destination) return\r\n\t\tconst items = Array.from(favs)\r\n\t\tconst [reorderedItem] = items.splice(result.source.index, 1)\r\n\t\titems.splice(result.destination.index, 0, reorderedItem)\r\n\r\n\t\tsetFavs(items)\r\n\t\tawait updateDocument(user.uid, {\r\n\t\t\tpinned: items,\r\n\t\t})\r\n\t}\r\n\r\n\tconst handleOnDragEndCopy = result => {\r\n\t\tif (!result.destination) return\r\n\r\n\t\tif (result.source.droppableId === result.destination.droppableId && result.source.droppableId === 'manage-favs') {\r\n\t\t\tconst items = Array.from(favsCopy)\r\n\t\t\tconst [reorderedItem] = items.splice(result.source.index, 1)\r\n\t\t\titems.splice(result.destination.index, 0, reorderedItem)\r\n\t\t\tsetFavsCopy(items)\r\n\t\t}\r\n\r\n\t\tif (result.destination.droppableId === 'empty-slots') {\r\n\t\t\tconst favs = Array.from(favsCopy)\r\n\t\t\tconst items = Array.from(chats.filter(chat => !filterChats(chat)))\r\n\r\n\t\t\tconst chatToAdd = items[result.source.index]\r\n\t\t\tlet userToAdd\r\n\t\t\tlet index\r\n\r\n\t\t\tif (!chatToAdd.isGroup) {\r\n\t\t\t\tchatToAdd.assignedUsers.forEach(u => {\r\n\t\t\t\t\tif (u.id !== user.uid) {\r\n\t\t\t\t\t\tuserToAdd = {\r\n\t\t\t\t\t\t\tid: chatToAdd.id,\r\n\t\t\t\t\t\t\tdisplayName: u.displayName,\r\n\t\t\t\t\t\t\tthumb: u.photoURL,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tfavs.forEach(item => {\r\n\t\t\t\tif (item === null) {\r\n\t\t\t\t\tindex = favsCopy.indexOf(item)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tfavs.splice(index, 1, userToAdd)\r\n\r\n\t\t\tsetFavsCopy(favs)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleRemoveFav = fav => {\r\n\t\tconst items = Array.from(favsCopy)\r\n\t\t// const [reorderedItem] = items.splice(favs.indexOf(fav), 1)\r\n\t\titems.splice(favsCopy.indexOf(fav), 1)\r\n\t\titems.push(null)\r\n\r\n\t\tsetFavsCopy(items)\r\n\t}\r\n\r\n\tconst filterChats = chat => {\r\n\t\tlet result = false\r\n\t\tfavsCopy.forEach(fav => {\r\n\t\t\tif (fav !== null) {\r\n\t\t\t\tif (fav.id === chat.id) {\r\n\t\t\t\t\tresult = true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn result\r\n\t}\r\n\r\n\tconst addFav = chat => {\r\n\t\tconst items = Array.from(favsCopy)\r\n\t\tlet index\r\n\t\tlet userToAdd\r\n\r\n\t\tif (!chat.isGroup) {\r\n\t\t\tchat.assignedUsers.forEach(u => {\r\n\t\t\t\tif (u.id !== user.uid) {\r\n\t\t\t\t\tuserToAdd = {\r\n\t\t\t\t\t\tid: chat.id,\r\n\t\t\t\t\t\tdisplayName: u.displayName,\r\n\t\t\t\t\t\tthumb: u.photoURL,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\titems.forEach(item => {\r\n\t\t\tif (item === null) {\r\n\t\t\t\tindex = favsCopy.indexOf(item)\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\titems.splice(index, 1, userToAdd)\r\n\t\tsetFavsCopy(items)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='tool-bar'>\r\n\t\t\t<nav className='tool-bar__pages'>\r\n\t\t\t\t<NavLink to={`/u/${latestChat && latestChat.id}`} className={currentPath.includes('/u/') ? 'active' : ''}>\r\n\t\t\t\t\t<i className='fa-solid fa-comment'></i>\r\n\t\t\t\t</NavLink>\r\n\t\t\t\t<NavLink to='/' exact>\r\n\t\t\t\t\t<i className='fa-solid fa-house'></i>\r\n\t\t\t\t</NavLink>\r\n\t\t\t\t<NavLink to='/friends'>\r\n\t\t\t\t\t<i className='fa-solid fa-address-book'></i>\r\n\t\t\t\t</NavLink>\r\n\t\t\t</nav>\r\n\r\n\t\t\t<div className='separator-no-text'></div>\r\n\r\n\t\t\t<DragDropContext onDragEnd={handleOnDragEnd}>\r\n\t\t\t\t<Droppable droppableId='favourites'>\r\n\t\t\t\t\t{provided => (\r\n\t\t\t\t\t\t<div className='tool-bar__favourites' {...provided.droppableProps} ref={provided.innerRef}>\r\n\t\t\t\t\t\t\t{favs &&\r\n\t\t\t\t\t\t\t\tfavs.map(\r\n\t\t\t\t\t\t\t\t\t(f, index) =>\r\n\t\t\t\t\t\t\t\t\t\tf !== null && (\r\n\t\t\t\t\t\t\t\t\t\t\t<Draggable key={f.id} draggableId={f.id} index={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{provided => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/u/${f.id}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdraggable='true'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={f.thumb} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName='add-favourite'\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetShowFavs(true)\r\n\t\t\t\t\t\t\t\t\tsetFavsCopy(favs)\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<i className='fa-regular fa-star'></i>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Droppable>\r\n\t\t\t</DragDropContext>\r\n\r\n\t\t\t<div className='separator-no-text'></div>\r\n\r\n\t\t\t<Modal show={showFavs} setShow={() => setShowFavs(false)}>\r\n\t\t\t\t<div className='manage-favs'>\r\n\t\t\t\t\t<DragDropContext onDragEnd={handleOnDragEndCopy}>\r\n\t\t\t\t\t\t<Droppable droppableId='manage-favs' direction='horizontal' type='manage-favs'>\r\n\t\t\t\t\t\t\t{provided => (\r\n\t\t\t\t\t\t\t\t<div className='manage-favs__current-favs' {...provided.droppableProps} ref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t{favsCopy &&\r\n\t\t\t\t\t\t\t\t\t\tfavsCopy.map(\r\n\t\t\t\t\t\t\t\t\t\t\t(f, index) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tf !== null && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Draggable key={f.id} draggableId={f.id} index={index} type='FAVS-LIST'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{provided => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fav'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.dragHandleProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdraggable='true'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={f.thumb} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='fav__remove'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleRemoveFav(f)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='fa-solid fa-xmark'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t{provided.placeholder}\r\n\r\n\t\t\t\t\t\t\t\t\t{favsCopy.includes(null) && (\r\n\t\t\t\t\t\t\t\t\t\t<Droppable droppableId='empty-slots' direction='horizontal'>\r\n\t\t\t\t\t\t\t\t\t\t\t{provided => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className='flex-row' {...provided.droppableProps} ref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{favsCopy.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(f, index) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tf === null && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='fav fav--empty' key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i className='fa-regular fa-star'></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</Droppable>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Droppable>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tplaceholder='Find a user'\r\n\t\t\t\t\t\t\t\tvalue={searchValue}\r\n\t\t\t\t\t\t\t\tonChange={e => setSearchValue(e.target.value)}\r\n\t\t\t\t\t\t\t\tclassName='mb1'\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Droppable droppableId='chats-list' isDropDisabled={true}>\r\n\t\t\t\t\t\t\t\t{provided => (\r\n\t\t\t\t\t\t\t\t\t<ul\r\n\t\t\t\t\t\t\t\t\t\tclassName='manage-favs__chats-list custom-scrollbar'\r\n\t\t\t\t\t\t\t\t\t\t{...provided.droppableProps}\r\n\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t\t{chats &&\r\n\t\t\t\t\t\t\t\t\t\t\tchats\r\n\t\t\t\t\t\t\t\t\t\t\t\t.filter(chat => !filterChats(chat))\r\n\t\t\t\t\t\t\t\t\t\t\t\t.map((chat, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment key={chat.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Code for groups */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* {chat.isGroup &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchat.groupName\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.trim()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.replace(/\\s+/g, '')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.includes(searchValue.toLowerCase()) && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li key={chat.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={chat.photoURL} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{chat.displayName}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)} */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!chat.isGroup &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchat.assignedUsers.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tu =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tu.id !== user.uid &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tu.displayName\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.trim()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.replace(/\\s+/g, '')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.includes(searchValue.toLowerCase()) && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Draggable key={u.id} draggableId={u.id} index={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(provided, snapshot) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={chat.id}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`${snapshot.isDragging ? 'dragged' : ''} ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsnapshot.draggingOver === 'empty-slots' ? 'hover-over-slot' : ''\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => addFav(chat)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: '10px !important' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided.draggableProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='flex-row'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!snapshot.isDragging && <Avatar src={u.photoURL} />}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!snapshot.isDragging && <p>{u.displayName}</p>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className='handle' {...provided.dragHandleProps}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{!snapshot.isDragging && <i className='fa-solid fa-grip-vertical'></i>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{snapshot.isDragging && <Avatar src={u.photoURL} />}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Droppable>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</DragDropContext>\r\n\r\n\t\t\t\t\t<div className='btn-group'>\r\n\t\t\t\t\t\t<div className='btn btn--secondary' onClick={() => setShowFavs(false)}>\r\n\t\t\t\t\t\t\tcancel\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName='btn'\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tupdateDocument(user.uid, {\r\n\t\t\t\t\t\t\t\t\tpinned: favsCopy,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tsetShowFavs(false)\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tfinish\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</Modal>\r\n\r\n\t\t\t<div className='tool-bar__profile-menu'>\r\n\t\t\t\t{/* <Link to='/profile-menu'> */}\r\n\t\t\t\t<Avatar src={user.photoURL} />\r\n\t\t\t\t{/* </Link> */}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ToolBar\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom'\r\nimport { useAuthContext } from './hooks/useAuthContext'\r\nimport { GlobalStyles } from './theme/GlobalStyles'\r\nimport styled, { ThemeProvider } from 'styled-components'\r\nimport { useCollection } from './hooks/useCollection'\r\n\r\n// Styles\r\nimport './App.scss'\r\n\r\n// Components && Pages\r\nimport Dashboard from './pages/dashboard/Dashboard'\r\nimport Chat from './pages/chat/Chat'\r\nimport Login from './pages/login/Login'\r\nimport Signup from './pages/signup/Signup'\r\nimport PrivacyPolicy from './pages/privacyPolicy/privacyPolicy'\r\nimport ResetPassword from './pages/resetPassword/ResetPassword'\r\nimport SetNewPassword from './pages/resetPassword/SetNewPassword'\r\nimport Chats from './components/Chats/Chats'\r\nimport ToolBar from './components/ToolBar/ToolBar'\r\n\r\nfunction App() {\r\n\tconst inputRef = useRef(null)\r\n\r\n\tconst { user, authIsReady } = useAuthContext()\r\n\tconst { documents: themes } = useCollection('themes')\r\n\r\n\tconst [currentChat, setCurrentChat] = useState(null)\r\n\tconst [theme, setTheme] = useState(themes)\r\n\r\n\tconst filterTheme = themeToSet => {\r\n\t\tlet filteredTheme\r\n\r\n\t\tif (themeToSet.isCustom === true) {\r\n\t\t\tif (currentChat.customThemes) {\r\n\t\t\t\tcurrentChat.customThemes.forEach(theme => {\r\n\t\t\t\t\tif (theme.id === themeToSet.name) filteredTheme = theme\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (themes) {\r\n\t\t\t\tthemes.forEach(theme => {\r\n\t\t\t\t\tif (theme.id === themeToSet.name) filteredTheme = theme\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn filteredTheme\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (currentChat) {\r\n\t\t\tcurrentChat.theme\r\n\t\t\t\t? setTheme(filterTheme(currentChat.theme))\r\n\t\t\t\t: setTheme(filterTheme({ name: 'frosty', isCustom: false }))\r\n\t\t} else if (themes) {\r\n\t\t\tsetTheme(filterTheme({ name: 'frosty', isCustom: false }))\r\n\t\t}\r\n\t}, [themes, currentChat])\r\n\r\n\treturn (\r\n\t\tauthIsReady &&\r\n\t\ttheme && (\r\n\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t<GlobalStyles />\r\n\t\t\t\t<div className='App'>\r\n\t\t\t\t\t<BrowserRouter>\r\n\t\t\t\t\t\t{user && <ToolBar />}\r\n\t\t\t\t\t\t{user && <Chats currentChat={currentChat} inputRef={inputRef} />}\r\n\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t<Route exact path='/'>\r\n\t\t\t\t\t\t\t\t{!user && <Redirect to='/login' />}\r\n\t\t\t\t\t\t\t\t{user && <Dashboard />}\r\n\t\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t\t<Route path='/u/:id'>\r\n\t\t\t\t\t\t\t\t{!user && <Redirect to='/login' />}\r\n\t\t\t\t\t\t\t\t{user && <Chat setCurrentChat={setCurrentChat} inputRef={inputRef} currentTheme={theme} />}\r\n\t\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t\t<Route path='/privacy-policy'>\r\n\t\t\t\t\t\t\t\t<PrivacyPolicy />\r\n\t\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t\t<Route path='/recover-password'>\r\n\t\t\t\t\t\t\t\t<ResetPassword />\r\n\t\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t\t<Route path='/login'>\r\n\t\t\t\t\t\t\t\t{user && <Redirect to='/' />}\r\n\t\t\t\t\t\t\t\t{!user && <Login />}\r\n\t\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t\t<Route path='/signup'>\r\n\t\t\t\t\t\t\t\t{user && <Redirect to='/' />}\r\n\t\t\t\t\t\t\t\t{!user && <Signup />}\r\n\t\t\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t\t\t<Route path='/set-new-password'>\r\n\t\t\t\t\t\t\t\t<SetNewPassword />\r\n\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</BrowserRouter>\r\n\t\t\t\t</div>\r\n\t\t\t</ThemeProvider>\r\n\t\t)\r\n\t)\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\nimport { AuthContextProvider } from './context/AuthContext'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<AuthContextProvider>\n\t\t\t<App />\n\t\t</AuthContextProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n)\n\t"],"sourceRoot":""}